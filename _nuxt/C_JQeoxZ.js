import{_ as fa}from"./whLXWoxw.js";import{Z as we,al as ze,a8 as K,e as p,w as F,a9 as ye,aO as oe,ak as Le,aa as N,ac as De,$ as ha,a0 as ba,a4 as ka,ai as T,aV as ya,aW as _a,t as J,b9 as kt,d as P,o as Ge,a6 as yt,r as j,c as lt,a5 as ie,h as y,g,be as Xe,f as M,aL as Ke,b2 as ke,n as de,aR as ge,bh as xa,ao as wa,aB as Sa,y as Ca,aC as Na,aD as $a,F as Se,at as Te,aT as At,_ as Ae,bc as Ue,br as jt,aG as Ta,bH as W,bI as La,bJ as Aa,bb as It,bK as Ea,bL as Va,T as Re,b4 as Pa,b5 as Ba,X as Fa,b8 as Ra,bM as Gt,b7 as Kt,bN as za,aZ as Da,au as Ma}from"./UbyS27mO.js";import{_ as Ua}from"./CH1pbf9Q.js";import{_ as We}from"./5sO7O9qH.js";import{_ as ja}from"./CQF4jjNC.js";import{c as He,g as Ia,d as Ga,e as Wt,b as Ka}from"./DrhnBRa9.js";import{u as it,_ as Wa}from"./DCnj4tuz.js";import{_ as Oa}from"./6qxzA7pL.js";import{_ as qa,a as Ha}from"./DphEMvEY.js";import{_ as ut}from"./4YesM2A3.js";import{_ as Ot}from"./BrYPZFWM.js";import{_ as qt}from"./fupx1AWB.js";import{u as Ee}from"./BRMLCtwJ.js";import{P as ne,c as Ce,i as _t,t as Et,s as vt,m as Xa,X as Ht,O as Xt,a as Yt,b as Zt,g as Ne,d as ft,e as Ya,f as Ye,h as Za,j as Vt,k as Fe,l as Ie,n as Ja,r as Qa,o as ht,p as eo,q as to,u as Pt,F as ao,v as oo,w as so,x as no,y as xt,z as wt,A as ro,B as lo,S as io,C as Bt}from"./BQI27DJ9.js";import"./CJqSbvhY.js";import"./DP2qqny6.js";import"./DMbfTNoZ.js";import"./CW2Hczut.js";import"./qZIbaol9.js";import"./DgK0_XRV.js";import"./DmqA0raX.js";import"./CTKqJMZU.js";import"./Cjds_Ovm.js";import"./DVlZmiiW.js";import"./CV4Hssdo.js";import"./iik6CYzq.js";import"./DE0y4qI0.js";import"./BstbYvQo.js";import"./Cpj98o6Y.js";var uo=we({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r;return ze(),(e,n)=>(p(),K(N(De),Le(t,{"data-type":"ellipsis"}),{default:F(()=>[ye(e.$slots,"default",{},()=>[n[0]||(n[0]=oe("…"))])]),_:3},16))}}),co=uo;const[Oe,go]=ha("PaginationRoot");var po=we({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(r,{emit:t}){const e=r,n=t,{siblingCount:o,disabled:s,showEdges:i}=ba(e);ze();const d=ka(e,"page",n,{defaultValue:e.defaultPage,passive:e.page===void 0}),l=T(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return go({page:d,onPageChange(m){d.value=m},pageCount:l,siblingCount:o,disabled:s,showEdges:i}),(m,E)=>(p(),K(N(De),{as:m.as,"as-child":m.asChild},{default:F(()=>[ye(m.$slots,"default",{page:N(d),pageCount:l.value})]),_:3},8,["as","as-child"]))}}),mo=po,vo=we({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r,e=Oe();ze();const n=T(()=>e.page.value===1||e.disabled.value);return(o,s)=>(p(),K(N(De),Le(t,{"aria-label":"First Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&N(e).onPageChange(1))}),{default:F(()=>[ye(o.$slots,"default",{},()=>[s[1]||(s[1]=oe("First page"))])]),_:3},16,["type","disabled"]))}}),fo=vo,ho=we({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r,e=Oe();ze();const n=T(()=>e.page.value===e.pageCount.value||e.disabled.value);return(o,s)=>(p(),K(N(De),Le(t,{"aria-label":"Last Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&N(e).onPageChange(N(e).pageCount.value))}),{default:F(()=>[ye(o.$slots,"default",{},()=>[s[1]||(s[1]=oe("Last page"))])]),_:3},16,["type","disabled"]))}}),bo=ho;function Be(r,t){const e=t-r+1;return Array.from({length:e},(n,o)=>o+r)}function ko(r){return r.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const at="ellipsis";function yo(r,t,e,n){const s=t,i=Math.max(r-e,1),d=Math.min(r+e,s);if(n){const m=Math.min(2*e+5,t)-2,E=i>3&&Math.abs(s-m-1+1)>2&&Math.abs(i-1)>2,C=d<s-2&&Math.abs(s-m)>2&&Math.abs(s-d)>2;if(!E&&C)return[...Be(1,m),at,s];if(E&&!C){const _=Be(s-m+1,s);return[1,at,..._]}if(E&&C){const _=Be(i,d);return[1,at,..._,at,s]}return Be(1,s)}else{const l=e*2+1;return t<l?Be(1,s):r<=e+1?Be(1,l):t-r<=e?Be(t-l+1,s):Be(i,d)}}var _o=we({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r;ze();const e=Oe(),n=T(()=>ko(yo(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(o,s)=>(p(),K(N(De),ya(_a(t)),{default:F(()=>[ye(o.$slots,"default",{items:n.value})]),_:3},16))}}),xo=_o,wo=we({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;ze();const e=Oe(),n=T(()=>e.page.value===t.value),o=T(()=>e.disabled.value);return(s,i)=>(p(),K(N(De),Le(t,{"data-type":"page","aria-label":`Page ${s.value}`,"aria-current":n.value?"page":void 0,"data-selected":n.value?"true":void 0,disabled:o.value,type:s.as==="button"?"button":void 0,onClick:i[0]||(i[0]=d=>!o.value&&N(e).onPageChange(s.value))}),{default:F(()=>[ye(s.$slots,"default",{},()=>[oe(J(s.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),So=wo,Co=we({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;ze();const e=Oe(),n=T(()=>e.page.value===e.pageCount.value||e.disabled.value);return(o,s)=>(p(),K(N(De),Le(t,{"aria-label":"Next Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&N(e).onPageChange(N(e).page.value+1))}),{default:F(()=>[ye(o.$slots,"default",{},()=>[s[1]||(s[1]=oe("Next page"))])]),_:3},16,["type","disabled"]))}}),No=Co,$o=we({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;ze();const e=Oe(),n=T(()=>e.page.value===1||e.disabled.value);return(o,s)=>(p(),K(N(De),Le(t,{"aria-label":"Previous Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&N(e).onPageChange(N(e).page.value-1))}),{default:F(()=>[ye(o.$slots,"default",{},()=>[s[1]||(s[1]=oe("Prev page"))])]),_:3},16,["type","disabled"]))}}),To=$o;function Lo(r){let t;for(;t=r.sourceEvent;)r=t;return r}function rt(r,t){if(r=Lo(r),t===void 0&&(t=r.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=r.clientX,n.y=r.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[r.clientX-o.left-t.clientLeft,r.clientY-o.top-t.clientTop]}}return[r.pageX,r.pageY]}const Ft=r=>+r,Ao={components:[],container:void 0,followCursor:!0,allowHover:!1,horizontalPlacement:ne.Auto,horizontalShift:0,verticalPlacement:ne.Top,verticalShift:0,attributes:{},triggers:{},className:void 0,showDelay:void 0,hideDelay:void 0},ct=Ce`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  opacity: 0;
  transition: opacity;
  transition-duration: var(--vis-tooltip-transition-duration);
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  color: var(--vis-tooltip-text-color);
  border-radius: var(--vis-tooltip-border-radius);
  box-shadow: var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,Eo=ct,Vo=_t`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;
    --vis-tooltip-border-radius: 5px;
    --vis-tooltip-transition-duration: 300ms;
    --vis-tooltip-box-shadow: none;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${ct}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,Jt=Ce`
  bottom: unset;
  position: fixed;
`,ot=Ce`
  opacity: 1;
`,st=Ce`
  display: none;
`,Qt=Ce`
  label: non-interactive;
  pointer-events: none;
  user-select: none;
`,Po=Object.freeze(Object.defineProperty({__proto__:null,hidden:st,nonInteractive:Qt,positionFixed:Jt,root:ct,show:ot,tooltip:Eo,variables:Vo},Symbol.toStringTag,{value:"Module"}));class ea{constructor(t={}){this._defaultConfig=Ao,this.config=this._defaultConfig,this._setUpEventsThrottled=Et(this._setUpEvents,500),this._setContainerPositionThrottled=Et(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement("div"),this.div=vt(this.element).attr("class",ct).classed(ot,!1).classed(st,!0),this.setConfig(t),this.components=this.config.components,this._mutationObserver=new MutationObserver(()=>{this._isShown&&(!this.config.followCursor&&this._hoveredElement?this.placeByElement(this._hoveredElement):this._position&&this.place({x:this._position[0],y:this._position[1]}))}),this._mutationObserver.observe(this.div.node(),{childList:!0,subtree:!0})}setConfig(t){var e;this.prevConfig=this.config,this.config=Xa(this._defaultConfig,t),this.prevConfig.horizontalPlacement!==this.config.horizontalPlacement&&this.overrideHorizontalPlacement(void 0),this.config.container&&this.config.container!==((e=this.prevConfig)===null||e===void 0?void 0:e.container)&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(t){var e;(e=this.element.parentNode)===null||e===void 0||e.removeChild(this.element),this._container=t,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(t){this.components=t}update(){this._container&&this._setUpEventsThrottled()}show(t,e){this.render(t),this.place(e)}_hide(){this.div.classed(ot,!1).on("transitionend",()=>{this.div.classed(st,!this._isShown)}),this._isShown=!1}hide(){window.clearTimeout(this._showDelayTimeoutId),this.config.hideDelay?(window.clearTimeout(this._hideDelayTimeoutId),this._hideDelayTimeoutId=setTimeout(()=>this._hide(),this.config.hideDelay)):this._hide()}_display(){window.clearTimeout(this._hideDelayTimeoutId),this.div.classed(st,!1).classed(ot,!0),this._isShown=!0}display(){this._isShown||(this.config.showDelay?(window.clearTimeout(this._showDelayTimeoutId),this._showDelayTimeoutId=setTimeout(()=>{this._display(),this.place({x:this._position[0],y:this._position[1]})},this.config.showDelay)):this._display())}place(t){if(this._position=[t.x,t.y],!this.hasContainer()){console.warn("Unovis | Tooltip: Container was not set or is not initialized yet");return}const{config:e}=this,n=this.element.offsetWidth,o=this.element.offsetHeight,s=this._overriddenHorizontalPlacement||(e.horizontalPlacement===ne.Auto?ne.Center:e.horizontalPlacement),i=e.verticalPlacement===ne.Auto?t.y-o<0?ne.Bottom:ne.Top:e.verticalPlacement,d=5,l=s===ne.Left?-n-d-e.horizontalShift:s===ne.Center?-n/2:d+e.horizontalShift,m=i===ne.Bottom?d+e.verticalShift:i===ne.Center?-o/2:-d-e.verticalShift-o,[E,C]=this._constraintPosToContainer(t.x+l,t.y+m,n,o);this._applyPosition(E,C,o)}placeByElement(t){const{config:e}=this;this._hoveredElement=t;const n=5,o=this.element.offsetWidth,s=this.element.offsetHeight,i=this.isContainerBody(),d=i?window.innerWidth:this._container.scrollWidth,l=t.getBoundingClientRect(),m=i?[l.x,l.y]:rt({clientX:l.x,clientY:l.y,pageX:l.x,pageY:l.y},this._container),E=this._overriddenHorizontalPlacement||(e.horizontalPlacement===ne.Auto?m[0]-o<0?ne.Right:m[0]+o>d?ne.Left:ne.Center:e.horizontalPlacement);let C=0;switch(E){case ne.Left:C=-o-n-e.horizontalShift;break;case ne.Right:C=l.width+n+e.horizontalShift;break;case ne.Center:default:C=(-o+l.width)/2;break}const b=e.verticalPlacement===ne.Auto?E!==ne.Center?ne.Center:m[1]-s<0?ne.Bottom:ne.Top:e.verticalPlacement;let _=-s;switch(b){case ne.Center:_+=(s+l.height)/2;break;case ne.Bottom:_+=s+l.height+n+e.verticalShift;break;case ne.Top:default:_+=-n-e.verticalShift;break}const[k,w]=this._constraintPosToContainer(m[0]+C,m[1]+_,o,s);this._applyPosition(k,w,s)}isContainerBody(){return this._container===document.body}overrideHorizontalPlacement(t){this._overriddenHorizontalPlacement=t}render(t){var e;const{config:n,prevConfig:o}=this;t instanceof HTMLElement?this.div.select(":first-child").node()!==t&&this.div.html("").append(()=>t):t&&this.div.html(t),this.div.classed((e=n.className)!==null&&e!==void 0?e:"",!!n.className).classed(Qt,!n.allowHover),o?.className&&o.className!==n.className&&this.div.classed(o.className,!1),this.display()}_applyPosition(t,e,n){const o=this.isContainerBody(),s=o?window.innerHeight:this._container.scrollHeight;this.div.classed(Jt,o).style("top",o?`${e}px`:"unset").style("bottom",o?"unset":`${s-e-n}px`).style("left",`${t}px`)}_constraintPosToContainer(t,e,n,o){const s=this.isContainerBody(),i=s?window.innerHeight:this._container.scrollHeight,d=s?window.innerWidth:this._container.scrollWidth,l=10,m=t>d-n-l,E=t<l,C=m?d-n-l:E?l:t,b=10,_=e>i-o-b,k=e<b,w=_?i-o-b:k?b:e;return[d<n?0:C,i<o?0:w]}_setContainerPosition(){var t;this._container!==document.body&&((t=getComputedStyle(this._container))===null||t===void 0?void 0:t.position)==="static"&&(this._container.style.position="relative")}_setUpEvents(){const{config:t}=this;this.components.forEach(e=>{const n=vt(e.element);n.on("mousemove.tooltip",o=>{const{config:s}=this,i=o.composedPath&&o.composedPath()||o.path||[o.target];for(const d of Object.keys(s.triggers)){const l=s.triggers[d];if(!l)continue;const m=n.selectAll(`.${d}`).nodes();for(const E of i){if(E===n.node())break;if(E.classList.contains(d)){const C=m.indexOf(E),b=vt(E).datum(),_=l(b,C,m),[k,w]=this.isContainerBody()?[o.clientX,o.clientY]:rt(o,this._container);_===null?this.hide():(this.render(_),s.followCursor?this.place({x:k,y:w}):this.placeByElement(E)),o.stopPropagation();return}}}this._isShown&&this.hide()}).on("mouseleave.tooltip",o=>{o.stopPropagation(),this.hide()})}),t.allowHover?this.div.on("mouseenter.tooltip",this._display.bind(this)).on("mouseleave.tooltip",this.hide.bind(this)):this.div.on("mouseenter.tooltip",null).on("mouseleave.tooltip",null)}_setUpAttributes(){const t=this.config.attributes;t&&Object.keys(t).forEach(e=>{this.div.attr(e,t[e])})}destroy(){var t;this._mutationObserver.disconnect(),window.clearTimeout(this._hideDelayTimeoutId),window.clearTimeout(this._showDelayTimeoutId),(t=this.div)===null||t===void 0||t.remove()}}ea.selectors=Po;const Bo=Object.assign(Object.assign({},Ht),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:Xt.Vertical}),ta=Ce`
  label: stacked-bar-component;
`,Fo=_t`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${ta}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,nt=Ce`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,bt=Ce`
  label: barGroup;
`,aa=Ce`
  label: barGroupExit;
`,Ro=Object.freeze(Object.defineProperty({__proto__:null,bar:nt,barGroup:bt,barGroupExit:aa,globalStyles:Fo,root:ta},Symbol.toStringTag,{value:"Module"}));class St extends Yt{constructor(t){super(),this._defaultConfig=Bo,this.config=this._defaultConfig,this.getAccessors=()=>Zt(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],t&&this.setConfig(t)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const t=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],e=this.dataScale.domain(),n=this._getBarWidth()/2,o=this._barData.map((_,k)=>Ne(_,this.config.x,k)),s=ft(o),i=Ya(o),d=this.dataScale(s),l=this.dataScale(i),m=this.dataScale.invert(d+(t?n:-n)),E=this.dataScale.invert(l+(t?-n:n)),C=m<=e[0]?this.dataScale(e[0])-this.dataScale(m):0,b=E>e[1]?this.dataScale(E)-this.dataScale(e[1]):0;return{top:this.isVertical()?0:t?-b:C,bottom:this.isVertical()?0:t?-C:b,left:this.isVertical()?C:0,right:this.isVertical()?b:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===Xt.Vertical}_render(t){const{config:e}=this,n=Ye(t)?t:e.duration,o=this.getAccessors(),s=Za(this._barData,0,o,this._prevNegative);this._prevNegative=s.map(k=>!!k.isMostlyNegative);const i=this.g.selectAll(`.${bt}`).data(this._barData,(k,w)=>{var A;return`${(A=Vt(k,e.id,w))!==null&&A!==void 0?A:w}`}),d=(k,w)=>{const A=this.dataScale(Ne(k,e.x,w)),h=this.isVertical()?A:0,R=this.isVertical()?0:A;return`translate(${h},${R})`},m=i.enter().append("g").attr("class",bt).attr("transform",d).style("opacity",1).merge(i);Fe(m,n).attr("transform",d).style("opacity",1);const E=i.exit().attr("class",aa);Fe(E,n).style("opacity",0).remove(),Fe(E.selectAll(`.${nt}`),n).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const C=m.selectAll(`.${nt}`).data((k,w)=>s.map((A,h)=>Object.assign(Object.assign({},k),{_index:w,_stacked:A[w],_ending:h===s.length-1||h<=s.length-1&&s[h+1][w][0]!==A[w][1]}))),_=C.enter().append("path").attr("class",nt).attr("d",(k,w)=>this._getBarPath(k,w,!0)).style("fill",(k,w)=>Ie(k,e.color,w)).merge(C);Fe(_,n).attr("d",(k,w)=>this._getBarPath(k,w)).style("fill",(k,w)=>Ie(k,e.color,w)).style("cursor",(k,w)=>Vt(k,e.cursor,w)),Fe(C.exit(),n).style("opacity",0).remove()}_getBarWidth(){const{config:t,datamodel:{data:e}}=this;if(Ja(e))return 0;if(t.barWidth)return ft([t.barWidth,t.barMaxWidth]);const n=this.dataScale.bandwidth,o=this.dataScale.domain?this.dataScale.domain():[];let i=1+(n?o.length:o[1]-o[0])/t.dataStep||!n&&e.filter((m,E)=>{const C=Ne(m,t.x,E);return C>=o[0]&&C<=o[1]}).length||e.length;!n&&i>=2&&(i+=1);const l=(i<2?1:1-t.barPadding)*(this.isVertical()?this._width:this._height)/i;return ft([l,t.barMaxWidth])}_getVisibleData(){const{config:t,datamodel:{data:e}}=this,n=this._getBarWidth(),o=e.length<2?0:n/2,s=this.dataScale,i=Math.abs(s.invert(o)-s.invert(0));return e?.filter((l,m)=>{const E=Ne(l,t.x,m),C=s.domain(),b=+C[0],_=+C[1];return E>=b-i&&E<=_+i})}_getBarPath(t,e,n=!1){const{config:o}=this,s=this.getAccessors(),i=this._getBarWidth(),d=t._stacked[1]<0,l=t._ending,m=Ne(t,s[e],t._index),E=n?0:Math.abs(this.valueScale(t._stacked[0])-this.valueScale(t._stacked[1])),C=!n&&o.barMinHeight1Px&&E<1&&isFinite(m)&&m!==o.barMinHeightZeroValue?1:E,b=n?this.valueScale(0):this.valueScale(d?t._stacked[0]:t._stacked[1])-(E<1&&o.barMinHeight1Px?1:0),_=-i/2,k=i,w=o.roundedCorners?Ye(o.roundedCorners)?+o.roundedCorners:k/2:0,A=ht(w,0,Math.min(E,k)/2),h=this.yScale.range()[0]>this.yScale.range()[1];return Qa({x:this.isVertical()?_:b-C,y:this.isVertical()?b+(h?0:-C):_,w:this.isVertical()?k:C,h:this.isVertical()?C:k,tl:l&&(this.isVertical()?!d&&h||d&&!h:d),tr:l&&(this.isVertical()?!d&&h||d&&!h:!d),br:l&&(this.isVertical()?d&&h||!d&&!h:!d),bl:l&&(this.isVertical()?d&&h||!d&&!h:d),r:A})}getValueScaleExtent(t){const{datamodel:e}=this,n=this.getAccessors(),o=t?this._getVisibleData():e.data;return eo(o,...n)}getDataScaleExtent(){const{config:t,datamodel:e}=this;return to(e.data,t.x)}getYDataExtent(t){return this.isVertical()?this.getValueScaleExtent(t):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}St.selectors=Ro;const zo=Object.assign(Object.assign({},Ht),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(r,t,e,n)=>"",hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0,onCrosshairMove:void 0,forceShowAt:void 0}),Do=_t`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,Mo=Ce`
  label: crosshair-component;
`,oa=Ce`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,sa=Ce`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`,Uo=Object.freeze(Object.defineProperty({__proto__:null,circle:sa,globalStyles:Do,line:oa,root:Mo},Symbol.toStringTag,{value:"Module"}));class na extends Yt{constructor(t){super(),this.clippable=!0,this._defaultConfig=zo,this.config=this._defaultConfig,this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},t&&this.setConfig(t),this.g.style("opacity",0),this.line=this.g.append("line").attr("class",oa)}set accessors(t){this._accessors=t}get accessors(){var t;const{config:e}=this,n=!!(e.x||e.y||e.yStacked),o=n?e.x:this._accessors.x,s=n?e.y:this._accessors.y,i=s?Zt(s)?s:[s]:void 0,d=n?e.yStacked:this._accessors.yStacked,l=(t=e.baseline)!==null&&t!==void 0?t:this._accessors.baseline;return{x:o,y:i,yStacked:d,baseline:l}}_isContainerInViewport(){var t;if(!(!((t=this.container)===null||t===void 0)&&t.node()))return!1;const e=this.container.node().getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,s=Math.max(0,Math.min(e.right,n)-Math.max(e.left,0)),i=Math.max(0,Math.min(e.bottom,o)-Math.max(e.top,0)),d=e.width*e.height,l=s*i;return d>0&&l/d>=.35}setContainer(t){this.container!==t&&(this.container=t,this.container.on("mousemove.crosshair",this._onMouseMove.bind(this)),this.container.on("mouseout.crosshair",this._onMouseOut.bind(this)),this.container.on("wheel.crosshair",this._onWheel.bind(this)))}_render(t){var e,n,o,s,i;const{config:d,datamodel:l}=this,m=Ye(t)?t:d.duration,E=d.forceShowAt!==void 0,C=E?this.xScale(d.forceShowAt):this._xPx,b=this.xScale.invert(C),_=!((e=l.data)===null||e===void 0)&&e.length&&this.accessors.x?l.data.indexOf(Pt(l.data,b,this.accessors.x,ao.Left)):void 0;let k,w;d.snapToData&&(!this.accessors.y&&!this.accessors.yStacked&&(!((n=l.data)===null||n===void 0)&&n.length)&&console.warn("Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object"),!(!((o=l.data)===null||o===void 0)&&o.length)&&this._mouseEvent&&console.warn("Unovis | Crosshair: No data to snap to. Make sure the data has been passed to the container or to the crosshair itself"),k=Pt(l.data,b,this.accessors.x),w=l.data.indexOf(k));const A=this.xScale.range(),h=this.yScale.range(),R=d.snapToData&&k?ht(Math.round(this.xScale(Ne(k,this.accessors.x,w))),0,this._width):ht(C,A[0],A[1]),z=C>=A[0]&&C<=A[1],O=this._yPx>=h[1]&&this._yPx<=h[0];let I=this._xPx?z&&O:z;d.hideWhenFarFromPointer&&Math.abs(R-+C)>=d.hideWhenFarFromPointerDistance&&(I=!1);const Q=(s=d.tooltip)!==null&&s!==void 0?s:this.tooltip;if(I&&Q&&this._isContainerInViewport()){const S=Q.getContainer()||this.container.node(),v=Q.isContainerBody();if(E){const c=this.container.node().getBoundingClientRect(),f=(v?C+c.left:C)+this._containerMargin.left,G=this._height/2+(v?c.top:0),U=[f,G];this._showTooltip(k,b,U,_)}else if(this._mouseEvent){const c=v?[this._mouseEvent.clientX,this._mouseEvent.clientY]:rt(this._mouseEvent,S);this._showTooltip(k,b,c,_)}}else this._hideTooltip();if(this._mouseEvent&&((i=d.onCrosshairMove)===null||i===void 0||i.call(d,I?this.xScale.invert(this._xPx):void 0,k,w,this._mouseEvent),this._mouseEvent=void 0),Fe(this.g,m).style("opacity",I?1:0),!isFinite(C))return;this.line.attr("y1",0).attr("y2",this._height),Fe(this.line,m,Ft).attr("x1",R).attr("x2",R);const Y=oo(d.getCircles)?d.getCircles(b,l.data,this.yScale,_):this.getCircleData(k,w),pe=this.g.selectAll("circle").data(Y,(S,v)=>{var c;return(c=S.id)!==null&&c!==void 0?c:v}),me=pe.enter().append("circle").attr("class",sa).attr("r",0).attr("cx",R).attr("cy",S=>S.y).style("fill",S=>S.color).style("stroke",S=>S.strokeColor).style("stroke-width",S=>S.strokeWidth);Fe(me.merge(pe),m,Ft).attr("cx",R).attr("cy",S=>S.y).attr("r",4).style("opacity",S=>S.opacity).style("fill",S=>S.color).style("stroke",S=>S.strokeColor).style("stroke-width",S=>S.strokeWidth),pe.exit().remove()}hide(t){window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{var e,n;this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,(n=(e=this.config).onCrosshairMove)===null||n===void 0||n.call(e,void 0,void 0,void 0,t),this._render()})}_onMouseMove(t){var e;const{datamodel:n,element:o}=this;!this.accessors.x&&(!((e=n.data)===null||e===void 0)&&e.length)&&console.warn("Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object");const[s,i]=rt(t,o);this._xPx=s,this._yPx=i,this._mouseEvent=t,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()})}_onMouseOut(t){var e;(!t||!(!((e=this.container)===null||e===void 0)&&e.node().contains(t.relatedTarget)))&&this.hide(t)}_onWheel(t){this.hide(t)}_showTooltip(t,e,n,o){var s;const{config:i,datamodel:d}=this,l=(s=i.tooltip)!==null&&s!==void 0?s:this.tooltip;if(!l||!n)return;const[m,E]=n,C=i.template(t,e,d.data,o);if(l.config.followCursor=!0,!l.config.horizontalPlacement||l.config.horizontalPlacement===ne.Auto){const b=l.isContainerBody()?m-this.container.node().getBoundingClientRect().left:m;l.overrideHorizontalPlacement(b>this._containerWidth/2?ne.Left:ne.Right)}C&&l.show(C,{x:m,y:E})}_hideTooltip(){var t;const{config:e}=this,n=(t=e.tooltip)!==null&&t!==void 0?t:this.tooltip;n?.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(t,e){var n,o;const{config:s}=this;if(s.snapToData&&t){const i=(n=this.accessors.y)!==null&&n!==void 0?n:[],d=(o=this.accessors.yStacked)!==null&&o!==void 0?o:[],l=Ne(t,this.accessors.baseline,e)||0,m=so(t,e,...d).map((C,b)=>({y:this.yScale(C+l),opacity:Ye(Ne(t,d[b],b))?1:0,color:Ie(t,s.color,b),strokeColor:s.strokeColor?Ie(t,s.strokeColor,b):void 0,strokeWidth:s.strokeWidth?Ne(t,s.strokeWidth,b):void 0})),E=i.map((C,b)=>{const _=Ne(t,C,e);return{y:this.yScale(_),opacity:Ye(_)?1:0,color:Ie(t,s.color,m.length+b),strokeColor:s.strokeColor?Ie(t,s.strokeColor,b):void 0,strokeWidth:s.strokeWidth?Ne(t,s.strokeWidth,b):void 0}});return m.concat(E)}return[]}}na.selectors=Uo;const jo={"data-vis-crosshair":""},Io=we({__name:"index",props:{data:{}},setup(r,{expose:t}){const e=kt(no),n=r,o=T(()=>e.data.value??n.data),s=xt(n),i=j();return Ge(()=>{yt(()=>{var d;i.value=new na(s.value),(d=i.value)==null||d.setData(o.value),e.update(i.value)})}),lt(()=>{var d;(d=i.value)==null||d.destroy(),e.destroy()}),ie(s,(d,l)=>{var m;wt(d,l)||(m=i.value)==null||m.setConfig(s.value)}),ie(o,()=>{var d;(d=i.value)==null||d.setData(o.value)}),t({component:i}),(d,l)=>(p(),P("div",jo))}}),Go={"data-vis-component":""},Ko=we({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(r,{expose:t}){const e=kt(ro),n=r,o=T(()=>e.data.value??n.data),s=xt(n),i=j();return Ge(()=>{yt(()=>{var d;i.value=new St(s.value),(d=i.value)==null||d.setData(o.value),e.update(i.value)})}),lt(()=>{var d;(d=i.value)==null||d.destroy(),e.destroy()}),ie(s,(d,l)=>{var m;wt(d,l)||(m=i.value)==null||m.setConfig(s.value)}),ie(o,()=>{var d;(d=i.value)==null||d.setData(o.value)}),t({component:i}),(d,l)=>(p(),P("div",Go))}}),Wo={"data-vis-tooltip":""},Oo=we({__name:"index",props:{components:{},container:{},followCursor:{type:Boolean},allowHover:{type:Boolean},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},className:{},hideDelay:{},showDelay:{},data:{}},setup(r,{expose:t}){const e=kt(lo),n=xt(r),o=j();return Ge(()=>{yt(()=>{o.value=new ea(n.value),e.update(o.value)})}),lt(()=>{var s;(s=o.value)==null||s.destroy(),e.destroy()}),ie(n,(s,i)=>{var d;wt(s,i)||(d=o.value)==null||d.setConfig(n.value)}),t({component:o}),(s,i)=>(p(),P("div",Wo))}}),qo={class:"w-full relative overflow-visible"},Ho={key:0,class:"group overflow-hidden"},Xo=["src"],Yo={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},Zo={class:"flex"},Jo={key:1,class:"overflow-hidden relative group"},Qo=["src"],es={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},ts={class:"flex"},as={class:"px-5 pb-3 mt-4"},os={class:"text-2xl font-medium text-neutral-800"},ss={class:"text-neutral-500"},ns={class:"my-1"},rs={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},ls={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},is={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},us={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},cs={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},ds={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},gs={class:"mt-3 text-lg"},ps={class:"-mx-1 mt-4"},ms={key:0,class:"inline-flex m-1 h-fit align-bottom"},vs=["src"],fs={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},hs={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},bs={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},ks={class:"text-lg font-semibold mb-2 flex"},ys={key:0,class:"flex items-center space-x-2"},_s={size:"md",weight:"light"},xs={size:"md",weight:"light"},Rt=50,ws={__name:"SpeciesInfo",props:{species:Object},setup(r){const t=j(0),e=r,n=T(()=>e.species.images||[]);ie(n,()=>{t.value=0});const o=j(!1),s=j(!0),i=()=>{o.value=!o.value},d=T(()=>e.species.Kriteriedokumentation?o.value?e.species.Kriteriedokumentation:e.species.Kriteriedokumentation.slice(0,Rt)+"...":""),l=T(()=>e.species.ekologi?s.value?e.species.ekologi:e.species.ekologi.slice(0,Rt)+"...":""),m=A=>A?A.charAt(0).toUpperCase()+A.slice(1).toLowerCase():"",E=A=>A?A.replace("/detaljer","").replace("/artinformation",""):"",C=A=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[A]||"NE",b=A=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[A]||"bg-neutral-300",_=A=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[A]||"Ej bedömd",k=(A,h)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[A==="0"&&h?h:A]||"default-icon.webp"}`,w=T(()=>e.species["Svamp-grupp"]==="0"&&e.species["Svamp-grupp-släkte"]?e.species["Svamp-grupp-släkte"]:e.species["Svamp-grupp"]);return(A,h)=>{const R=fa,z=Xe,O=Ua,I=Ke,Q=ke,Y=We,pe=ge,me=xa;return p(),P("div",qo,[n.value.length>1?(p(),P("div",Ho,[g(R,{onSelect:h[0]||(h[0]=S=>t.value=S),items:n.value,ui:{item:"basis-full"}},{default:F(({item:S})=>[(p(),P("div",{class:"w-full relative",key:S},[y("img",{src:S,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,Xo)]))]),_:1},8,["items"]),y("div",Yo,[y("div",Zo,[g(z,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),h[1]||(h[1]=y("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),y("h1",null,J(t.value+1)+" av "+J(n.value.length),1)])])):n.value.length===1?(p(),P("div",Jo,[y("img",{src:n.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,Qo),y("div",es,[y("div",ts,[g(z,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),h[2]||(h[2]=y("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),y("h1",null,J(t.value+1)+" av "+J(n.value.length),1)])])):(p(),K(O,{key:2,class:"rounded-none"})),y("div",as,[y("h1",os,J(m(r.species.Commonname)),1),y("h1",ss,J(r.species.Scientificname),1),y("div",ns,[r.species["Rank matsvamp"]===3?(p(),P("div",rs,[g(I,{name:"codicon:circle-large-filled",class:"size-3"}),h[3]||(h[3]=oe(" Minst vanlig matsvamp ",-1))])):M("",!0),r.species["Rank matsvamp"]===2?(p(),P("div",ls,[g(I,{name:"codicon:color-mode",class:"size-3"}),h[4]||(h[4]=oe(" Mindre vanlig matsvamp ",-1))])):M("",!0),r.species["Rank giftsvamp"]===3?(p(),P("div",is,[g(I,{name:"codicon:circle-large-filled",class:"size-3"}),h[5]||(h[5]=oe(" Minst vanlig giftsvamp ",-1))])):M("",!0),r.species["Rank giftsvamp"]===2?(p(),P("div",us,[g(I,{name:"codicon:color-mode",class:"size-3"}),h[6]||(h[6]=oe(" Mindre vanlig giftsvamp ",-1))])):M("",!0),r.species.RankRed===3?(p(),P("div",cs,[g(I,{name:"codicon:circle-large-filled",class:"size-3"}),h[7]||(h[7]=oe(" Sällsynt naturvårdsart ",-1))])):M("",!0),r.species.RankRed===2?(p(),P("div",ds,[g(I,{name:"codicon:color-mode",class:"size-3"}),h[8]||(h[8]=oe(" Ovanlig naturvårdsart ",-1))])):M("",!0)]),y("h1",gs,J(l.value),1),y("div",ps,[r.species["Svamp-grupp"]?(p(),P("div",ms,[g(Q,{color:"neutral",variant:"subtle",size:"xl"},{default:F(()=>[y("img",{src:k(r.species["Svamp-grupp"],r.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,vs),oe(" "+J(m(w.value)),1)]),_:1})])):M("",!0),r.species["Nyasvamp-boken"]==="x"?(p(),P("div",fs,[g(Q,{color:"warning",size:"xl",variant:"subtle",class:""},{default:F(()=>[g(z,{name:"icon-park-solid:knife-fork"}),h[9]||(h[9]=oe("Matsvamp ",-1))]),_:1})])):M("",!0),r.species.Giftsvamp==="x"?(p(),P("div",hs,[g(Q,{color:"poison",size:"xl",variant:"subtle",class:""},{default:F(()=>[g(z,{name:"hugeicons:danger"}),h[10]||(h[10]=oe("Giftsvamp ",-1))]),_:1})])):M("",!0),r.species.SIGNAL_art==="S"?(p(),P("div",bs,[g(Q,{color:"signal",size:"xl",variant:"subtle",class:""},{default:F(()=>[...h[11]||(h[11]=[oe("Signalart",-1)])]),_:1})])):M("",!0),r.species.KALKmark?(p(),K(Q,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:F(()=>[...h[12]||(h[12]=[oe(" Kalkmark ",-1)])]),_:1})):M("",!0),r.species.ANNANmark?(p(),K(Q,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:F(()=>[...h[13]||(h[13]=[oe(" Vanlig skogsmark ",-1)])]),_:1})):M("",!0)]),r.species.Kriteriedokumentation?(p(),K(Y,{key:0,class:"my-4"},{default:F(()=>[y("div",{class:"flex justify-between cursor-pointer",onClick:i},[y("h1",ks,[r.species.RL2020kat?(p(),P("div",ys,[y("div",{class:de([b(r.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},J(C(r.species.RL2020kat)),3),y("h1",_s,J(_(r.species.RL2020kat)),1)])):M("",!0)]),g(z,{name:"mdi:chevron-down",class:de(["h-6 w-6 transition-transform duration-300 ease-in-out",o.value?"rotate-180":"rotate-0"])},null,8,["class"])]),r.species.Kriteriedokumentation?(p(),P("div",{key:0,class:de(["relative overflow-hidden transition-transform duration-300 ease-in-out",[o.value?"max-h-auto":"max-h-20"]]),onClick:i},[y("h1",xs,J(d.value),1)],2)):M("",!0)]),_:1})):M("",!0),h[14]||(h[14]=y("h1",{class:"text-md font-medium mx-2 mt-4"},"Läs mer på",-1)),r.species.Artfakta!="Information saknas"?(p(),K(pe,{key:1,to:E(r.species.Artfakta),variant:"ghost",target:"_blank",class:"text-primary-500 w-full",size:"xl",icon:"i-heroicons-arrow-up-right-20-solid",label:"Artfakta.se",trailing:""},null,8,["to"])):M("",!0),h[15]||(h[15]=y("br",null,null,-1)),r.species.Svampguiden&&r.species.Svampguiden!=="0"?(p(),K(pe,{key:2,to:E(r.species.Svampguiden),trailing:"",label:"Svampguiden.com",icon:"i-heroicons-arrow-up-right-20-solid",target:"_blank",variant:"ghost",class:"text-primary-500 w-full",size:"xl"},null,8,["to"])):M("",!0),g(me)])])}}},Ss={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},ra={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:null,required:!1},prevIcon:{type:null,required:!1},nextIcon:{type:null,required:!1},lastIcon:{type:null,required:!1},ellipsisIcon:{type:null,required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(r,{emit:t}){const e=r,n=t,o=wa(),{dir:s}=Sa(),i=Ca(),d=Na($a(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),n),l=T(()=>e.firstIcon||(s.value==="rtl"?i.ui.icons.chevronDoubleRight:i.ui.icons.chevronDoubleLeft)),m=T(()=>e.prevIcon||(s.value==="rtl"?i.ui.icons.chevronRight:i.ui.icons.chevronLeft)),E=T(()=>e.nextIcon||(s.value==="rtl"?i.ui.icons.chevronLeft:i.ui.icons.chevronRight)),C=T(()=>e.lastIcon||(s.value==="rtl"?i.ui.icons.chevronDoubleLeft:i.ui.icons.chevronDoubleRight)),b=T(()=>At({extend:At(Ss),...i.ui?.pagination||{}})());return(_,k)=>(p(),K(N(mo),Le(N(d),{"data-slot":"root",class:b.value.root({class:[e.ui?.root,e.class]})}),{default:F(({page:w,pageCount:A})=>[g(N(xo),{"data-slot":"list",class:de(b.value.list({class:e.ui?.list}))},{default:F(({items:h})=>[r.showControls||o.first?(p(),K(N(fo),{key:0,"as-child":"","data-slot":"first",class:de(b.value.first({class:e.ui?.first}))},{default:F(()=>[ye(_.$slots,"first",{},()=>[g(ge,{color:r.color,variant:r.variant,size:r.size,icon:l.value,to:r.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):M("",!0),r.showControls||o.prev?(p(),K(N(To),{key:1,"as-child":"","data-slot":"prev",class:de(b.value.prev({class:e.ui?.prev}))},{default:F(()=>[ye(_.$slots,"prev",{},()=>[g(ge,{color:r.color,variant:r.variant,size:r.size,icon:m.value,to:w>1?r.to?.(w-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):M("",!0),(p(!0),P(Se,null,Te(h,(R,z)=>(p(),P(Se,{key:z},[R.type==="page"?(p(),K(N(So),{key:0,"as-child":"",value:R.value,"data-slot":"item",class:de(b.value.item({class:e.ui?.item}))},{default:F(()=>[ye(_.$slots,"item",Le({ref_for:!0},{item:R,index:z,page:w,pageCount:A}),()=>[g(ge,{color:w===R.value?r.activeColor:r.color,variant:w===R.value?r.activeVariant:r.variant,size:r.size,label:String(R.value),ui:{label:b.value.label()},to:r.to?.(R.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(p(),K(N(co),{key:1,"as-child":"","data-slot":"ellipsis",class:de(b.value.ellipsis({class:e.ui?.ellipsis}))},{default:F(()=>[ye(_.$slots,"ellipsis",{ui:b.value},()=>[g(ge,{as:"div",color:r.color,variant:r.variant,size:r.size,icon:r.ellipsisIcon||N(i).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["class"]))],64))),128)),r.showControls||o.next?(p(),K(N(No),{key:2,"as-child":"","data-slot":"next",class:de(b.value.next({class:e.ui?.next}))},{default:F(()=>[ye(_.$slots,"next",{},()=>[g(ge,{color:r.color,variant:r.variant,size:r.size,icon:E.value,to:w<A?r.to?.(w+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):M("",!0),r.showControls||o.last?(p(),K(N(bo),{key:3,"as-child":"","data-slot":"last",class:de(b.value.last({class:e.ui?.last}))},{default:F(()=>[ye(_.$slots,"last",{},()=>[g(ge,{color:r.color,variant:r.variant,size:r.size,icon:C.value,to:r.to?.(A)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):M("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},Cs=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function dt(r,t,e,n){return!r||!t||!e||!n?!1:Cs.some(o=>o.geo===r&&o.forest===t&&o.age===e&&o.veg===n)}const Ns={class:""},$s={class:""},Ts={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},Ls={class:"flex gap-2 items-end justify-between w-full mb-2"},As={class:"flex gap-2"},Es={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Vs={key:1,class:"hidden md:flex"},Ps={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Bs={key:0,class:"flex gap-2 w-full mb-2"},Fs={class:""},Rs={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},zs={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},Ds={class:"flex"},Ms={class:"hidden md:flex"},Us={key:0},js={class:"flex justify-center"},Is={key:2},Gs={class:"max-w-sm space-y-2 mt-2"},Ks={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(r,{emit:t}){const e=Ue("(max-width: 767px)"),n=T(()=>e.value||l.isNormalView&&l.dataTypeFolder!=="edna"),o=t,s=j("");let i=null;function d(a){s.value=a,i&&clearTimeout(i),i=setTimeout(()=>{o("update:searchTerm",s.value)},300)}jt(()=>{i&&clearTimeout(i)});const l=r,m=Ta("table"),E=n.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[l.grupp]:!1,mark:!1,[l.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[l.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};l.dataType==="edna"&&(E.mark=!1);const C=j({...E,...l.columnVisibilityOverrides}),b=j([]),_=(a=0,u=0)=>u?a===u?`${u}`:`${a}/${u}`:null,k=T(()=>{const a={};je.value.forEach(D=>{D.KALKmark&&(a.KALKmark=(a.KALKmark||0)+1),D.ANNANmark&&(a.ANNANmark=(a.ANNANmark||0)+1)});const u=m.value?.tableApi?.getFilteredRowModel()?.rows||[],x={};return u.forEach(D=>{const ee=D.original;ee.KALKmark&&(x.KALKmark=(x.KALKmark||0)+1),ee.ANNANmark&&(x.ANNANmark=(x.ANNANmark||0)+1)}),[{label:"Kalkmark",value:"KALKmark",visible:x.KALKmark||0,total:a.KALKmark||0},{label:"Vanlig skogsmark",value:"ANNANmark",visible:x.ANNANmark||0,total:a.ANNANmark||0}].map(D=>{const ee=_(D.visible,D.total);return ee?{label:`${D.label} (${ee})`,value:D.value}:null}).filter(Boolean)}),w=T(()=>k.value.map(a=>({label:a.label,type:"checkbox",checked:b.value.includes(a.value),onUpdateChecked(u){u?b.value.includes(a.value)||b.value.push(a.value):b.value=b.value.filter(x=>x!==a.value)},onSelect(u){u.preventDefault()}}))),A=T(()=>{const a=["Matsvamp","Giftsvamp"],u={};je.value.forEach(D=>{const ee=D[l.mat];l.mat==="Nyasvamp-boken"?ee&&String(ee).toLowerCase()==="x"&&(u.Matsvamp=(u.Matsvamp||0)+1):ee==1&&(u.Matsvamp=(u.Matsvamp||0)+1),(D.Giftsvamp||"").toLowerCase()==="x"&&(u.Giftsvamp=(u.Giftsvamp||0)+1)});const x=m.value?.tableApi?.getFilteredRowModel()?.rows||[],L={};return x.forEach(D=>{const ee=D.original,te=ee[l.mat];(l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te==1)&&(L.Matsvamp=(L.Matsvamp||0)+1),(ee.Giftsvamp||"").toLowerCase()==="x"&&(L.Giftsvamp=(L.Giftsvamp||0)+1)}),a.map(D=>{const ee=u[D]||0,te=L[D]||0,le=_(te,ee);return le?{label:`${D} (${le})`,value:D}:null}).filter(Boolean)}),h=j(l.isNormalView?500:10),R=j([]),z=j([]),O=["VU","NT","EN","CR","DD","Signalart"],I=T(()=>O.every(a=>z.value.includes(a))),Q=a=>{if(a){const u=new Set([...z.value,...O]);z.value=Array.from(u)}else z.value=z.value.filter(u=>!O.includes(u))},Y=j([]),pe=T(()=>f.value.map(a=>({label:a.label,type:"checkbox",checked:Y.value.includes(a.value),onUpdateChecked(u){u?Y.value.includes(a.value)||Y.value.push(a.value):Y.value=Y.value.filter(x=>x!==a.value)},onSelect(u){u.preventDefault()}}))),me=T(()=>A.value.map(a=>({label:a.label,type:"checkbox",checked:R.value.includes(a.value),onUpdateChecked(u){u?R.value.includes(a.value)||R.value.push(a.value):R.value=R.value.filter(x=>x!==a.value)},onSelect(u){u.preventDefault()}}))),S=T(()=>G.value.map(a=>{if(a.type==="separator")return a;const u=a.value==="Naturvårdsarter";return{label:a.label,type:"checkbox",icon:a.icon,checked:u?I.value:z.value.includes(a.value),onUpdateChecked(x){if(u){Q(x);return}x?z.value.includes(a.value)||z.value.push(a.value):z.value=z.value.filter(L=>L!==a.value)},onSelect(x){x.preventDefault()}}})),v=T(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),m.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),m.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),m.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),m.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:l.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(a){a.preventDefault(),m.value?.tableApi?.setSorting([{id:l.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(a){a.preventDefault(),m.value?.tableApi?.setSorting([{id:l.obs,desc:!0}])}}]}]),c=T(()=>[{label:"Grupp",children:pe.value},{label:"Matsvamp",children:me.value},{label:"Status",children:S.value},{label:"Mark",children:w.value}]),f=T(()=>{const a={};je.value.forEach(L=>{const D=L[l.grupp];D&&(a[D]=(a[D]||0)+1)});const u=m.value?.tableApi?.getFilteredRowModel()?.rows||[],x={};return u.forEach(L=>{const ee=L.original[l.grupp];ee&&(x[ee]=(x[ee]||0)+1)}),Object.keys(a).map(L=>{const D=a[L]||0,ee=x[L]||0,te=_(ee,D);return te?{label:`${V(L)} (${te})`,value:L}:null}).filter(Boolean)}),G=T(()=>{const a=["LC","NT","EN","VU","CR","DD"],u={};je.value.forEach(se=>{const ae=se.RL2020kat;a.includes(ae)?u[ae]=(u[ae]||0)+1:ae===null||ae==="0"||ae===0||String(ae).toUpperCase()==="NE"?u["Ej bedömd"]=(u["Ej bedömd"]||0)+1:String(ae).toUpperCase()==="NA"&&(u["Ej tillämplig"]=(u["Ej tillämplig"]||0)+1),se.SIGNAL_art==="S"&&(u.Signalart=(u.Signalart||0)+1)});const x=m.value?.tableApi?.getFilteredRowModel()?.rows||[],L={};x.forEach(se=>{const ae=se.original,$e=ae.RL2020kat;a.includes($e)?L[$e]=(L[$e]||0)+1:$e===null||$e==="0"||$e===0||String($e).toUpperCase()==="NE"?L["Ej bedömd"]=(L["Ej bedömd"]||0)+1:String($e).toUpperCase()==="NA"&&(L["Ej tillämplig"]=(L["Ej tillämplig"]||0)+1),ae.SIGNAL_art==="S"&&(L.Signalart=(L.Signalart||0)+1)});const D=O.reduce((se,ae)=>se+(u[ae]||0),0),ee=O.reduce((se,ae)=>se+(L[ae]||0),0),te=[],le=(se,ae,$e=0,ma=0,va={})=>{const Lt=_($e,ma);Lt&&te.push({label:`${ae} (${Lt})`,value:se,...va})};le("LC","Livskraftig",L.LC||0,u.LC||0,{icon:"i-heroicons-check-circle"}),le("Ej bedömd","Ej bedömd",L["Ej bedömd"]||0,u["Ej bedömd"]||0,{icon:"i-heroicons-question-mark-circle"}),le("Ej tillämplig","Ej tillämplig",L["Ej tillämplig"]||0,u["Ej tillämplig"]||0,{icon:"i-heroicons-minus-circle"});const $=_(ee,D);for($&&te.push({label:`Naturvårdssvampar (${$})`,value:"Naturvårdsarter",icon:"i-material-symbols-award-star-outline"}),te.length&&te.push({type:"separator"}),O.forEach(se=>{le(se,re(se),L[se]||0,u[se]||0)}),te.length&&te[te.length-1]?.type!=="separator"&&te.push({type:"separator"});te.length&&te[te.length-1]?.type==="separator";)te.pop();return te}),U=j({pageIndex:0,pageSize:10}),Z=it();function B(a,u){const x=u?.original?u:a?.original?a:null;x&&Z.selectSpecies(x.original??x,"edna")}const V=a=>a?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():"",q=T(()=>Pe.value.length>0?Pe.value[0].sample_env_count:0),H=a=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[a]||"default-icon.webp"}`,X=a=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[a]||"neutral",re=a=>{if(a==="Ej bedömd")return"Ej bedömd";if(a==="Ej tillämplig")return"Ej tillämplig";const u={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return a===null||a===0||String(a).toUpperCase()==="NE"?"Ej bedömd":String(a).toUpperCase()==="NA"?"Ej tillämplig":u[a]||"Ej bedömd"},ue=l.obs.startsWith("Rank"),ve=j(ue?[{id:l.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:l.obs,desc:!0}]),ce=ke,fe=ge,be=He,_e=[{accessorKey:"images",header:"",sortable:!1,cell:({row:a})=>{const u=a.getValue("images")||[];return u.length?W("img",{src:u[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:a.original?.Commonname?`${a.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:a})=>{const u=a.getIsSorted();return W(ge,{color:"neutral",variant:"outline",label:"Namn",icon:u?u==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ring-muted/50 shadow",onClick:()=>a.toggleSorting(u==="asc")})},cell:({row:a})=>W("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},V(a.getValue("Commonname"))),filterFn:(a,u,x)=>{if(!x)return!0;const L=String(x).toLowerCase(),D=String(a.getValue("Commonname")||"").toLowerCase(),ee=String(a.getValue("Scientificname")||"").toLowerCase();return D.includes(L)||ee.includes(L)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:a})=>{const u=a.getIsSorted();return W(ge,{color:"neutral",variant:"outline",label:"Latinskt namn",icon:u?u==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ring-muted/50 shadow",onClick:()=>a.toggleSorting(u==="asc")})},cell:({row:a})=>W("div",{class:"truncate  text-[16px]"},a.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:l.grupp,header:()=>W(He,{items:pe.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(ge,{label:"Grupp",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,u,x)=>!x||x.length===0?!0:x.includes(a.getValue(u)),cell:({row:a})=>{const u=a.getValue(l.grupp);return u!=="Saknas"?W("img",{src:H(u),alt:`${u||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):W(Xe,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:l.dataType!=="edna",header:()=>W(He,{items:w.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(ge,{label:"Mark",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,u,x)=>{if(!x||x.length===0)return!0;let L=!1;return x.includes("KALKmark")&&a.original.KALKmark&&(L=!0),x.includes("ANNANmark")&&a.original.ANNANmark&&(L=!0),L},cell:({row:a})=>W("div",{class:"flex items-center space-x-1"},[a.original.KALKmark&&W(ke,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),a.original.ANNANmark&&W(ke,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:l.mat,header:()=>W(He,{items:me.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(ge,{label:"Matsvamp",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,u,x)=>{if(!x||x.length===0)return!0;let L=!1;return x.includes("Matsvamp")&&(l.mat==="Nyasvamp-boken"?L=L||a.getValue(u)?.toLowerCase()==="x":L=L||a.getValue(u)===1),x.includes("Giftsvamp")&&(L=L||(a.original.Giftsvamp||"").toLowerCase()==="x"),L},cell:({row:a})=>W("div",{class:"flex gap-1"},[(l.mat==="Nyasvamp-boken"?a.getValue(l.mat)?.toLowerCase()==="x":a.getValue(l.mat)===1)&&W(ke,{color:"warning",variant:"subtle"},()=>"Matsvamp"),a.original.Giftsvamp?.toLowerCase()==="x"&&W(ke,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>W(He,{items:S.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(ge,{label:"Status",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,u,x)=>{if(!x||x.length===0)return!0;const L=a.getValue(u);return x.some(D=>D==="Ej bedömd"?L===null||L===0||L==="0"||String(L).toUpperCase()==="NE":D==="Ej tillämplig"?String(L).toUpperCase()==="NA":D==="Signalart"?a.original.SIGNAL_art==="S":D===L)},cell:({row:a})=>{const u=a.getValue("RL2020kat"),x=W(ke,{color:X(u),variant:"subtle"},()=>re(u)),L=a.original.SIGNAL_art==="S"?W(ke,{color:"signal",variant:"subtle"},"Signalart"):null;return W("div",{class:"flex gap-1"},[x,L].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:l.obs,header:({column:a})=>{const u=a.getIsSorted();return W(ge,{color:"neutral",variant:"outline",label:l.obsLabel,icon:u?u==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ring-muted/50 shadow",onClick:()=>a.toggleSorting(u==="asc")})},cell:({row:a})=>{const u=a.getValue(l.obs);return l.obs.startsWith("Rank")?u===3?W("span",{class:"text-red-700"},"Sällsynt"):u===2?W("span",{class:"text-yellow-600"},"Ovanlig"):null:W(ke,{variant:"subtle",color:"secondary"},()=>`${u} skogar`)},meta:{headerText:l.obsLabel}}],Ve=[{header:"Namn",cell:({row:a})=>{const u=a.original.images||[];let x=null;const L=l.filterPoison?a.original["Rank giftsvamp"]:l.filterEdible?a.original["Rank matsvamp"]:a.original.RankRed;L===3?x=W(Xe,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):L===2&&(x=W(Xe,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const D=u.length?W("img",{src:u[0],alt:a.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded sm:rounded-md border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):W("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[W("img",{src:H(a.original[l.grupp]),alt:`${a.original[l.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),ee=W("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[W("div",{class:"flex-1 min-w-0"},[W("div",{class:"text-lg font-semibold whitespace-normal break-words"},[V(a.original.Commonname),x]),W("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},a.original.Scientificname)])]),te=a.original[l.mat];(l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te===1)&&W(ke,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const $=W("div",{class:"flex flex-wrap gap-2 mt-2 "},[a.original.RL2020kat!=="LC"&&a.original.RL2020kat!=="NA"&&a.original.RL2020kat!=="NE"&&a.original.RL2020kat!=="0"?W(ke,{color:X(a.original.RL2020kat),variant:"subtle",size:"md"},()=>re(a.original.RL2020kat)):null,a.original.SIGNAL_art==="S"?W(ke,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,l.dataType==="edna"?W(La,{modelValue:a.getValue(l.obs),max:q.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return W("div",{class:"flex space-x-4 items-start"},[D,W("div",{class:"flex flex-col flex-1"},[ee,$])])},meta:{headerText:"Namn"}},..._e.map(a=>a.accessorKey==="mark"?{...a,enableHiding:l.dataType!=="edna"}:a)],qe=T(()=>n.value?Ve:_e),xe=T(()=>({thead:n.value?"hidden":"hidden md:table-header-group",tbody:n.value?"divide-none":"divide-none md:divide-dotted",td:n.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),Ze=j(0),mt=j(0),Pe=j([]),Me=j(!0),Nt=j([]),la=(a,u,x)=>{const L=(u[0]-a[0])/(x-1),D=(u[1]-a[1])/(x-1),ee=(u[2]-a[2])/(x-1),te=[];for(let le=0;le<x;le++){const $=Math.round(a[0]+L*le),se=Math.round(a[1]+D*le),ae=Math.round(a[2]+ee*le);te.push(`rgb(${$}, ${se}, ${ae})`)}return te},Je=()=>{Pe.value=[],Ze.value=0,mt.value=0,Nt.value=[]},ia=async()=>{if([he.geography,he.forestType,he.standAge,he.vegetationType].some(x=>!x)){Je(),Me.value=!1;return}if(l.dataTypeFolder==="edna"&&!dt(he.geography,he.forestType,he.standAge,he.vegetationType)){Je(),Me.value=!1;return}const u=`${l.dataType}-${he.geography}-${he.forestType}-${he.standAge}-${he.vegetationType}.json`;try{const x=await fetch(`/${l.dataTypeFolder}/${u}`);if(!x.ok){if(x.status===404){Je(),Me.value=!1;return}throw new Error(`Failed to fetch data from ${u}`)}Pe.value=await x.json(),Me.value=!1,Pe.value.forEach((te,le)=>{te.colorIndex=le});const L=Pe.value.length;Ze.value=Math.floor(L*.1),mt.value=L-Ze.value;const D=la([82,82,82],[212,212,212],Ze.value),ee=ua(mt.value);Nt.value=[...D,...ee]}catch(x){console.error("Error fetching data:",x),Je(),Me.value=!1}};function ua(a){const u=[];for(let D=0;D<a;D++){const ee=45+300/(a-1||1)*D;u.push(`hsl(${ee%360}, 70%, 50%)`)}return u}const he=Ee();ie(()=>[he.geography,he.forestType,he.standAge,he.vegetationType],()=>{Me.value=!0,ia()},{immediate:!0});const $t=j(""),je=T(()=>{let a=Pe.value;return $t.value&&(a=a.filter(u=>Object.values(u).some(x=>String(x).toLowerCase().includes($t.value.toLowerCase())))),l.filterEdible?a=a.filter(u=>{const x=u[l.mat];return x&&String(x).toLowerCase()==="x"}):l.filterPoison&&(a=a.filter(u=>{const x=u[l.mat];return!(x&&String(x).toLowerCase()==="x")})),a}),ca=T(()=>je.value);ie(h,a=>{let u=a==="Alla"?et.value||Pe.value.length:Number(a);U.value.pageSize=u,U.value.pageIndex=0,m.value?.tableApi&&(m.value.tableApi.setPageSize(u),m.value.tableApi.setPageIndex(0))});const da=T(()=>m.value?.tableApi?.getPaginationRowModel().rows||[]),Qe=T(()=>m.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),ga=T(()=>Qe.value.pageIndex*Qe.value.pageSize+1),pa=T(()=>{const a=Qe.value.pageIndex*Qe.value.pageSize+da.value.length;return a>et.value?et.value:a}),et=T(()=>m.value?.tableApi?.getFilteredRowModel()?.rows.length||0),Tt=T(()=>{const a=l.searchTerm?[{id:"Commonname",value:l.searchTerm}]:[];return R.value&&R.value.length>0&&a.push({id:l.mat,value:R.value}),z.value&&z.value.length>0&&a.push({id:"RL2020kat",value:z.value}),Y.value&&Y.value.length>0&&a.push({id:l.grupp,value:Y.value}),b.value&&b.value.length>0&&a.push({id:"mark",value:b.value}),a}),tt=(a,u)=>{const x=m.value?.tableApi?.getFilteredRowModel()?.rows||[];if(!x.length)return!1;if(a==="mark")return u==="KALKmark"?x.some(L=>L.original.KALKmark):u==="ANNANmark"?x.some(L=>L.original.ANNANmark):!1;if(a===l.mat){if(u==="Matsvamp")return x.some(L=>{const D=L.original[l.mat];return l.mat==="Nyasvamp-boken"?D&&String(D).toLowerCase()==="x":D==1});if(u==="Giftsvamp")return x.some(L=>(L.original.Giftsvamp||"").toLowerCase()==="x")}return x.some(L=>{if(a==="RL2020kat"){if(u==="Ej bedömd"){const D=L.original.RL2020kat;return D===null||D===0||D==="0"||String(D).toUpperCase()==="NE"}return u==="Ej tillämplig"?String(L.original.RL2020kat).toUpperCase()==="NA":u==="Signalart"?L.original.SIGNAL_art==="S":L.original.RL2020kat===u}return L.getValue(a)===u})};return ie(Tt,a=>{m.value?.tableApi&&m.value.tableApi.setColumnFilters(a)}),ie(Tt,a=>{const x=a.find(le=>le.id===l.mat)?.value??[];o("update:matsvampFilter",x.includes("Matsvamp")),o("update:giftsvampFilter",x.includes("Giftsvamp"));const D=a.find(le=>le.id===l.grupp)?.value??[];o("update:gruppFilter",D);const te=a.find(le=>le.id==="RL2020kat")?.value??[];o("update:statusFilter",te)},{deep:!0,immediate:!0}),(a,u)=>{const x=Ot,L=qt,D=It,ee=Ga,te=ra,le=Wt;return p(),P("div",Ns,[y("div",$s,[n.value?M("",!0):(p(),P("div",Ts,[y("div",Ls,[g(x,{"model-value":N(m)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":u[0]||(u[0]=$=>{N(m)?.tableApi?.getColumn("Commonname")?.setFilterValue($),d($)}),variant:"ghost"},null,8,["model-value"]),y("div",As,[y("div",Es,[b.value.length?(p(!0),P(Se,{key:0},Te(b.value,$=>(p(),P("span",{key:"mark-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="KALKmark"?"kalkmark":$==="ANNANmark"?"vanligmark":"neutral",class:de(["cursor-pointer mb-2 md:mb-0",tt("mark",$)?"":"opacity-50"]),onClick:se=>b.value=b.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J($==="KALKmark"?"Kalkmark":$==="ANNANmark"?"Vanlig skogsmark":V($)),1)]),_:2},1032,["color","class","onClick"])]))),128)):M("",!0),R.value.length?(p(!0),P(Se,{key:1},Te(R.value,$=>(p(),P("span",{key:"svamp-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Matsvamp"?"warning":$==="Giftsvamp"?"poison":"neutral",class:de(["cursor-pointer mb-2 md:mb-0",tt(l.mat,$)?"":"opacity-50"]),onClick:se=>R.value=R.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J(V($)),1)]),_:2},1032,["color","class","onClick"])]))),128)):M("",!0),Y.value.length?(p(!0),P(Se,{key:2},Te(Y.value,$=>(p(),P("span",{key:"grupp-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:de(["cursor-pointer mb-2 md:mb-0",tt(l.grupp,$)?"":"opacity-50"]),onClick:se=>Y.value=Y.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J(V($)),1)]),_:2},1032,["class","onClick"])]))),128)):M("",!0),z.value.length?(p(!0),P(Se,{key:3},Te(z.value,$=>(p(),P("span",{key:"status-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Signalart"?"signal":X($),class:de(["cursor-pointer mb-2 md:mb-0",tt("RL2020kat",$)?"":"opacity-50"]),onClick:se=>z.value=z.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J($==="Signalart"?"Signalart":re($)),1)]),_:2},1032,["color","class","onClick"])]))),128)):M("",!0)]),n.value?M("",!0):(p(),K(N(be),{key:0,class:"flex",items:N(m)?.tableApi?.getAllColumns()?.filter($=>$.getCanHide())?.map($=>({label:$.columnDef.meta?.headerText||N(Aa)($.id),type:"checkbox",checked:$.getIsVisible(),onUpdateChecked(se){N(m)?.tableApi?.getColumn($.id)?.toggleVisibility(!!se)},onSelect(se){se?.preventDefault()}})),content:{align:"end"},ui:{content:"min-w-fit"}},{default:F(()=>[g(N(fe),{label:"Kolumner",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),r.isNormalView?M("",!0):(p(),P("div",Vs,[g(L,{modelValue:h.value,"onUpdate:modelValue":u[1]||(u[1]=$=>h.value=$),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"ghost"},null,8,["modelValue"])]))])])])),n.value?(p(),P("div",Ps,[b.value.length?(p(!0),P(Se,{key:0},Te(b.value,$=>(p(),P("span",{key:"mark-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="KALKmark"?"kalkmark":$==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:se=>b.value=b.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J($==="KALKmark"?"Kalkmark":$==="ANNANmark"?"Vanlig skogsmark":V($)),1)]),_:2},1032,["color","onClick"])]))),128)):M("",!0),R.value.length?(p(!0),P(Se,{key:1},Te(R.value,$=>(p(),P("span",{key:"svamp-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Matsvamp"?"warning":$==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:se=>R.value=R.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J(V($)),1)]),_:2},1032,["color","onClick"])]))),128)):M("",!0),Y.value.length?(p(!0),P(Se,{key:2},Te(Y.value,$=>(p(),P("span",{key:"grupp-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:se=>Y.value=Y.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J(V($)),1)]),_:2},1032,["onClick"])]))),128)):M("",!0),z.value.length?(p(!0),P(Se,{key:3},Te(z.value,$=>(p(),P("span",{key:"status-"+$},[g(N(ce),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Signalart"?"signal":X($),class:"cursor-pointer mb-2 md:mb-0",onClick:se=>z.value=z.value.filter(ae=>ae!==$)},{default:F(()=>[oe(J($==="Signalart"?"Signalart":re($)),1)]),_:2},1032,["color","onClick"])]))),128)):M("",!0)])):M("",!0)]),n.value?(p(),P("div",Bs,[g(N(be),{size:N(e)?"xl":"md",items:v.value,content:{align:"start"},ui:{content:"min-w-fit"}},{default:F(()=>[g(N(fe),{variant:N(e)?"soft":"ghost",icon:"i-lucide-arrow-up-down",size:N(e)?"xl":"md",label:(N(e),null),color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),g(N(be),{size:N(e)?"xl":"md",items:c.value,content:{align:"start"},ui:{content:"min-w-fit"}},{default:F(()=>[g(N(fe),{variant:N(e)?"soft":"ghost",icon:"i-lucide-list-filter",size:N(e)?"xl":"md",label:(N(e),null),color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),g(x,{variant:N(e)?"soft":"ghost","model-value":N(m)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:N(e)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":u[2]||(u[2]=$=>{N(m)?.tableApi?.getColumn("Commonname")?.setFilterValue($),d($)})},null,8,["variant","model-value","size"])])):M("",!0),g(D,{ui:{border:"border-muted/50"},class:"mb-2"}),je.value?(p(),P("div",{key:1,class:de([(r.isNormalView,"")])},[y("div",Fs,[g(ee,{ref_key:"table",ref:m,"column-visibility":C.value,"onUpdate:columnVisibility":u[3]||(u[3]=$=>C.value=$),pagination:U.value,"onUpdate:pagination":u[4]||(u[4]=$=>U.value=$),data:ca.value,columns:qe.value,sticky:"",loading:Me.value,sorting:ve.value,"onUpdate:sorting":u[5]||(u[5]=$=>ve.value=$),onSelect:B,autoResetAll:!0,"pagination-options":N(e)&&!r.isNormalView?!1:r.isNormalView?void 0:{getPaginationRowModel:N(Ia)()},class:de([{"":r.isNormalView},"rounded-sm"]),ui:xe.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),n.value?M("",!0):(p(),P("div",Rs,[y("div",zs,[y("h1",Ds,[u[8]||(u[8]=oe(" Visar ",-1)),y("span",Ms,"  "+J(ga.value)+" till  ",1),oe(" "+J(pa.value)+" av "+J(et.value)+" arter ",1)]),r.isNormalView?(p(),K(N(fe),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:u[6]||(u[6]=$=>o("enlarge"))})):M("",!0)]),y("div",null,[!r.isNormalView&&h.value!=="Alla"&&!N(e)?(p(),P("div",Us,[y("div",js,[g(te,{"active-variant":"ghost",variant:"ghost","default-page":(N(m)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":N(m)?.tableApi?.getState().pagination.pageSize,total:N(m)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":u[7]||(u[7]=$=>N(m)?.tableApi?.setPageIndex($-1))},null,8,["default-page","items-per-page","total"])])])):M("",!0)])]))])],2)):(p(),P("div",Is,[y("div",Gs,[g(le,{class:"h-4 w-full rounded"}),g(le,{class:"h-4 w-[85%] rounded"})])]))])}}},gt=Ae(Ks,[["__scopeId","data-v-6f14d872"]]),Ws={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},Os=we({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(r){const t=r,e=["100%","200%","400%","800%"],n=j(0),o=T(()=>e[n.value]),s=j([]),i=Ee();function d(v){return v.sort((c,f)=>f.sample_plot_count-c.sample_plot_count)}function l(v,c,f){if(f<=0)return[];const G=(c[0]-v[0])/(f-1||1),U=(c[1]-v[1])/(f-1||1),Z=(c[2]-v[2])/(f-1||1),B=[];for(let V=0;V<f;V++){const q=Math.round(v[0]+G*V),H=Math.round(v[1]+U*V),X=Math.round(v[2]+Z*V);B.push(`rgb(${q}, ${H}, ${X})`)}return B}function m(v){const c=[];for(let U=0;U<v;U++){const Z=45+300/(v-1||1)*U;c.push(`hsl(${Z%360}, 70%, 50%)`)}return c}async function E(){const v=[i.geography,i.forestType,i.standAge,i.vegetationType];if(v.some(f=>!f)){s.value=[];return}if(!dt(...v)){s.value=[];return}const c=`edna-${i.geography}-${i.forestType}-${i.standAge}-${i.vegetationType}.json`;try{const f=await fetch(`/edna/${c}`);if(!f.ok){if(f.status===404){s.value=[];return}throw new Error(`Failed to fetch ${c}`)}let G=await f.json();G=d(G);const U=G.length,Z=Math.floor(U*.1),B=U-Z,V=l([82,82,82],[212,212,212],Z),q=m(B),H=[...V,...q];s.value=G.map((X,re)=>({...X,fillColor:H[re]||"var(--ui-primary)"}))}catch(f){console.error("Error fetching chart data:",f),s.value=[]}}Ge(E),ie(()=>[i.geography,i.forestType,i.standAge,i.vegetationType],E,{immediate:!0});const C=(v,c)=>c,b=v=>v.sample_plot_count,_=(v,c)=>{const f=R.value[c];if(!f)return"";const G=t.searchTerm.trim().toLowerCase(),U=String(f.Commonname||"").toLowerCase(),Z=String(f.Scientificname||"").toLowerCase(),B=G?U.includes(G)||Z.includes(G):!0,V=t.statusFilter.length>0,q=t.matsvampFilter||t.giftsvampFilter,H=t.gruppFilter.length>0;if(!V&&!q&&!H&&t.searchTerm.trim()!=="")return B?k(f.Commonname):"";const X=V&&t.statusFilter.includes("Signalart")&&f.SIGNAL_art==="S",re=t.statusFilter.filter(Ve=>Ve!=="Signalart"),ue=V&&t.statusFilter.includes("Ej bedömd")&&(f.RL2020kat===null||f.RL2020kat===0||f.RL2020kat==="0"||String(f.RL2020kat).toUpperCase()==="NE"),ve=V&&t.statusFilter.includes("Ej tillämplig")&&String(f.RL2020kat).toUpperCase()==="NA",ce=V?X||re.includes(f.RL2020kat):!1,fe=t.matsvampFilter?f.matsvamp==1:!1,be=t.giftsvampFilter?(f.Giftsvamp||"").toLowerCase()==="x":!1,_e=H?t.gruppFilter.includes(f[t.groupKey]):!1;return V?!q&&!H?B&&(X||ce||ue||ve)?k(f.Commonname):"":B&&(X||ce||ue||ve)&&(q?fe||be:!0)&&(H?_e:!0)?k(f.Commonname):"":q||H?q&&!H?B&&(fe||be)?k(f.Commonname):"":!q&&H?B&&_e?k(f.Commonname):"":B&&(fe||be)&&_e?k(f.Commonname):"":""};function k(v){return v?v.charAt(0).toUpperCase()+v.slice(1):""}const w=j(null);function A(v){if(!v)return w.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';w.value=v;const c=v.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",f=v.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",G={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},U=G[v.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${G[v.RL2020kat]}</div>`:"",Z=v.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${v["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${k(v.Commonname)}</strong> <em>${k(v.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${v.sample_plot_count} av ${v.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${c} ${f} ${U} ${Z}
      </div>
    </div>
  `}const h={[St.selectors.bar]:A},R=T(()=>{const v="#d4d4d4";return s.value.map(c=>{if(pe.value&&c.Scientificname===Y.selectedSpecies?.Scientificname)return{...c,barColor:"#b1835e"};const f=t.searchTerm.trim().toLowerCase(),G=String(c.Commonname||"").toLowerCase(),U=String(c.Scientificname||"").toLowerCase(),Z=f?G.includes(f)||U.includes(f):!0,B=t.statusFilter.length>0,V=t.matsvampFilter||t.giftsvampFilter,q=t.gruppFilter.length>0;if(!B&&!V&&!q&&t.searchTerm.trim()!=="")return{...c,barColor:Z?"#8b5cf6":v};const H=B&&t.statusFilter.includes("Signalart")&&c.SIGNAL_art==="S",X=t.statusFilter.filter(_e=>_e!=="Signalart"),re=B&&t.statusFilter.includes("Ej bedömd")&&(c.RL2020kat===null||c.RL2020kat===0||c.RL2020kat==="0"||String(c.RL2020kat).toUpperCase()==="NE"),ue=B&&t.statusFilter.includes("Ej tillämplig")&&String(c.RL2020kat).toUpperCase()==="NA",ve=B?H||X.includes(c.RL2020kat):!1,ce=t.matsvampFilter?c.matsvamp==1:!1,fe=t.giftsvampFilter?(c.Giftsvamp||"").toLowerCase()==="x":!1,be=q?t.gruppFilter.includes(c[t.groupKey]):!1;if(B){if(!V&&!q)return Z&&H?{...c,barColor:"#14b8a6"}:Z&&(H||ve||re||ue)?H?{...c,barColor:"#14b8a6"}:c.RL2020kat==="LC"?{...c,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(c.RL2020kat)?{...c,barColor:"#ef4444"}:re||ue?{...c,barColor:"#737373"}:{...c,barColor:"#1f2937"}:{...c,barColor:v};if(Z&&(H||ve||re||ue)&&(V?ce||fe:!0)&&(q?be:!0)){if(H)return{...c,barColor:"#14b8a6"};if(X.length>0)return c.RL2020kat==="LC"?{...c,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(c.RL2020kat)?{...c,barColor:"#ef4444"}:re||ue?{...c,barColor:"#737373"}:{...c,barColor:"#1f2937"};if(t.matsvampFilter&&ce)return{...c,barColor:"#eab308"};if(t.giftsvampFilter&&fe)return{...c,barColor:"#84cc16"};if(q&&be)return{...c,barColor:"#000000"}}return{...c,barColor:v}}if(V||q){if(V&&!q)return Z&&ce?{...c,barColor:"#eab308"}:Z&&fe?{...c,barColor:"#84cc16"}:{...c,barColor:v};if(!V&&q)return Z&&be?{...c,barColor:"#000000"}:{...c,barColor:v};if(Z&&(ce||fe)&&be){if(ce)return{...c,barColor:"#eab308"};if(fe)return{...c,barColor:"#84cc16"}}return{...c,barColor:v}}return{...c,barColor:c.fillColor||"var(--ui-primary)"}})}),z=v=>v.barColor,O=T(()=>R.value.length>0);ie(R,v=>{v.length||(w.value=null)});function I(){n.value<e.length-1&&n.value++}function Q(){n.value>0&&n.value--}const Y=it(),pe=T(()=>Y.selectedSpecies!==null),me=Ue("(max-width: 767px)");function S(v){w.value?Y.selectSpecies(w.value,"edna"):console.log("No datum available from tooltip.")}return(v,c)=>{const f=ge;return p(),P("div",null,[N(me)?M("",!0):(p(),P("div",Ws,[g(f,{onClick:Q,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),g(f,{onClick:I,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),N(me)?M("",!0):(p(),P("div",{key:1,class:de(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":n.value===0}]),onClick:S},[g(N(io),{data:R.value,width:o.value,height:"200"},{default:F(()=>[g(N(Ko),{data:R.value,x:C,y:b,color:z,barPadding:.1},null,8,["data"]),g(N(Bt),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:R.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":_},null,8,["numTicks"]),g(N(Bt),{type:"y",label:"Antal skogar",gridLine:!1}),O.value?(p(),K(N(Oo),{key:0,triggers:h,followCursor:!0})):M("",!0),O.value?(p(),K(N(Io),{key:1,color:z,template:A})):M("",!0)]),_:1},8,["data","width"])],2))])}}}),qs=Object.assign(Ae(Os,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),pt=Ea("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:r=>t=>r.componentTabs[t]||"grid"},actions:{setActiveTab(r,t){this.componentTabs[r]=t}}}),Hs={class:"md:flex justify-between relative"},Xs={class:"md:flex gap-4"},Ys={class:"md:mt-0 mt-1 mb-1 md:mb-2"},Zs={class:"text-3xl font-medium flex items-center text-secondary-500"},Js={class:"flex gap-2"},Qs={class:"text-md text-neutral-500"},en={class:"justify-between hidden"},tn={class:"flex gap-3 items-start"},an={key:0,class:""},on={key:1,class:""},sn=we({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(r,{emit:t}){const e=j(!1),n=j(!1),o=j([]),s=j([]),i=j(""),d=j(!0),l=t,m=pt(),E=T({get:()=>me.value?"spatialForest":m.getActiveTab("EdnaComponent"),set:c=>{me.value||m.setActiveTab("EdnaComponent",c)}}),C=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],b=Ee(),{geography:_,forestType:k,standAge:w,vegetationType:A}=Va(b),h=T(()=>_.value),R=T(()=>k.value),z=T(()=>w.value),O=T(()=>A.value),I=j([]),Q=T(()=>I.value.length),Y=T(()=>I.value.length>0&&I.value[0].sample_env_count||0),pe=j("100%"),me=Ue("(max-width: 767px)"),S=T(()=>({mark:!1,...me.value?{images:!1}:{}}));async function v(c,f,G,U){if(!c||!f||!G||!U){I.value=[];return}if(!dt(c,f,G,U)){I.value=[];return}const Z=`edna-${c}-${f}-${G}-${U}.json`;try{const B=await fetch(`/edna/${Z}`);if(!B.ok){if(B.status===404){I.value=[];return}throw new Error(`Failed to fetch ${Z}`)}const V=await B.json();V.sort((q,H)=>H.sample_plot_count-q.sample_plot_count),I.value=V}catch(B){console.error("Error fetching data:",B),I.value=[]}}return ie(()=>[_.value,k.value,w.value,A.value],([c,f,G,U])=>{c&&f&&G&&U&&v(c,f,G,U)},{immediate:!0}),(c,f)=>{const G=ge,U=Ke,Z=ke,B=ut,V=gt,q=qs,H=We;return p(),P("div",null,[g(H,{class:"rounded-none sm:rounded-lg",variant:"ghost"},{default:F(()=>[y("div",Hs,[g(G,{color:"neutral",variant:"soft",size:"xl",onClick:f[0]||(f[0]=X=>c.$emit("enlarge")),class:de([r.isNormalView?"hidden":"md:hidden","rounded-full absolute top-0 right-0"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"]),y("div",Xs,[y("div",Ys,[y("div",Zs,[g(U,{name:"solar:dna-linear",class:"mr-2"}),f[10]||(f[10]=y("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),y("div",Js,[y("h1",Qs,J(Q.value)+" arter baserat på "+J(Y.value)+" skogar",1),Y.value<10?(p(),K(Z,{key:0,icon:Y.value<10?"i-cuida-warning-outline":void 0,size:"md",color:Y.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:F(()=>[oe(J(Y.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):M("",!0)])]),y("div",en,[g(B,{modelValue:E.value,"onUpdate:modelValue":f[1]||(f[1]=X=>E.value=X),items:C,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),y("div",tn,[g(G,{class:"hidden md:flex h-fit ring-muted/60",color:"neutral",variant:"outline",size:"sm",onClick:f[2]||(f[2]=X=>d.value=!d.value),label:d.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),g(Re,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:F(()=>[E.value==="spatialForest"?(p(),P("div",an,[g(V,{onEnlarge:f[3]||(f[3]=X=>l("enlarge")),isNormalView:r.isNormalView,"column-visibility-overrides":S.value},null,8,["isNormalView","column-visibility-overrides"])])):E.value==="columnChart"?(p(),P("div",on,[d.value?(p(),K(q,{key:0,class:"mb-6",chartData:I.value,chartWidth:pe.value,geography:h.value,forestType:R.value,standAge:z.value,vegetationType:O.value,matsvampFilter:e.value,giftsvampFilter:n.value,gruppFilter:o.value,statusFilter:s.value,"search-term":i.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):M("",!0),g(V,{onEnlarge:f[4]||(f[4]=X=>l("enlarge")),"onUpdate:matsvampFilter":f[5]||(f[5]=X=>e.value=X),"onUpdate:giftsvampFilter":f[6]||(f[6]=X=>n.value=X),"onUpdate:gruppFilter":f[7]||(f[7]=X=>o.value=X),"onUpdate:statusFilter":f[8]||(f[8]=X=>s.value=X),"onUpdate:searchTerm":f[9]||(f[9]=X=>i.value=X),isNormalView:r.isNormalView,"column-visibility-overrides":S.value,"search-term":i.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):M("",!0)]),_:1})]),_:1})])}}}),zt=Object.assign(Ae(sn,[["__scopeId","data-v-d27777d3"]]),{__name:"EdnaComponent"}),nn={class:"p-2 flex gap-2"},rn={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},ln=["onClick"],un={class:"w-full h-24 relative"},cn=["src"],dn={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},gn={class:"absolute bottom-1 left-1 flex gap-1"},pn={class:"p-2 pt-1"},mn={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},vn={class:"flex justify-between items-center px-5 py-2"},Ct={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(r){const t=j([]),e=j([]),n=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],o=r,s=Ee(),i=it(),d=j([]),l=j(!0);async function m(){const{geography:S,forestType:v,standAge:c,vegetationType:f}=s,G=`${o.dataType}-${S}-${v}-${c}-${f}.json`;try{const U=await fetch(`/${o.dataTypeFolder}/${G}`);if(!U.ok)throw new Error(`Failed to fetch data from ${G}`);d.value=await U.json(),l.value=!1}catch(U){console.error("Error fetching species data:",U)}}ie(()=>[s.geography,s.forestType,s.standAge,s.vegetationType],()=>{l.value=!0,m()},{immediate:!0});const E=j({column:"",direction:"asc"}),C=T(()=>{let S=d.value.slice();if(E.value?.column){const{column:v,direction:c}=E.value;S.sort((f,G)=>{const U=f[v],Z=G[v];if(U==null&&Z!=null)return 1;if(U!=null&&Z==null)return-1;if(U==null&&Z==null)return 0;const B=String(U).localeCompare(String(Z),"sv",{numeric:!0,sensitivity:"base"});return c==="asc"?B:-B})}else S.sort((v,c)=>{const f=v.RankRed??99999,G=c.RankRed??99999;if(f!==G)return f-G;const U=v.Commonname?.toString().toLowerCase()||"",Z=c.Commonname?.toString().toLowerCase()||"";return U.localeCompare(Z,"sv",{numeric:!0,sensitivity:"base"})});return S}),b=j(""),_=T(()=>{let S=C.value;if(b.value.trim()!==""){const v=b.value.trim().toLowerCase();S=S.filter(c=>c.Commonname&&c.Commonname.toLowerCase().includes(v)||c.Scientificname&&c.Scientificname.toLowerCase().includes(v))}return o.filterEdible?S=S.filter(v=>{const c=v["Nyasvamp-boken"];return c&&String(c).toLowerCase()==="x"}):o.filterPoison&&(S=S.filter(v=>{const c=v["Nyasvamp-boken"];return!(c&&String(c).toLowerCase()==="x")})),S}),k=T(()=>n.map(S=>{let v=0;return S.value==="Ej bedömd"?v=_.value.filter(c=>{const f=String(c.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(f)}).length:S.value==="Signalart"?v=_.value.filter(c=>c.SIGNAL_art==="S").length:v=_.value.filter(c=>String(c.RL2020kat).trim()===S.value).length,{...S,label:`${S.label} (${v})`}})),w=T(()=>{const S={};return _.value.forEach(v=>{const c=v[o.grupp];if(c!=null){const f=String(c).trim();f&&f.toLowerCase()!=="undefined"&&(S[f]=(S[f]||0)+1)}}),Object.keys(S).map(v=>({value:v,label:`${Y(v)} (${S[v]})`}))}),A=T(()=>{let S=C.value;if(b.value.trim()!==""){const v=b.value.trim().toLowerCase();S=S.filter(c=>c.Commonname&&c.Commonname.toLowerCase().includes(v)||c.Scientificname&&c.Scientificname.toLowerCase().includes(v)),console.log("After search filtering, count:",S.length)}return t.value.length>0&&(console.log("Status filter values:",t.value),S=S.filter(v=>{const c=String(v.RL2020kat).trim(),f=t.value.some(G=>{const U=G&&G.value?G.value:G;return U==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(c):U==="Signalart"?v.SIGNAL_art==="S":c===U});return console.log(`Row "${v.Commonname}" with RL2020kat "${c}" matches:`,f),f}),console.log("After status filtering, count:",S.length)),e.value.length>0&&(S=S.filter(v=>{const c=v[o.grupp],f=c!=null?String(c).trim():"";return e.value.includes(f)})),o.filterEdible?(S=S.filter(v=>{const c=v["Nyasvamp-boken"];return c&&String(c).toLowerCase()==="x"}),console.log("After edible filtering, count:",S.length)):o.filterPoison&&(S=S.filter(v=>{const c=v["Nyasvamp-boken"];return!(c&&String(c).toLowerCase()==="x")}),console.log("After poison filtering, count:",S.length)),console.log("Final filteredData count:",S.length),S}),h=T(()=>o.isNormalView?24:32),R=j(1),z=T(()=>{const S=(R.value-1)*h.value;return A.value.slice(S,S+h.value)}),O=T(()=>A.value.length>0?(R.value-1)*h.value+1:0),I=T(()=>Math.min(R.value*h.value,A.value.length)),Q=T(()=>A.value.length);function Y(S){return S?S.charAt(0).toUpperCase()+S.slice(1).toLowerCase():""}function pe(S){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[S]||"Ej bedömd"}function me(S){i.selectSpecies(S,o.dataTypeFolder)}return(S,v)=>{const c=Ot,f=qt,G=Xe,U=ke,Z=ra;return p(),P(Se,null,[y("div",nn,[g(c,{icon:"i-heroicons-magnifying-glass",modelValue:b.value,"onUpdate:modelValue":v[0]||(v[0]=B=>b.value=B),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),g(f,{modelValue:t.value,"onUpdate:modelValue":v[1]||(v[1]=B=>t.value=B),items:k.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),g(f,{modelValue:e.value,"onUpdate:modelValue":v[2]||(v[2]=B=>e.value=B),items:w.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),y("div",rn,[(p(!0),P(Se,null,Te(z.value,(B,V)=>(p(),P("div",{key:B.Commonname+B.Scientificname+V,class:"bg-white dark:bg-neutral-800 rounded-lg border overflow-hidden border-muted/50 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:q=>me(B)},[y("div",un,[B.images&&B.images.length?(p(),P("img",{key:0,src:B.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,cn)):(p(),P("div",dn,[g(G,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),y("div",gn,[B.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(B.RL2020kat)?(p(),K(U,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:B.RL2020kat!=="Saknas"?pe(B.RL2020kat):"Ej bedömd"},null,8,["label"])):M("",!0),B.SIGNAL_art==="S"?(p(),K(U,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):M("",!0)])]),y("div",pn,[y("div",mn,J(Y(B.Commonname)),1)])],8,ln))),128))]),y("div",vn,[y("div",null,[y("p",null," Visar "+J(O.value)+" till "+J(I.value)+" av "+J(Q.value)+" arter ",1)]),y("div",null,[g(Z,{"items-per-page":h.value,page:R.value,"onUpdate:page":v[3]||(v[3]=B=>R.value=B),total:Q.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},fn={class:"md:flex justify-between items-start"},hn={class:"w-full flex justify-between items-start"},bn={class:"text-md text-neutral-500 md:mb-2"},kn={class:"md:flex gap-1 items-center hidden"},yn={key:0},_n={key:1},xn={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Ee(),n=j(0);async function o(_,k,w,A=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(z=>!z)){w.value=0;return}const R=`${k}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const z=await fetch(`/${_}/${R}`);if(!z.ok)throw new Error("Network response was not ok");const O=await z.json();w.value=A?O.filter(I=>I[A]==="x").length:O.length}catch(z){console.error("Failed to fetch edible count",z),w.value=0}}ie(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("edible","edibledata",n,"Nyasvamp-boken"),{immediate:!0});const s=t,i=[{label:"Galleri",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"Tabell",icon:"material-symbols:table-outline",value:"table"}],d=pt(),l=r,m=Ue("(max-width: 767px)"),E=T(()=>m.value||l.isNormalView),C=T({get:()=>E.value?"table":d.getActiveTab("FullscreenEdible"),set:_=>{E.value||d.setActiveTab("FullscreenEdible",_)}}),b=T(()=>C.value==="table");return(_,k)=>{const w=Ke,A=ge,h=ut,R=gt,z=Ct,O=We;return p(),P("div",null,[g(O,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:F(()=>[y("div",fn,[y("div",hn,[y("div",null,[y("div",{onClick:k[0]||(k[0]=I=>_.$emit("enlarge")),class:"group cursor-pointer dark:text-neutral-300 text-warning-500 text-4xl md:text-3xl font-medium flex items-center"},[g(w,{name:"icon-park-solid:knife-fork",class:"mr-2"}),k[4]||(k[4]=y("h1",null," Matsvampar ",-1)),g(w,{name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})]),y("h2",bn,J(n.value)+" arter",1)]),g(A,{color:"neutral",variant:"soft",size:"xl",onClick:k[1]||(k[1]=I=>_.$emit("enlarge")),class:de([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])]),y("div",kn,[E.value?M("",!0):(p(),K(h,{key:0,class:"flex mt-2",modelValue:C.value,"onUpdate:modelValue":k[2]||(k[2]=I=>C.value=I),items:i,variant:"pill",color:"neutral",size:"md",ui:{list:"bg-transparent",indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),g(Re,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:F(()=>[b.value?(p(),P("div",yn,[g(R,{onEnlarge:k[3]||(k[3]=I=>s("enlarge")),"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(p(),P("div",_n,[g(z,{"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},Dt=Ae(xn,[["__scopeId","data-v-372515fe"]]),wn={class:"md:flex justify-between items-start"},Sn={class:"md:flex gap-4"},Cn={class:"w-full flex justify-between items-start"},Nn={class:"text-md text-neutral-500 md:mb-2"},$n={class:"md:flex gap-4 items-center hidden"},Tn={key:0},Ln={key:1},An={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Ee(),n=j(0);async function o(k,w,A,h=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(O=>!O)){A.value=0;return}const z=`${w}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const O=await fetch(`/${k}/${z}`);if(!O.ok)throw new Error("Network response was not ok");const I=await O.json();A.value=h?I.filter(Q=>Q[h]==="x").length:I.length}catch{A.value=0}}ie(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("edible","edibledata",n,"Giftsvamp"),{immediate:!0});const s=t,i=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],d=pt(),l=r,m=Ue("(max-width: 767px)"),E=T(()=>m.value||l.isNormalView),C=()=>{l.isNormalView&&s("enlarge")},b=T({get:()=>E.value?"table":d.getActiveTab("FullscreenEdible"),set:k=>{E.value||d.setActiveTab("FullscreenEdible",k)}}),_=T(()=>b.value==="table");return(k,w)=>{const A=Ke,h=ge,R=ut,z=gt,O=Ct,I=We;return p(),K(I,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:F(()=>[y("div",wn,[y("div",Sn,[y("div",Cn,[y("div",null,[y("div",{onClick:C,class:de(["flex items-center text-poison-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",r.isNormalView?"group cursor-pointer":"cursor-default"])},[g(A,{name:"i-hugeicons-danger",class:"mr-2"}),w[3]||(w[3]=y("h1",null," Giftsvampar ",-1)),r.isNormalView?(p(),K(A,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):M("",!0)],2),y("h2",Nn,J(n.value)+" arter",1)]),g(h,{color:"neutral",variant:"soft",size:"xl",onClick:w[0]||(w[0]=Q=>k.$emit("enlarge")),class:de([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),y("div",$n,[E.value?M("",!0):(p(),K(R,{key:0,class:"flex mt-2",modelValue:b.value,"onUpdate:modelValue":w[1]||(w[1]=Q=>b.value=Q),items:i,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),g(Re,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:F(()=>[_.value?(p(),P("div",Tn,[g(z,{onEnlarge:w[2]||(w[2]=Q=>s("enlarge")),"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(p(),P("div",Ln,[g(O,{"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Mt=Ae(An,[["__scopeId","data-v-e06edb37"]]),En={class:"md:flex justify-between items-start"},Vn={class:"md:flex gap-4"},Pn={class:"w-full flex justify-between items-start"},Bn={class:"text-md text-neutral-500 md:mb-2"},Fn={class:"md:flex gap-4 items-center hidden"},Rn={key:0},zn={key:1},Dn={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Ee(),n=j(0);async function o(k,w,A,h=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(O=>!O)){A.value=0;return}const z=`${w}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const O=await fetch(`/${k}/${z}`);if(!O.ok)throw new Error("Network response was not ok");const I=await O.json();A.value=h?I.filter(Q=>Q[h]==="x").length:I.length}catch(O){console.error("Failed to fetch count for",w,O),A.value=0}}ie(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("redlisted","redlisted",n),{immediate:!0});const s=t,i=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],d=r,l=Ue("(max-width: 767px)"),m=T(()=>l.value||d.isNormalView),E=pt(),C=T({get:()=>m.value?"table":E.getActiveTab("FullscreenEdible"),set:k=>{m.value||E.setActiveTab("FullscreenEdible",k)}}),b=()=>{d.isNormalView&&s("enlarge")},_=T(()=>C.value==="table");return(k,w)=>{const A=Ke,h=ge,R=ut,z=gt,O=Ct,I=We;return p(),K(I,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:F(()=>[y("div",En,[y("div",Vn,[y("div",Pn,[y("div",null,[y("div",{onClick:b,class:de(["flex items-center text-signal-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",r.isNormalView?"group cursor-pointer":"cursor-default"])},[g(A,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),w[3]||(w[3]=y("h1",{class:"truncate"}," Naturvårdsarter ",-1)),r.isNormalView?(p(),K(A,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):M("",!0)],2),y("h2",Bn,J(n.value)+" arter",1)]),g(h,{color:"neutral",variant:"soft",size:"xl",onClick:w[0]||(w[0]=Q=>k.$emit("enlarge")),class:de([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),y("div",Fn,[m.value?M("",!0):(p(),K(R,{key:0,class:"flex mt-2",modelValue:C.value,"onUpdate:modelValue":w[1]||(w[1]=Q=>C.value=Q),items:i,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),g(Re,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:F(()=>[_.value?(p(),P("div",Rn,[g(z,{onEnlarge:w[2]||(w[2]=Q=>s("enlarge")),"is-normal-view":r.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(p(),P("div",zn,[g(O,{"is-normal-view":r.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Ut=Ae(Dn,[["__scopeId","data-v-0d234cbe"]]),Mn={class:"grid grid-cols-12"},Un={class:"col-span-12"},jn={key:0,class:"flex justify-between p-3 border-b border-muted/50"},In={class:"flex gap-3"},Gn={class:"flex flex-col sm:flex-row gap-1.5 w-fit h-fit"},Kn={key:"dna",class:"col-span-12 sm:pt-2"},Wn={class:"hidden md:block"},On={class:"flex justify-between items-center text-secondary-500"},qn={class:"truncate"},Hn={class:"text-2xl font-semibold flex items-center"},Xn={key:1,class:"text-neutral-500"},Yn={class:"flex justify-between items-center text-warning-500"},Zn={class:"text-2xl font-semibold flex items-center"},Jn={key:1,class:"text-neutral-500"},Qn={class:"flex justify-between items-center text-poison-500"},er={class:"text-2xl font-semibold flex items-center"},tr={key:1,class:"text-neutral-500"},ar={class:"flex justify-between items-center text-signal-500"},or={class:"text-2xl font-semibold flex items-center"},sr={key:1,class:"text-neutral-500"},nr={class:"flex flex-col sm:flex-row gap-1.5 p-1 rounded-lg ring ring-muted/50 sm:w-fit h-fit bg-muted/30"},rr={key:"knowledge",class:"col-span-12 sm:pt-2"},lr={key:0,class:"space-y-4"},ir={key:1,class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},ur={class:"col-span-4 flex flex-col h-full"},cr={class:"col-span-4 flex flex-col"},dr={class:"col-span-4 flex flex-col"},gr={__name:"NormalView",props:{activeView:{type:String,default:null}},emits:["enlarge","closeView"],async setup(r,{emit:t}){let e,n;const{data:o}=([e,n]=Pa(()=>Ba("mykorrhizasvampar-normal",()=>Fa("mykorrhizasvampar").first())),e=await e,n(),e);if(!o.value)throw Ra({statusCode:404,statusMessage:"Page not found",fatal:!0});const s=j(!0),i=Ee(),d=Gt(),l=j(null),m=j(null),E=j(null),C=j(null),b=r,_=t,k={FullScreenEdible:"knowledge",FullScreenPoison:"knowledge",RedlistedComponent:"knowledge",FullScreenEdna:"knowledge"},w={FullScreenEdible:Dt,FullScreenPoison:Mt,RedlistedComponent:Ut,FullScreenEdna:zt},A=B=>{k[B]&&(h.value=k[B]),_("enlarge",B)},h=j("dna"),R=j(0),z=()=>{R.value=window.innerWidth};Ge(()=>{z(),window.addEventListener("resize",z)}),lt(()=>{window.removeEventListener("resize",z)});const O=T(()=>R.value<768),I=T(()=>i.geography),Q=T(()=>i.forestType),Y=T(()=>i.standAge),pe=T(()=>i.vegetationType),me=T(()=>w[b.activeView??""]??null),S=T(()=>b.activeView?b.activeView==="FullScreenEdible"||b.activeView==="FullScreenPoison"?{isNormalView:!1,geography:I.value,forestType:Q.value,standAge:Y.value,vegetationType:pe.value}:{isNormalView:!1}:{isNormalView:!1}),v=T(()=>b.activeView?`${b.activeView}-${d.fullPath}`:void 0),c=T(()=>b.activeView==="FullScreenEdna");function f(){h.value="dna",_("closeView")}const G=()=>{c.value?(h.value="knowledge",_("closeView")):A("FullScreenEdna")};ie(()=>b.activeView,B=>{B&&k[B]&&(h.value=k[B])}),ie(h,B=>{b.activeView&&k[b.activeView]!==B&&_("closeView")});async function U(B,V,q,H=null){if([i.geography,i.forestType,i.standAge,i.vegetationType].some(ue=>!ue)){q.value=0;return}const re=`${V}-${i.geography}-${i.forestType}-${i.standAge}-${i.vegetationType}.json`;try{const ue=await fetch(`/${B}/${re}`);if(!ue.ok)throw new Error("Network response was not ok");const ve=await ue.json();H?q.value=ve.filter(ce=>ce[H]==="x").length:q.value=ve.length}catch(ue){console.error("Failed to fetch count for",V,ue),q.value=0}}async function Z(){const B=i.geography,V=i.forestType,q=i.standAge,H=i.vegetationType;if(!B||!V||!q||!H){C.value=0;return}if(!dt(B,V,q,H)){C.value=0;return}const X=`edna-${B}-${V}-${q}-${H}.json`;try{const re=await fetch(`/edna/${X}`);if(!re.ok){C.value=0;return}const ue=await re.json();C.value=Array.isArray(ue)?ue.length:0}catch(re){console.error("Failed to fetch DNA count",re),C.value=0}}return ie(()=>[i.geography,i.forestType,i.standAge,i.vegetationType],()=>{U("redlisted","redlisted",l),U("edible","edibledata",m,"Nyasvamp-boken"),U("edible","edibledata",E,"Giftsvamp"),Z()},{immediate:!0}),(B,V)=>{const q=Wa,H=ge,X=Oa,re=Ke,ue=Wt,ve=We,ce=za,fe=It,be=qa,_e=Da,Ve=Ha,qe=Kt;return p(),P("div",Mn,[y("div",Un,[O.value?M("",!0):(p(),P("div",jn,[y("div",In,[g(H,{onClick:V[0]||(V[0]=xe=>h.value="dna"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-lg",variant:h.value==="dna"?"subtle":"outline",color:"neutral"},{default:F(()=>[g(q,{title:"Enligt DNA",description:"Från markinventeringens jordprover"})]),_:1},8,["variant"]),g(H,{onClick:V[1]||(V[1]=xe=>h.value="knowledge"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-lg",variant:h.value==="knowledge"?"subtle":"outline",color:"neutral"},{default:F(()=>[g(q,{title:"Enligt fruktkroppar",description:"Utifrån var fruktkroppar förekommer"})]),_:1},8,["variant"])]),y("div",Gn,[h.value!=="dna"?(p(),K(X,{key:0,color:h.value==="dna"?"secondary":"neutral",variant:"outline",ui:{close:" cursor-pointer"},title:h.value==="dna"?"Arterna är sorterade i fallande ordning baserat på hur många skogar deras DNA påträffats i.":"Arterna är sorterade i fallande ordning baserat på hur många gånger de har rapporterats i Artportalen.",class:"h-fit max-w-96 text-muted ring-muted/50","onUpdate:open":V[2]||(V[2]=xe=>s.value=xe)},null,8,["color","title"])):M("",!0)])])),g(Re,{name:"view-transition",mode:"out-in"},{default:F(()=>[h.value==="dna"?(p(),P("div",Kn,[y("div",Wn,[g(zt,{isNormalView:!c.value,onEnlarge:G},null,8,["isNormalView"])]),g(qe,{class:"md:hidden space-y-3 pt-3 bg-muted/50"},{default:F(()=>[g(q,{title:"Enligt DNA",description:"Från markinventeringens jordprover"}),g(ce,null,{default:F(()=>[g(ve,{onClick:V[3]||(V[3]=xe=>A("FullScreenEdna")),class:"ring-muted/50"},{default:F(()=>[y("div",On,[y("div",qn,[y("div",Hn,[g(re,{name:"solar:dna-linear",class:"mr-2"}),V[10]||(V[10]=y("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),C.value===null?(p(),K(ue,{key:0,class:"h-4 w-12 mt-2"})):(p(),P("h1",Xn,J(C.value)+" arter",1))]),g(H,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1}),g(q,{class:"mt-6",title:"Enligt fruktkroppar",description:"Utifrån vart fruktkroppar förekommer"}),g(ce,null,{default:F(()=>[g(ve,{onClick:V[4]||(V[4]=xe=>A("FullScreenEdible")),class:"ring-muted/50"},{default:F(()=>[y("div",Yn,[y("div",null,[y("h1",Zn,[g(re,{name:"icon-park-solid:knife-fork",class:"mr-2"}),V[11]||(V[11]=oe("Matsvampar ",-1))]),m.value===null?(p(),K(ue,{key:0,class:"h-4 w-12 mt-2"})):(p(),P("h1",Jn,J(m.value)+" arter",1))]),g(H,{icon:"i-heroicons-chevron-right",class:"rounded-full ring-muted/50",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1}),g(ce,null,{default:F(()=>[g(ve,{onClick:V[5]||(V[5]=xe=>A("FullScreenPoison")),class:"ring-muted/50"},{default:F(()=>[y("div",Qn,[y("div",null,[y("h1",er,[g(re,{name:"i-hugeicons-danger",class:"mr-2"}),V[12]||(V[12]=oe("Giftsvampar ",-1))]),m.value===null?(p(),K(ue,{key:0,class:"h-4 w-12 mt-2"})):(p(),P("h1",tr,J(E.value)+" arter",1))]),g(H,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1}),g(ce,null,{default:F(()=>[g(ve,{onClick:V[6]||(V[6]=xe=>A("RedlistedComponent")),class:"ring-muted/50"},{default:F(()=>[y("div",ar,[y("div",null,[y("h1",or,[g(re,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),V[13]||(V[13]=oe(" Naturvårdsarter ",-1))]),l.value===null?(p(),K(ue,{key:0,class:"h-4 w-12 mt-2"})):(p(),P("h1",sr,J(l.value)+" arter",1))]),g(H,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1}),g(fe,{class:"my-6"}),y("div",nr,[g(_e,{fullscreen:!!O.value,title:N(o).ecologyintro?.title??"",description:N(o).ecologyintro?.description??"",ui:{header:"items-start gap-2 shrink-0",title:"whitespace-normal",description:"whitespace-normal leading-snug"}},{body:F(()=>[g(be,{section:N(o).ecologyintro},null,8,["section"])]),default:F(()=>[g(X,{icon:"i-heroicons-newspaper",color:"neutral",variant:"outline",title:"Ekologi",class:"sm:w-fit h-fit ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","title","description"]),g(_e,{fullscreen:!!O.value,title:N(o).underlag,description:N(o).underlagdescription},{body:F(()=>[g(Ve,{underlag:N(o).underlag,underlagbild:N(o).underlagbild,sections:N(o).underlagSections},null,8,["underlag","underlagbild","sections"])]),default:F(()=>[g(X,{icon:"i-heroicons-document-magnifying-glass",color:"neutral",variant:"outline",title:"Underlag",class:"sm:w-fit h-fit ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","title","description"])])]),_:1})])):(p(),P("div",rr,[g(Re,{name:"fade",mode:"out-in"},{default:F(()=>[me.value?(p(),P("div",lr,[(p(),K(Ma(me.value),Le(S.value,{key:v.value,onEnlarge:f,class:"w-full"}),null,16))])):(p(),P("div",ir,[y("div",ur,[(p(),K(Dt,{geography:I.value,forestType:Q.value,standAge:Y.value,vegetationType:pe.value,isNormalView:!0,onEnlarge:V[7]||(V[7]=xe=>A("FullScreenEdible")),key:N(d).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),y("div",cr,[(p(),K(Mt,{geography:I.value,forestType:Q.value,standAge:Y.value,vegetationType:pe.value,isNormalView:!0,onEnlarge:V[8]||(V[8]=xe=>A("FullScreenPoison")),key:N(d).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),y("div",dr,[g(Ut,{isNormalView:!0,onEnlarge:V[9]||(V[9]=xe=>A("RedlistedComponent"))})])]))]),_:1})]))]),_:1})])])}}},pr=Ae(gr,[["__scopeId","data-v-1edd10c0"]]),mr={class:"bg-muted"},vr={class:"flex flex-col min-h-screen"},fr={__name:"DashboardC",setup(r){Ue("(max-width: 767px)");const t=Gt(),e=j(!1),n=j(!1),o=it(),s=Ee();ie(()=>o.selectedSpecies,_=>{_&&(e.value=!0)}),ie(e,_=>{_||o.clearSelection()});const i=j(null),d=T(()=>s.geography&&s.forestType&&s.standAge&&s.vegetationType),l=_=>{i.value=_},m=()=>{i.value=null},E=_=>{_.key==="Escape"&&o.selectedSpecies&&o.clearSelection()};function C(_){return Array.isArray(_)?_[0]??null:typeof _=="string"&&_.length>0?_:null}function b(_){const k={geography:C(_.geography),forestType:C(_.forestType),standAge:C(_.standAge),vegetationType:C(_.vegetationType)};k.geography&&k.forestType&&k.standAge&&k.vegetationType&&s.setParams(k)}return Ge(()=>{window.addEventListener("keydown",E),b(t.params)}),jt(()=>{window.removeEventListener("keydown",E)}),ie(()=>t.params,_=>{b(_)},{immediate:!0}),ie(()=>[s.geography,s.forestType,s.standAge,s.vegetationType],()=>{s.geography&&s.forestType&&s.standAge&&s.vegetationType&&`${encodeURIComponent(s.geography)}${encodeURIComponent(s.forestType)}${encodeURIComponent(s.standAge)}${encodeURIComponent(s.vegetationType)}`},{deep:!0}),ie(i,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(_,k)=>{const w=ws,A=ja,h=Ka,R=Kt;return p(),P("div",mr,[g(A,{modelValue:e.value,"onUpdate:modelValue":k[0]||(k[0]=z=>e.value=z),pinned:n.value,"onUpdate:pinned":k[1]||(k[1]=z=>n.value=z)},{default:F(()=>[g(w,{species:N(o).selectedSpecies,source:N(o).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),g(R,null,{default:F(()=>[g(Re,{name:"fade"},{default:F(()=>[d.value?(p(),K(h,{key:0})):M("",!0)]),_:1})]),_:1}),y("div",vr,[g(R,{class:"w-full px-0"},{default:F(()=>[g(Re,{name:"fade",mode:"out-in"},{default:F(()=>[g(pr,{class:"block sm:border border-muted/50 bg-white sm:rounded-xl sm:shadow mb-4","active-view":i.value,onEnlarge:l,onCloseView:m},null,8,["active-view"])]),_:1})]),_:1})])])}}},hr=Ae(fr,[["__scopeId","data-v-1305c0cd"]]),br={};function kr(r,t){const e=hr;return p(),K(e)}const Xr=Ae(br,[["render",kr]]);export{Xr as default};
