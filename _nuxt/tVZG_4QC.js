import{_ as he}from"./hg6Rz1vw.js";import{A as ke,aM as be,r as f,aC as P,aH as xe,V as g,J as O,d as M,f as h,O as w,g as o,M as k,w as r,T as we,n as U,aG as ye,aD as E,aE as Y,e as c,F as q,af as H,h as s,aB as Ce,aA as Te,t as y,aK as $e,ae as Se,au as Ne,_ as Me}from"#entry";import{M as Ue}from"./BSbQUHM2.js";import{_ as Ae}from"./Duw-C5su.js";import{_ as Ie}from"./C8njtYr8.js";import{_ as ze,a as Fe}from"./DGubEs0W.js";import{_ as Le}from"./CwSHej--.js";import{u as Ve,_ as De,a as je}from"./Cr8jaxZg.js";import{_ as Be}from"./DM_g21_0.js";import"./CfURT08s.js";import"./iik6CYzq.js";import"./BWuJ0jvd.js";import"./B6BaUEaW.js";import"./B0VoygWj.js";import"./BtJRc4mz.js";import"./Cpj98o6Y.js";import"./-SNjtLzu.js";const Pe=["onClick"],Oe={class:"text-lg p-2 px-3 font-medium"},Ee={class:"w-full rounded-xl relative overflow-hidden"},Ye={class:"grid gap-3 sm:gap-6 lg:grid-cols-3"},qe={class:"flex flex-col gap-6"},He={class:"text-4xl font-medium"},Ke={class:"flex flex-col gap-1"},Ge={key:0,class:"space-y-4"},Je={class:"flex w-full gap-2"},Qe={class:"space-y-2"},We={class:"text-xl font-semibold text-neutral-900"},Re={class:"text-sm text-muted"},Xe={class:"text-sm"},Ze={class:"grid grid-cols-2"},et={class:"flex justify-end"},tt=ke({__name:"index",async setup(at){let u,C;be("(max-width: 767px)");const T=f(!1),$=Ve(),{data:_}=([u,C]=P(()=>E("skogsskotsel",()=>Y("skogsskotsel").first())),u=await u,C(),u);if(!_.value)throw xe({statusCode:404,statusMessage:"Page not found",fatal:!0});const L=g(()=>_.value?.methods??[]),A={id:"",title:"",image:"",shortdescription:"",description:"",descriptionsvamp:""},b=f(null),l=g(()=>{const e=L.value;return!e.length||!b.value?A:e.find(t=>t.id===b.value)??A}),V=e=>{const t=e?.toLowerCase?.()??"";return t==="intekalavverkad"?"naturskog":t==="produktionsskog"?"produktionsskog_":e},D=e=>(e?.toLowerCase?.()??"")==="ingenatgard"?"naturskydd":e,I=e=>{const t=String(e).trim().toLowerCase();return t.includes("efter")?"efter":t.includes("innan")||t.includes("före")||t.includes("fore")?"fore":t.replace(/[^0-9]/g,"")||t},K=(e,t,i)=>{const a=v=>v.trim().normalize("NFD").replace(/å/gi,"a").replace(/ä/gi,"a").replace(/ö/gi,"o").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");return`/images/thumbnails/${`${a(e)}_${I(String(t))}_visa_visa_${a(i)}.webp`}`},{data:G}=([u,C]=P(()=>E("forestry-timeline-skogsskotsel",()=>Y("forestryTimelines").first())),u=await u,C(),u),S=[{label:"Inte kalavverkad",value:"naturskog"},{label:"Kalavverkad",value:"produktionsskog_"}],z=S.map(e=>({label:e.label,value:e.value,icon:e.value==="naturskog"?"i-material-symbols-light-forest-rounded":"i-ph-farm"})),d=f(z[$.selectedStartskog??0]?.value||z[0].value);O(()=>$.selectedStartskog,e=>{const t=S[e??0];t&&t.value!==d.value&&(d.value=t.value)},{immediate:!0});function J(e){d.value=e;const t=S.findIndex(i=>i.value===e);t!==-1&&($.selectedStartskog=t)}const Q=g(()=>S.find(e=>e.value===d.value)?.label??""),m=g(()=>{const e=G.value?.entries??[],t=l.value.id,i=D(t);return e.map(a=>({...a,startskog:V(a.startskog),atgard:D(a.atgard)})).filter(a=>a.startskog===V(d.value)&&a.atgard===i).map(a=>({tid:a.tid,skog:a.skog,svamp:a.svamp,thumb:K(a.atgard,a.tid,a.startskog)}))}),x=f(null),p=f(0);function W(){x.value?.emblaApi?.scrollPrev?.()}function R(){x.value?.emblaApi?.scrollNext?.()}function X(e){p.value=e}function Z(e){p.value=e,x.value?.emblaApi?.scrollTo?.(e)}O(m,e=>{p.value=0,e.length&&requestAnimationFrame(()=>{x.value?.emblaApi?.scrollTo?.(0)})});const ee=e=>{if(!e)return;const t=I(e);if(!t)return;if(t==="fore")return"före";if(t==="efter")return"efter";const i=Number(t);if(!Number.isNaN(i))return String(i)},te=g(()=>ee(m.value[p.value]?.tid));function ae(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function ne(e){if(!e)return"";const t=I(e);if(t==="fore")return"Innan avverkning";if(t==="efter")return"Efter avverkning";const i=Number(t);return Number.isNaN(i)?e.charAt(0).toUpperCase()+e.slice(1):`${i} år efter avverkning`}f([{label:"Intro",icon:"i-heroicons-book-open",slot:"text"},{label:"Diagram",icon:"i-heroicons-presentation-chart-line",slot:"diagram"},{label:"Tidslinje",icon:"i-heroicons-list-bullet",slot:"timeline"}]),f("description");const oe=g(()=>[{label:`Om ${(l.value.title||"").toLowerCase()}`,icon:"i-hugeicons-tree-06",value:"description",content:l.value.description||""},{label:"Påverkan på mykorrhizasvampar",icon:"i-hugeicons-mushroom",value:"svamp",content:l.value.descriptionsvamp||""}]),se={naturskydd:0,trakthygge:1,luckhuggning:2,skarmtrad:3,skärmträd:3,bladning:4,blädning:4},le=e=>(e||"").trim().normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase();function ie(){const e=le(l.value.id),t=se[e];typeof t=="number"&&($.selectedFramework=t),T.value=!0}return(e,t)=>{const i=he,a=ye,j=Ce,v=Te,B=Ue,re=Ae,ce=Ie,F=ze,ue=Le,de=De,me=Fe,pe=Se,fe=je,_e=Ne,ve=Be,ge=$e;return w(_)?(c(),M("div",{key:0,class:U(["flex-1 transition-all",l.value.id?"bg-neutral-50":""])},[o(we,{name:"fade"},{default:r(()=>[l.value.id?h("",!0):(c(),k(a,{key:0,class:"w-full px-0"},{default:r(()=>[o(i,{ui:{container:"py-12 lg:py-24",title:"sm:text-7xl",headline:"text-neutral"},title:w(_).hero.title,description:w(_).hero.description,orientation:w(_).hero.orientation,class:""},null,8,["title","description","orientation"])]),_:1}))]),_:1}),o(a,{class:U(["w-full flex flex-col sm:flex-row justify-between py-4 gap-6 overflow-scroll lg:overflow-hidden transition-all",l.value.id?"mt-0":"mt-8"])},{default:r(()=>[(c(!0),M(q,null,H(L.value,n=>(c(),k(B,{key:n.id,class:"relative",initial:{scale:1,transform:"translateY(10px)",opacity:0},animate:{scale:1,transform:"translateY(0px)",opacity:1},transition:{duration:.3,delay:.3+.05*(n.index??0)}},{default:r(()=>[s("div",{onClick:N=>b.value=n.id,class:U(["shrink-0 lg:shrink sm:w-58 lg:w-full bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded h-fit shadow hover:shadow-md relative cursor-pointer",b.value?b.value===n.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[n.type&&!l.value.id?(c(),k(j,{key:0,class:"absolute top-2 left-2",label:n.type,color:"neutral",variant:"subtle"},null,8,["label"])):h("",!0),l.value.id?h("",!0):(c(),k(v,{key:1,src:n.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"])),s("h1",Oe,y(n.title),1)],10,Pe)]),_:2},1032,["transition"]))),128))]),_:1},8,["class"]),l.value.id?(c(),k(a,{key:0,class:"w-full pt-2 px-1 sm:px-6"},{default:r(()=>[o(B,{class:"flex justify-center w-full",initial:{opacity:0,transform:"translateY(10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.5}},{default:r(()=>[s("div",Ee,[o(ge,{class:"p-3 pt-0 sm:pt-3"},{default:r(()=>[s("div",Ye,[s("div",qe,[s("h1",He,y(l.value.title),1),o(v,{src:l.value.image,width:"420",height:"250",class:"rounded ring ring-muted/50"},null,8,["src"]),o(F,{variant:"soft",ui:{body:"py-1 sm:py-1"}},{default:r(()=>[o(ce,{items:oe.value,"unmount-on-hide":!1,"default-value":["description"],ui:{trigger:"text-base font-medium",body:"text-md/7 text-neutral-800"}},{body:r(({item:n})=>[o(re,{value:n.content,unwrap:"p"},null,8,["value"])]),_:1},8,["items"])]),_:1})]),s("div",Ke,[o(ue,{items:w(z),modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=n=>d.value=n),onChange:J,variant:"solid",size:"lg",class:"w-full",ui:{list:"grid grid-cols-2 gap-1 p-1 bg-muted/60 ring ring-muted/50 rounded",trigger:"data-[state=active]:bg-white data-[state=active]:text-neutral-900 px-4 py-2 text-sm font-medium"}},null,8,["items","modelValue"]),o(F,{ui:{body:"p-1 sm:p-1"},class:"ring-muted/50 h-full"},{default:r(()=>[o(de,{parentSelectedFrameworks:[l.value.id],currentStartskog:d.value,currentTimeValue:te.value},null,8,["parentSelectedFrameworks","currentStartskog","currentTimeValue"])]),_:1})]),m.value.length?(c(),M("div",Ge,[o(me,{ref_key:"timelineCarousel",ref:x,items:m.value,prev:{onClick:W},next:{onClick:R},class:"w-full bg-neutral-950 overflow-hidden rounded-lg ring-muted/50",fade:"",onSelect:X},{default:r(({item:n})=>[o(v,{src:n.thumb,alt:`Foto ${n.tid}`,width:"960",height:"540",class:"w-full aspect-video object-cover"},null,8,["src","alt"])]),_:1},8,["items","prev","next"]),s("div",Je,[(c(!0),M(q,null,H(m.value,(n,N)=>(c(),k(pe,{key:`timeline-thumb-${N}`,color:"neutral",class:U(["ring-muted/50 w-full flex justify-center",N===p.value?"border-neutral-900 opacity-100 shadow":"border-transparent opacity-60 hover:opacity-100"]),variant:"outline",type:"button",onClick:nt=>Z(N),label:ae(n.tid)},null,8,["class","onClick","label"]))),128))]),o(F,{class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 ring-muted/50"},{default:r(()=>[s("div",Qe,[s("h3",We,y(ne(m.value[p.value]?.tid)),1),s("p",Re,y(Q.value),1),s("p",Xe,y(m.value[p.value].svamp),1)])]),_:1})])):h("",!0)]),o(_e,{open:T.value,"onUpdate:open":t[2]||(t[2]=n=>T.value=n),fullscreen:""},{content:r(()=>[o(fe,{onClose:t[1]||(t[1]=n=>T.value=!1)})]),_:1},8,["open"]),s("div",Ze,[t[3]||(t[3]=s("div",null,null,-1)),o(ve,{title:"Öppna modell i helskärm",description:"I helskärm går det att jämföra olika metoder och visa fler lager med mer information. ",icon:"i-material-symbols:interactive-space",class:"mt-6 sm:mt-12 cursor-pointer",variant:"soft",orientation:"horizontal",onClick:ie},{default:r(()=>[s("div",et,[o(v,{src:"images/modell.png",height:"150"})])]),_:1})])]),_:1})])]),_:1})]),_:1})):h("",!0)],2)):h("",!0)}}}),xt=Me(tt,[["__scopeId","data-v-002f3b02"]]);export{xt as default};
