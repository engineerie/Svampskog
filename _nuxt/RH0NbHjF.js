import{_ as ha}from"./0jE9L5HG.js";import{A as _e,Z as Re,M as K,e as g,w as F,N as ke,ah as se,Y as Ae,O as $,P as ze,B as ba,C as ka,I as ya,V as N,ar as _a,as as xa,t as Q,aI as bt,r as U,d as E,o as Ge,K as kt,c as nt,J as ie,h as b,g as p,aO as yt,f as D,am as Ke,aB as rt,n as ce,ae as ye,aR as wa,_ as Le,U as Sa,T as Ee,a4 as Ca,a6 as Na,y as $a,a7 as Ta,a8 as La,aa as At,F as we,af as Te,aM as De,aW as jt,ac as Aa,be as W,bf as Ea,bg as Va,aL as It,bh as Pa,bi as Ba,aC as Fa,aD as Ra,aE as za,aH as Ma,bj as Gt,aG as Kt,au as Da,ay as Ua}from"#entry";import{_ as ja}from"./DcbQ0IOL.js";import{_ as Oe}from"./Dg0PInZE.js";import{c as Ia,g as Ga,d as Ka,e as Ot,b as Oa}from"./vvRmOyfW.js";import{u as lt,_ as Wa}from"./B_ujPsLJ.js";import{_ as qa}from"./qRU1y57_.js";import{_ as Ha,a as Ya}from"./B_4Mqb7j.js";import{_ as it}from"./ykIe5TGn.js";import{_ as Wt}from"./BqJE4Gru.js";import{_ as qt}from"./Ch4XWgsx.js";import{u as Ve}from"./Dm3SEL7P.js";import{P as re,c as Se,i as _t,t as Et,s as vt,m as Xa,X as Ht,O as Yt,a as Xt,b as Zt,g as Ne,d as mt,e as Za,f as qe,h as Ja,j as Vt,k as Fe,l as Ie,n as Qa,r as eo,o as ft,p as to,q as ao,u as Pt,F as oo,v as so,w as no,x as ro,y as xt,z as wt,A as lo,B as io,S as uo,C as Bt}from"./B6QFrq5k.js";import"./a06xM3bk.js";import"./C7aA8FHg.js";import"./DtaPNFOl.js";import"./BucMS6B2.js";import"./wjXI7ddW.js";import"./4teU0cSk.js";import"./BEtnJs0S.js";import"./Bv4DOzcY.js";import"./CVYhzE13.js";import"./iik6CYzq.js";import"./BAukkL0b.js";import"./BstbYvQo.js";import"./Cpj98o6Y.js";var co=_e({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r;return Re(),(e,n)=>(g(),K($(ze),Ae(t,{"data-type":"ellipsis"}),{default:F(()=>[ke(e.$slots,"default",{},()=>[n[0]||(n[0]=se("…"))])]),_:3},16))}}),go=co;const[We,po]=ba("PaginationRoot");var vo=_e({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(r,{emit:t}){const e=r,n=t,{siblingCount:o,disabled:s,showEdges:i}=ka(e);Re();const d=ya(e,"page",n,{defaultValue:e.defaultPage,passive:e.page===void 0}),l=N(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return po({page:d,onPageChange(v){d.value=v},pageCount:l,siblingCount:o,disabled:s,showEdges:i}),(v,V)=>(g(),K($(ze),{as:v.as,"as-child":v.asChild},{default:F(()=>[ke(v.$slots,"default",{page:$(d),pageCount:l.value})]),_:3},8,["as","as-child"]))}}),mo=vo,fo=_e({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r,e=We();Re();const n=N(()=>e.page.value===1||e.disabled.value);return(o,s)=>(g(),K($(ze),Ae(t,{"aria-label":"First Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&$(e).onPageChange(1))}),{default:F(()=>[ke(o.$slots,"default",{},()=>[s[1]||(s[1]=se("First page"))])]),_:3},16,["type","disabled"]))}}),ho=fo,bo=_e({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r,e=We();Re();const n=N(()=>e.page.value===e.pageCount.value||e.disabled.value);return(o,s)=>(g(),K($(ze),Ae(t,{"aria-label":"Last Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&$(e).onPageChange($(e).pageCount.value))}),{default:F(()=>[ke(o.$slots,"default",{},()=>[s[1]||(s[1]=se("Last page"))])]),_:3},16,["type","disabled"]))}}),ko=bo;function Be(r,t){const e=t-r+1;return Array.from({length:e},(n,o)=>o+r)}function yo(r){return r.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const et="ellipsis";function _o(r,t,e,n){const s=t,i=Math.max(r-e,1),d=Math.min(r+e,s);if(n){const v=Math.min(2*e+5,t)-2,V=i>3&&Math.abs(s-v-1+1)>2&&Math.abs(i-1)>2,S=d<s-2&&Math.abs(s-v)>2&&Math.abs(s-d)>2;if(!V&&S)return[...Be(1,v),et,s];if(V&&!S){const _=Be(s-v+1,s);return[1,et,..._]}if(V&&S){const _=Be(i,d);return[1,et,..._,et,s]}return Be(1,s)}else{const l=e*2+1;return t<l?Be(1,s):r<=e+1?Be(1,l):t-r<=e?Be(t-l+1,s):Be(i,d)}}var xo=_e({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r;Re();const e=We(),n=N(()=>yo(_o(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(o,s)=>(g(),K($(ze),_a(xa(t)),{default:F(()=>[ke(o.$slots,"default",{items:n.value})]),_:3},16))}}),wo=xo,So=_e({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;Re();const e=We(),n=N(()=>e.page.value===t.value),o=N(()=>e.disabled.value);return(s,i)=>(g(),K($(ze),Ae(t,{"data-type":"page","aria-label":`Page ${s.value}`,"aria-current":n.value?"page":void 0,"data-selected":n.value?"true":void 0,disabled:o.value,type:s.as==="button"?"button":void 0,onClick:i[0]||(i[0]=d=>!o.value&&$(e).onPageChange(s.value))}),{default:F(()=>[ke(s.$slots,"default",{},()=>[se(Q(s.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Co=So,No=_e({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;Re();const e=We(),n=N(()=>e.page.value===e.pageCount.value||e.disabled.value);return(o,s)=>(g(),K($(ze),Ae(t,{"aria-label":"Next Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&$(e).onPageChange($(e).page.value+1))}),{default:F(()=>[ke(o.$slots,"default",{},()=>[s[1]||(s[1]=se("Next page"))])]),_:3},16,["type","disabled"]))}}),$o=No,To=_e({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;Re();const e=We(),n=N(()=>e.page.value===1||e.disabled.value);return(o,s)=>(g(),K($(ze),Ae(t,{"aria-label":"Previous Page",type:o.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=i=>!n.value&&$(e).onPageChange($(e).page.value-1))}),{default:F(()=>[ke(o.$slots,"default",{},()=>[s[1]||(s[1]=se("Prev page"))])]),_:3},16,["type","disabled"]))}}),Lo=To;function Ao(r){let t;for(;t=r.sourceEvent;)r=t;return r}function st(r,t){if(r=Ao(r),t===void 0&&(t=r.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=r.clientX,n.y=r.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var o=t.getBoundingClientRect();return[r.clientX-o.left-t.clientLeft,r.clientY-o.top-t.clientTop]}}return[r.pageX,r.pageY]}const Ft=r=>+r,Eo={components:[],container:void 0,followCursor:!0,allowHover:!1,horizontalPlacement:re.Auto,horizontalShift:0,verticalPlacement:re.Top,verticalShift:0,attributes:{},triggers:{},className:void 0,showDelay:void 0,hideDelay:void 0},ut=Se`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  opacity: 0;
  transition: opacity;
  transition-duration: var(--vis-tooltip-transition-duration);
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  color: var(--vis-tooltip-text-color);
  border-radius: var(--vis-tooltip-border-radius);
  box-shadow: var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,Vo=ut,Po=_t`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;
    --vis-tooltip-border-radius: 5px;
    --vis-tooltip-transition-duration: 300ms;
    --vis-tooltip-box-shadow: none;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${ut}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,Jt=Se`
  bottom: unset;
  position: fixed;
`,tt=Se`
  opacity: 1;
`,at=Se`
  display: none;
`,Qt=Se`
  label: non-interactive;
  pointer-events: none;
  user-select: none;
`,Bo=Object.freeze(Object.defineProperty({__proto__:null,hidden:at,nonInteractive:Qt,positionFixed:Jt,root:ut,show:tt,tooltip:Vo,variables:Po},Symbol.toStringTag,{value:"Module"}));class ea{constructor(t={}){this._defaultConfig=Eo,this.config=this._defaultConfig,this._setUpEventsThrottled=Et(this._setUpEvents,500),this._setContainerPositionThrottled=Et(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement("div"),this.div=vt(this.element).attr("class",ut).classed(tt,!1).classed(at,!0),this.setConfig(t),this.components=this.config.components,this._mutationObserver=new MutationObserver(()=>{this._isShown&&(!this.config.followCursor&&this._hoveredElement?this.placeByElement(this._hoveredElement):this._position&&this.place({x:this._position[0],y:this._position[1]}))}),this._mutationObserver.observe(this.div.node(),{childList:!0,subtree:!0})}setConfig(t){var e;this.prevConfig=this.config,this.config=Xa(this._defaultConfig,t),this.prevConfig.horizontalPlacement!==this.config.horizontalPlacement&&this.overrideHorizontalPlacement(void 0),this.config.container&&this.config.container!==((e=this.prevConfig)===null||e===void 0?void 0:e.container)&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(t){var e;(e=this.element.parentNode)===null||e===void 0||e.removeChild(this.element),this._container=t,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(t){this.components=t}update(){this._container&&this._setUpEventsThrottled()}show(t,e){this.render(t),this.place(e)}_hide(){this.div.classed(tt,!1).on("transitionend",()=>{this.div.classed(at,!this._isShown)}),this._isShown=!1}hide(){window.clearTimeout(this._showDelayTimeoutId),this.config.hideDelay?(window.clearTimeout(this._hideDelayTimeoutId),this._hideDelayTimeoutId=setTimeout(()=>this._hide(),this.config.hideDelay)):this._hide()}_display(){window.clearTimeout(this._hideDelayTimeoutId),this.div.classed(at,!1).classed(tt,!0),this._isShown=!0}display(){this._isShown||(this.config.showDelay?(window.clearTimeout(this._showDelayTimeoutId),this._showDelayTimeoutId=setTimeout(()=>{this._display(),this.place({x:this._position[0],y:this._position[1]})},this.config.showDelay)):this._display())}place(t){if(this._position=[t.x,t.y],!this.hasContainer()){console.warn("Unovis | Tooltip: Container was not set or is not initialized yet");return}const{config:e}=this,n=this.element.offsetWidth,o=this.element.offsetHeight,s=this._overriddenHorizontalPlacement||(e.horizontalPlacement===re.Auto?re.Center:e.horizontalPlacement),i=e.verticalPlacement===re.Auto?t.y-o<0?re.Bottom:re.Top:e.verticalPlacement,d=5,l=s===re.Left?-n-d-e.horizontalShift:s===re.Center?-n/2:d+e.horizontalShift,v=i===re.Bottom?d+e.verticalShift:i===re.Center?-o/2:-d-e.verticalShift-o,[V,S]=this._constraintPosToContainer(t.x+l,t.y+v,n,o);this._applyPosition(V,S,o)}placeByElement(t){const{config:e}=this;this._hoveredElement=t;const n=5,o=this.element.offsetWidth,s=this.element.offsetHeight,i=this.isContainerBody(),d=i?window.innerWidth:this._container.scrollWidth,l=t.getBoundingClientRect(),v=i?[l.x,l.y]:st({clientX:l.x,clientY:l.y,pageX:l.x,pageY:l.y},this._container),V=this._overriddenHorizontalPlacement||(e.horizontalPlacement===re.Auto?v[0]-o<0?re.Right:v[0]+o>d?re.Left:re.Center:e.horizontalPlacement);let S=0;switch(V){case re.Left:S=-o-n-e.horizontalShift;break;case re.Right:S=l.width+n+e.horizontalShift;break;case re.Center:default:S=(-o+l.width)/2;break}const k=e.verticalPlacement===re.Auto?V!==re.Center?re.Center:v[1]-s<0?re.Bottom:re.Top:e.verticalPlacement;let _=-s;switch(k){case re.Center:_+=(s+l.height)/2;break;case re.Bottom:_+=s+l.height+n+e.verticalShift;break;case re.Top:default:_+=-n-e.verticalShift;break}const[y,x]=this._constraintPosToContainer(v[0]+S,v[1]+_,o,s);this._applyPosition(y,x,s)}isContainerBody(){return this._container===document.body}overrideHorizontalPlacement(t){this._overriddenHorizontalPlacement=t}render(t){var e;const{config:n,prevConfig:o}=this;t instanceof HTMLElement?this.div.select(":first-child").node()!==t&&this.div.html("").append(()=>t):t&&this.div.html(t),this.div.classed((e=n.className)!==null&&e!==void 0?e:"",!!n.className).classed(Qt,!n.allowHover),o?.className&&o.className!==n.className&&this.div.classed(o.className,!1),this.display()}_applyPosition(t,e,n){const o=this.isContainerBody(),s=o?window.innerHeight:this._container.scrollHeight;this.div.classed(Jt,o).style("top",o?`${e}px`:"unset").style("bottom",o?"unset":`${s-e-n}px`).style("left",`${t}px`)}_constraintPosToContainer(t,e,n,o){const s=this.isContainerBody(),i=s?window.innerHeight:this._container.scrollHeight,d=s?window.innerWidth:this._container.scrollWidth,l=10,v=t>d-n-l,V=t<l,S=v?d-n-l:V?l:t,k=10,_=e>i-o-k,y=e<k,x=_?i-o-k:y?k:e;return[d<n?0:S,i<o?0:x]}_setContainerPosition(){var t;this._container!==document.body&&((t=getComputedStyle(this._container))===null||t===void 0?void 0:t.position)==="static"&&(this._container.style.position="relative")}_setUpEvents(){const{config:t}=this;this.components.forEach(e=>{const n=vt(e.element);n.on("mousemove.tooltip",o=>{const{config:s}=this,i=o.composedPath&&o.composedPath()||o.path||[o.target];for(const d of Object.keys(s.triggers)){const l=s.triggers[d];if(!l)continue;const v=n.selectAll(`.${d}`).nodes();for(const V of i){if(V===n.node())break;if(V.classList.contains(d)){const S=v.indexOf(V),k=vt(V).datum(),_=l(k,S,v),[y,x]=this.isContainerBody()?[o.clientX,o.clientY]:st(o,this._container);_===null?this.hide():(this.render(_),s.followCursor?this.place({x:y,y:x}):this.placeByElement(V)),o.stopPropagation();return}}}this._isShown&&this.hide()}).on("mouseleave.tooltip",o=>{o.stopPropagation(),this.hide()})}),t.allowHover?this.div.on("mouseenter.tooltip",this._display.bind(this)).on("mouseleave.tooltip",this.hide.bind(this)):this.div.on("mouseenter.tooltip",null).on("mouseleave.tooltip",null)}_setUpAttributes(){const t=this.config.attributes;t&&Object.keys(t).forEach(e=>{this.div.attr(e,t[e])})}destroy(){var t;this._mutationObserver.disconnect(),window.clearTimeout(this._hideDelayTimeoutId),window.clearTimeout(this._showDelayTimeoutId),(t=this.div)===null||t===void 0||t.remove()}}ea.selectors=Bo;const Fo=Object.assign(Object.assign({},Ht),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:Yt.Vertical}),ta=Se`
  label: stacked-bar-component;
`,Ro=_t`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${ta}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,ot=Se`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,ht=Se`
  label: barGroup;
`,aa=Se`
  label: barGroupExit;
`,zo=Object.freeze(Object.defineProperty({__proto__:null,bar:ot,barGroup:ht,barGroupExit:aa,globalStyles:Ro,root:ta},Symbol.toStringTag,{value:"Module"}));class St extends Xt{constructor(t){super(),this._defaultConfig=Fo,this.config=this._defaultConfig,this.getAccessors=()=>Zt(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],t&&this.setConfig(t)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const t=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],e=this.dataScale.domain(),n=this._getBarWidth()/2,o=this._barData.map((_,y)=>Ne(_,this.config.x,y)),s=mt(o),i=Za(o),d=this.dataScale(s),l=this.dataScale(i),v=this.dataScale.invert(d+(t?n:-n)),V=this.dataScale.invert(l+(t?-n:n)),S=v<=e[0]?this.dataScale(e[0])-this.dataScale(v):0,k=V>e[1]?this.dataScale(V)-this.dataScale(e[1]):0;return{top:this.isVertical()?0:t?-k:S,bottom:this.isVertical()?0:t?-S:k,left:this.isVertical()?S:0,right:this.isVertical()?k:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===Yt.Vertical}_render(t){const{config:e}=this,n=qe(t)?t:e.duration,o=this.getAccessors(),s=Ja(this._barData,0,o,this._prevNegative);this._prevNegative=s.map(y=>!!y.isMostlyNegative);const i=this.g.selectAll(`.${ht}`).data(this._barData,(y,x)=>{var A;return`${(A=Vt(y,e.id,x))!==null&&A!==void 0?A:x}`}),d=(y,x)=>{const A=this.dataScale(Ne(y,e.x,x)),h=this.isVertical()?A:0,P=this.isVertical()?0:A;return`translate(${h},${P})`},v=i.enter().append("g").attr("class",ht).attr("transform",d).style("opacity",1).merge(i);Fe(v,n).attr("transform",d).style("opacity",1);const V=i.exit().attr("class",aa);Fe(V,n).style("opacity",0).remove(),Fe(V.selectAll(`.${ot}`),n).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const S=v.selectAll(`.${ot}`).data((y,x)=>s.map((A,h)=>Object.assign(Object.assign({},y),{_index:x,_stacked:A[x],_ending:h===s.length-1||h<=s.length-1&&s[h+1][x][0]!==A[x][1]}))),_=S.enter().append("path").attr("class",ot).attr("d",(y,x)=>this._getBarPath(y,x,!0)).style("fill",(y,x)=>Ie(y,e.color,x)).merge(S);Fe(_,n).attr("d",(y,x)=>this._getBarPath(y,x)).style("fill",(y,x)=>Ie(y,e.color,x)).style("cursor",(y,x)=>Vt(y,e.cursor,x)),Fe(S.exit(),n).style("opacity",0).remove()}_getBarWidth(){const{config:t,datamodel:{data:e}}=this;if(Qa(e))return 0;if(t.barWidth)return mt([t.barWidth,t.barMaxWidth]);const n=this.dataScale.bandwidth,o=this.dataScale.domain?this.dataScale.domain():[];let i=1+(n?o.length:o[1]-o[0])/t.dataStep||!n&&e.filter((v,V)=>{const S=Ne(v,t.x,V);return S>=o[0]&&S<=o[1]}).length||e.length;!n&&i>=2&&(i+=1);const l=(i<2?1:1-t.barPadding)*(this.isVertical()?this._width:this._height)/i;return mt([l,t.barMaxWidth])}_getVisibleData(){const{config:t,datamodel:{data:e}}=this,n=this._getBarWidth(),o=e.length<2?0:n/2,s=this.dataScale,i=Math.abs(s.invert(o)-s.invert(0));return e?.filter((l,v)=>{const V=Ne(l,t.x,v),S=s.domain(),k=+S[0],_=+S[1];return V>=k-i&&V<=_+i})}_getBarPath(t,e,n=!1){const{config:o}=this,s=this.getAccessors(),i=this._getBarWidth(),d=t._stacked[1]<0,l=t._ending,v=Ne(t,s[e],t._index),V=n?0:Math.abs(this.valueScale(t._stacked[0])-this.valueScale(t._stacked[1])),S=!n&&o.barMinHeight1Px&&V<1&&isFinite(v)&&v!==o.barMinHeightZeroValue?1:V,k=n?this.valueScale(0):this.valueScale(d?t._stacked[0]:t._stacked[1])-(V<1&&o.barMinHeight1Px?1:0),_=-i/2,y=i,x=o.roundedCorners?qe(o.roundedCorners)?+o.roundedCorners:y/2:0,A=ft(x,0,Math.min(V,y)/2),h=this.yScale.range()[0]>this.yScale.range()[1];return eo({x:this.isVertical()?_:k-S,y:this.isVertical()?k+(h?0:-S):_,w:this.isVertical()?y:S,h:this.isVertical()?S:y,tl:l&&(this.isVertical()?!d&&h||d&&!h:d),tr:l&&(this.isVertical()?!d&&h||d&&!h:!d),br:l&&(this.isVertical()?d&&h||!d&&!h:!d),bl:l&&(this.isVertical()?d&&h||!d&&!h:d),r:A})}getValueScaleExtent(t){const{datamodel:e}=this,n=this.getAccessors(),o=t?this._getVisibleData():e.data;return to(o,...n)}getDataScaleExtent(){const{config:t,datamodel:e}=this;return ao(e.data,t.x)}getYDataExtent(t){return this.isVertical()?this.getValueScaleExtent(t):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}St.selectors=zo;const Mo=Object.assign(Object.assign({},Ht),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(r,t,e,n)=>"",hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0,onCrosshairMove:void 0,forceShowAt:void 0}),Do=_t`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,Uo=Se`
  label: crosshair-component;
`,oa=Se`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,sa=Se`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`,jo=Object.freeze(Object.defineProperty({__proto__:null,circle:sa,globalStyles:Do,line:oa,root:Uo},Symbol.toStringTag,{value:"Module"}));class na extends Xt{constructor(t){super(),this.clippable=!0,this._defaultConfig=Mo,this.config=this._defaultConfig,this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},t&&this.setConfig(t),this.g.style("opacity",0),this.line=this.g.append("line").attr("class",oa)}set accessors(t){this._accessors=t}get accessors(){var t;const{config:e}=this,n=!!(e.x||e.y||e.yStacked),o=n?e.x:this._accessors.x,s=n?e.y:this._accessors.y,i=s?Zt(s)?s:[s]:void 0,d=n?e.yStacked:this._accessors.yStacked,l=(t=e.baseline)!==null&&t!==void 0?t:this._accessors.baseline;return{x:o,y:i,yStacked:d,baseline:l}}_isContainerInViewport(){var t;if(!(!((t=this.container)===null||t===void 0)&&t.node()))return!1;const e=this.container.node().getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,o=window.innerHeight||document.documentElement.clientHeight,s=Math.max(0,Math.min(e.right,n)-Math.max(e.left,0)),i=Math.max(0,Math.min(e.bottom,o)-Math.max(e.top,0)),d=e.width*e.height,l=s*i;return d>0&&l/d>=.35}setContainer(t){this.container!==t&&(this.container=t,this.container.on("mousemove.crosshair",this._onMouseMove.bind(this)),this.container.on("mouseout.crosshair",this._onMouseOut.bind(this)),this.container.on("wheel.crosshair",this._onWheel.bind(this)))}_render(t){var e,n,o,s,i;const{config:d,datamodel:l}=this,v=qe(t)?t:d.duration,V=d.forceShowAt!==void 0,S=V?this.xScale(d.forceShowAt):this._xPx,k=this.xScale.invert(S),_=!((e=l.data)===null||e===void 0)&&e.length&&this.accessors.x?l.data.indexOf(Pt(l.data,k,this.accessors.x,oo.Left)):void 0;let y,x;d.snapToData&&(!this.accessors.y&&!this.accessors.yStacked&&(!((n=l.data)===null||n===void 0)&&n.length)&&console.warn("Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object"),!(!((o=l.data)===null||o===void 0)&&o.length)&&this._mouseEvent&&console.warn("Unovis | Crosshair: No data to snap to. Make sure the data has been passed to the container or to the crosshair itself"),y=Pt(l.data,k,this.accessors.x),x=l.data.indexOf(y));const A=this.xScale.range(),h=this.yScale.range(),P=d.snapToData&&y?ft(Math.round(this.xScale(Ne(y,this.accessors.x,x))),0,this._width):ft(S,A[0],A[1]),B=S>=A[0]&&S<=A[1],H=this._yPx>=h[1]&&this._yPx<=h[0];let I=this._xPx?B&&H:B;d.hideWhenFarFromPointer&&Math.abs(P-+S)>=d.hideWhenFarFromPointerDistance&&(I=!1);const ee=(s=d.tooltip)!==null&&s!==void 0?s:this.tooltip;if(I&&ee&&this._isContainerInViewport()){const w=ee.getContainer()||this.container.node(),m=ee.isContainerBody();if(V){const u=this.container.node().getBoundingClientRect(),f=(m?S+u.left:S)+this._containerMargin.left,G=this._height/2+(m?u.top:0),j=[f,G];this._showTooltip(y,k,j,_)}else if(this._mouseEvent){const u=m?[this._mouseEvent.clientX,this._mouseEvent.clientY]:st(this._mouseEvent,w);this._showTooltip(y,k,u,_)}}else this._hideTooltip();if(this._mouseEvent&&((i=d.onCrosshairMove)===null||i===void 0||i.call(d,I?this.xScale.invert(this._xPx):void 0,y,x,this._mouseEvent),this._mouseEvent=void 0),Fe(this.g,v).style("opacity",I?1:0),!isFinite(S))return;this.line.attr("y1",0).attr("y2",this._height),Fe(this.line,v,Ft).attr("x1",P).attr("x2",P);const Z=so(d.getCircles)?d.getCircles(k,l.data,this.yScale,_):this.getCircleData(y,x),pe=this.g.selectAll("circle").data(Z,(w,m)=>{var u;return(u=w.id)!==null&&u!==void 0?u:m}),ve=pe.enter().append("circle").attr("class",sa).attr("r",0).attr("cx",P).attr("cy",w=>w.y).style("fill",w=>w.color).style("stroke",w=>w.strokeColor).style("stroke-width",w=>w.strokeWidth);Fe(ve.merge(pe),v,Ft).attr("cx",P).attr("cy",w=>w.y).attr("r",4).style("opacity",w=>w.opacity).style("fill",w=>w.color).style("stroke",w=>w.strokeColor).style("stroke-width",w=>w.strokeWidth),pe.exit().remove()}hide(t){window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{var e,n;this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,(n=(e=this.config).onCrosshairMove)===null||n===void 0||n.call(e,void 0,void 0,void 0,t),this._render()})}_onMouseMove(t){var e;const{datamodel:n,element:o}=this;!this.accessors.x&&(!((e=n.data)===null||e===void 0)&&e.length)&&console.warn("Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object");const[s,i]=st(t,o);this._xPx=s,this._yPx=i,this._mouseEvent=t,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()})}_onMouseOut(t){var e;(!t||!(!((e=this.container)===null||e===void 0)&&e.node().contains(t.relatedTarget)))&&this.hide(t)}_onWheel(t){this.hide(t)}_showTooltip(t,e,n,o){var s;const{config:i,datamodel:d}=this,l=(s=i.tooltip)!==null&&s!==void 0?s:this.tooltip;if(!l||!n)return;const[v,V]=n,S=i.template(t,e,d.data,o);if(l.config.followCursor=!0,!l.config.horizontalPlacement||l.config.horizontalPlacement===re.Auto){const k=l.isContainerBody()?v-this.container.node().getBoundingClientRect().left:v;l.overrideHorizontalPlacement(k>this._containerWidth/2?re.Left:re.Right)}S&&l.show(S,{x:v,y:V})}_hideTooltip(){var t;const{config:e}=this,n=(t=e.tooltip)!==null&&t!==void 0?t:this.tooltip;n?.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(t,e){var n,o;const{config:s}=this;if(s.snapToData&&t){const i=(n=this.accessors.y)!==null&&n!==void 0?n:[],d=(o=this.accessors.yStacked)!==null&&o!==void 0?o:[],l=Ne(t,this.accessors.baseline,e)||0,v=no(t,e,...d).map((S,k)=>({y:this.yScale(S+l),opacity:qe(Ne(t,d[k],k))?1:0,color:Ie(t,s.color,k),strokeColor:s.strokeColor?Ie(t,s.strokeColor,k):void 0,strokeWidth:s.strokeWidth?Ne(t,s.strokeWidth,k):void 0})),V=i.map((S,k)=>{const _=Ne(t,S,e);return{y:this.yScale(_),opacity:qe(_)?1:0,color:Ie(t,s.color,v.length+k),strokeColor:s.strokeColor?Ie(t,s.strokeColor,k):void 0,strokeWidth:s.strokeWidth?Ne(t,s.strokeWidth,k):void 0}});return v.concat(V)}return[]}}na.selectors=jo;const Io={"data-vis-crosshair":""},Go=_e({__name:"index",props:{data:{}},setup(r,{expose:t}){const e=bt(ro),n=r,o=N(()=>e.data.value??n.data),s=xt(n),i=U();return Ge(()=>{kt(()=>{var d;i.value=new na(s.value),(d=i.value)==null||d.setData(o.value),e.update(i.value)})}),nt(()=>{var d;(d=i.value)==null||d.destroy(),e.destroy()}),ie(s,(d,l)=>{var v;wt(d,l)||(v=i.value)==null||v.setConfig(s.value)}),ie(o,()=>{var d;(d=i.value)==null||d.setData(o.value)}),t({component:i}),(d,l)=>(g(),E("div",Io))}}),Ko={"data-vis-component":""},Oo=_e({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(r,{expose:t}){const e=bt(lo),n=r,o=N(()=>e.data.value??n.data),s=xt(n),i=U();return Ge(()=>{kt(()=>{var d;i.value=new St(s.value),(d=i.value)==null||d.setData(o.value),e.update(i.value)})}),nt(()=>{var d;(d=i.value)==null||d.destroy(),e.destroy()}),ie(s,(d,l)=>{var v;wt(d,l)||(v=i.value)==null||v.setConfig(s.value)}),ie(o,()=>{var d;(d=i.value)==null||d.setData(o.value)}),t({component:i}),(d,l)=>(g(),E("div",Ko))}}),Wo={"data-vis-tooltip":""},qo=_e({__name:"index",props:{components:{},container:{},followCursor:{type:Boolean},allowHover:{type:Boolean},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},className:{},hideDelay:{},showDelay:{},data:{}},setup(r,{expose:t}){const e=bt(io),n=xt(r),o=U();return Ge(()=>{kt(()=>{o.value=new ea(n.value),e.update(o.value)})}),nt(()=>{var s;(s=o.value)==null||s.destroy(),e.destroy()}),ie(n,(s,i)=>{var d;wt(s,i)||(d=o.value)==null||d.setConfig(n.value)}),t({component:o}),(s,i)=>(g(),E("div",Wo))}}),Ho={class:"w-full relative overflow-visible"},Yo={key:0,class:"group overflow-hidden"},Xo=["src"],Zo={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},Jo={class:"flex"},Qo={key:1,class:"overflow-hidden relative group"},es=["src"],ts={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},as={class:"flex"},os={class:"px-5 pb-3 mt-4"},ss={class:"text-2xl font-medium"},ns={class:"text-neutral-500"},rs={class:"my-1"},ls={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},is={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},us={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},cs={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},ds={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},gs={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},ps={class:"mt-3 text-lg"},vs={class:"-mx-1 mt-4"},ms={key:0,class:"inline-flex m-1 h-fit align-bottom"},fs=["src"],hs={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},bs={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},ks={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},ys={class:"text-lg font-semibold mb-2 flex"},_s={key:0,class:"flex items-center space-x-2"},xs={size:"md",weight:"light"},ws={size:"md",weight:"light"},Rt=50,Ss={__name:"SpeciesInfo",props:{species:Object},setup(r){const t=U(0),e=r,n=N(()=>e.species.images||[]);ie(n,()=>{t.value=0});const o=U(!1),s=U(!0),i=()=>{o.value=!o.value},d=N(()=>e.species.Kriteriedokumentation?o.value?e.species.Kriteriedokumentation:e.species.Kriteriedokumentation.slice(0,Rt)+"...":""),l=N(()=>e.species.ekologi?s.value?e.species.ekologi:e.species.ekologi.slice(0,Rt)+"...":""),v=A=>A?A.charAt(0).toUpperCase()+A.slice(1).toLowerCase():"",V=A=>A?A.replace("/detaljer","").replace("/artinformation",""):"",S=A=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[A]||"NE",k=A=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[A]||"bg-neutral-300",_=A=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[A]||"Ej bedömd",y=(A,h)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[A==="0"&&h?h:A]||"default-icon.webp"}`,x=N(()=>e.species["Svamp-grupp"]==="0"&&e.species["Svamp-grupp-släkte"]?e.species["Svamp-grupp-släkte"]:e.species["Svamp-grupp"]);return(A,h)=>{const P=ha,B=yt,H=ja,I=Ke,ee=rt,Z=Oe,pe=ye,ve=wa;return g(),E("div",Ho,[n.value.length>1?(g(),E("div",Yo,[p(P,{onSelect:h[0]||(h[0]=w=>t.value=w),items:n.value,ui:{item:"basis-full"}},{default:F(({item:w})=>[(g(),E("div",{class:"w-full relative",key:w},[b("img",{src:w,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,Xo)]))]),_:1},8,["items"]),b("div",Zo,[b("div",Jo,[p(B,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),h[1]||(h[1]=b("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),b("h1",null,Q(t.value+1)+" av "+Q(n.value.length),1)])])):n.value.length===1?(g(),E("div",Qo,[b("img",{src:n.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,es),b("div",ts,[b("div",as,[p(B,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),h[2]||(h[2]=b("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),b("h1",null,Q(t.value+1)+" av "+Q(n.value.length),1)])])):(g(),K(H,{key:2,class:"rounded-none"})),b("div",os,[b("h1",ss,Q(v(r.species.Commonname)),1),b("h1",ns,Q(r.species.Scientificname),1),b("div",rs,[r.species["Rank matsvamp"]===3?(g(),E("div",ls,[p(I,{name:"codicon:circle-large-filled",class:"size-3"}),h[3]||(h[3]=se(" Minst vanlig matsvamp ",-1))])):D("",!0),r.species["Rank matsvamp"]===2?(g(),E("div",is,[p(I,{name:"codicon:color-mode",class:"size-3"}),h[4]||(h[4]=se(" Mindre vanlig matsvamp ",-1))])):D("",!0),r.species["Rank giftsvamp"]===3?(g(),E("div",us,[p(I,{name:"codicon:circle-large-filled",class:"size-3"}),h[5]||(h[5]=se(" Minst vanlig giftsvamp ",-1))])):D("",!0),r.species["Rank giftsvamp"]===2?(g(),E("div",cs,[p(I,{name:"codicon:color-mode",class:"size-3"}),h[6]||(h[6]=se(" Mindre vanlig giftsvamp ",-1))])):D("",!0),r.species.RankRed===3?(g(),E("div",ds,[p(I,{name:"codicon:circle-large-filled",class:"size-3"}),h[7]||(h[7]=se(" Sällsynt naturvårdsart ",-1))])):D("",!0),r.species.RankRed===2?(g(),E("div",gs,[p(I,{name:"codicon:color-mode",class:"size-3"}),h[8]||(h[8]=se(" Ovanlig naturvårdsart ",-1))])):D("",!0)]),b("h1",ps,Q(l.value),1),b("div",vs,[r.species["Svamp-grupp"]?(g(),E("div",ms,[p(ee,{color:"neutral",variant:"subtle",size:"xl"},{default:F(()=>[b("img",{src:y(r.species["Svamp-grupp"],r.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,fs),se(" "+Q(v(x.value)),1)]),_:1})])):D("",!0),r.species["Nyasvamp-boken"]==="x"?(g(),E("div",hs,[p(ee,{color:"warning",size:"xl",variant:"subtle",class:""},{default:F(()=>[p(B,{name:"icon-park-solid:knife-fork"}),h[9]||(h[9]=se("Matsvamp ",-1))]),_:1})])):D("",!0),r.species.Giftsvamp==="x"?(g(),E("div",bs,[p(ee,{color:"poison",size:"xl",variant:"subtle",class:""},{default:F(()=>[p(B,{name:"hugeicons:danger"}),h[10]||(h[10]=se("Giftsvamp ",-1))]),_:1})])):D("",!0),r.species.SIGNAL_art==="S"?(g(),E("div",ks,[p(ee,{color:"signal",size:"xl",variant:"subtle",class:""},{default:F(()=>[...h[11]||(h[11]=[se("Signalart",-1)])]),_:1})])):D("",!0),r.species.KALKmark?(g(),K(ee,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:F(()=>[...h[12]||(h[12]=[se(" Kalkmark ",-1)])]),_:1})):D("",!0),r.species.ANNANmark?(g(),K(ee,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:F(()=>[...h[13]||(h[13]=[se(" Vanlig skogsmark ",-1)])]),_:1})):D("",!0)]),r.species.Kriteriedokumentation?(g(),K(Z,{key:0,class:"my-4"},{default:F(()=>[b("div",{class:"flex justify-between cursor-pointer",onClick:i},[b("h1",ys,[r.species.RL2020kat?(g(),E("div",_s,[b("div",{class:ce([k(r.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},Q(S(r.species.RL2020kat)),3),b("h1",xs,Q(_(r.species.RL2020kat)),1)])):D("",!0)]),p(B,{name:"mdi:chevron-down",class:ce(["h-6 w-6 transition-transform duration-300 ease-in-out",o.value?"rotate-180":"rotate-0"])},null,8,["class"])]),r.species.Kriteriedokumentation?(g(),E("div",{key:0,class:ce(["relative overflow-hidden transition-transform duration-300 ease-in-out",[o.value?"max-h-auto":"max-h-20"]]),onClick:i},[b("h1",ws,Q(d.value),1)],2)):D("",!0)]),_:1})):D("",!0),h[14]||(h[14]=b("h1",{class:"text-md font-medium mx-2 mt-4"},"Läs mer på",-1)),r.species.Artfakta!="Information saknas"?(g(),K(pe,{key:1,to:V(r.species.Artfakta),variant:"ghost",target:"_blank",class:"text-primary-500 w-full",size:"xl",icon:"i-heroicons-arrow-up-right-20-solid",label:"Artfakta.se",trailing:""},null,8,["to"])):D("",!0),h[15]||(h[15]=b("br",null,null,-1)),r.species.Svampguiden&&r.species.Svampguiden!=="0"?(g(),K(pe,{key:2,to:V(r.species.Svampguiden),trailing:"",label:"Svampguiden.com",icon:"i-heroicons-arrow-up-right-20-solid",target:"_blank",variant:"ghost",class:"text-primary-500 w-full",size:"xl"},null,8,["to"])):D("",!0),p(ve)])])}}},Cs={key:0,class:"fixed inset-0 z-50 flex pointer-events-none group"},Ns={class:"absolute top-3 left-3 items-end w-full gap-2 z-10 flex"},$s={class:"h-full relative overflow-auto pb-16 no-scrollbar"},Ts={__name:"MySlideover",props:{modelValue:{type:Boolean,default:!1},pinned:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:modelValue","update:pinned"],setup(r,{emit:t}){const e=r,n=t,o=U(e.pinned);ie(()=>e.pinned,i=>{o.value=i});function s(){o.value=!o.value,n("update:pinned",o.value)}return(i,d)=>{const l=ye;return g(),K(Ee,{name:"slide-in-right"},{default:F(()=>[r.modelValue?(g(),E("div",Cs,[o.value?D("",!0):(g(),E("div",{key:0,class:"fixed inset-0 pointer-events-auto",onClick:d[0]||(d[0]=v=>n("update:modelValue",!1))})),b("div",{ref:"panelRef",class:ce(["ml-auto bg-white shadow-lg z-50 relative pointer-events-auto ring-1 ring-neutral-200 transition-all overflow-hidden",[o.value?"":"sm:ml-auto sm:m-2 sm:rounded",r.expanded?"w-[744px]":"w-screen sm:w-96"]]),onClick:d[2]||(d[2]=Sa(()=>{},["stop"]))},[b("div",Ns,[p(l,{class:"shadow hover:bg-white rounded-full mt-2 ml-1 md:m-0",color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},icon:"heroicons:x-mark",size:"lg",onClick:d[1]||(d[1]=v=>n("update:modelValue",!1))}),p(l,{class:ce(["shadow hover:bg-white hidden md:flex rounded-full",o.value?"text-primary-500":"text-neutral-700"]),color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},onClick:s,icon:"codicon:pinned",size:"lg"},null,8,["class"])]),b("div",$s,[ke(i.$slots,"default",{},void 0,!0)])],2)])):D("",!0)]),_:3})}}},Ls=Le(Ts,[["__scopeId","data-v-fb1058c4"]]),As={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},ra={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(r,{emit:t}){const e=r,n=t,o=Ca(),{dir:s}=Na(),i=$a(),d=Ta(La(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),n),l=N(()=>e.firstIcon||(s.value==="rtl"?i.ui.icons.chevronDoubleRight:i.ui.icons.chevronDoubleLeft)),v=N(()=>e.prevIcon||(s.value==="rtl"?i.ui.icons.chevronRight:i.ui.icons.chevronLeft)),V=N(()=>e.nextIcon||(s.value==="rtl"?i.ui.icons.chevronLeft:i.ui.icons.chevronRight)),S=N(()=>e.lastIcon||(s.value==="rtl"?i.ui.icons.chevronDoubleLeft:i.ui.icons.chevronDoubleRight)),k=N(()=>At({extend:At(As),...i.ui?.pagination||{}})());return(_,y)=>(g(),K($(mo),Ae($(d),{class:k.value.root({class:[e.ui?.root,e.class]})}),{default:F(({page:x,pageCount:A})=>[p($(wo),{class:ce(k.value.list({class:e.ui?.list}))},{default:F(({items:h})=>[r.showControls||o.first?(g(),K($(ho),{key:0,"as-child":"",class:ce(k.value.first({class:e.ui?.first}))},{default:F(()=>[ke(_.$slots,"first",{},()=>[p(ye,{color:r.color,variant:r.variant,size:r.size,icon:l.value,to:r.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):D("",!0),r.showControls||o.prev?(g(),K($(Lo),{key:1,"as-child":"",class:ce(k.value.prev({class:e.ui?.prev}))},{default:F(()=>[ke(_.$slots,"prev",{},()=>[p(ye,{color:r.color,variant:r.variant,size:r.size,icon:v.value,to:x>1?r.to?.(x-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):D("",!0),(g(!0),E(we,null,Te(h,(P,B)=>(g(),E(we,{key:B},[P.type==="page"?(g(),K($(Co),{key:0,"as-child":"",value:P.value,class:ce(k.value.item({class:e.ui?.item}))},{default:F(()=>[ke(_.$slots,"item",Ae({ref_for:!0},{item:P,index:B,page:x,pageCount:A}),()=>[p(ye,{color:x===P.value?r.activeColor:r.color,variant:x===P.value?r.activeVariant:r.variant,size:r.size,label:String(P.value),ui:{label:k.value.label()},to:r.to?.(P.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(g(),K($(go),{key:1,"as-child":"",class:ce(k.value.ellipsis({class:e.ui?.ellipsis}))},{default:F(()=>[ke(_.$slots,"ellipsis",{},()=>[p(ye,{as:"div",color:r.color,variant:r.variant,size:r.size,icon:r.ellipsisIcon||$(i).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["class"]))],64))),128)),r.showControls||o.next?(g(),K($($o),{key:2,"as-child":"",class:ce(k.value.next({class:e.ui?.next}))},{default:F(()=>[ke(_.$slots,"next",{},()=>[p(ye,{color:r.color,variant:r.variant,size:r.size,icon:V.value,to:x<A?r.to?.(x+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):D("",!0),r.showControls||o.last?(g(),K($(ko),{key:3,"as-child":"",class:ce(k.value.last({class:e.ui?.last}))},{default:F(()=>[ke(_.$slots,"last",{},()=>[p(ye,{color:r.color,variant:r.variant,size:r.size,icon:S.value,to:r.to?.(A)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):D("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},Es=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function ct(r,t,e,n){return!r||!t||!e||!n?!1:Es.some(o=>o.geo===r&&o.forest===t&&o.age===e&&o.veg===n)}const Vs={class:""},Ps={class:""},Bs={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},Fs={class:"flex gap-2 items-end justify-between w-full mb-2"},Rs={class:"flex gap-2"},zs={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Ms={key:1,class:"hidden md:flex"},Ds={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Us={key:0,class:"flex gap-2 w-full mb-2"},js={class:""},Is={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},Gs={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},Ks={class:"flex"},Os={class:"hidden md:flex"},Ws={key:0},qs={class:"flex justify-center"},Hs={key:2},Ys={class:"max-w-sm space-y-2 mt-2"},Xs={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(r,{emit:t}){const e=De("(max-width: 767px)"),n=N(()=>e.value||l.isNormalView&&l.dataTypeFolder!=="edna"),o=t,s=U("");let i=null;function d(a){s.value=a,i&&clearTimeout(i),i=setTimeout(()=>{o("update:searchTerm",s.value)},300)}jt(()=>{i&&clearTimeout(i)});const l=r,v=Aa("table"),V=n.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[l.grupp]:!1,mark:!1,[l.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[l.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};l.dataType==="edna"&&(V.mark=!1);const S=U({...V,...l.columnVisibilityOverrides}),k=U([]),_=(a=0,c=0)=>c?a===c?`${c}`:`${a}/${c}`:null,y=N(()=>{const a={};je.value.forEach(z=>{z.KALKmark&&(a.KALKmark=(a.KALKmark||0)+1),z.ANNANmark&&(a.ANNANmark=(a.ANNANmark||0)+1)});const c=v.value?.tableApi?.getFilteredRowModel()?.rows||[],C={};return c.forEach(z=>{const te=z.original;te.KALKmark&&(C.KALKmark=(C.KALKmark||0)+1),te.ANNANmark&&(C.ANNANmark=(C.ANNANmark||0)+1)}),[{label:"Kalkmark",value:"KALKmark",visible:C.KALKmark||0,total:a.KALKmark||0},{label:"Vanlig skogsmark",value:"ANNANmark",visible:C.ANNANmark||0,total:a.ANNANmark||0}].map(z=>{const te=_(z.visible,z.total);return te?{label:`${z.label} (${te})`,value:z.value}:null}).filter(Boolean)}),x=N(()=>y.value.map(a=>({label:a.label,type:"checkbox",checked:k.value.includes(a.value),onUpdateChecked(c){c?k.value.includes(a.value)||k.value.push(a.value):k.value=k.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),A=N(()=>{const a=["Matsvamp","Giftsvamp"],c={};je.value.forEach(z=>{const te=z[l.mat];l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x"&&(c.Matsvamp=(c.Matsvamp||0)+1):te==1&&(c.Matsvamp=(c.Matsvamp||0)+1),(z.Giftsvamp||"").toLowerCase()==="x"&&(c.Giftsvamp=(c.Giftsvamp||0)+1)});const C=v.value?.tableApi?.getFilteredRowModel()?.rows||[],L={};return C.forEach(z=>{const te=z.original,ae=te[l.mat];(l.mat==="Nyasvamp-boken"?ae&&String(ae).toLowerCase()==="x":ae==1)&&(L.Matsvamp=(L.Matsvamp||0)+1),(te.Giftsvamp||"").toLowerCase()==="x"&&(L.Giftsvamp=(L.Giftsvamp||0)+1)}),a.map(z=>{const te=c[z]||0,ae=L[z]||0,ue=_(ae,te);return ue?{label:`${z} (${ue})`,value:z}:null}).filter(Boolean)}),h=U(l.isNormalView?500:10),P=U([]),B=U([]),H=["VU","NT","EN","CR","DD","Signalart"],I=N(()=>H.every(a=>B.value.includes(a))),ee=a=>{if(a){const c=new Set([...B.value,...H]);B.value=Array.from(c)}else B.value=B.value.filter(c=>!H.includes(c))},Z=U([]),pe=N(()=>f.value.map(a=>({label:a.label,type:"checkbox",checked:Z.value.includes(a.value),onUpdateChecked(c){c?Z.value.includes(a.value)||Z.value.push(a.value):Z.value=Z.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),ve=N(()=>A.value.map(a=>({label:a.label,type:"checkbox",checked:P.value.includes(a.value),onUpdateChecked(c){c?P.value.includes(a.value)||P.value.push(a.value):P.value=P.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),w=N(()=>G.value.map(a=>{if(a.type==="separator")return a;const c=a.value==="Naturvårdsarter";return{label:a.label,type:"checkbox",icon:a.icon,checked:c?I.value:B.value.includes(a.value),onUpdateChecked(C){if(c){ee(C);return}C?B.value.includes(a.value)||B.value.push(a.value):B.value=B.value.filter(L=>L!==a.value)},onSelect(C){C.preventDefault()}}})),m=N(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),v.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),v.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),v.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),v.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:l.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(a){a.preventDefault(),v.value?.tableApi?.setSorting([{id:l.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(a){a.preventDefault(),v.value?.tableApi?.setSorting([{id:l.obs,desc:!0}])}}]}]),u=N(()=>[{label:"Grupp",children:pe.value},{label:"Matsvamp",children:ve.value},{label:"Status",children:w.value},{label:"Mark",children:x.value}]),f=N(()=>{const a={};je.value.forEach(L=>{const z=L[l.grupp];z&&(a[z]=(a[z]||0)+1)});const c=v.value?.tableApi?.getFilteredRowModel()?.rows||[],C={};return c.forEach(L=>{const te=L.original[l.grupp];te&&(C[te]=(C[te]||0)+1)}),Object.keys(a).map(L=>{const z=a[L]||0,te=C[L]||0,ae=_(te,z);return ae?{label:`${X(L)} (${ae})`,value:L}:null}).filter(Boolean)}),G=N(()=>{const a=["LC","NT","EN","VU","CR","DD"],c={};je.value.forEach(ne=>{const oe=ne.RL2020kat;a.includes(oe)?c[oe]=(c[oe]||0)+1:oe===null||oe==="0"||oe===0||String(oe).toUpperCase()==="NE"?c["Ej bedömd"]=(c["Ej bedömd"]||0)+1:String(oe).toUpperCase()==="NA"&&(c["Ej tillämplig"]=(c["Ej tillämplig"]||0)+1),ne.SIGNAL_art==="S"&&(c.Signalart=(c.Signalart||0)+1)});const C=v.value?.tableApi?.getFilteredRowModel()?.rows||[],L={};C.forEach(ne=>{const oe=ne.original,$e=oe.RL2020kat;a.includes($e)?L[$e]=(L[$e]||0)+1:$e===null||$e==="0"||$e===0||String($e).toUpperCase()==="NE"?L["Ej bedömd"]=(L["Ej bedömd"]||0)+1:String($e).toUpperCase()==="NA"&&(L["Ej tillämplig"]=(L["Ej tillämplig"]||0)+1),oe.SIGNAL_art==="S"&&(L.Signalart=(L.Signalart||0)+1)});const z=H.reduce((ne,oe)=>ne+(c[oe]||0),0),te=H.reduce((ne,oe)=>ne+(L[oe]||0),0),ae=[],ue=(ne,oe,$e=0,ma=0,fa={})=>{const Lt=_($e,ma);Lt&&ae.push({label:`${oe} (${Lt})`,value:ne,...fa})};ue("LC","Livskraftig",L.LC||0,c.LC||0,{icon:"i-heroicons-check-circle"}),ue("Ej bedömd","Ej bedömd",L["Ej bedömd"]||0,c["Ej bedömd"]||0,{icon:"i-heroicons-question-mark-circle"}),ue("Ej tillämplig","Ej tillämplig",L["Ej tillämplig"]||0,c["Ej tillämplig"]||0,{icon:"i-heroicons-minus-circle"});const T=_(te,z);for(T&&ae.push({label:`Naturvårdssvampar (${T})`,value:"Naturvårdsarter",icon:"i-material-symbols-award-star-outline"}),ae.length&&ae.push({type:"separator"}),H.forEach(ne=>{ue(ne,le(ne),L[ne]||0,c[ne]||0)}),ae.length&&ae[ae.length-1]?.type!=="separator"&&ae.push({type:"separator"});ae.length&&ae[ae.length-1]?.type==="separator";)ae.pop();return ae}),j=U({pageIndex:0,pageSize:10}),J=lt();function M(a,c){J.selectSpecies(a.original,"edna")}const X=a=>a?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():"",q=N(()=>Pe.value.length>0?Pe.value[0].sample_env_count:0),R=a=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[a]||"default-icon.webp"}`,O=a=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[a]||"neutral",le=a=>{if(a==="Ej bedömd")return"Ej bedömd";if(a==="Ej tillämplig")return"Ej tillämplig";const c={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return a===null||a===0||String(a).toUpperCase()==="NE"?"Ej bedömd":String(a).toUpperCase()==="NA"?"Ej tillämplig":c[a]||"Ej bedömd"},he=l.obs.startsWith("Rank"),ge=U(he?[{id:l.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:l.obs,desc:!0}]),Y=rt,me=Ea,de=ye,fe=Ia,Ce=yt,Ue=[{accessorKey:"images",header:"",sortable:!1,cell:({row:a})=>{const c=a.getValue("images")||[];return c.length?W("img",{src:c[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:a.original?.Commonname?`${a.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:a})=>{const c=a.getIsSorted();return W(de,{color:"neutral",variant:"outline",label:"Namn",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ring-muted/50 shadow",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>W("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},X(a.getValue("Commonname"))),filterFn:(a,c,C)=>{if(!C)return!0;const L=String(C).toLowerCase(),z=String(a.getValue("Commonname")||"").toLowerCase(),te=String(a.getValue("Scientificname")||"").toLowerCase();return z.includes(L)||te.includes(L)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:a})=>{const c=a.getIsSorted();return W(de,{color:"neutral",variant:"outline",label:"Latinskt namn",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ring-muted/50 shadow",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>W("div",{class:"truncate  text-[16px]"},a.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:l.grupp,header:()=>W(fe,{items:pe.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(de,{label:"Grupp",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,c,C)=>!C||C.length===0?!0:C.includes(a.getValue(c)),cell:({row:a})=>{const c=a.getValue(l.grupp);return c!=="Saknas"?W("img",{src:R(c),alt:`${c||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):W(Ce,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:l.dataType!=="edna",header:()=>W(fe,{items:x.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(de,{label:"Mark",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,c,C)=>{if(!C||C.length===0)return!0;let L=!1;return C.includes("KALKmark")&&a.original.KALKmark&&(L=!0),C.includes("ANNANmark")&&a.original.ANNANmark&&(L=!0),L},cell:({row:a})=>W("div",{class:"flex items-center space-x-1"},[a.original.KALKmark&&W(Y,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),a.original.ANNANmark&&W(Y,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:l.mat,header:()=>W(fe,{items:ve.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(de,{label:"Matsvamp",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,c,C)=>{if(!C||C.length===0)return!0;let L=!1;return C.includes("Matsvamp")&&(l.mat==="Nyasvamp-boken"?L=L||a.getValue(c)?.toLowerCase()==="x":L=L||a.getValue(c)===1),C.includes("Giftsvamp")&&(L=L||(a.original.Giftsvamp||"").toLowerCase()==="x"),L},cell:({row:a})=>W("div",{class:"flex gap-1"},[(l.mat==="Nyasvamp-boken"?a.getValue(l.mat)?.toLowerCase()==="x":a.getValue(l.mat)===1)&&W(Y,{color:"warning",variant:"subtle"},()=>"Matsvamp"),a.original.Giftsvamp?.toLowerCase()==="x"&&W(Y,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>W(fe,{items:w.value,content:{align:"start"},ui:{content:"w-48 min-w-fit"}},{default:()=>W(de,{label:"Status",variant:"outline",color:"neutral",icon:"i-lucide-list-filter",class:"-mx-2.5 ring-muted/50 shadow"})}),filterFn:(a,c,C)=>{if(!C||C.length===0)return!0;const L=a.getValue(c);return C.some(z=>z==="Ej bedömd"?L===null||L===0||L==="0"||String(L).toUpperCase()==="NE":z==="Ej tillämplig"?String(L).toUpperCase()==="NA":z==="Signalart"?a.original.SIGNAL_art==="S":z===L)},cell:({row:a})=>{const c=a.getValue("RL2020kat"),C=W(Y,{color:O(c),variant:"subtle"},()=>le(c)),L=a.original.SIGNAL_art==="S"?W(Y,{color:"signal",variant:"subtle"},"Signalart"):null;return W("div",{class:"flex gap-1"},[C,L].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:l.obs,header:({column:a})=>{const c=a.getIsSorted();return W(de,{color:"neutral",variant:"outline",label:l.obsLabel,icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5 ring-muted/50 shadow",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>{const c=a.getValue(l.obs);return l.obs.startsWith("Rank")?c===3?W("span",{class:"text-red-700"},"Sällsynt"):c===2?W("span",{class:"text-yellow-600"},"Ovanlig"):null:W(Y,{variant:"subtle",color:"secondary"},()=>`${c} skogar`)},meta:{headerText:l.obsLabel}}],He=[{header:"Namn",cell:({row:a})=>{const c=a.original.images||[];let C=null;const L=l.filterPoison?a.original["Rank giftsvamp"]:l.filterEdible?a.original["Rank matsvamp"]:a.original.RankRed;L===3?C=W(Ce,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):L===2&&(C=W(Ce,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const z=c.length?W("img",{src:c[0],alt:a.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded sm:rounded-md border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):W("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[W("img",{src:R(a.original[l.grupp]),alt:`${a.original[l.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),te=W("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[W("div",{class:"flex-1 min-w-0"},[W("div",{class:"text-lg font-semibold whitespace-normal break-words"},[X(a.original.Commonname),C]),W("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},a.original.Scientificname)])]),ae=a.original[l.mat];(l.mat==="Nyasvamp-boken"?ae&&String(ae).toLowerCase()==="x":ae===1)&&W(Y,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const T=W("div",{class:"flex flex-wrap gap-2 mt-2 "},[a.original.RL2020kat!=="LC"&&a.original.RL2020kat!=="NA"&&a.original.RL2020kat!=="NE"&&a.original.RL2020kat!=="0"?W(Y,{color:O(a.original.RL2020kat),variant:"subtle",size:"md"},()=>le(a.original.RL2020kat)):null,a.original.SIGNAL_art==="S"?W(Y,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,l.dataType==="edna"?W(me,{modelValue:a.getValue(l.obs),max:q.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return W("div",{class:"flex space-x-4 items-start"},[z,W("div",{class:"flex flex-col flex-1"},[te,T])])},meta:{headerText:"Namn"}},...Ue.map(a=>a.accessorKey==="mark"?{...a,enableHiding:l.dataType!=="edna"}:a)],xe=N(()=>n.value?He:Ue),la=N(()=>({thead:n.value?"hidden":"hidden md:table-header-group",tbody:n.value?"divide-none":"divide-none md:divide-dotted",td:n.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),Ye=U(0),pt=U(0),Pe=U([]),Me=U(!0),Nt=U([]),ia=(a,c,C)=>{const L=(c[0]-a[0])/(C-1),z=(c[1]-a[1])/(C-1),te=(c[2]-a[2])/(C-1),ae=[];for(let ue=0;ue<C;ue++){const T=Math.round(a[0]+L*ue),ne=Math.round(a[1]+z*ue),oe=Math.round(a[2]+te*ue);ae.push(`rgb(${T}, ${ne}, ${oe})`)}return ae},Xe=()=>{Pe.value=[],Ye.value=0,pt.value=0,Nt.value=[]},ua=async()=>{if([be.geography,be.forestType,be.standAge,be.vegetationType].some(C=>!C)){Xe(),Me.value=!1;return}if(l.dataTypeFolder==="edna"&&!ct(be.geography,be.forestType,be.standAge,be.vegetationType)){Xe(),Me.value=!1;return}const c=`${l.dataType}-${be.geography}-${be.forestType}-${be.standAge}-${be.vegetationType}.json`;try{const C=await fetch(`/${l.dataTypeFolder}/${c}`);if(!C.ok){if(C.status===404){Xe(),Me.value=!1;return}throw new Error(`Failed to fetch data from ${c}`)}Pe.value=await C.json(),Me.value=!1,Pe.value.forEach((ae,ue)=>{ae.colorIndex=ue});const L=Pe.value.length;Ye.value=Math.floor(L*.1),pt.value=L-Ye.value;const z=ia([82,82,82],[212,212,212],Ye.value),te=ca(pt.value);Nt.value=[...z,...te]}catch(C){console.error("Error fetching data:",C),Xe(),Me.value=!1}};function ca(a){const c=[];for(let z=0;z<a;z++){const te=45+300/(a-1||1)*z;c.push(`hsl(${te%360}, 70%, 50%)`)}return c}const be=Ve();ie(()=>[be.geography,be.forestType,be.standAge,be.vegetationType],()=>{Me.value=!0,ua()},{immediate:!0});const $t=U(""),je=N(()=>{let a=Pe.value;return $t.value&&(a=a.filter(c=>Object.values(c).some(C=>String(C).toLowerCase().includes($t.value.toLowerCase())))),l.filterEdible?a=a.filter(c=>{const C=c[l.mat];return C&&String(C).toLowerCase()==="x"}):l.filterPoison&&(a=a.filter(c=>{const C=c[l.mat];return!(C&&String(C).toLowerCase()==="x")})),a}),da=N(()=>je.value);ie(h,a=>{let c=a==="Alla"?Je.value||Pe.value.length:Number(a);j.value.pageSize=c,j.value.pageIndex=0,v.value?.tableApi&&(v.value.tableApi.setPageSize(c),v.value.tableApi.setPageIndex(0))});const ga=N(()=>v.value?.tableApi?.getPaginationRowModel().rows||[]),Ze=N(()=>v.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),pa=N(()=>Ze.value.pageIndex*Ze.value.pageSize+1),va=N(()=>{const a=Ze.value.pageIndex*Ze.value.pageSize+ga.value.length;return a>Je.value?Je.value:a}),Je=N(()=>v.value?.tableApi?.getFilteredRowModel()?.rows.length||0),Tt=N(()=>{const a=l.searchTerm?[{id:"Commonname",value:l.searchTerm}]:[];return P.value&&P.value.length>0&&a.push({id:l.mat,value:P.value}),B.value&&B.value.length>0&&a.push({id:"RL2020kat",value:B.value}),Z.value&&Z.value.length>0&&a.push({id:l.grupp,value:Z.value}),k.value&&k.value.length>0&&a.push({id:"mark",value:k.value}),a}),Qe=(a,c)=>{const C=v.value?.tableApi?.getFilteredRowModel()?.rows||[];if(!C.length)return!1;if(a==="mark")return c==="KALKmark"?C.some(L=>L.original.KALKmark):c==="ANNANmark"?C.some(L=>L.original.ANNANmark):!1;if(a===l.mat){if(c==="Matsvamp")return C.some(L=>{const z=L.original[l.mat];return l.mat==="Nyasvamp-boken"?z&&String(z).toLowerCase()==="x":z==1});if(c==="Giftsvamp")return C.some(L=>(L.original.Giftsvamp||"").toLowerCase()==="x")}return C.some(L=>{if(a==="RL2020kat"){if(c==="Ej bedömd"){const z=L.original.RL2020kat;return z===null||z===0||z==="0"||String(z).toUpperCase()==="NE"}return c==="Ej tillämplig"?String(L.original.RL2020kat).toUpperCase()==="NA":c==="Signalart"?L.original.SIGNAL_art==="S":L.original.RL2020kat===c}return L.getValue(a)===c})};return ie(Tt,a=>{v.value?.tableApi&&v.value.tableApi.setColumnFilters(a)}),ie(Tt,a=>{const C=a.find(ue=>ue.id===l.mat)?.value??[];o("update:matsvampFilter",C.includes("Matsvamp")),o("update:giftsvampFilter",C.includes("Giftsvamp"));const z=a.find(ue=>ue.id===l.grupp)?.value??[];o("update:gruppFilter",z);const ae=a.find(ue=>ue.id==="RL2020kat")?.value??[];o("update:statusFilter",ae)},{deep:!0,immediate:!0}),(a,c)=>{const C=Wt,L=qt,z=It,te=Ka,ae=ra,ue=Ot;return g(),E("div",Vs,[b("div",Ps,[n.value?D("",!0):(g(),E("div",Bs,[b("div",Fs,[p(C,{"model-value":$(v)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":c[0]||(c[0]=T=>{$(v)?.tableApi?.getColumn("Commonname")?.setFilterValue(T),d(T)}),variant:"ghost"},null,8,["model-value"]),b("div",Rs,[b("div",zs,[k.value.length?(g(!0),E(we,{key:0},Te(k.value,T=>(g(),E("span",{key:"mark-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:T==="KALKmark"?"kalkmark":T==="ANNANmark"?"vanligmark":"neutral",class:ce(["cursor-pointer mb-2 md:mb-0",Qe("mark",T)?"":"opacity-50"]),onClick:ne=>k.value=k.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(T==="KALKmark"?"Kalkmark":T==="ANNANmark"?"Vanlig skogsmark":X(T)),1)]),_:2},1032,["color","class","onClick"])]))),128)):D("",!0),P.value.length?(g(!0),E(we,{key:1},Te(P.value,T=>(g(),E("span",{key:"svamp-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:T==="Matsvamp"?"warning":T==="Giftsvamp"?"poison":"neutral",class:ce(["cursor-pointer mb-2 md:mb-0",Qe(l.mat,T)?"":"opacity-50"]),onClick:ne=>P.value=P.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(X(T)),1)]),_:2},1032,["color","class","onClick"])]))),128)):D("",!0),Z.value.length?(g(!0),E(we,{key:2},Te(Z.value,T=>(g(),E("span",{key:"grupp-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:ce(["cursor-pointer mb-2 md:mb-0",Qe(l.grupp,T)?"":"opacity-50"]),onClick:ne=>Z.value=Z.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(X(T)),1)]),_:2},1032,["class","onClick"])]))),128)):D("",!0),B.value.length?(g(!0),E(we,{key:3},Te(B.value,T=>(g(),E("span",{key:"status-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:T==="Signalart"?"signal":O(T),class:ce(["cursor-pointer mb-2 md:mb-0",Qe("RL2020kat",T)?"":"opacity-50"]),onClick:ne=>B.value=B.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(T==="Signalart"?"Signalart":le(T)),1)]),_:2},1032,["color","class","onClick"])]))),128)):D("",!0)]),n.value?D("",!0):(g(),K($(fe),{key:0,class:"flex",items:$(v)?.tableApi?.getAllColumns()?.filter(T=>T.getCanHide())?.map(T=>({label:T.columnDef.meta?.headerText||$(Va)(T.id),type:"checkbox",checked:T.getIsVisible(),onUpdateChecked(ne){$(v)?.tableApi?.getColumn(T.id)?.toggleVisibility(!!ne)},onSelect(ne){ne?.preventDefault()}})),content:{align:"end"},ui:{content:"min-w-fit"}},{default:F(()=>[p($(de),{label:"Kolumner",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),r.isNormalView?D("",!0):(g(),E("div",Ms,[p(L,{modelValue:h.value,"onUpdate:modelValue":c[1]||(c[1]=T=>h.value=T),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"ghost"},null,8,["modelValue"])]))])])])),n.value?(g(),E("div",Ds,[k.value.length?(g(!0),E(we,{key:0},Te(k.value,T=>(g(),E("span",{key:"mark-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:T==="KALKmark"?"kalkmark":T==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ne=>k.value=k.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(T==="KALKmark"?"Kalkmark":T==="ANNANmark"?"Vanlig skogsmark":X(T)),1)]),_:2},1032,["color","onClick"])]))),128)):D("",!0),P.value.length?(g(!0),E(we,{key:1},Te(P.value,T=>(g(),E("span",{key:"svamp-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:T==="Matsvamp"?"warning":T==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ne=>P.value=P.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(X(T)),1)]),_:2},1032,["color","onClick"])]))),128)):D("",!0),Z.value.length?(g(!0),E(we,{key:2},Te(Z.value,T=>(g(),E("span",{key:"grupp-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ne=>Z.value=Z.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(X(T)),1)]),_:2},1032,["onClick"])]))),128)):D("",!0),B.value.length?(g(!0),E(we,{key:3},Te(B.value,T=>(g(),E("span",{key:"status-"+T},[p($(Y),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:T==="Signalart"?"signal":O(T),class:"cursor-pointer mb-2 md:mb-0",onClick:ne=>B.value=B.value.filter(oe=>oe!==T)},{default:F(()=>[se(Q(T==="Signalart"?"Signalart":le(T)),1)]),_:2},1032,["color","onClick"])]))),128)):D("",!0)])):D("",!0)]),n.value?(g(),E("div",Us,[p($(fe),{size:$(e)?"xl":"md",items:m.value,content:{align:"start"},ui:{content:"min-w-fit"}},{default:F(()=>[p($(de),{variant:$(e)?"soft":"ghost",icon:"i-lucide-arrow-up-down",size:$(e)?"xl":"md",label:($(e),null),color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),p($(fe),{size:$(e)?"xl":"md",items:u.value,content:{align:"start"},ui:{content:"min-w-fit"}},{default:F(()=>[p($(de),{variant:$(e)?"soft":"ghost",icon:"i-lucide-list-filter",size:$(e)?"xl":"md",label:($(e),null),color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),p(C,{variant:$(e)?"soft":"ghost","model-value":$(v)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:$(e)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":c[2]||(c[2]=T=>{$(v)?.tableApi?.getColumn("Commonname")?.setFilterValue(T),d(T)})},null,8,["variant","model-value","size"])])):D("",!0),p(z,{ui:{border:"border-muted/50"},class:"mb-2"}),je.value?(g(),E("div",{key:1,class:ce([(r.isNormalView,"")])},[b("div",js,[p(te,{ref_key:"table",ref:v,"column-visibility":S.value,"onUpdate:columnVisibility":c[3]||(c[3]=T=>S.value=T),pagination:j.value,"onUpdate:pagination":c[4]||(c[4]=T=>j.value=T),data:da.value,columns:xe.value,sticky:"",loading:Me.value,sorting:ge.value,"onUpdate:sorting":c[5]||(c[5]=T=>ge.value=T),onSelect:M,autoResetAll:!0,"pagination-options":$(e)&&!r.isNormalView?!1:r.isNormalView?void 0:{getPaginationRowModel:$(Ga)()},class:ce([{"":r.isNormalView},"rounded-sm"]),ui:la.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),n.value?D("",!0):(g(),E("div",Is,[b("div",Gs,[b("h1",Ks,[c[8]||(c[8]=se(" Visar ",-1)),b("span",Os,"  "+Q(pa.value)+" till  ",1),se(" "+Q(va.value)+" av "+Q(Je.value)+" arter ",1)]),r.isNormalView?(g(),K($(de),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:c[6]||(c[6]=T=>o("enlarge"))})):D("",!0)]),b("div",null,[!r.isNormalView&&h.value!=="Alla"&&!$(e)?(g(),E("div",Ws,[b("div",qs,[p(ae,{"active-variant":"ghost",variant:"ghost","default-page":($(v)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":$(v)?.tableApi?.getState().pagination.pageSize,total:$(v)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":c[7]||(c[7]=T=>$(v)?.tableApi?.setPageIndex(T-1))},null,8,["default-page","items-per-page","total"])])])):D("",!0)])]))])],2)):(g(),E("div",Hs,[b("div",Ys,[p(ue,{class:"h-4 w-full rounded"}),p(ue,{class:"h-4 w-[85%] rounded"})])]))])}}},dt=Le(Xs,[["__scopeId","data-v-72e3b175"]]),Zs={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},Js=_e({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(r){const t=r,e=["100%","200%","400%","800%"],n=U(0),o=N(()=>e[n.value]),s=U([]),i=Ve();function d(m){return m.sort((u,f)=>f.sample_plot_count-u.sample_plot_count)}function l(m,u,f){if(f<=0)return[];const G=(u[0]-m[0])/(f-1||1),j=(u[1]-m[1])/(f-1||1),J=(u[2]-m[2])/(f-1||1),M=[];for(let X=0;X<f;X++){const q=Math.round(m[0]+G*X),R=Math.round(m[1]+j*X),O=Math.round(m[2]+J*X);M.push(`rgb(${q}, ${R}, ${O})`)}return M}function v(m){const u=[];for(let j=0;j<m;j++){const J=45+300/(m-1||1)*j;u.push(`hsl(${J%360}, 70%, 50%)`)}return u}async function V(){const m=[i.geography,i.forestType,i.standAge,i.vegetationType];if(m.some(f=>!f)){s.value=[];return}if(!ct(...m)){s.value=[];return}const u=`edna-${i.geography}-${i.forestType}-${i.standAge}-${i.vegetationType}.json`;try{const f=await fetch(`/edna/${u}`);if(!f.ok){if(f.status===404){s.value=[];return}throw new Error(`Failed to fetch ${u}`)}let G=await f.json();G=d(G);const j=G.length,J=Math.floor(j*.1),M=j-J,X=l([82,82,82],[212,212,212],J),q=v(M),R=[...X,...q];s.value=G.map((O,le)=>({...O,fillColor:R[le]||"var(--ui-primary)"}))}catch(f){console.error("Error fetching chart data:",f),s.value=[]}}Ge(V),ie(()=>[i.geography,i.forestType,i.standAge,i.vegetationType],V,{immediate:!0});const S=(m,u)=>u,k=m=>m.sample_plot_count,_=(m,u)=>{const f=P.value[u];if(!f)return"";const G=t.searchTerm.trim().toLowerCase(),j=String(f.Commonname||"").toLowerCase(),J=String(f.Scientificname||"").toLowerCase(),M=G?j.includes(G)||J.includes(G):!0,X=t.statusFilter.length>0,q=t.matsvampFilter||t.giftsvampFilter,R=t.gruppFilter.length>0;if(!X&&!q&&!R&&t.searchTerm.trim()!=="")return M?y(f.Commonname):"";const O=X&&t.statusFilter.includes("Signalart")&&f.SIGNAL_art==="S",le=t.statusFilter.filter(Ce=>Ce!=="Signalart"),he=X&&t.statusFilter.includes("Ej bedömd")&&(f.RL2020kat===null||f.RL2020kat===0||f.RL2020kat==="0"||String(f.RL2020kat).toUpperCase()==="NE"),ge=X&&t.statusFilter.includes("Ej tillämplig")&&String(f.RL2020kat).toUpperCase()==="NA",Y=X?O||le.includes(f.RL2020kat):!1,me=t.matsvampFilter?f.matsvamp==1:!1,de=t.giftsvampFilter?(f.Giftsvamp||"").toLowerCase()==="x":!1,fe=R?t.gruppFilter.includes(f[t.groupKey]):!1;return X?!q&&!R?M&&(O||Y||he||ge)?y(f.Commonname):"":M&&(O||Y||he||ge)&&(q?me||de:!0)&&(R?fe:!0)?y(f.Commonname):"":q||R?q&&!R?M&&(me||de)?y(f.Commonname):"":!q&&R?M&&fe?y(f.Commonname):"":M&&(me||de)&&fe?y(f.Commonname):"":""};function y(m){return m?m.charAt(0).toUpperCase()+m.slice(1):""}const x=U(null);function A(m){if(!m)return x.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';x.value=m;const u=m.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",f=m.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",G={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},j=G[m.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${G[m.RL2020kat]}</div>`:"",J=m.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${m["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${y(m.Commonname)}</strong> <em>${y(m.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${m.sample_plot_count} av ${m.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${u} ${f} ${j} ${J}
      </div>
    </div>
  `}const h={[St.selectors.bar]:A},P=N(()=>{const m="#d4d4d4";return s.value.map(u=>{if(pe.value&&u.Scientificname===Z.selectedSpecies?.Scientificname)return{...u,barColor:"#b1835e"};const f=t.searchTerm.trim().toLowerCase(),G=String(u.Commonname||"").toLowerCase(),j=String(u.Scientificname||"").toLowerCase(),J=f?G.includes(f)||j.includes(f):!0,M=t.statusFilter.length>0,X=t.matsvampFilter||t.giftsvampFilter,q=t.gruppFilter.length>0;if(!M&&!X&&!q&&t.searchTerm.trim()!=="")return{...u,barColor:J?"#8b5cf6":m};const R=M&&t.statusFilter.includes("Signalart")&&u.SIGNAL_art==="S",O=t.statusFilter.filter(fe=>fe!=="Signalart"),le=M&&t.statusFilter.includes("Ej bedömd")&&(u.RL2020kat===null||u.RL2020kat===0||u.RL2020kat==="0"||String(u.RL2020kat).toUpperCase()==="NE"),he=M&&t.statusFilter.includes("Ej tillämplig")&&String(u.RL2020kat).toUpperCase()==="NA",ge=M?R||O.includes(u.RL2020kat):!1,Y=t.matsvampFilter?u.matsvamp==1:!1,me=t.giftsvampFilter?(u.Giftsvamp||"").toLowerCase()==="x":!1,de=q?t.gruppFilter.includes(u[t.groupKey]):!1;if(M){if(!X&&!q)return J&&R?{...u,barColor:"#14b8a6"}:J&&(R||ge||le||he)?R?{...u,barColor:"#14b8a6"}:u.RL2020kat==="LC"?{...u,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(u.RL2020kat)?{...u,barColor:"#ef4444"}:le||he?{...u,barColor:"#737373"}:{...u,barColor:"#1f2937"}:{...u,barColor:m};if(J&&(R||ge||le||he)&&(X?Y||me:!0)&&(q?de:!0)){if(R)return{...u,barColor:"#14b8a6"};if(O.length>0)return u.RL2020kat==="LC"?{...u,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(u.RL2020kat)?{...u,barColor:"#ef4444"}:le||he?{...u,barColor:"#737373"}:{...u,barColor:"#1f2937"};if(t.matsvampFilter&&Y)return{...u,barColor:"#eab308"};if(t.giftsvampFilter&&me)return{...u,barColor:"#84cc16"};if(q&&de)return{...u,barColor:"#000000"}}return{...u,barColor:m}}if(X||q){if(X&&!q)return J&&Y?{...u,barColor:"#eab308"}:J&&me?{...u,barColor:"#84cc16"}:{...u,barColor:m};if(!X&&q)return J&&de?{...u,barColor:"#000000"}:{...u,barColor:m};if(J&&(Y||me)&&de){if(Y)return{...u,barColor:"#eab308"};if(me)return{...u,barColor:"#84cc16"}}return{...u,barColor:m}}return{...u,barColor:u.fillColor||"var(--ui-primary)"}})}),B=m=>m.barColor,H=N(()=>P.value.length>0);ie(P,m=>{m.length||(x.value=null)});function I(){n.value<e.length-1&&n.value++}function ee(){n.value>0&&n.value--}const Z=lt(),pe=N(()=>Z.selectedSpecies!==null),ve=De("(max-width: 767px)");function w(m){x.value?Z.selectSpecies(x.value,"edna"):console.log("No datum available from tooltip.")}return(m,u)=>{const f=ye;return g(),E("div",null,[$(ve)?D("",!0):(g(),E("div",Zs,[p(f,{onClick:ee,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),p(f,{onClick:I,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),$(ve)?D("",!0):(g(),E("div",{key:1,class:ce(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":n.value===0}]),onClick:w},[p($(uo),{data:P.value,width:o.value,height:"200"},{default:F(()=>[p($(Oo),{data:P.value,x:S,y:k,color:B,barPadding:.1},null,8,["data"]),p($(Bt),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:P.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":_},null,8,["numTicks"]),p($(Bt),{type:"y",label:"Antal skogar",gridLine:!1}),H.value?(g(),K($(qo),{key:0,triggers:h,followCursor:!0})):D("",!0),H.value?(g(),K($(Go),{key:1,color:B,template:A})):D("",!0)]),_:1},8,["data","width"])],2))])}}}),Qs=Object.assign(Le(Js,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),gt=Pa("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:r=>t=>r.componentTabs[t]||"grid"},actions:{setActiveTab(r,t){this.componentTabs[r]=t}}}),en={class:"md:flex justify-between relative"},tn={class:"md:flex gap-4"},an={class:"md:mt-0 mt-1 mb-1 md:mb-2"},on={class:"text-3xl font-medium flex items-center text-secondary-500"},sn={class:"flex gap-2"},nn={class:"text-md text-neutral-500"},rn={class:"justify-between hidden"},ln={class:"flex gap-3 items-start"},un={key:0,class:""},cn={key:1,class:""},dn=_e({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(r,{emit:t}){const e=U(!1),n=U(!1),o=U([]),s=U([]),i=U(""),d=U(!0),l=t,v=gt(),V=N({get:()=>ve.value?"spatialForest":v.getActiveTab("EdnaComponent"),set:u=>{ve.value||v.setActiveTab("EdnaComponent",u)}}),S=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],k=Ve(),{geography:_,forestType:y,standAge:x,vegetationType:A}=Ba(k),h=N(()=>_.value),P=N(()=>y.value),B=N(()=>x.value),H=N(()=>A.value),I=U([]),ee=N(()=>I.value.length),Z=N(()=>I.value.length>0&&I.value[0].sample_env_count||0),pe=U("100%"),ve=De("(max-width: 767px)"),w=N(()=>({mark:!1,...ve.value?{images:!1}:{}}));async function m(u,f,G,j){if(!u||!f||!G||!j){I.value=[];return}if(!ct(u,f,G,j)){I.value=[];return}const J=`edna-${u}-${f}-${G}-${j}.json`;try{const M=await fetch(`/edna/${J}`);if(!M.ok){if(M.status===404){I.value=[];return}throw new Error(`Failed to fetch ${J}`)}const X=await M.json();X.sort((q,R)=>R.sample_plot_count-q.sample_plot_count),I.value=X}catch(M){console.error("Error fetching data:",M),I.value=[]}}return ie(()=>[_.value,y.value,x.value,A.value],([u,f,G,j])=>{u&&f&&G&&j&&m(u,f,G,j)},{immediate:!0}),(u,f)=>{const G=ye,j=Ke,J=rt,M=it,X=dt,q=Qs,R=Oe;return g(),E("div",null,[p(R,{class:"rounded-none sm:rounded-lg",variant:"ghost"},{default:F(()=>[b("div",en,[p(G,{color:"neutral",variant:"soft",size:"xl",onClick:f[0]||(f[0]=O=>u.$emit("enlarge")),class:ce([u.isNormalView?"hidden":"md:hidden","rounded-full absolute top-0 right-0"]),icon:u.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"]),b("div",tn,[b("div",an,[b("div",on,[p(j,{name:"solar:dna-linear",class:"mr-2"}),f[10]||(f[10]=b("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),b("div",sn,[b("h1",nn,Q(ee.value)+" arter baserat på "+Q(Z.value)+" skogar",1),Z.value<10?(g(),K(J,{key:0,icon:Z.value<10?"i-cuida-warning-outline":void 0,size:"md",color:Z.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:F(()=>[se(Q(Z.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):D("",!0)])]),b("div",rn,[p(M,{modelValue:V.value,"onUpdate:modelValue":f[1]||(f[1]=O=>V.value=O),items:S,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),b("div",ln,[p(G,{class:"hidden md:flex h-fit ring-muted/60",color:"neutral",variant:"outline",size:"sm",onClick:f[2]||(f[2]=O=>d.value=!d.value),label:d.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),p(Ee,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:F(()=>[V.value==="spatialForest"?(g(),E("div",un,[p(X,{onEnlarge:f[3]||(f[3]=O=>l("enlarge")),isNormalView:u.isNormalView,"column-visibility-overrides":w.value},null,8,["isNormalView","column-visibility-overrides"])])):V.value==="columnChart"?(g(),E("div",cn,[d.value?(g(),K(q,{key:0,class:"mb-6",chartData:I.value,chartWidth:pe.value,geography:h.value,forestType:P.value,standAge:B.value,vegetationType:H.value,matsvampFilter:e.value,giftsvampFilter:n.value,gruppFilter:o.value,statusFilter:s.value,"search-term":i.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):D("",!0),p(X,{onEnlarge:f[4]||(f[4]=O=>l("enlarge")),"onUpdate:matsvampFilter":f[5]||(f[5]=O=>e.value=O),"onUpdate:giftsvampFilter":f[6]||(f[6]=O=>n.value=O),"onUpdate:gruppFilter":f[7]||(f[7]=O=>o.value=O),"onUpdate:statusFilter":f[8]||(f[8]=O=>s.value=O),"onUpdate:searchTerm":f[9]||(f[9]=O=>i.value=O),isNormalView:u.isNormalView,"column-visibility-overrides":w.value,"search-term":i.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):D("",!0)]),_:1})]),_:1})])}}}),zt=Object.assign(Le(dn,[["__scopeId","data-v-d27777d3"]]),{__name:"EdnaComponent"}),gn={class:"p-2 flex gap-2"},pn={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},vn=["onClick"],mn={class:"w-full h-24 relative"},fn=["src"],hn={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},bn={class:"absolute bottom-1 left-1 flex gap-1"},kn={class:"p-2 pt-1"},yn={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},_n={class:"flex justify-between items-center px-5 py-2"},Ct={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(r){const t=U([]),e=U([]),n=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],o=r,s=Ve(),i=lt(),d=U([]),l=U(!0);async function v(){const{geography:w,forestType:m,standAge:u,vegetationType:f}=s,G=`${o.dataType}-${w}-${m}-${u}-${f}.json`;try{const j=await fetch(`/${o.dataTypeFolder}/${G}`);if(!j.ok)throw new Error(`Failed to fetch data from ${G}`);d.value=await j.json(),l.value=!1}catch(j){console.error("Error fetching species data:",j)}}ie(()=>[s.geography,s.forestType,s.standAge,s.vegetationType],()=>{l.value=!0,v()},{immediate:!0});const V=U({column:"",direction:"asc"}),S=N(()=>{let w=d.value.slice();if(V.value?.column){const{column:m,direction:u}=V.value;w.sort((f,G)=>{const j=f[m],J=G[m];if(j==null&&J!=null)return 1;if(j!=null&&J==null)return-1;if(j==null&&J==null)return 0;const M=String(j).localeCompare(String(J),"sv",{numeric:!0,sensitivity:"base"});return u==="asc"?M:-M})}else w.sort((m,u)=>{const f=m.RankRed??99999,G=u.RankRed??99999;if(f!==G)return f-G;const j=m.Commonname?.toString().toLowerCase()||"",J=u.Commonname?.toString().toLowerCase()||"";return j.localeCompare(J,"sv",{numeric:!0,sensitivity:"base"})});return w}),k=U(""),_=N(()=>{let w=S.value;if(k.value.trim()!==""){const m=k.value.trim().toLowerCase();w=w.filter(u=>u.Commonname&&u.Commonname.toLowerCase().includes(m)||u.Scientificname&&u.Scientificname.toLowerCase().includes(m))}return o.filterEdible?w=w.filter(m=>{const u=m["Nyasvamp-boken"];return u&&String(u).toLowerCase()==="x"}):o.filterPoison&&(w=w.filter(m=>{const u=m["Nyasvamp-boken"];return!(u&&String(u).toLowerCase()==="x")})),w}),y=N(()=>n.map(w=>{let m=0;return w.value==="Ej bedömd"?m=_.value.filter(u=>{const f=String(u.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(f)}).length:w.value==="Signalart"?m=_.value.filter(u=>u.SIGNAL_art==="S").length:m=_.value.filter(u=>String(u.RL2020kat).trim()===w.value).length,{...w,label:`${w.label} (${m})`}})),x=N(()=>{const w={};return _.value.forEach(m=>{const u=m[o.grupp];if(u!=null){const f=String(u).trim();f&&f.toLowerCase()!=="undefined"&&(w[f]=(w[f]||0)+1)}}),Object.keys(w).map(m=>({value:m,label:`${Z(m)} (${w[m]})`}))}),A=N(()=>{let w=S.value;if(k.value.trim()!==""){const m=k.value.trim().toLowerCase();w=w.filter(u=>u.Commonname&&u.Commonname.toLowerCase().includes(m)||u.Scientificname&&u.Scientificname.toLowerCase().includes(m)),console.log("After search filtering, count:",w.length)}return t.value.length>0&&(console.log("Status filter values:",t.value),w=w.filter(m=>{const u=String(m.RL2020kat).trim(),f=t.value.some(G=>{const j=G&&G.value?G.value:G;return j==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(u):j==="Signalart"?m.SIGNAL_art==="S":u===j});return console.log(`Row "${m.Commonname}" with RL2020kat "${u}" matches:`,f),f}),console.log("After status filtering, count:",w.length)),e.value.length>0&&(w=w.filter(m=>{const u=m[o.grupp],f=u!=null?String(u).trim():"";return e.value.includes(f)})),o.filterEdible?(w=w.filter(m=>{const u=m["Nyasvamp-boken"];return u&&String(u).toLowerCase()==="x"}),console.log("After edible filtering, count:",w.length)):o.filterPoison&&(w=w.filter(m=>{const u=m["Nyasvamp-boken"];return!(u&&String(u).toLowerCase()==="x")}),console.log("After poison filtering, count:",w.length)),console.log("Final filteredData count:",w.length),w}),h=N(()=>o.isNormalView?24:32),P=U(1),B=N(()=>{const w=(P.value-1)*h.value;return A.value.slice(w,w+h.value)}),H=N(()=>A.value.length>0?(P.value-1)*h.value+1:0),I=N(()=>Math.min(P.value*h.value,A.value.length)),ee=N(()=>A.value.length);N(()=>Math.ceil(ee.value/h.value));function Z(w){return w?w.charAt(0).toUpperCase()+w.slice(1).toLowerCase():""}function pe(w){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[w]||"Ej bedömd"}function ve(w){i.selectSpecies(w,o.dataTypeFolder)}return(w,m)=>{const u=Wt,f=qt,G=yt,j=rt,J=ra;return g(),E(we,null,[b("div",gn,[p(u,{icon:"i-heroicons-magnifying-glass",modelValue:k.value,"onUpdate:modelValue":m[0]||(m[0]=M=>k.value=M),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),p(f,{modelValue:t.value,"onUpdate:modelValue":m[1]||(m[1]=M=>t.value=M),items:y.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),p(f,{modelValue:e.value,"onUpdate:modelValue":m[2]||(m[2]=M=>e.value=M),items:x.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),b("div",pn,[(g(!0),E(we,null,Te(B.value,(M,X)=>(g(),E("div",{key:M.Commonname+M.Scientificname+X,class:"bg-white dark:bg-neutral-800 rounded-lg border overflow-hidden border-muted/50 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:q=>ve(M)},[b("div",mn,[M.images&&M.images.length?(g(),E("img",{key:0,src:M.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,fn)):(g(),E("div",hn,[p(G,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),b("div",bn,[M.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(M.RL2020kat)?(g(),K(j,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:M.RL2020kat!=="Saknas"?pe(M.RL2020kat):"Ej bedömd"},null,8,["label"])):D("",!0),M.SIGNAL_art==="S"?(g(),K(j,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):D("",!0)])]),b("div",kn,[b("div",yn,Q(Z(M.Commonname)),1)])],8,vn))),128))]),b("div",_n,[b("div",null,[b("p",null," Visar "+Q(H.value)+" till "+Q(I.value)+" av "+Q(ee.value)+" arter ",1)]),b("div",null,[p(J,{"items-per-page":h.value,page:P.value,"onUpdate:page":m[3]||(m[3]=M=>P.value=M),total:ee.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},xn={class:"md:flex justify-between items-start"},wn={class:"w-full flex justify-between items-start"},Sn={class:"text-md text-neutral-500 md:mb-2"},Cn={class:"md:flex gap-1 items-center hidden"},Nn={key:0},$n={key:1},Tn={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Ve(),n=U(0);async function o(_,y,x,A=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(B=>!B)){x.value=0;return}const P=`${y}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const B=await fetch(`/${_}/${P}`);if(!B.ok)throw new Error("Network response was not ok");const H=await B.json();x.value=A?H.filter(I=>I[A]==="x").length:H.length}catch(B){console.error("Failed to fetch edible count",B),x.value=0}}ie(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("edible","edibledata",n,"Nyasvamp-boken"),{immediate:!0});const s=t,i=[{label:"Galleri",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"Tabell",icon:"material-symbols:table-outline",value:"table"}],d=gt(),l=r,v=De("(max-width: 767px)"),V=N(()=>v.value||l.isNormalView),S=N({get:()=>V.value?"table":d.getActiveTab("FullscreenEdible"),set:_=>{V.value||d.setActiveTab("FullscreenEdible",_)}}),k=N(()=>S.value==="table");return(_,y)=>{const x=Ke,A=ye,h=it,P=dt,B=Ct,H=Oe;return g(),E("div",null,[p(H,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:F(()=>[b("div",xn,[b("div",wn,[b("div",null,[b("div",{onClick:y[0]||(y[0]=I=>_.$emit("enlarge")),class:"group cursor-pointer dark:text-neutral-300 text-warning-500 text-4xl md:text-3xl font-medium flex items-center"},[p(x,{name:"icon-park-solid:knife-fork",class:"mr-2"}),y[4]||(y[4]=b("h1",null," Matsvampar ",-1)),p(x,{name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})]),b("h2",Sn,Q(n.value)+" arter",1)]),p(A,{color:"neutral",variant:"soft",size:"xl",onClick:y[1]||(y[1]=I=>_.$emit("enlarge")),class:ce([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])]),b("div",Cn,[V.value?D("",!0):(g(),K(h,{key:0,class:"flex mt-2",modelValue:S.value,"onUpdate:modelValue":y[2]||(y[2]=I=>S.value=I),items:i,variant:"pill",color:"neutral",size:"md",ui:{list:"bg-transparent",indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),p(Ee,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:F(()=>[k.value?(g(),E("div",Nn,[p(P,{onEnlarge:y[3]||(y[3]=I=>s("enlarge")),"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(g(),E("div",$n,[p(B,{"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},Mt=Le(Tn,[["__scopeId","data-v-372515fe"]]),Ln={class:"md:flex justify-between items-start"},An={class:"md:flex gap-4"},En={class:"w-full flex justify-between items-start"},Vn={class:"text-md text-neutral-500 md:mb-2"},Pn={class:"md:flex gap-4 items-center hidden"},Bn={key:0},Fn={key:1},Rn={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Ve(),n=U(0);async function o(y,x,A,h=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(H=>!H)){A.value=0;return}const B=`${x}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const H=await fetch(`/${y}/${B}`);if(!H.ok)throw new Error("Network response was not ok");const I=await H.json();A.value=h?I.filter(ee=>ee[h]==="x").length:I.length}catch{A.value=0}}ie(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("edible","edibledata",n,"Giftsvamp"),{immediate:!0});const s=t,i=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],d=gt(),l=r,v=De("(max-width: 767px)"),V=N(()=>v.value||l.isNormalView),S=()=>{l.isNormalView&&s("enlarge")},k=N({get:()=>V.value?"table":d.getActiveTab("FullscreenEdible"),set:y=>{V.value||d.setActiveTab("FullscreenEdible",y)}}),_=N(()=>k.value==="table");return(y,x)=>{const A=Ke,h=ye,P=it,B=dt,H=Ct,I=Oe;return g(),K(I,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:F(()=>[b("div",Ln,[b("div",An,[b("div",En,[b("div",null,[b("div",{onClick:S,class:ce(["flex items-center text-poison-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",r.isNormalView?"group cursor-pointer":"cursor-default"])},[p(A,{name:"i-hugeicons-danger",class:"mr-2"}),x[3]||(x[3]=b("h1",null," Giftsvampar ",-1)),r.isNormalView?(g(),K(A,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):D("",!0)],2),b("h2",Vn,Q(n.value)+" arter",1)]),p(h,{color:"neutral",variant:"soft",size:"xl",onClick:x[0]||(x[0]=ee=>y.$emit("enlarge")),class:ce([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),b("div",Pn,[V.value?D("",!0):(g(),K(P,{key:0,class:"flex mt-2",modelValue:k.value,"onUpdate:modelValue":x[1]||(x[1]=ee=>k.value=ee),items:i,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),p(Ee,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:F(()=>[_.value?(g(),E("div",Bn,[p(B,{onEnlarge:x[2]||(x[2]=ee=>s("enlarge")),"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(g(),E("div",Fn,[p(H,{"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Dt=Le(Rn,[["__scopeId","data-v-e06edb37"]]),zn={class:"md:flex justify-between items-start"},Mn={class:"md:flex gap-4"},Dn={class:"w-full flex justify-between items-start"},Un={class:"text-md text-neutral-500 md:mb-2"},jn={class:"md:flex gap-4 items-center hidden"},In={key:0},Gn={key:1},Kn={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Ve(),n=U(0);async function o(y,x,A,h=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(H=>!H)){A.value=0;return}const B=`${x}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const H=await fetch(`/${y}/${B}`);if(!H.ok)throw new Error("Network response was not ok");const I=await H.json();A.value=h?I.filter(ee=>ee[h]==="x").length:I.length}catch(H){console.error("Failed to fetch count for",x,H),A.value=0}}ie(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("redlisted","redlisted",n),{immediate:!0});const s=t,i=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],d=r,l=De("(max-width: 767px)"),v=N(()=>l.value||d.isNormalView),V=gt(),S=N({get:()=>v.value?"table":V.getActiveTab("FullscreenEdible"),set:y=>{v.value||V.setActiveTab("FullscreenEdible",y)}}),k=()=>{d.isNormalView&&s("enlarge")},_=N(()=>S.value==="table");return(y,x)=>{const A=Ke,h=ye,P=it,B=dt,H=Ct,I=Oe;return g(),K(I,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:F(()=>[b("div",zn,[b("div",Mn,[b("div",Dn,[b("div",null,[b("div",{onClick:k,class:ce(["flex items-center text-signal-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",r.isNormalView?"group cursor-pointer":"cursor-default"])},[p(A,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),x[3]||(x[3]=b("h1",{class:"truncate"}," Naturvårdsarter ",-1)),r.isNormalView?(g(),K(A,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):D("",!0)],2),b("h2",Un,Q(n.value)+" arter",1)]),p(h,{color:"neutral",variant:"soft",size:"xl",onClick:x[0]||(x[0]=ee=>y.$emit("enlarge")),class:ce([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),b("div",jn,[v.value?D("",!0):(g(),K(P,{key:0,class:"flex mt-2",modelValue:S.value,"onUpdate:modelValue":x[1]||(x[1]=ee=>S.value=ee),items:i,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),p(Ee,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:F(()=>[_.value?(g(),E("div",In,[p(B,{onEnlarge:x[2]||(x[2]=ee=>s("enlarge")),"is-normal-view":r.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(g(),E("div",Gn,[p(H,{"is-normal-view":r.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Ut=Le(Kn,[["__scopeId","data-v-0d234cbe"]]),On={class:"grid grid-cols-12"},Wn={class:"col-span-12"},qn={key:0,class:"flex justify-between p-3 border-b border-muted/50"},Hn={class:"flex gap-3"},Yn={class:"flex flex-col sm:flex-row gap-1.5 w-fit h-fit"},Xn={key:"dna",class:"col-span-12 sm:pt-2"},Zn={class:"hidden md:block"},Jn={class:"flex justify-between items-center text-secondary-500"},Qn={class:"truncate"},er={class:"text-2xl font-semibold flex items-center"},tr={key:1,class:"text-neutral-500"},ar={class:"flex justify-between items-center text-warning-500"},or={class:"text-2xl font-semibold flex items-center"},sr={key:1,class:"text-neutral-500"},nr={class:"flex justify-between items-center text-poison-500"},rr={class:"text-2xl font-semibold flex items-center"},lr={key:1,class:"text-neutral-500"},ir={class:"flex justify-between items-center text-signal-500"},ur={class:"text-2xl font-semibold flex items-center"},cr={key:1,class:"text-neutral-500"},dr={class:"flex flex-col sm:flex-row gap-1.5 p-1 rounded-lg ring ring-muted/50 sm:w-fit h-fit bg-muted/30"},gr={key:"knowledge",class:"col-span-12 sm:pt-2"},pr={key:0,class:"space-y-4"},vr={key:1,class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},mr={class:"col-span-4 flex flex-col h-full"},fr={class:"col-span-4 flex flex-col"},hr={class:"col-span-4 flex flex-col"},br={__name:"NormalView",props:{activeView:{type:String,default:null}},emits:["enlarge","closeView"],async setup(r,{emit:t}){let e,n;const{data:o}=([e,n]=Fa(()=>Ra("mykorrhizasvampar",()=>za("mykorrhizasvampar").first())),e=await e,n(),e);if(!o.value)throw Ma({statusCode:404,statusMessage:"Page not found",fatal:!0});const s=U(!0);U(!1);const i=Ve(),d=Gt(),l=U(null),v=U(null),V=U(null),S=U(null),k=r,_=t,y={FullScreenEdible:"knowledge",FullScreenPoison:"knowledge",RedlistedComponent:"knowledge",FullScreenEdna:"knowledge"},x={FullScreenEdible:Mt,FullScreenPoison:Dt,RedlistedComponent:Ut,FullScreenEdna:zt},A=q=>{y[q]&&(h.value=y[q]),_("enlarge",q)},h=U("dna"),P=U(0),B=()=>{P.value=window.innerWidth};Ge(()=>{B(),window.addEventListener("resize",B)}),nt(()=>{window.removeEventListener("resize",B)}),N(()=>(P.value>=768,"md"));const H=N(()=>P.value<768),I=N(()=>i.geography),ee=N(()=>i.forestType),Z=N(()=>i.standAge),pe=N(()=>i.vegetationType),ve=N(()=>x[k.activeView??""]??null),w=N(()=>k.activeView?k.activeView==="FullScreenEdible"||k.activeView==="FullScreenPoison"?{isNormalView:!1,geography:I.value,forestType:ee.value,standAge:Z.value,vegetationType:pe.value}:{isNormalView:!1}:{isNormalView:!1}),m=N(()=>k.activeView?`${k.activeView}-${d.fullPath}`:void 0),u={FullScreenEdible:"Matsvampar",FullScreenPoison:"Giftsvampar",RedlistedComponent:"Naturvårdsarter",FullScreenEdna:"Alla mykorrhizasvampar"},f=N(()=>k.activeView==="FullScreenEdna"),G=N(()=>u[k.activeView??""]??"");function j(){h.value="dna",_("closeView")}N(()=>ve.value?[{label:"Enligt samlad kunskap",onClick:j,class:"cursor-pointer p-1 px-2 rounded hover:bg-muted"},{label:G.value,class:"cursor-default text-neutral"}]:[]);const J=()=>{f.value?(h.value="knowledge",_("closeView")):A("FullScreenEdna")};ie(()=>k.activeView,q=>{q&&y[q]&&(h.value=y[q])}),ie(h,q=>{k.activeView&&y[k.activeView]!==q&&_("closeView")});async function M(q,R,O,le=null){if([i.geography,i.forestType,i.standAge,i.vegetationType].some(Y=>!Y)){O.value=0;return}const ge=`${R}-${i.geography}-${i.forestType}-${i.standAge}-${i.vegetationType}.json`;try{const Y=await fetch(`/${q}/${ge}`);if(!Y.ok)throw new Error("Network response was not ok");const me=await Y.json();le?O.value=me.filter(de=>de[le]==="x").length:O.value=me.length}catch(Y){console.error("Failed to fetch count for",R,Y),O.value=0}}async function X(){const q=i.geography,R=i.forestType,O=i.standAge,le=i.vegetationType;if(!q||!R||!O||!le){S.value=0;return}if(!ct(q,R,O,le)){S.value=0;return}S.value=null;const he=`edna-${q}-${R}-${O}-${le}.json`;try{const ge=await fetch(`/edna/${he}`);if(!ge.ok){S.value=0;return}const Y=await ge.json();S.value=Array.isArray(Y)?Y.length:0}catch(ge){console.error("Failed to fetch DNA count",ge),S.value=0}}return ie(()=>[i.geography,i.forestType,i.standAge,i.vegetationType],()=>{M("redlisted","redlisted",l),M("edible","edibledata",v,"Nyasvamp-boken"),M("edible","edibledata",V,"Giftsvamp"),X()},{immediate:!0}),(q,R)=>{const O=Wa,le=ye,he=qa,ge=Ke,Y=Ot,me=Oe,de=It,fe=Ha,Ce=Da,Ue=Ya,He=Kt;return g(),E("div",On,[b("div",Wn,[H.value?D("",!0):(g(),E("div",qn,[b("div",Hn,[p(le,{onClick:R[0]||(R[0]=xe=>h.value="dna"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-lg",variant:h.value==="dna"?"subtle":"outline",color:"neutral"},{default:F(()=>[p(O,{title:"Enligt DNA",description:"Från markinventeringens jordprover"})]),_:1},8,["variant"]),p(le,{onClick:R[1]||(R[1]=xe=>h.value="knowledge"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-lg",variant:h.value==="knowledge"?"subtle":"outline",color:"neutral"},{default:F(()=>[p(O,{title:"Enligt fruktkroppar",description:"Utifrån var fruktkroppar förekommer"})]),_:1},8,["variant"])]),b("div",Yn,[h.value!=="dna"?(g(),K(he,{key:0,color:h.value==="dna"?"secondary":"neutral",variant:"outline",ui:{close:" cursor-pointer"},title:h.value==="dna"?"Arterna är sorterade i fallande ordning baserat på hur många skogar deras DNA påträffats i.":"Arterna är sorterade i fallande ordning baserat på hur många gånger de har rapporterats i Artportalen.",class:"h-fit max-w-96 text-muted ring-muted/50","onUpdate:open":R[2]||(R[2]=xe=>s.value=xe)},null,8,["color","title"])):D("",!0)])])),p(Ee,{name:"view-transition",mode:"out-in"},{default:F(()=>[h.value==="dna"?(g(),E("div",Xn,[b("div",Zn,[p(zt,{isNormalView:!f.value,onEnlarge:J},null,8,["isNormalView"])]),p(He,{class:"md:hidden space-y-3 pt-3 bg-muted/50"},{default:F(()=>[p(O,{title:"Enligt DNA",description:"Från markinventeringens jordprover"}),p(me,{onClick:R[3]||(R[3]=xe=>A("FullScreenEdna")),class:"ring-muted/50"},{default:F(()=>[b("div",Jn,[b("div",Qn,[b("div",er,[p(ge,{name:"solar:dna-linear",class:"mr-2"}),R[10]||(R[10]=b("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),S.value===null?(g(),K(Y,{key:0,class:"h-4 w-12 mt-2"})):(g(),E("h1",tr,Q(S.value)+" arter",1))]),p(le,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(O,{class:"mt-6",title:"Enligt fruktkroppar",description:"Utifrån vart fruktkroppar förekommer"}),p(me,{onClick:R[4]||(R[4]=xe=>A("FullScreenEdible")),class:"ring-muted/50"},{default:F(()=>[b("div",ar,[b("div",null,[b("h1",or,[p(ge,{name:"icon-park-solid:knife-fork",class:"mr-2"}),R[11]||(R[11]=se("Matsvampar ",-1))]),v.value===null?(g(),K(Y,{key:0,class:"h-4 w-12 mt-2"})):(g(),E("h1",sr,Q(v.value)+" arter",1))]),p(le,{icon:"i-heroicons-chevron-right",class:"rounded-full ring-muted/50",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(me,{onClick:R[5]||(R[5]=xe=>A("FullScreenPoison")),class:"ring-muted/50"},{default:F(()=>[b("div",nr,[b("div",null,[b("h1",rr,[p(ge,{name:"i-hugeicons-danger",class:"mr-2"}),R[12]||(R[12]=se("Giftsvampar ",-1))]),v.value===null?(g(),K(Y,{key:0,class:"h-4 w-12 mt-2"})):(g(),E("h1",lr,Q(V.value)+" arter",1))]),p(le,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(me,{onClick:R[6]||(R[6]=xe=>A("RedlistedComponent")),class:"ring-muted/50"},{default:F(()=>[b("div",ir,[b("div",null,[b("h1",ur,[p(ge,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),R[13]||(R[13]=se(" Naturvårdsarter ",-1))]),l.value===null?(g(),K(Y,{key:0,class:"h-4 w-12 mt-2"})):(g(),E("h1",cr,Q(l.value)+" arter",1))]),p(le,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(de,{class:"my-6"}),b("div",dr,[p(Ce,{fullscreen:!!H.value,title:$(o).ecologyintro?.title??"",description:$(o).ecologyintro?.description??"",ui:{header:"items-start gap-2 shrink-0",title:"whitespace-normal",description:"whitespace-normal leading-snug"}},{body:F(()=>[p(fe,{section:$(o).ecologyintro},null,8,["section"])]),default:F(()=>[p(he,{icon:"i-heroicons-newspaper",color:"neutral",variant:"outline",title:"Ekologi",class:"sm:w-fit h-fit ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","title","description"]),p(Ce,{fullscreen:!!H.value,title:$(o).underlag,description:$(o).underlagdescription},{body:F(()=>[p(Ue,{underlag:$(o).underlag,underlagbild:$(o).underlagbild,sections:$(o).underlagSections},null,8,["underlag","underlagbild","sections"])]),default:F(()=>[p(he,{icon:"i-heroicons-document-magnifying-glass",color:"neutral",variant:"outline",title:"Underlag",class:"sm:w-fit h-fit ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","title","description"])])]),_:1})])):(g(),E("div",gr,[p(Ee,{name:"fade",mode:"out-in"},{default:F(()=>[ve.value?(g(),E("div",pr,[(g(),K(Ua(ve.value),Ae(w.value,{key:m.value,onEnlarge:j,class:"w-full"}),null,16))])):(g(),E("div",vr,[b("div",mr,[(g(),K(Mt,{geography:I.value,forestType:ee.value,standAge:Z.value,vegetationType:pe.value,isNormalView:!0,onEnlarge:R[7]||(R[7]=xe=>A("FullScreenEdible")),key:$(d).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),b("div",fr,[(g(),K(Dt,{geography:I.value,forestType:ee.value,standAge:Z.value,vegetationType:pe.value,isNormalView:!0,onEnlarge:R[8]||(R[8]=xe=>A("FullScreenPoison")),key:$(d).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),b("div",hr,[p(Ut,{isNormalView:!0,onEnlarge:R[9]||(R[9]=xe=>A("RedlistedComponent"))})])]))]),_:1})]))]),_:1})])])}}},kr=Le(br,[["__scopeId","data-v-e54ac654"]]),yr={class:"bg-muted"},_r={class:"flex flex-col min-h-screen"},xr={__name:"DashboardC",setup(r){De("(max-width: 767px)");const t=Gt(),e=U(!1),n=U(!0),o=lt(),s=Ve();ie(()=>o.selectedSpecies,_=>{_&&(e.value=!0)}),ie(e,_=>{_||o.clearSelection()});const i=U(null),d=N(()=>s.geography&&s.forestType&&s.standAge&&s.vegetationType),l=_=>{i.value=_},v=()=>{i.value=null},V=_=>{_.key==="Escape"&&o.selectedSpecies&&o.clearSelection()};function S(_){return Array.isArray(_)?_[0]??null:typeof _=="string"&&_.length>0?_:null}function k(_){const y={geography:S(_.geography),forestType:S(_.forestType),standAge:S(_.standAge),vegetationType:S(_.vegetationType)};y.geography&&y.forestType&&y.standAge&&y.vegetationType&&s.setParams(y)}return Ge(()=>{window.addEventListener("keydown",V),k(t.params)}),jt(()=>{window.removeEventListener("keydown",V)}),ie(()=>t.params,_=>{k(_)},{immediate:!0}),ie(()=>[s.geography,s.forestType,s.standAge,s.vegetationType],()=>{s.geography&&s.forestType&&s.standAge&&s.vegetationType&&`${encodeURIComponent(s.geography)}${encodeURIComponent(s.forestType)}${encodeURIComponent(s.standAge)}${encodeURIComponent(s.vegetationType)}`},{deep:!0}),ie(i,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(_,y)=>{const x=Ss,A=Ls,h=Oa,P=Kt;return g(),E("div",yr,[p(A,{modelValue:e.value,"onUpdate:modelValue":y[0]||(y[0]=B=>e.value=B),pinned:n.value,"onUpdate:pinned":y[1]||(y[1]=B=>n.value=B)},{default:F(()=>[p(x,{species:$(o).selectedSpecies,source:$(o).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),p(P,null,{default:F(()=>[p(Ee,{name:"fade"},{default:F(()=>[d.value?(g(),K(h,{key:0})):D("",!0)]),_:1})]),_:1}),b("div",_r,[p(P,{class:"w-full px-0"},{default:F(()=>[p(Ee,{name:"fade",mode:"out-in"},{default:F(()=>[p(kr,{class:"block sm:border border-muted/50 bg-white sm:rounded-xl sm:shadow mb-4","active-view":i.value,onEnlarge:l,onCloseView:v},null,8,["active-view"])]),_:1})]),_:1})])])}}},wr=Le(xr,[["__scopeId","data-v-54521b5e"]]),Sr={};function Cr(r,t){const e=wr;return g(),K(e)}const Jr=Le(Sr,[["render",Cr]]);export{Jr as default};
