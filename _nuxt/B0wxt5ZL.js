import{A as W,aI as X,V as b,r as u,J as y,aC as Y,aD as Z,aE as ee,d as T,f as F,e as v,h as l,g as n,am as te,O as se,w as p,b1 as ae,aS as le,F as ne,af as oe,M as ie,n as re,ae as ue,t as C}from"#entry";import{_ as me}from"./ykIe5TGn.js";import{_ as ce}from"./0jE9L5HG.js";import{_ as de}from"./BRtxvdvC.js";import{_ as fe}from"./Dg0PInZE.js";import{u as ve}from"./DYDX-hoP.js";import"./BAukkL0b.js";import"./DtaPNFOl.js";import"./BstbYvQo.js";import"./C7aA8FHg.js";import"./BucMS6B2.js";const pe={key:0,class:"flex flex-col gap-4 min-w-0 max-w-full"},ge={class:"flex w-full justify-between items-center"},_e={key:0,class:"text-sm text-muted mt-1"},ke={class:"relative w-full aspect-video"},he=["src","alt"],xe=["src","alt"],we={class:"flex items-center gap-2 text-xs text-neutral-500"},be={class:"flex cursor-help"},ye={class:"flex flex-col gap-2 p-4"},Te={class:"flex w-full"},Ce={class:"flex w-full justify-between"},ze={class:"flex w-full justify-between"},Se={class:"w-full max-w-full min-w-0 overflow-x-auto overflow-y-visible"},$e={class:"flex flex-nowrap whitespace-nowrap gap-2 w-full my-1"},Ne={class:"space-y-2"},Ae={class:"text-xl font-semibold text-neutral-900"},Ie={class:"text-md text-muted"},Ue={class:"text-md"},Ve=W({__name:"SkogsskotselTimeline",props:{frameworkId:{}},async setup(L){let c,z;const B=L,g=X("skogsskotselFramework",null),M=ve(),O=b(()=>B.frameworkId||g?.id?.value||""),d=g?.startskog??u("naturskog"),S=g?.timelineTime??u(void 0),$=b({get:()=>d.value,set:e=>{d.value=e}}),_=u(!1),k=u(1),m=u(null),i=u(0),N=[{label:"Inte kalavverkad",value:"naturskog"},{label:"Kalavverkad",value:"produktionsskog_"}],H=N.map(e=>({label:e.label,value:e.value,icon:e.value==="naturskog"?"i-material-symbols-light-forest-rounded":"i-ph-farm"}));y(d,e=>{const t=N.findIndex(s=>s.value===e);t!==-1&&(M.selectedStartskog=t)});const A=e=>{const t=e?.toLowerCase?.()??"";return t==="intekalavverkad"?"naturskog":t==="produktionsskog"?"produktionsskog_":e},I=e=>(e?.toLowerCase?.()??"")==="ingenatgard"?"naturskydd":e,h=e=>{const t=String(e).trim().toLowerCase();return t.includes("efter")?"efter":t.includes("innan")||t.includes("före")||t.includes("fore")?"före":t.replace(/[^0-9]/g,"")||t},U=(e,t,s,a="visa_visa")=>{const f=x=>x.trim().toLowerCase().replace(/[^a-z0-9_åäö]+/g,"_").replace(/_+/g,"_");return`/images/thumbnails/${`${f(e)}_${h(String(t))}_${a}_${f(s)}.webp`}`},{data:q}=([c,z]=Y(()=>Z("forestry-timeline-skogsskotsel",()=>ee("forestryTimelines").first())),c=await c,z(),c),r=b(()=>{const e=q.value?.entries??[],t=O.value,s=I(t);return e.map(a=>({...a,startskog:A(a.startskog),atgard:I(a.atgard)})).filter(a=>a.startskog===A(d.value)&&a.atgard===s).map(a=>({tid:a.tid,skog:a.skog,svamp:a.svamp,thumb:U(a.atgard,a.tid,a.startskog,"visa_visa"),thumbHidden:U(a.atgard,a.tid,a.startskog,"visa_dölj")}))});function D(){m.value?.emblaApi?.scrollPrev?.()}function E(){m.value?.emblaApi?.scrollNext?.()}function P(e){i.value=e}function J(e){i.value=e,m.value?.emblaApi?.scrollTo?.(e)}y(r,e=>{i.value=0,S.value=V(e[0]?.tid),e.length&&requestAnimationFrame(()=>{m.value?.emblaApi?.scrollTo?.(0)})});const V=e=>{if(!e)return;const t=h(e);if(t==="före")return"före";if(t==="efter")return"efter";const s=Number(t);if(!Number.isNaN(s))return String(s)};y(i,()=>{const e=r.value[i.value]?.tid;S.value=V(e)});function K(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function G(e){if(!e)return"";const t=h(e);if(t==="före")return"Innan avverkning";if(t==="efter")return"Efter avverkning";const s=Number(t);return Number.isNaN(s)?e.charAt(0).toUpperCase()+e.slice(1):`${s} år efter avverkning`}return(e,t)=>{const s=te,a=me,f=ce,j=le,x=de,Q=ue,R=fe;return r.value.length?(v(),T("div",pe,[l("div",ge,[t[3]||(t[3]=l("span",{class:"text-md"},"Har skogen varit kalavverkad tidigare?",-1)),n(s,{name:"i-heroicons-question-mark-circle",class:"size-5 cursor-pointer",onClick:t[0]||(t[0]=o=>_.value=!_.value)})]),_.value?(v(),T("div",_e," Tidigare kalavverkning påverkar vilka mykorrhizasvampar som finns. Framförallt är naturvårdssvampar vanligare i skogar som inte har kalavverkats. ")):F("",!0),n(a,{items:se(H),modelValue:$.value,"onUpdate:modelValue":t[1]||(t[1]=o=>$.value=o),variant:"link",size:"lg",class:"w-full -mb-3 -mt-2 transition-all",ui:{list:"grid grid-cols-2 gap-1 p-1",trigger:" data-[state=active]:text-neutral-900 px-4 py-2 text-sm font-medium"}},null,8,["items","modelValue"]),n(f,{ref_key:"timelineCarousel",ref:m,items:r.value,prev:{onClick:D},next:{onClick:E},class:"w-full bg-neutral-950 overflow-hidden rounded-lg ring-muted/50",fade:"",onSelect:P},{default:p(({item:o})=>[l("div",ke,[l("img",{src:o.thumbHidden,alt:`Foto ${o.tid}`,width:"960",height:"540",class:"w-full h-full object-cover absolute inset-0"},null,8,he),l("img",{src:o.thumb,alt:`Foto ${o.tid}`,width:"960",height:"540",class:"w-full h-full object-cover absolute inset-0 transition-opacity duration-700",style:ae({opacity:k.value})},null,12,xe)])]),_:1},8,["items","prev","next"]),l("div",we,[n(j,null,{content:p(()=>[l("div",ye,[l("div",Te,[n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 text-gray-300 z-20"}),n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 -ml-4 text-gray-400 z-10"}),n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 -ml-4 mr-4 text-gray-500"}),t[4]||(t[4]=l("h1",{class:"font-medium"},"Mykorrhizasvampar",-1))]),l("div",Ce,[n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 text-signal-400"}),t[5]||(t[5]=l("h1",{class:"font-medium"},"Naturvårdssvampar",-1))]),l("div",ze,[n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 text-yellow-400"}),t[6]||(t[6]=l("h1",{class:"font-medium"},"Matsvampar",-1))])])]),default:p(()=>[l("div",be,[n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 text-gray-300 z-20"}),n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 -ml-4 text-signal-400 z-10"}),n(s,{name:"i-fluent-shape-organic-16-filled",class:"size-6 -ml-4 text-yellow-400"})])]),_:1}),n(x,{modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=o=>k.value=o),min:0,max:1,step:.05,class:"flex-1",color:"neutral"},null,8,["modelValue"]),n(s,{name:"i-mingcute-tree-fill",class:"size-7 text-primary"})]),l("div",Se,[l("div",$e,[(v(!0),T(ne,null,oe(r.value,(o,w)=>(v(),ie(Q,{key:`timeline-thumb-${w}`,color:"neutral",class:re(["ring-muted/50 flex-none shrink-0 justify-center whitespace-nowrap",w===i.value?"border-neutral-900 bg-neutral-900 hover:bg-neutral-900 text-white opacity-100 ring-0 shadow":"border-transparent opacity-60 hover:opacity-100"]),variant:"outline",type:"button",onClick:je=>J(w),label:K(o.tid)},null,8,["class","onClick","label"]))),128))])]),n(R,{variant:"soft",class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 ring-muted/50"},{default:p(()=>[l("div",Ne,[l("h3",Ae,C(G(r.value[i.value]?.tid)),1),l("p",Ie,C(r.value[i.value]?.skog),1),l("p",Ue,C(r.value[i.value]?.svamp),1)])]),_:1})])):F("",!0)}}}),Ke=Object.assign(Ve,{__name:"SkogsskotselTimeline"});export{Ke as default};
