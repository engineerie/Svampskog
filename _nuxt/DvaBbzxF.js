import{V as y,a2 as H,b1 as de,b2 as nt,aD as Le,b3 as rt,a4 as lt,a6 as st,y as it,aa as Oe,M,e as g,w as m,N as ae,h as N,d as w,f as T,an as ct,Y as ye,am as ut,n as K,ah as xe,t as X,F as Z,af as ne,ae as ge,O as v,P as dt,A as Ee,b4 as Ne,b5 as gt,aC as Me,ac as ft,r as he,aM as qe,J as ue,b6 as k,aB as mt,g as i,aG as Be,aK as Ie,aO as pt,b7 as vt,_ as bt,aH as yt,aE as ht,ad as xt,aA as kt,au as wt,T as _t}from"#entry";import{M as Ct}from"./Cpx5czNZ.js";import{b as St,_ as $t}from"./B1-lneLQ.js";import{_ as jt,a as Re,b as Ut,c as Vt,d as At,e as Tt}from"./DKxvfsE3.js";import{u as Pe,v as zt,s as Dt,f as Ft,g as Ot}from"./Dm3SEL7P.js";import{h as oe}from"./RxW4fOQL.js";import{_ as Lt}from"./hg6Rz1vw.js";import{_ as Et}from"./BhzI9rmE.js";import"./DY-6pm3l.js";import"./DtaPNFOl.js";import"./ByZVJz0L.js";import"./cOthk7_O.js";import"./iik6CYzq.js";function Nt(c,p,s){const[u={},l]=typeof p=="string"?[{},p]:[p,s],d=y(()=>H(c)),_=y(()=>H(u.key)||"$f"+oe([l,typeof d.value=="string"?d.value:"",...Mt(u)]));if(!u.baseURL&&typeof d.value=="string"&&d.value[0]==="/"&&d.value[1]==="/")throw new Error('[nuxt] [useFetch] the request URL must not start with "//".');const{server:b,lazy:V,default:O,transform:D,pick:q,watch:G,immediate:Y,getCachedData:A,deep:S,dedupe:B,...z}=u,j=de({...nt,...z,cache:typeof u.cache=="boolean"?void 0:u.cache}),$={server:b,lazy:V,default:O,transform:D,pick:q,immediate:Y,getCachedData:A,deep:S,dedupe:B,watch:G===!1?[]:[...G||[],j]};let I;return Le(G===!1?_.value:_,()=>{I?.abort?.(new DOMException("Request aborted as another request to the same endpoint was initiated.","AbortError")),I=typeof AbortController<"u"?new AbortController:{};const J=H(u.timeout);let R;return J&&(R=setTimeout(()=>I.abort(new DOMException("Request aborted due to timeout.","AbortError")),J),I.signal.onabort=()=>clearTimeout(R)),(u.$fetch||globalThis.$fetch)(d.value,{signal:I.signal,...j}).finally(()=>{clearTimeout(R)})},$)}function Mt(c){const p=[H(c.method)?.toUpperCase()||"GET",H(c.baseURL)];for(const s of[c.params||c.query]){const u=H(s);if(!u)continue;const l={};for(const[d,_]of Object.entries(u))l[H(d)]=H(_);p.push(l)}if(c.body){const s=H(c.body);if(!s)p.push(oe(s));else if(s instanceof ArrayBuffer)p.push(oe(Object.fromEntries([...new Uint8Array(s).entries()].map(([u,l])=>[u,l.toString()]))));else if(s instanceof FormData){const u={};for(const l of s.entries()){const[d,_]=l;u[d]=_ instanceof File?_.name:_}p.push(oe(u))}else if(rt(s))p.push(oe(de(s)));else try{p.push(oe(s))}catch{console.warn("[useFetch] Failed to hash body",s)}}return p}const qt={slots:{root:"relative overflow-hidden w-full rounded-lg p-4 flex gap-2.5",wrapper:"min-w-0 flex-1 flex flex-col",title:"text-sm font-medium",description:"text-sm opacity-90",icon:"shrink-0 size-5",avatar:"shrink-0",avatarSize:"2xl",actions:"flex flex-wrap gap-1.5 shrink-0",close:"p-0"},variants:{color:{primary:"",secondary:"",tertiary:"",rodeodust:"",poison:"",signal:"",info:"",success:"",warning:"",error:"",kalkmark:"",vanligmark:"",time:"",chetwood:"",duststorm:"",neutral2:"",neutral:""},variant:{solid:"",outline:"",soft:"",subtle:""},orientation:{horizontal:{root:"items-center",actions:"items-center"},vertical:{root:"items-start",actions:"items-start mt-2.5"}},title:{true:{description:"mt-1"}}},compoundVariants:[{color:"primary",variant:"solid",class:{root:"bg-primary text-inverted"}},{color:"secondary",variant:"solid",class:{root:"bg-secondary text-inverted"}},{color:"tertiary",variant:"solid",class:{root:"bg-tertiary text-inverted"}},{color:"rodeodust",variant:"solid",class:{root:"bg-rodeodust text-inverted"}},{color:"poison",variant:"solid",class:{root:"bg-poison text-inverted"}},{color:"signal",variant:"solid",class:{root:"bg-signal text-inverted"}},{color:"info",variant:"solid",class:{root:"bg-info text-inverted"}},{color:"success",variant:"solid",class:{root:"bg-success text-inverted"}},{color:"warning",variant:"solid",class:{root:"bg-warning text-inverted"}},{color:"error",variant:"solid",class:{root:"bg-error text-inverted"}},{color:"kalkmark",variant:"solid",class:{root:"bg-kalkmark text-inverted"}},{color:"vanligmark",variant:"solid",class:{root:"bg-vanligmark text-inverted"}},{color:"time",variant:"solid",class:{root:"bg-time text-inverted"}},{color:"chetwood",variant:"solid",class:{root:"bg-chetwood text-inverted"}},{color:"duststorm",variant:"solid",class:{root:"bg-duststorm text-inverted"}},{color:"neutral2",variant:"solid",class:{root:"bg-neutral2 text-inverted"}},{color:"primary",variant:"outline",class:{root:"text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"outline",class:{root:"text-secondary ring ring-inset ring-secondary/25"}},{color:"tertiary",variant:"outline",class:{root:"text-tertiary ring ring-inset ring-tertiary/25"}},{color:"rodeodust",variant:"outline",class:{root:"text-rodeodust ring ring-inset ring-rodeodust/25"}},{color:"poison",variant:"outline",class:{root:"text-poison ring ring-inset ring-poison/25"}},{color:"signal",variant:"outline",class:{root:"text-signal ring ring-inset ring-signal/25"}},{color:"info",variant:"outline",class:{root:"text-info ring ring-inset ring-info/25"}},{color:"success",variant:"outline",class:{root:"text-success ring ring-inset ring-success/25"}},{color:"warning",variant:"outline",class:{root:"text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"outline",class:{root:"text-error ring ring-inset ring-error/25"}},{color:"kalkmark",variant:"outline",class:{root:"text-kalkmark ring ring-inset ring-kalkmark/25"}},{color:"vanligmark",variant:"outline",class:{root:"text-vanligmark ring ring-inset ring-vanligmark/25"}},{color:"time",variant:"outline",class:{root:"text-time ring ring-inset ring-time/25"}},{color:"chetwood",variant:"outline",class:{root:"text-chetwood ring ring-inset ring-chetwood/25"}},{color:"duststorm",variant:"outline",class:{root:"text-duststorm ring ring-inset ring-duststorm/25"}},{color:"neutral2",variant:"outline",class:{root:"text-neutral2 ring ring-inset ring-neutral2/25"}},{color:"primary",variant:"soft",class:{root:"bg-primary/10 text-primary"}},{color:"secondary",variant:"soft",class:{root:"bg-secondary/10 text-secondary"}},{color:"tertiary",variant:"soft",class:{root:"bg-tertiary/10 text-tertiary"}},{color:"rodeodust",variant:"soft",class:{root:"bg-rodeodust/10 text-rodeodust"}},{color:"poison",variant:"soft",class:{root:"bg-poison/10 text-poison"}},{color:"signal",variant:"soft",class:{root:"bg-signal/10 text-signal"}},{color:"info",variant:"soft",class:{root:"bg-info/10 text-info"}},{color:"success",variant:"soft",class:{root:"bg-success/10 text-success"}},{color:"warning",variant:"soft",class:{root:"bg-warning/10 text-warning"}},{color:"error",variant:"soft",class:{root:"bg-error/10 text-error"}},{color:"kalkmark",variant:"soft",class:{root:"bg-kalkmark/10 text-kalkmark"}},{color:"vanligmark",variant:"soft",class:{root:"bg-vanligmark/10 text-vanligmark"}},{color:"time",variant:"soft",class:{root:"bg-time/10 text-time"}},{color:"chetwood",variant:"soft",class:{root:"bg-chetwood/10 text-chetwood"}},{color:"duststorm",variant:"soft",class:{root:"bg-duststorm/10 text-duststorm"}},{color:"neutral2",variant:"soft",class:{root:"bg-neutral2/10 text-neutral2"}},{color:"primary",variant:"subtle",class:{root:"bg-primary/10 text-primary ring ring-inset ring-primary/25"}},{color:"secondary",variant:"subtle",class:{root:"bg-secondary/10 text-secondary ring ring-inset ring-secondary/25"}},{color:"tertiary",variant:"subtle",class:{root:"bg-tertiary/10 text-tertiary ring ring-inset ring-tertiary/25"}},{color:"rodeodust",variant:"subtle",class:{root:"bg-rodeodust/10 text-rodeodust ring ring-inset ring-rodeodust/25"}},{color:"poison",variant:"subtle",class:{root:"bg-poison/10 text-poison ring ring-inset ring-poison/25"}},{color:"signal",variant:"subtle",class:{root:"bg-signal/10 text-signal ring ring-inset ring-signal/25"}},{color:"info",variant:"subtle",class:{root:"bg-info/10 text-info ring ring-inset ring-info/25"}},{color:"success",variant:"subtle",class:{root:"bg-success/10 text-success ring ring-inset ring-success/25"}},{color:"warning",variant:"subtle",class:{root:"bg-warning/10 text-warning ring ring-inset ring-warning/25"}},{color:"error",variant:"subtle",class:{root:"bg-error/10 text-error ring ring-inset ring-error/25"}},{color:"kalkmark",variant:"subtle",class:{root:"bg-kalkmark/10 text-kalkmark ring ring-inset ring-kalkmark/25"}},{color:"vanligmark",variant:"subtle",class:{root:"bg-vanligmark/10 text-vanligmark ring ring-inset ring-vanligmark/25"}},{color:"time",variant:"subtle",class:{root:"bg-time/10 text-time ring ring-inset ring-time/25"}},{color:"chetwood",variant:"subtle",class:{root:"bg-chetwood/10 text-chetwood ring ring-inset ring-chetwood/25"}},{color:"duststorm",variant:"subtle",class:{root:"bg-duststorm/10 text-duststorm ring ring-inset ring-duststorm/25"}},{color:"neutral2",variant:"subtle",class:{root:"bg-neutral2/10 text-neutral2 ring ring-inset ring-neutral2/25"}},{color:"neutral",variant:"solid",class:{root:"text-inverted bg-inverted"}},{color:"neutral",variant:"outline",class:{root:"text-highlighted bg-default ring ring-inset ring-default"}},{color:"neutral",variant:"soft",class:{root:"text-highlighted bg-elevated/50"}},{color:"neutral",variant:"subtle",class:{root:"text-highlighted bg-elevated/50 ring ring-inset ring-accented"}}],defaultVariants:{color:"primary",variant:"solid"}},Bt={__name:"UAlert",props:{as:{type:null,required:!1},title:{type:String,required:!1},description:{type:String,required:!1},icon:{type:[String,Object],required:!1},avatar:{type:Object,required:!1},color:{type:null,required:!1},variant:{type:null,required:!1},orientation:{type:null,required:!1,default:"vertical"},actions:{type:Array,required:!1},close:{type:[Boolean,Object],required:!1},closeIcon:{type:[String,Object],required:!1},class:{type:null,required:!1},ui:{type:null,required:!1}},emits:["update:open"],setup(c,{emit:p}){const s=c,u=p,l=lt(),{t:d}=st(),_=it(),b=y(()=>Oe({extend:Oe(qt),..._.ui?.alert||{}})({color:s.color,variant:s.variant,orientation:s.orientation,title:!!s.title||!!l.title}));return(V,O)=>(g(),M(v(dt),{as:c.as,"data-orientation":c.orientation,class:K(b.value.root({class:[s.ui?.root,s.class]}))},{default:m(()=>[ae(V.$slots,"leading",{},()=>[c.avatar?(g(),M(ct,ye({key:0,size:s.ui?.avatarSize||b.value.avatarSize()},c.avatar,{class:b.value.avatar({class:s.ui?.avatar})}),null,16,["size","class"])):c.icon?(g(),M(ut,{key:1,name:c.icon,class:K(b.value.icon({class:s.ui?.icon}))},null,8,["name","class"])):T("",!0)]),N("div",{class:K(b.value.wrapper({class:s.ui?.wrapper}))},[c.title||l.title?(g(),w("div",{key:0,class:K(b.value.title({class:s.ui?.title}))},[ae(V.$slots,"title",{},()=>[xe(X(c.title),1)])],2)):T("",!0),c.description||l.description?(g(),w("div",{key:1,class:K(b.value.description({class:s.ui?.description}))},[ae(V.$slots,"description",{},()=>[xe(X(c.description),1)])],2)):T("",!0),c.orientation==="vertical"&&(c.actions?.length||l.actions)?(g(),w("div",{key:2,class:K(b.value.actions({class:s.ui?.actions}))},[ae(V.$slots,"actions",{},()=>[(g(!0),w(Z,null,ne(c.actions,(D,q)=>(g(),M(ge,ye({key:q,size:"xs"},{ref_for:!0},D),null,16))),128))])],2)):T("",!0)],2),c.orientation==="horizontal"&&(c.actions?.length||l.actions)||c.close?(g(),w("div",{key:0,class:K(b.value.actions({class:s.ui?.actions,orientation:"horizontal"}))},[c.orientation==="horizontal"&&(c.actions?.length||l.actions)?ae(V.$slots,"actions",{key:0},()=>[(g(!0),w(Z,null,ne(c.actions,(D,q)=>(g(),M(ge,ye({key:q,size:"xs"},{ref_for:!0},D),null,16))),128))]):T("",!0),ae(V.$slots,"close",{ui:b.value},()=>[c.close?(g(),M(ge,ye({key:0,icon:c.closeIcon||v(_).ui.icons.close,color:"neutral",variant:"link","aria-label":v(d)("alert.close")},typeof c.close=="object"?c.close:{},{class:b.value.close({class:s.ui?.close}),onClick:O[0]||(O[0]=D=>u("update:open",!1))}),null,16,["icon","aria-label","class"])):T("",!0)])],2)):T("",!0)]),_:3},8,["as","data-orientation","class"]))}},It={key:0,class:"flex justify-end"},Rt={class:"flex flex-wrap gap-2 -mb-4"},Pt={key:2},Kt={key:0,class:"space-y-3"},Ht={key:0,class:"flex gap-2 mb-3"},Gt={key:2,class:"text-neutral-500 dark:text-neutral-400"},Yt=Ee({__name:"Miljoer",async setup(c){let p,s;Ne(),gt();const u=Pe(),l=["geographyLabel","forestTypeLabel","standAgeLabel","vegetationTypeLabel"],d=["edibleCount","poisonousCount","redlistedCount","ednaCount","sampleEnvCount"],_={geographyLabel:"Geografi",forestTypeLabel:"Skogstyp",standAgeLabel:"Skogsålder",vegetationTypeLabel:"Fältskikt"},b={edibleCount:"Matsvamp",poisonousCount:"Giftsvamp",redlistedCount:"Naturvårdsart",ednaCount:"DNA-art",sampleEnvCount:"Miljöer (DNA)"},V={edibleCount:"warning",poisonousCount:"poison",redlistedCount:"signal",ednaCount:"secondary",sampleEnvCount:"success"},O={edibleCount:"icon-park-solid:knife-fork",poisonousCount:"i-hugeicons-danger",redlistedCount:"i-material-symbols-award-star-outline",ednaCount:"solar:dna-linear",sampleEnvCount:"i-hugeicons-tree-06"},{data:D,pending:q,error:G,status:Y}=([p,s]=Me(()=>Nt("/environmentSummary.json",{default:()=>[],server:!1},"$to3FtqLqOo")),p=await p,s(),p),A=y(()=>D.value??[]),S=y(()=>q.value||Y.value==="idle"),B=y(()=>G.value?G.value.message||"Okänt fel":""),z=jt,j=ge,$=mt,I=vt,ee=pt,J=Re,R=new Intl.NumberFormat("sv-SE"),Q=ft("table"),re=he([{id:"ednaCount",desc:!0}]),te=he({}),F=qe("(max-width: 767px)"),P=he({}),U=de(Object.fromEntries(l.map(t=>[t,[]]))),L=de(Object.fromEntries(d.map(t=>[t,"all"]))),h=de(Object.fromEntries(d.map(t=>[t,"badge"]))),C=y(()=>{const t=Object.fromEntries(d.map(e=>[e,0]));for(const e of A.value)for(const a of d){const o=Number(e?.[a]??0);Number.isFinite(o)&&o>t[a]&&(t[a]=o)}return t}),Ke=["geographyLabel","forestTypeLabel","standAgeLabel","vegetationTypeLabel"],ke=y(()=>{const{geography:t,forestType:e,standAge:a,vegetationType:o}=u;return!t||!e||!a||!o?"":`${t}-${e}-${a}-${o}`}),He=y(()=>{const t={};return A.value.forEach((e,a)=>{e.key!=null&&(t[e.key]=String(a))}),t}),Ge=y(()=>{const t={};return A.value.forEach((e,a)=>{t[String(a)]=e}),t}),we=y(()=>{const t=Object.fromEntries(l.map(e=>[e,new Set]));for(const e of A.value)for(const a of l){const o=e?.[a];typeof o=="string"&&o.trim().length>0&&t[a].add(o)}return Object.fromEntries(l.map(e=>[e,Array.from(t[e]).sort((a,o)=>a.localeCompare(o,"sv"))]))});ue(A,()=>{const t=we.value;for(const e of l){const a=new Set(t[e]??[]),o=U[e]??[],r=o.filter(n=>a.has(n));r.length!==o.length&&(U[e]=r,pe(e,r))}},{flush:"post"});let le=!1,se=!1;ue([ke,A],()=>{if(se)return;const t=ke.value;le=!0;const e=t?He.value[t]:void 0;P.value=e?{[e]:!0}:{},le=!1},{immediate:!0}),ue(P,t=>{if(le)return;const e=Object.keys(t).find(r=>t[r]);if(!e)return;const a=Ge.value[e];!a||a.key===ke.value||a&&(se=!0,u.setParams({geography:a.geography??null,forestType:a.forestType??null,standAge:a.standAge??null,vegetationType:a.vegetationType??null}),se=!1)},{deep:!0});function Se(t){const e=Number(t??0);return Number.isFinite(e)?R.format(e):"0"}function $e(t){const e=t.getIsSorted?.();return e==="asc"?"i-lucide-arrow-up-narrow-wide":e==="desc"?"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down"}function fe(t,e){t.clearSorting?.(),t.toggleSorting?.(e)}function me(t,e){re.value=[{id:t,desc:e}]}function _e(t,e){return{color:"neutral",variant:"outline"}}function je(t,e,a){const o=h[e],r=Number(t.getValue(e)??0),n=Math.max(C.value[e]||0,1),f=(ce,E,W)=>k($,{variant:"soft",color:ce,class:"font-medium",...W?{"trailing-icon":W}:{}},()=>k("span",{class:"inline-flex items-center gap-1"},[a?k(ee,{name:a,class:" text-base leading-none"}):null,E].filter(Boolean))),x=(ce,E,W,be=!1)=>k("div",{class:"flex items-center gap-2 min-w-[9rem]"},[a?k(ee,{name:a,class:" text-base leading-none"}):null,k(I,{modelValue:Math.max(E,0),max:n,color:ce,class:"w-24 flex-1","onUpdate:modelValue":()=>{}}),k("span",{class:"text-sm font-medium text-neutral-700 dark:text-neutral-200"},W),be?k(ee,{name:"i-heroicons-exclamation-triangle",class:"text-warning-500 text-base leading-none"}):null].filter(Boolean));if(e==="sampleEnvCount"){const ce=Number(t.original?.ednaCount??0),E=Number(t.getValue("sampleEnvCount")??0);if(ce<=0||!Number.isFinite(E)||E<=0)return o==="progress"?x("neutral",0,"–"):f("neutral","–");const W=E>=10?"success":"warning",be=E<10,Fe=Se(E);return o==="progress"?x(W,E,Fe,be):f(W,Fe,be?"i-heroicons-exclamation-triangle":void 0)}const Ce=V[e]??"neutral",De=Se(r);return o==="progress"?x(Ce,r,De):f(Ce,De)}function pe(t,e){Q.value?.tableApi?.getColumn(t)?.setFilterValue(e.length?e:void 0)}function Ue(t,e,a){const o=U[t]??[],r=o.includes(e);let n=o;a&&!r?n=[...o,e]:!a&&r&&(n=o.filter(f=>f!==e)),n!==o&&(U[t]=n,pe(t,n))}function Ve(t){(U[t]??[]).length!==0&&(U[t]=[],pe(t,[]))}function Ye(t,e){const a=U[t]??[];if(!a.includes(e))return;const o=a.filter(r=>r!==e);U[t]=o,pe(t,o)}function Ae(t,e){Q.value?.tableApi?.getColumn(t)?.setFilterValue(e==="all"?void 0:e)}function ie(t,e){L[t]!==e&&(L[t]=e,Ae(t,e))}function Te(t){L[t]!=="all"&&(L[t]="all",Ae(t,"all"))}ue(()=>Q.value?.tableApi,t=>{if(t){for(const e of l){const a=U[e]??[];a.length&&t.getColumn(e)?.setFilterValue(a)}for(const e of d){const a=L[e];a!=="all"&&t.getColumn(e)?.setFilterValue(a)}}},{immediate:!0});const Je={id:"select",enableSorting:!1,enableHiding:!1,size:48,cell:({row:t})=>k(J,{modelValue:t.getIsSelected(),"onUpdate:modelValue":e=>{t.table?.toggleAllRowsSelected(!1),t.toggleSelected(!!e),e||(P.value={})},"aria-label":"Välj rad"})},ve=y(()=>{const t=[Je];for(const e of l)t.push({accessorKey:e,header:({column:a})=>{const o=we.value[e]??[],r=U[e]??[],n=[{label:"A → Ö",icon:"i-lucide-arrow-up-narrow-wide",onSelect:f=>{f?.preventDefault(),fe(a,!1)}},{label:"Ö → A",icon:"i-lucide-arrow-down-wide-narrow",onSelect:f=>{f?.preventDefault(),fe(a,!0)}}];if(o.length){n.push({type:"separator"}),n.push({label:"Rensa filter",icon:"i-lucide-eraser",disabled:r.length===0,onSelect:f=>{f?.preventDefault(),Ve(e)}}),n.push({type:"separator"});for(const f of o)n.push({label:f,type:"checkbox",checked:r.includes(f),onUpdateChecked:x=>{Ue(e,f,x)},onSelect:x=>x?.preventDefault()})}return k(z,{items:n,content:{align:"start"},ui:{content:"w-64"}},{default:()=>k(j,{label:_[e],variant:"ghost",color:"neutral",icon:$e(a),class:"-mx-1.5"})})},cell:({row:a})=>{const o=a.getValue(e);if(!o)return k($,{variant:"soft",color:"neutral",class:"font-medium"},()=>"–");const r=_e();return k($,{variant:r.variant,color:r.color,class:"font-medium"},()=>o)},filterFn:(a,o,r)=>{if(!Array.isArray(r)||r.length===0)return!0;const n=a.getValue(o);return r.includes(n)}});for(const e of d)t.push({accessorKey:e,header:({column:a})=>{const o=L[e],r=[{label:"Lägst → Högst",icon:"i-lucide-arrow-up-narrow-wide",onSelect:n=>{n?.preventDefault(),fe(a,!1)}},{label:"Högst → Lägst",icon:"i-lucide-arrow-down-wide-narrow",onSelect:n=>{n?.preventDefault(),fe(a,!0)}},{type:"separator"},{label:"Rensa filter",icon:"i-lucide-eraser",disabled:o==="all",onSelect:n=>{n?.preventDefault(),ie(e,"all")}},{type:"separator"},{label:"Visa > 0",type:"checkbox",checked:o==="gt0",onUpdateChecked:n=>{ie(e,n?"gt0":"all")},onSelect:n=>n?.preventDefault()},{label:"Visa endast 0",type:"checkbox",checked:o==="zero",onUpdateChecked:n=>{ie(e,n?"zero":"all")},onSelect:n=>n?.preventDefault()},{type:"separator"},{label:"Visa som märken",type:"checkbox",checked:h[e]==="badge",onUpdateChecked:n=>{n?h[e]="badge":h[e]!=="progress"&&(h[e]="progress")},onSelect:n=>n?.preventDefault()},{label:"Visa som progress",type:"checkbox",checked:h[e]==="progress",onUpdateChecked:n=>{h[e]=n?"progress":"badge"},onSelect:n=>n?.preventDefault()}];return k(z,{items:r,content:{align:"start"},ui:{content:"w-64"}},{default:()=>k(j,{label:b[e],variant:"ghost",color:"neutral",icon:$e(a),class:"-mx-1.5"})})},cell:({row:a})=>je(a,e,O[e]),filterFn:(a,o,r)=>{if(!r||r==="all")return!0;const n=Number(a.getValue(o)??0);return r==="gt0"?n>0:r==="zero"?n===0:!0}});return t}),Qe=y(()=>({id:"mobileSummary",header:"Miljö",enableSorting:!1,enableHiding:!1,cell:({row:t})=>{const e=t.getIsSelected?.()??!1,a=Ke.map(r=>{const n=t.original[r],f=_e();return k($,{variant:f.variant,color:f.color,class:"font-medium text-sm"},()=>n||"–")}),o=d.map(r=>je(t,r,O[r]));return k("div",{class:"space-y-3"},[k("div",{class:"flex items-center gap-2 overflow-x-auto flex-nowrap min-w-0"},[k(J,{modelValue:e,"onUpdate:modelValue":r=>{t.table?.toggleAllRowsSelected(!1),t.toggleSelected(!!r),r||(P.value={})},"aria-label":"Välj rad"}),...a]),k("div",{class:"flex gap-2 overflow-x-auto flex-nowrap min-w-0 "},o)])}})),We=y(()=>ve.value),Xe=y(()=>[Qe.value,...ve.value]),Ze=y(()=>F.value?Xe.value:We.value);ue([F,ve],()=>{if(F.value){const t={mobileSummary:!0};for(const e of ve.value){const a=e.accessorKey??e.id;a&&(t[a]=!1)}te.value=t}else te.value={}},{immediate:!0});const et=y(()=>({table:F.value?"min-w-full table-fixed":"min-w-full",thead:F.value?"hidden":"hidden md:table-header-group bg-neutral-50 dark:bg-neutral-800/40",tbody:F.value?"divide-y divide-neutral-200 dark:divide-neutral-800":"divide-y divide-neutral-100 dark:divide-neutral-800",tr:F.value?"align-top":"align-middle",td:`${F.value?"px-4 py-4 overflow-hidden max-w-[calc(100vw-2rem)]":"px-4 py-4"} text-lg text-neutral-800 dark:text-neutral-100`})),tt=y(()=>{const t=[];for(const e of l)t.push({label:_[e],children:[{label:"A → Ö",icon:"i-lucide-arrow-up-narrow-wide",onSelect:a=>{a?.preventDefault(),me(e,!1)}},{label:"Ö → A",icon:"i-lucide-arrow-down-wide-narrow",onSelect:a=>{a?.preventDefault(),me(e,!0)}}]});for(const e of d)t.push({label:b[e],children:[{label:"Lägst → Högst",icon:"i-lucide-arrow-up-narrow-wide",onSelect:a=>{a?.preventDefault(),me(e,!1)}},{label:"Högst → Lägst",icon:"i-lucide-arrow-down-wide-narrow",onSelect:a=>{a?.preventDefault(),me(e,!0)}}]});return t}),at=y(()=>{const t=[];for(const e of l){const a=we.value[e]??[],o=U[e]??[],r=[];o.length&&(r.push({label:"Rensa filter",icon:"i-lucide-eraser",onSelect:n=>{n?.preventDefault(),Ve(e)}}),r.push({type:"separator"}));for(const n of a)r.push({label:n,type:"checkbox",checked:o.includes(n),onUpdateChecked:f=>{Ue(e,n,f)},onSelect:f=>f?.preventDefault()});t.push({label:_[e],children:r})}for(const e of d){const a=L[e];t.push({label:b[e],children:[{label:"Rensa filter",icon:"i-lucide-eraser",disabled:a==="all",onSelect:o=>{o?.preventDefault(),Te(e)}},{type:"separator"},{label:"Visa > 0",type:"checkbox",checked:a==="gt0",onUpdateChecked:o=>{ie(e,o?"gt0":"all")},onSelect:o=>o?.preventDefault()},{label:"Visa endast 0",type:"checkbox",checked:a==="zero",onUpdateChecked:o=>{ie(e,o?"zero":"all")},onSelect:o=>o?.preventDefault()}]})}return t}),ze=y(()=>{const t=[];for(const e of l){const a=U[e]??[];for(const o of a){const r=_e();t.push({id:`${e}-${o}`,label:o,color:r.color,variant:r.variant,onClear:()=>Ye(e,o)})}}for(const e of d){const a=L[e];if(a==="all")continue;const o=a==="gt0"?`${b[e]} > 0`:`${b[e]} = 0`;t.push({id:`${e}-${a}`,label:o,color:V[e]??"neutral",variant:"soft",onClear:()=>Te(e)})}return t});function ot(t){if(!t||!t.original)return;se=!0,u.setParams({geography:t.original.geography??null,forestType:t.original.forestType??null,standAge:t.original.standAge??null,vegetationType:t.original.vegetationType??null}),se=!1;const e=String(t.id??"");le=!0,P.value=e?{[e]:!0}:{},le=!1}return(t,e)=>{const a=Bt,o=Ut,r=Vt,n=Be,f=Ie;return g(),M(f,{class:"flex-1"},{default:m(()=>[i(n,{class:"py-10 space-y-8"},{default:m(()=>[ze.value.length?(g(),w("div",It,[N("div",Rt,[(g(!0),w(Z,null,ne(ze.value,x=>(g(),M(v($),{key:x.id,variant:x.variant??"soft",color:x.color??void 0,class:K(["cursor-pointer font-medium",x.class].filter(Boolean).join(" ")),"trailing-icon":"i-heroicons-x-mark",onClick:Ce=>x.onClear()},{default:m(()=>[xe(X(x.label),1)]),_:2},1032,["variant","color","class","onClick"]))),128))])])):T("",!0),B.value?(g(),M(a,{key:1,color:"error",variant:"solid",title:"Kunde inte ladda miljödata",description:B.value},null,8,["description"])):(g(),w("div",Pt,[S.value?(g(),w("div",Kt,[i(o,{class:"h-12 w-full"}),i(o,{class:"h-12 w-full"}),i(o,{class:"h-12 w-full"})])):(g(),w(Z,{key:1},[v(F)?(g(),w("div",Ht,[i(v(z),{items:tt.value,content:{align:"start"}},{default:m(()=>[i(v(j),{label:"Sortera",icon:"i-lucide-arrow-up-down",color:"neutral",variant:"soft","aria-label":"Sortera",size:"xl"})]),_:1},8,["items"]),i(v(z),{items:at.value,content:{align:"start"}},{default:m(()=>[i(v(j),{label:"Filtrera",icon:"i-lucide-list-filter",color:"neutral",variant:"soft","aria-label":"Filter",size:"xl"})]),_:1},8,["items"])])):T("",!0),i(r,{ref_key:"table",ref:Q,sorting:re.value,"onUpdate:sorting":e[0]||(e[0]=x=>re.value=x),"column-visibility":te.value,"onUpdate:columnVisibility":e[1]||(e[1]=x=>te.value=x),"row-selection":P.value,"onUpdate:rowSelection":e[2]||(e[2]=x=>P.value=x),data:A.value,columns:Ze.value,ui:et.value,loading:S.value,class:"rounded-lg border border-neutral-200 dark:border-neutral-800 border-none -mx-4",onSelect:ot},null,8,["sorting","column-visibility","row-selection","data","columns","ui","loading"])],64)),v(Y)==="success"&&!A.value.length?(g(),w("p",Gt," Inga miljöer hittades. ")):T("",!0)]))]),_:1})]),_:1})}}}),Jt=Object.assign(bt(Yt,[["__scopeId","data-v-29255a77"]]),{__name:"Miljoer"}),Qt={class:"flex justify-center items-center"},Wt={class:"w-full max-w-full p-4"},Xt={class:"flex flex-col"},Zt={class:"text-lg font-medium"},ea={key:0,class:"text-sm text-neutral-500"},ta={class:"grid grid-cols-2 gap-2 mt-1 mb-2"},aa={class:"grid gap-2"},oa=["for"],na={key:0,class:"sm:mb-24"},ra={class:"flex w-full justify-center mb-4"},ha=Ee({__name:"index",async setup(c){let p,s;const{data:u}=([p,s]=Me(()=>Le("mykorrhizasvampar",()=>ht("mykorrhizasvampar").first())),p=await p,s(),p);if(!u.value)throw yt({statusCode:404,statusMessage:"Page not found",fatal:!0});const l=Pe(),d=he(!0);function _(){d.value=!d.value}const b=[{key:"geography",defaultLabel:"Välj plats"},{key:"forestType",defaultLabel:"Välj skogstyp"},{key:"standAge",defaultLabel:"Välj beståndsålder"},{key:"vegetationType",defaultLabel:"Välj fältskikt"}];function V(S,B){l.$patch({[S]:B})}const O=y(()=>({geography:Ot.map(S=>({...S,disabled:!1})),forestType:Ft.map(S=>({...S,disabled:!1})),standAge:Dt.map(S=>({...S,disabled:!1})),vegetationType:zt.map(S=>({...S,disabled:!1}))})),D=qe("(max-width: 767px)"),q=Ne();function G(){const S=l.geography??"",B=l.forestType??"",z=l.standAge??"",j=l.vegetationType??"";return`/mykorrhizasvampar/${encodeURIComponent(S)}/${encodeURIComponent(B)}/${encodeURIComponent(z)}/${encodeURIComponent(j)}`}const Y=y(()=>!!(l.geography&&l.forestType&&l.standAge&&l.vegetationType));function A(){Y.value&&q.push(G())}return(S,B)=>{const z=kt,j=Ct,$=ge,I=St,ee=Re,J=$t,R=wt,Q=Jt,re=At,te=Lt,F=Tt,P=Be,U=Et,L=Ie;return v(u)?(g(),M(L,{key:0,class:"flex-1"},{default:m(()=>[i(P,{class:"w-full px-0"},{default:m(()=>[i(te,{ui:{container:" py-20 lg:py-24",title:" sm:text-7xl",headline:"text-neutral"},title:v(u).hero.title,description:v(u).hero.description,orientation:v(u).hero.orientation,class:""},xt({_:2},[v(u).hero.headline?{name:"headline",fn:m(()=>[N("div",Qt,[i(j,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2,delay:.2}},{default:m(()=>[i(z,{src:"/images/svampindex/Cortinarius sanguineus-179-.jpg",width:"300",height:"300",format:"webp",alt:"Illustration",class:"size-18 sm:size-24 rounded-xl ring ring-muted/50 inline-flex mb-12 lg:mb-18 h-fit shadow-xl"})]),_:1}),i(j,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2,delay:.3},class:"-mx-4 z-50"},{default:m(()=>[i(z,{src:"/images/svampgrid/Cantharellus cibarius-3.jpg",width:"300",height:"300",format:"webp",alt:"Illustration",class:"size-28 sm:size-40 rounded-xl ring ring-muted/50 inline-flex mb-12 lg:mb-18 h-fit z-50 shadow-xl"})]),_:1}),i(j,{initial:{scale:.5,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.2,delay:.25}},{default:m(()=>[i(z,{src:"/images/svampgrid/Gomphus clavatus-1.jpg",width:"300",height:"300",format:"webp",alt:"Illustration",class:"size-20 sm:size-28 rounded-xl ring ring-muted/50 inline-flex mb-12 lg:mb-18 h-fit shadow-xl"})]),_:1})])]),key:"0"}:void 0,v(D)&&v(u)?.hero?.links?.[0]?{name:"links",fn:m(()=>[i(R,{title:"Välj miljö",ui:{body:"p-0",title:"text-2xl"},fullscreen:""},{body:m(()=>[N("div",Wt,[(g(),w(Z,null,ne(b,h=>i(I,{size:"xl",key:h.key,items:O.value[h.key],modelValue:v(l)[h.key],"onUpdate:modelValue":C=>v(l)[h.key]=C,placeholder:h.defaultLabel,class:"flex-1 w-full my-1 text-lg ring-muted","append-to-body":"",variant:"soft"},{item:m(({item:C})=>[N("div",Xt,[N("div",Zt,X(C.label),1),C.description?(g(),w("div",ea,X(C.description),1)):T("",!0)])]),_:1},8,["items","modelValue","onUpdate:modelValue","placeholder"])),64)),i($,{trailing:"",disabled:!Y.value,onClick:A,color:"primary",icon:"i-heroicons-arrow-right",label:"Gå till miljö",size:"xl",class:"w-full my-1"},null,8,["disabled"]),N("div",ta,[i($,{label:"DNA-data",size:"xl",trailing:"",icon:d.value?"mdi:lock":"mdi:lock-open",onClick:_,variant:"subtle",color:d.value?"secondary":"neutral"},null,8,["icon","color"]),i(R,{fullscreen:"",title:"Kombinationer",class:"w-full",ui:{title:"text-2xl"}},{body:m(()=>[i($,{size:"xl",trailing:"",icon:d.value?"mdi:lock":"mdi:lock-open",onClick:_,shape:"full",class:"transition-all shrink-0 mb-2 w-full",variant:"soft",color:d.value?"secondary":"neutral"},{default:m(()=>[xe(X(d.value?"Begränsar till där det finns DNA-data":"Inkluderar alla miljöer"),1)]),_:1},8,["icon","color"]),N("div",aa,[(g(),w(Z,null,ne(b,h=>i(J,{key:h.key,variant:"soft"},{default:m(()=>[(g(!0),w(Z,null,ne(O.value[h.key],C=>(g(),w("div",{key:C.value,class:"flex justify-between mb-2 text-neutral-500 items-center"},[N("label",{for:`${h.key}-${C.value}`,class:K([{"opacity-40 cursor-not-allowed":C.disabled,"cursor-pointer":!C.disabled},"text-lg"])},X(C.label),11,oa),i(ee,{id:`${h.key}-${C.value}`,color:"primary","model-value":v(l)[h.key]===C.value,"onUpdate:modelValue":()=>{C.disabled||V(h.key,C.value)},disabled:C.disabled},null,8,["id","model-value","onUpdate:modelValue","disabled"])]))),128))]),_:2},1024)),64))])]),default:m(()=>[i($,{label:"Kombinationer",size:"xl",shape:"full",trailing:"",icon:"mdi:apps",color:"neutral",variant:"outline"})]),_:1}),i(R,{fullscreen:"",title:"Miljööversikt",class:"col-span-2",ui:{content:"overflow-y-scroll px-0",body:"p-0",title:"text-2xl"}},{body:m(()=>[i(Q)]),default:m(()=>[i($,{size:"xl",label:"Alla miljöer",trailing:"",icon:"i-hugeicons-tree-06",color:"neutral",variant:"subtle"})]),_:1})]),i(_t,{name:"fade",mode:"out-in"},{default:m(()=>[i(re,{class:"rounded overflow-hidden border border-neutral-200 h-fit"})]),_:1})])]),default:m(()=>[i($,{label:v(u).hero.links[0].label,size:"xl",color:"neutral",icon:"i-heroicons-magnifying-glass"},null,8,["label"])]),_:1})]),key:"1"}:void 0]),1032,["title","description","orientation"]),v(D)?T("",!0):(g(),w("div",na,[i(j,{initial:{opacity:0,transform:"translateY(10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.3,delay:.6}},{default:m(()=>[i(F,{class:""}),N("div",ra,[i($,{size:"xl",trailing:"",disabled:!Y.value,onClick:A,color:"primary",icon:"i-heroicons-arrow-right",label:"Gå till miljö"},null,8,["disabled"])])]),_:1})]))]),_:1}),i(U,{section:v(u).carousel},null,8,["section"])]),_:1})):T("",!0)}}});export{ha as default};
