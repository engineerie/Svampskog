import{a as Qt,b as Ue,_ as $t}from"./DMQLQ62E.js";import{A as ye,Z as Ae,M as O,e as u,w as z,N as ge,ah as Q,Y as Ce,O as w,P as Ee,B as ea,C as ta,I as aa,V as x,ar as oa,as as sa,t as Y,aI as Tt,r as G,d as $,o as Ge,K as Lt,c as it,J as oe,_ as _e,h as m,g as d,aO as ut,f as I,am as je,aB as Je,n as ne,aP as la,U as na,ae as ve,T as Pe,a4 as ra,a6 as ia,y as ua,a7 as ca,a8 as da,aa as mt,F as fe,af as Se,aM as Be,aS as At,ac as ga,bj as H,bo as pa,bp as va,aL as Et,aX as ma,bq as fa,br as Vt,ay as ha,aG as Pt}from"#entry";import{a as ba,u as Qe,_ as ka}from"./HbBKeLno.js";import{d as ya,g as _a,e as xa,f as Bt,c as Sa}from"./9fBF2Nfb.js";import{_ as et}from"./D6cKXRgt.js";import{_ as Ft}from"./zj7A1MM0.js";import{u as Ne}from"./B8K5hXO2.js";import{H as ae,c as $e,i as Rt,I as ft,s as lt,x as wa,J as ht,X as Ca,O as zt,a as Na,d as $a,g as De,m as nt,k as Ta,b as bt,y as La,f as kt,j as Me,e as yt,o as Aa,n as Ea,u as Va,A as Pa,t as Ba,B as Fa,C as Ut,E as jt,K as Ra,S as za,G as _t,F as Ua}from"./DgyrdPy0.js";import"./BWuJ0jvd.js";import"./B0VoygWj.js";import"./o2I9E7u7.js";import"./CTQwvuzN.js";import"./747IVAhr.js";import"./Cpj98o6Y.js";var ja=ye({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const t=s;return Ae(),(e,r)=>(u(),O(w(Ee),Ce(t,{"data-type":"ellipsis"}),{default:z(()=>[ge(e.$slots,"default",{},()=>[r[0]||(r[0]=Q("…"))])]),_:3},16))}}),Ia=ja;const[Ie,Da]=ea("PaginationRoot");var Ma=ye({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(s,{emit:t}){const e=s,r=t,{siblingCount:o,disabled:l,showEdges:g}=ta(e);Ae();const f=aa(e,"page",r,{defaultValue:e.defaultPage,passive:e.page===void 0}),n=x(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return Da({page:f,onPageChange(b){f.value=b},pageCount:n,siblingCount:o,disabled:l,showEdges:g}),(b,T)=>(u(),O(w(Ee),{as:b.as,"as-child":b.asChild},{default:z(()=>[ge(b.$slots,"default",{page:w(f),pageCount:n.value})]),_:3},8,["as","as-child"]))}}),Ga=Ma,Ka=ye({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const t=s,e=Ie();Ae();const r=x(()=>e.page.value===1||e.disabled.value);return(o,l)=>(u(),O(w(Ee),Ce(t,{"aria-label":"First Page",type:o.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=g=>!r.value&&w(e).onPageChange(1))}),{default:z(()=>[ge(o.$slots,"default",{},()=>[l[1]||(l[1]=Q("First page"))])]),_:3},16,["type","disabled"]))}}),Oa=Ka,qa=ye({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const t=s,e=Ie();Ae();const r=x(()=>e.page.value===e.pageCount.value||e.disabled.value);return(o,l)=>(u(),O(w(Ee),Ce(t,{"aria-label":"Last Page",type:o.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=g=>!r.value&&w(e).onPageChange(w(e).pageCount.value))}),{default:z(()=>[ge(o.$slots,"default",{},()=>[l[1]||(l[1]=Q("Last page"))])]),_:3},16,["type","disabled"]))}}),Wa=qa;function Le(s,t){const e=t-s+1;return Array.from({length:e},(r,o)=>o+s)}function Ha(s){return s.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const He="ellipsis";function Xa(s,t,e,r){const l=t,g=Math.max(s-e,1),f=Math.min(s+e,l);if(r){const b=Math.min(2*e+5,t)-2,T=g>3&&Math.abs(l-b-1+1)>2&&Math.abs(g-1)>2,P=f<l-2&&Math.abs(l-b)>2&&Math.abs(l-f)>2;if(!T&&P)return[...Le(1,b),He,l];if(T&&!P){const y=Le(l-b+1,l);return[1,He,...y]}if(T&&P){const y=Le(g,f);return[1,He,...y,He,l]}return Le(1,l)}else{const n=e*2+1;return t<n?Le(1,l):s<=e+1?Le(1,n):t-s<=e?Le(t-n+1,l):Le(g,f)}}var Ya=ye({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(s){const t=s;Ae();const e=Ie(),r=x(()=>Ha(Xa(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(o,l)=>(u(),O(w(Ee),oa(sa(t)),{default:z(()=>[ge(o.$slots,"default",{items:r.value})]),_:3},16))}}),Za=Ya,Ja=ye({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const t=s;Ae();const e=Ie(),r=x(()=>e.page.value===t.value),o=x(()=>e.disabled.value);return(l,g)=>(u(),O(w(Ee),Ce(t,{"data-type":"page","aria-label":`Page ${l.value}`,"aria-current":r.value?"page":void 0,"data-selected":r.value?"true":void 0,disabled:o.value,type:l.as==="button"?"button":void 0,onClick:g[0]||(g[0]=f=>!o.value&&w(e).onPageChange(l.value))}),{default:z(()=>[ge(l.$slots,"default",{},()=>[Q(Y(l.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Qa=Ja,eo=ye({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const t=s;Ae();const e=Ie(),r=x(()=>e.page.value===e.pageCount.value||e.disabled.value);return(o,l)=>(u(),O(w(Ee),Ce(t,{"aria-label":"Next Page",type:o.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=g=>!r.value&&w(e).onPageChange(w(e).page.value+1))}),{default:z(()=>[ge(o.$slots,"default",{},()=>[l[1]||(l[1]=Q("Next page"))])]),_:3},16,["type","disabled"]))}}),to=eo,ao=ye({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(s){const t=s;Ae();const e=Ie(),r=x(()=>e.page.value===1||e.disabled.value);return(o,l)=>(u(),O(w(Ee),Ce(t,{"aria-label":"Previous Page",type:o.as==="button"?"button":void 0,disabled:r.value,onClick:l[0]||(l[0]=g=>!r.value&&w(e).onPageChange(w(e).page.value-1))}),{default:z(()=>[ge(o.$slots,"default",{},()=>[l[1]||(l[1]=Q("Prev page"))])]),_:3},16,["type","disabled"]))}}),oo=ao;const so={components:[],container:void 0,followCursor:!0,allowHover:!1,horizontalPlacement:ae.Auto,horizontalShift:0,verticalPlacement:ae.Top,verticalShift:0,attributes:{},triggers:{},className:void 0,showDelay:void 0,hideDelay:void 0},tt=$e`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  opacity: 0;
  transition: opacity;
  transition-duration: var(--vis-tooltip-transition-duration);
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  color: var(--vis-tooltip-text-color);
  border-radius: var(--vis-tooltip-border-radius);
  box-shadow: var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,lo=tt,no=Rt`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;
    --vis-tooltip-border-radius: 5px;
    --vis-tooltip-transition-duration: 300ms;
    --vis-tooltip-box-shadow: none;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${tt}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,It=$e`
  bottom: unset;
  position: fixed;
`,Xe=$e`
  opacity: 1;
`,Ye=$e`
  display: none;
`,Dt=$e`
  label: non-interactive;
  pointer-events: none;
  user-select: none;
`,ro=Object.freeze(Object.defineProperty({__proto__:null,hidden:Ye,nonInteractive:Dt,positionFixed:It,root:tt,show:Xe,tooltip:lo,variables:no},Symbol.toStringTag,{value:"Module"}));class Mt{constructor(t={}){this._defaultConfig=so,this.config=this._defaultConfig,this._setUpEventsThrottled=ft(this._setUpEvents,500),this._setContainerPositionThrottled=ft(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement("div"),this.div=lt(this.element).attr("class",tt).classed(Xe,!1).classed(Ye,!0),this.setConfig(t),this.components=this.config.components,this._mutationObserver=new MutationObserver(()=>{this._isShown&&(!this.config.followCursor&&this._hoveredElement?this.placeByElement(this._hoveredElement):this._position&&this.place({x:this._position[0],y:this._position[1]}))}),this._mutationObserver.observe(this.div.node(),{childList:!0,subtree:!0})}setConfig(t){var e;this.prevConfig=this.config,this.config=wa(this._defaultConfig,t),this.prevConfig.horizontalPlacement!==this.config.horizontalPlacement&&this.overrideHorizontalPlacement(void 0),this.config.container&&this.config.container!==((e=this.prevConfig)===null||e===void 0?void 0:e.container)&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(t){var e;(e=this.element.parentNode)===null||e===void 0||e.removeChild(this.element),this._container=t,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(t){this.components=t}update(){this._container&&this._setUpEventsThrottled()}show(t,e){this.render(t),this.place(e)}_hide(){this.div.classed(Xe,!1).on("transitionend",()=>{this.div.classed(Ye,!this._isShown)}),this._isShown=!1}hide(){window.clearTimeout(this._showDelayTimeoutId),this.config.hideDelay?(window.clearTimeout(this._hideDelayTimeoutId),this._hideDelayTimeoutId=setTimeout(()=>this._hide(),this.config.hideDelay)):this._hide()}_display(){window.clearTimeout(this._hideDelayTimeoutId),this.div.classed(Ye,!1).classed(Xe,!0),this._isShown=!0}display(){this._isShown||(this.config.showDelay?(window.clearTimeout(this._showDelayTimeoutId),this._showDelayTimeoutId=setTimeout(()=>{this._display(),this.place({x:this._position[0],y:this._position[1]})},this.config.showDelay)):this._display())}place(t){if(this._position=[t.x,t.y],!this.hasContainer()){console.warn("Unovis | Tooltip: Container was not set or is not initialized yet");return}const{config:e}=this,r=this.element.offsetWidth,o=this.element.offsetHeight,l=this._overriddenHorizontalPlacement||(e.horizontalPlacement===ae.Auto?ae.Center:e.horizontalPlacement),g=e.verticalPlacement===ae.Auto?t.y-o<0?ae.Bottom:ae.Top:e.verticalPlacement,f=5,n=l===ae.Left?-r-f-e.horizontalShift:l===ae.Center?-r/2:f+e.horizontalShift,b=g===ae.Bottom?f+e.verticalShift:g===ae.Center?-o/2:-f-e.verticalShift-o,[T,P]=this._constraintPosToContainer(t.x+n,t.y+b,r,o);this._applyPosition(T,P,o)}placeByElement(t){const{config:e}=this;this._hoveredElement=t;const r=5,o=this.element.offsetWidth,l=this.element.offsetHeight,g=this.isContainerBody(),f=g?window.innerWidth:this._container.scrollWidth,n=t.getBoundingClientRect(),b=g?[n.x,n.y]:ht({clientX:n.x,clientY:n.y,pageX:n.x,pageY:n.y},this._container),T=this._overriddenHorizontalPlacement||(e.horizontalPlacement===ae.Auto?b[0]-o<0?ae.Right:b[0]+o>f?ae.Left:ae.Center:e.horizontalPlacement);let P=0;switch(T){case ae.Left:P=-o-r-e.horizontalShift;break;case ae.Right:P=n.width+r+e.horizontalShift;break;case ae.Center:default:P=(-o+n.width)/2;break}const S=e.verticalPlacement===ae.Auto?T!==ae.Center?ae.Center:b[1]-l<0?ae.Bottom:ae.Top:e.verticalPlacement;let y=-l;switch(S){case ae.Center:y+=(l+n.height)/2;break;case ae.Bottom:y+=l+n.height+r+e.verticalShift;break;case ae.Top:default:y+=-r-e.verticalShift;break}const[k,_]=this._constraintPosToContainer(b[0]+P,b[1]+y,o,l);this._applyPosition(k,_,l)}isContainerBody(){return this._container===document.body}overrideHorizontalPlacement(t){this._overriddenHorizontalPlacement=t}render(t){var e;const{config:r,prevConfig:o}=this;t instanceof HTMLElement?this.div.select(":first-child").node()!==t&&this.div.html("").append(()=>t):t&&this.div.html(t),this.div.classed((e=r.className)!==null&&e!==void 0?e:"",!!r.className).classed(Dt,!r.allowHover),o?.className&&o.className!==r.className&&this.div.classed(o.className,!1),this.display()}_applyPosition(t,e,r){const o=this.isContainerBody(),l=o?window.innerHeight:this._container.scrollHeight;this.div.classed(It,o).style("top",o?`${e}px`:"unset").style("bottom",o?"unset":`${l-e-r}px`).style("left",`${t}px`)}_constraintPosToContainer(t,e,r,o){const l=this.isContainerBody(),g=l?window.innerHeight:this._container.scrollHeight,f=l?window.innerWidth:this._container.scrollWidth,n=10,b=t>f-r-n,T=t<n,P=b?f-r-n:T?n:t,S=10,y=e>g-o-S,k=e<S,_=y?g-o-S:k?S:e;return[f<r?0:P,g<o?0:_]}_setContainerPosition(){var t;this._container!==document.body&&((t=getComputedStyle(this._container))===null||t===void 0?void 0:t.position)==="static"&&(this._container.style.position="relative")}_setUpEvents(){const{config:t}=this;this.components.forEach(e=>{const r=lt(e.element);r.on("mousemove.tooltip",o=>{const{config:l}=this,g=o.composedPath&&o.composedPath()||o.path||[o.target];for(const f of Object.keys(l.triggers)){const n=l.triggers[f];if(!n)continue;const b=r.selectAll(`.${f}`).nodes();for(const T of g){if(T===r.node())break;if(T.classList.contains(f)){const P=b.indexOf(T),S=lt(T).datum(),y=n(S,P,b),[k,_]=this.isContainerBody()?[o.clientX,o.clientY]:ht(o,this._container);y===null?this.hide():(this.render(y),l.followCursor?this.place({x:k,y:_}):this.placeByElement(T)),o.stopPropagation();return}}}this._isShown&&this.hide()}).on("mouseleave.tooltip",o=>{o.stopPropagation(),this.hide()})}),t.allowHover?this.div.on("mouseenter.tooltip",this._display.bind(this)).on("mouseleave.tooltip",this.hide.bind(this)):this.div.on("mouseenter.tooltip",null).on("mouseleave.tooltip",null)}_setUpAttributes(){const t=this.config.attributes;t&&Object.keys(t).forEach(e=>{this.div.attr(e,t[e])})}destroy(){var t;this._mutationObserver.disconnect(),window.clearTimeout(this._hideDelayTimeoutId),window.clearTimeout(this._showDelayTimeoutId),(t=this.div)===null||t===void 0||t.remove()}}Mt.selectors=ro;const io=Object.assign(Object.assign({},Ca),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:zt.Vertical}),Gt=$e`
  label: stacked-bar-component;
`,uo=Rt`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${Gt}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,Ze=$e`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,rt=$e`
  label: barGroup;
`,Kt=$e`
  label: barGroupExit;
`,co=Object.freeze(Object.defineProperty({__proto__:null,bar:Ze,barGroup:rt,barGroupExit:Kt,globalStyles:uo,root:Gt},Symbol.toStringTag,{value:"Module"}));class ct extends Na{constructor(t){super(),this._defaultConfig=io,this.config=this._defaultConfig,this.getAccessors=()=>$a(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],t&&this.setConfig(t)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const t=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],e=this.dataScale.domain(),r=this._getBarWidth()/2,o=this._barData.map((y,k)=>De(y,this.config.x,k)),l=nt(o),g=Ta(o),f=this.dataScale(l),n=this.dataScale(g),b=this.dataScale.invert(f+(t?r:-r)),T=this.dataScale.invert(n+(t?-r:r)),P=b<=e[0]?this.dataScale(e[0])-this.dataScale(b):0,S=T>e[1]?this.dataScale(T)-this.dataScale(e[1]):0;return{top:this.isVertical()?0:t?-S:P,bottom:this.isVertical()?0:t?-P:S,left:this.isVertical()?P:0,right:this.isVertical()?S:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===zt.Vertical}_render(t){const{config:e}=this,r=bt(t)?t:e.duration,o=this.getAccessors(),l=La(this._barData,0,o,this._prevNegative);this._prevNegative=l.map(k=>!!k.isMostlyNegative);const g=this.g.selectAll(`.${rt}`).data(this._barData,(k,_)=>{var L;return`${(L=kt(k,e.id,_))!==null&&L!==void 0?L:_}`}),f=(k,_)=>{const L=this.dataScale(De(k,e.x,_)),p=this.isVertical()?L:0,F=this.isVertical()?0:L;return`translate(${p},${F})`},b=g.enter().append("g").attr("class",rt).attr("transform",f).style("opacity",1).merge(g);Me(b,r).attr("transform",f).style("opacity",1);const T=g.exit().attr("class",Kt);Me(T,r).style("opacity",0).remove(),Me(T.selectAll(`.${Ze}`),r).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const P=b.selectAll(`.${Ze}`).data((k,_)=>l.map((L,p)=>Object.assign(Object.assign({},k),{_index:_,_stacked:L[_],_ending:p===l.length-1||p<=l.length-1&&l[p+1][_][0]!==L[_][1]}))),y=P.enter().append("path").attr("class",Ze).attr("d",(k,_)=>this._getBarPath(k,_,!0)).style("fill",(k,_)=>yt(k,e.color,_)).merge(P);Me(y,r).attr("d",(k,_)=>this._getBarPath(k,_)).style("fill",(k,_)=>yt(k,e.color,_)).style("cursor",(k,_)=>kt(k,e.cursor,_)),Me(P.exit(),r).style("opacity",0).remove()}_getBarWidth(){const{config:t,datamodel:{data:e}}=this;if(Aa(e))return 0;if(t.barWidth)return nt([t.barWidth,t.barMaxWidth]);const r=this.dataScale.bandwidth,o=this.dataScale.domain?this.dataScale.domain():[];let g=1+(r?o.length:o[1]-o[0])/t.dataStep||!r&&e.filter((b,T)=>{const P=De(b,t.x,T);return P>=o[0]&&P<=o[1]}).length||e.length;!r&&g>=2&&(g+=1);const n=(g<2?1:1-t.barPadding)*(this.isVertical()?this._width:this._height)/g;return nt([n,t.barMaxWidth])}_getVisibleData(){const{config:t,datamodel:{data:e}}=this,r=this._getBarWidth(),o=e.length<2?0:r/2,l=this.dataScale,g=Math.abs(l.invert(o)-l.invert(0));return e?.filter((n,b)=>{const T=De(n,t.x,b),P=l.domain(),S=+P[0],y=+P[1];return T>=S-g&&T<=y+g})}_getBarPath(t,e,r=!1){const{config:o}=this,l=this.getAccessors(),g=this._getBarWidth(),f=t._stacked[1]<0,n=t._ending,b=De(t,l[e],t._index),T=r?0:Math.abs(this.valueScale(t._stacked[0])-this.valueScale(t._stacked[1])),P=!r&&o.barMinHeight1Px&&T<1&&isFinite(b)&&b!==o.barMinHeightZeroValue?1:T,S=r?this.valueScale(0):this.valueScale(f?t._stacked[0]:t._stacked[1])-(T<1&&o.barMinHeight1Px?1:0),y=-g/2,k=g,_=o.roundedCorners?bt(o.roundedCorners)?+o.roundedCorners:k/2:0,L=Va(_,0,Math.min(T,k)/2),p=this.yScale.range()[0]>this.yScale.range()[1];return Ea({x:this.isVertical()?y:S-P,y:this.isVertical()?S+(p?0:-P):y,w:this.isVertical()?k:P,h:this.isVertical()?P:k,tl:n&&(this.isVertical()?!f&&p||f&&!p:f),tr:n&&(this.isVertical()?!f&&p||f&&!p:!f),br:n&&(this.isVertical()?f&&p||!f&&!p:!f),bl:n&&(this.isVertical()?f&&p||!f&&!p:f),r:L})}getValueScaleExtent(t){const{datamodel:e}=this,r=this.getAccessors(),o=t?this._getVisibleData():e.data;return Pa(o,...r)}getDataScaleExtent(){const{config:t,datamodel:e}=this;return Ba(e.data,t.x)}getYDataExtent(t){return this.isVertical()?this.getValueScaleExtent(t):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}ct.selectors=co;const go={"data-vis-component":""},po=ye({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(s,{expose:t}){const e=Tt(Fa),r=s,o=x(()=>e.data.value??r.data),l=Ut(r),g=G();return Ge(()=>{Lt(()=>{var f;g.value=new ct(l.value),(f=g.value)==null||f.setData(o.value),e.update(g.value)})}),it(()=>{var f;(f=g.value)==null||f.destroy(),e.destroy()}),oe(l,(f,n)=>{var b;jt(f,n)||(b=g.value)==null||b.setConfig(l.value)}),oe(o,()=>{var f;(f=g.value)==null||f.setData(o.value)}),t({component:g}),(f,n)=>(u(),$("div",go))}}),vo={"data-vis-tooltip":""},mo=ye({__name:"index",props:{components:{},container:{},followCursor:{type:Boolean},allowHover:{type:Boolean},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},className:{},hideDelay:{},showDelay:{},data:{}},setup(s,{expose:t}){const e=Tt(Ra),r=Ut(s),o=G();return Ge(()=>{Lt(()=>{o.value=new Mt(r.value),e.update(o.value)})}),it(()=>{var l;(l=o.value)==null||l.destroy(),e.destroy()}),oe(r,(l,g)=>{var f;jt(l,g)||(f=o.value)==null||f.setConfig(r.value)}),t({component:o}),(l,g)=>(u(),$("div",vo))}}),fo={},ho={class:"relative overflow-hidden rounded-(--ui-radius) border border-dashed border-(--ui-border-accented) opacity-75 px-4 flex items-center justify-center aspect-video"};function bo(s,t){const e=ba;return u(),O(e,{variant:"subtle"},{default:z(()=>[m("div",ho,[t[0]||(t[0]=m("svg",{class:"absolute inset-0 h-full w-full stroke-(--ui-border-inverted)/10",fill:"none"},[m("defs",null,[m("pattern",{id:"pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[m("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),m("rect",{stroke:"none",fill:"url(#pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e)",width:"100%",height:"100%"})],-1)),ge(s.$slots,"default")])]),_:3})}const ko=Object.assign(_e(fo,[["render",bo]]),{__name:"ImagePlaceholder"}),yo={class:"w-full relative overflow-visible"},_o={key:0,class:"group overflow-hidden"},xo=["src"],So={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},wo={class:"flex"},Co={key:1,class:"overflow-hidden relative group"},No=["src"],$o={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},To={class:"flex"},Lo={class:"px-5 pb-3 mt-4"},Ao={class:"text-2xl font-medium"},Eo={class:"text-neutral-500"},Vo={class:"my-1"},Po={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},Bo={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},Fo={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},Ro={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},zo={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},Uo={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},jo={class:"mt-3 text-lg"},Io={class:"-mx-1 mt-4"},Do={key:0,class:"inline-flex m-1 h-fit align-bottom"},Mo=["src"],Go={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},Ko={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},Oo={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},qo={class:"text-lg font-semibold mb-2 flex"},Wo={key:0,class:"flex items-center space-x-2"},Ho={size:"md",weight:"light"},Xo={size:"md",weight:"light"},xt=50,Yo={__name:"SpeciesInfo",props:{species:Object},setup(s){const t=G(0),e=s,r=x(()=>e.species.images||[]);oe(r,()=>{t.value=0});const o=G(!1),l=G(!0),g=()=>{o.value=!o.value},f=x(()=>e.species.Kriteriedokumentation?o.value?e.species.Kriteriedokumentation:e.species.Kriteriedokumentation.slice(0,xt)+"...":""),n=x(()=>e.species.ekologi?l.value?e.species.ekologi:e.species.ekologi.slice(0,xt)+"...":""),b=L=>L?L.charAt(0).toUpperCase()+L.slice(1).toLowerCase():"",T=L=>L?L.replace("/detaljer","").replace("/artinformation",""):"",P=L=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[L]||"NE",S=L=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[L]||"bg-neutral-300",y=L=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[L]||"Ej bedömd",k=(L,p)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[L==="0"&&p?p:L]||"default-icon.webp"}`,_=x(()=>e.species["Svamp-grupp"]==="0"&&e.species["Svamp-grupp-släkte"]?e.species["Svamp-grupp-släkte"]:e.species["Svamp-grupp"]);return(L,p)=>{const F=Qt,j=ut,Z=ko,q=je,ee=Je,re=Ue,he=la;return u(),$("div",yo,[r.value.length>1?(u(),$("div",_o,[d(F,{onSelect:p[0]||(p[0]=ie=>t.value=ie),items:r.value,ui:{item:"basis-full"}},{default:z(({item:ie})=>[(u(),$("div",{class:"w-full relative",key:ie},[m("img",{src:ie,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,xo)]))]),_:1},8,["items"]),m("div",So,[m("div",wo,[d(j,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),p[1]||(p[1]=m("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),m("h1",null,Y(t.value+1)+" av "+Y(r.value.length),1)])])):r.value.length===1?(u(),$("div",Co,[m("img",{src:r.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,No),m("div",$o,[m("div",To,[d(j,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),p[2]||(p[2]=m("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),m("h1",null,Y(t.value+1)+" av "+Y(r.value.length),1)])])):(u(),O(Z,{key:2,class:"rounded-none"})),m("div",Lo,[m("h1",Ao,Y(b(s.species.Commonname)),1),m("h1",Eo,Y(s.species.Scientificname),1),m("div",Vo,[s.species["Rank matsvamp"]===3?(u(),$("div",Po,[d(q,{name:"codicon:circle-large-filled",class:"size-3"}),p[3]||(p[3]=Q(" Sällsynt matsvamp ",-1))])):I("",!0),s.species["Rank matsvamp"]===2?(u(),$("div",Bo,[d(q,{name:"codicon:color-mode",class:"size-3"}),p[4]||(p[4]=Q(" Ovanlig matsvamp ",-1))])):I("",!0),s.species["Rank giftsvamp"]===3?(u(),$("div",Fo,[d(q,{name:"codicon:circle-large-filled",class:"size-3"}),p[5]||(p[5]=Q(" Sällsynt giftsvamp ",-1))])):I("",!0),s.species["Rank giftsvamp"]===2?(u(),$("div",Ro,[d(q,{name:"codicon:color-mode",class:"size-3"}),p[6]||(p[6]=Q(" Ovanlig giftsvamp ",-1))])):I("",!0),s.species.RankRed===3?(u(),$("div",zo,[d(q,{name:"codicon:circle-large-filled",class:"size-3"}),p[7]||(p[7]=Q(" Sällsynt naturvårdsart ",-1))])):I("",!0),s.species.RankRed===2?(u(),$("div",Uo,[d(q,{name:"codicon:color-mode",class:"size-3"}),p[8]||(p[8]=Q(" Ovanlig naturvårdsart ",-1))])):I("",!0)]),m("h1",jo,Y(n.value),1),m("div",Io,[s.species["Svamp-grupp"]?(u(),$("div",Do,[d(ee,{color:"neutral",variant:"subtle",size:"xl"},{default:z(()=>[m("img",{src:k(s.species["Svamp-grupp"],s.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,Mo),Q(" "+Y(b(_.value)),1)]),_:1})])):I("",!0),s.species["Nyasvamp-boken"]==="x"?(u(),$("div",Go,[d(ee,{color:"warning",size:"xl",variant:"subtle",class:""},{default:z(()=>[d(j,{name:"icon-park-solid:knife-fork"}),p[9]||(p[9]=Q("Matsvamp ",-1))]),_:1})])):I("",!0),s.species.Giftsvamp==="x"?(u(),$("div",Ko,[d(ee,{color:"poison",size:"xl",variant:"subtle",class:""},{default:z(()=>[d(j,{name:"hugeicons:danger"}),p[10]||(p[10]=Q("Giftsvamp ",-1))]),_:1})])):I("",!0),s.species.SIGNAL_art==="S"?(u(),$("div",Oo,[d(ee,{color:"signal",size:"xl",variant:"subtle",class:""},{default:z(()=>[...p[11]||(p[11]=[Q("Signalart",-1)])]),_:1})])):I("",!0),s.species.KALKmark?(u(),O(ee,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:z(()=>[...p[12]||(p[12]=[Q(" Kalkmark ",-1)])]),_:1})):I("",!0),s.species.ANNANmark?(u(),O(ee,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:z(()=>[...p[13]||(p[13]=[Q(" Vanlig skogsmark ",-1)])]),_:1})):I("",!0)]),s.species.Kriteriedokumentation?(u(),O(re,{key:0,class:"my-4"},{default:z(()=>[m("div",{class:"flex justify-between cursor-pointer",onClick:g},[m("h1",qo,[s.species.RL2020kat?(u(),$("div",Wo,[m("div",{class:ne([S(s.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},Y(P(s.species.RL2020kat)),3),m("h1",Ho,Y(y(s.species.RL2020kat)),1)])):I("",!0)]),d(j,{name:"mdi:chevron-down",class:ne(["h-6 w-6 transition-transform duration-300 ease-in-out",o.value?"rotate-180":"rotate-0"])},null,8,["class"])]),s.species.Kriteriedokumentation?(u(),$("div",{key:0,class:ne(["relative overflow-hidden transition-transform duration-300 ease-in-out",[o.value?"max-h-auto":"max-h-20"]]),onClick:g},[m("h1",Xo,Y(f.value),1)],2)):I("",!0)]),_:1})):I("",!0),p[16]||(p[16]=m("h1",{class:"text-lg font-medium mt-4"},"Läs mer på",-1)),s.species.Artfakta!="Information saknas"?(u(),O(he,{key:1,to:T(s.species.Artfakta),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:z(()=>[...p[14]||(p[14]=[Q(" Artfakta.se ",-1)])]),_:1},8,["to"])):I("",!0),p[17]||(p[17]=m("br",null,null,-1)),s.species.Svampguiden&&s.species.Svampguiden!=="0"?(u(),O(he,{key:2,to:T(s.species.Svampguiden),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:z(()=>[...p[15]||(p[15]=[Q(" Svampguiden.com ",-1)])]),_:1},8,["to"])):I("",!0)])])}}},Zo={key:0,class:"fixed inset-0 z-50 flex pointer-events-none group"},Jo={class:"absolute top-3 left-3 items-end w-full gap-2 z-10 flex"},Qo={class:"h-full relative overflow-auto pb-16 no-scrollbar"},es={__name:"MySlideover",props:{modelValue:{type:Boolean,default:!1},pinned:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:modelValue","update:pinned"],setup(s,{emit:t}){const e=s,r=t,o=G(e.pinned);oe(()=>e.pinned,g=>{o.value=g});function l(){o.value=!o.value,r("update:pinned",o.value)}return(g,f)=>{const n=ve;return u(),O(Pe,{name:"slide-in-right"},{default:z(()=>[s.modelValue?(u(),$("div",Zo,[o.value?I("",!0):(u(),$("div",{key:0,class:"fixed inset-0 pointer-events-auto",onClick:f[0]||(f[0]=b=>r("update:modelValue",!1))})),m("div",{ref:"panelRef",class:ne(["ml-auto bg-white shadow-lg z-50 relative pointer-events-auto ring-1 ring-neutral-200 transition-all overflow-hidden",[o.value?"":"sm:ml-auto sm:m-2 sm:rounded",s.expanded?"w-[744px]":"w-screen sm:w-96"]]),onClick:f[2]||(f[2]=na(()=>{},["stop"]))},[m("div",Jo,[d(n,{class:"shadow hover:bg-white rounded-full mt-2 ml-1 md:m-0",color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},icon:"heroicons:x-mark",size:"lg",onClick:f[1]||(f[1]=b=>r("update:modelValue",!1))}),d(n,{class:ne(["shadow hover:bg-white hidden md:flex rounded-full",o.value?"text-primary-500":"text-neutral-700"]),color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},onClick:l,icon:"codicon:pinned",size:"lg"},null,8,["class"])]),m("div",Qo,[ge(g.$slots,"default",{},void 0,!0)])],2)])):I("",!0)]),_:3})}}},ts=_e(es,[["__scopeId","data-v-fb1058c4"]]),as={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},Ot={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(s,{emit:t}){const e=s,r=t,o=ra(),{dir:l}=ia(),g=ua(),f=ca(da(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),r),n=x(()=>e.firstIcon||(l.value==="rtl"?g.ui.icons.chevronDoubleRight:g.ui.icons.chevronDoubleLeft)),b=x(()=>e.prevIcon||(l.value==="rtl"?g.ui.icons.chevronRight:g.ui.icons.chevronLeft)),T=x(()=>e.nextIcon||(l.value==="rtl"?g.ui.icons.chevronLeft:g.ui.icons.chevronRight)),P=x(()=>e.lastIcon||(l.value==="rtl"?g.ui.icons.chevronDoubleLeft:g.ui.icons.chevronDoubleRight)),S=x(()=>mt({extend:mt(as),...g.ui?.pagination||{}})());return(y,k)=>(u(),O(w(Ga),Ce(w(f),{class:S.value.root({class:[e.ui?.root,e.class]})}),{default:z(({page:_,pageCount:L})=>[d(w(Za),{class:ne(S.value.list({class:e.ui?.list}))},{default:z(({items:p})=>[s.showControls||o.first?(u(),O(w(Oa),{key:0,"as-child":"",class:ne(S.value.first({class:e.ui?.first}))},{default:z(()=>[ge(y.$slots,"first",{},()=>[d(ve,{color:s.color,variant:s.variant,size:s.size,icon:n.value,to:s.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):I("",!0),s.showControls||o.prev?(u(),O(w(oo),{key:1,"as-child":"",class:ne(S.value.prev({class:e.ui?.prev}))},{default:z(()=>[ge(y.$slots,"prev",{},()=>[d(ve,{color:s.color,variant:s.variant,size:s.size,icon:b.value,to:_>1?s.to?.(_-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):I("",!0),(u(!0),$(fe,null,Se(p,(F,j)=>(u(),$(fe,{key:j},[F.type==="page"?(u(),O(w(Qa),{key:0,"as-child":"",value:F.value,class:ne(S.value.item({class:e.ui?.item}))},{default:z(()=>[ge(y.$slots,"item",Ce({ref_for:!0},{item:F,index:j,page:_,pageCount:L}),()=>[d(ve,{color:_===F.value?s.activeColor:s.color,variant:_===F.value?s.activeVariant:s.variant,size:s.size,label:String(F.value),ui:{label:S.value.label()},to:s.to?.(F.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(u(),O(w(Ia),{key:1,"as-child":"",class:ne(S.value.ellipsis({class:e.ui?.ellipsis}))},{default:z(()=>[ge(y.$slots,"ellipsis",{},()=>[d(ve,{as:"div",color:s.color,variant:s.variant,size:s.size,icon:s.ellipsisIcon||w(g).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["class"]))],64))),128)),s.showControls||o.next?(u(),O(w(to),{key:2,"as-child":"",class:ne(S.value.next({class:e.ui?.next}))},{default:z(()=>[ge(y.$slots,"next",{},()=>[d(ve,{color:s.color,variant:s.variant,size:s.size,icon:T.value,to:_<L?s.to?.(_+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):I("",!0),s.showControls||o.last?(u(),O(w(Wa),{key:3,"as-child":"",class:ne(S.value.last({class:e.ui?.last}))},{default:z(()=>[ge(y.$slots,"last",{},()=>[d(ve,{color:s.color,variant:s.variant,size:s.size,icon:P.value,to:s.to?.(L)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):I("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},os=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function at(s,t,e,r){return!s||!t||!e||!r?!1:os.some(o=>o.geo===s&&o.forest===t&&o.age===e&&o.veg===r)}const ss={class:""},ls={class:""},ns={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},rs={class:"flex gap-2 items-end justify-between w-full mb-2"},is={class:"flex gap-2"},us={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},cs={key:1,class:"hidden md:flex"},ds={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},gs={key:0,class:"flex gap-2 w-full mb-2"},ps={class:""},vs={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},ms={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},fs={class:"flex"},hs={class:"hidden md:flex"},bs={key:0},ks={class:"flex justify-center"},ys={key:2},_s={class:"max-w-sm space-y-2 mt-2"},xs={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(s,{emit:t}){const e=Be("(max-width: 767px)"),r=x(()=>e.value||n.isNormalView&&n.dataTypeFolder!=="edna"),o=t,l=G("");let g=null;function f(a){l.value=a,g&&clearTimeout(g),g=setTimeout(()=>{o("update:searchTerm",l.value)},300)}At(()=>{g&&clearTimeout(g)});const n=s,b=ga("table"),T=r.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[n.grupp]:!1,mark:!1,[n.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[n.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};n.dataType==="edna"&&(T.mark=!1);const P=G({...T,...n.columnVisibilityOverrides}),S=G([]),y=x(()=>{const a={};ze.value.forEach(V=>{V.KALKmark&&(a.KALKmark=(a.KALKmark||0)+1),V.ANNANmark&&(a.ANNANmark=(a.ANNANmark||0)+1)});const c=b.value?.tableApi?.getFilteredRowModel()?.rows||[],C={};return c.forEach(V=>{const D=V.original;D.KALKmark&&(C.KALKmark=(C.KALKmark||0)+1),D.ANNANmark&&(C.ANNANmark=(C.ANNANmark||0)+1)}),[{label:`Kalkmark (${C.KALKmark||0}/${a.KALKmark||0})`,value:"KALKmark"},{label:`Vanlig skogsmark (${C.ANNANmark||0}/${a.ANNANmark||0})`,value:"ANNANmark"}]}),k=x(()=>y.value.map(a=>({label:a.label,type:"checkbox",checked:S.value.includes(a.value),onUpdateChecked(c){c?S.value.includes(a.value)||S.value.push(a.value):S.value=S.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),_=x(()=>{const a=["Matsvamp","Giftsvamp"],c={};ze.value.forEach(D=>{const W=D[n.mat];n.mat==="Nyasvamp-boken"?W&&String(W).toLowerCase()==="x"&&(c.Matsvamp=(c.Matsvamp||0)+1):W==1&&(c.Matsvamp=(c.Matsvamp||0)+1),(D.Giftsvamp||"").toLowerCase()==="x"&&(c.Giftsvamp=(c.Giftsvamp||0)+1)});const C=b.value?.tableApi?.getFilteredRowModel()?.rows||[],V={};return C.forEach(D=>{const W=D.original,te=W[n.mat];(n.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te==1)&&(V.Matsvamp=(V.Matsvamp||0)+1),(W.Giftsvamp||"").toLowerCase()==="x"&&(V.Giftsvamp=(V.Giftsvamp||0)+1)}),a.map(D=>{const W=c[D]||0,te=V[D]||0;return{label:`${D} (${te}/${W})`,value:D}})}),L=G(n.isNormalView?500:10),p=G([]),F=G([]),j=G([]),Z=x(()=>ie.value.map(a=>({label:a.label,type:"checkbox",checked:j.value.includes(a.value),onUpdateChecked(c){c?j.value.includes(a.value)||j.value.push(a.value):j.value=j.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),q=x(()=>_.value.map(a=>({label:a.label,type:"checkbox",checked:p.value.includes(a.value),onUpdateChecked(c){c?p.value.includes(a.value)||p.value.push(a.value):p.value=p.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),ee=x(()=>B.value.map(a=>({label:a.label,type:"checkbox",checked:F.value.includes(a.value),onUpdateChecked(c){c?F.value.includes(a.value)||F.value.push(a.value):F.value=F.value.filter(C=>C!==a.value)},onSelect(c){c.preventDefault()}}))),re=x(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:n.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:n.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:n.obs,desc:!0}])}}]}]),he=x(()=>[{label:"Grupp",children:Z.value},{label:"Matsvamp",children:q.value},{label:"Status",children:ee.value},{label:"Mark",children:k.value}]),ie=x(()=>{const a={};ze.value.forEach(V=>{const D=V[n.grupp];D&&(a[D]=(a[D]||0)+1)});const c=b.value?.tableApi?.getFilteredRowModel()?.rows||[],C={};return c.forEach(V=>{const W=V.original[n.grupp];W&&(C[W]=(C[W]||0)+1)}),Object.keys(a).map(V=>{const D=a[V]||0,W=C[V]||0;return{label:`${M(V)} (${W}/${D})`,value:V}})}),B=x(()=>{const a=["LC","NT","EN","VU","CR","RE","DD"],c={};ze.value.forEach(D=>{const W=D.RL2020kat;a.includes(W)?c[W]=(c[W]||0)+1:W===null||W==="0"||W===0||String(W).toUpperCase()==="NE"?c["Ej bedömd"]=(c["Ej bedömd"]||0)+1:String(W).toUpperCase()==="NA"&&(c["Ej tillämplig"]=(c["Ej tillämplig"]||0)+1),D.SIGNAL_art==="S"&&(c.Signalart=(c.Signalart||0)+1)});const C=b.value?.tableApi?.getFilteredRowModel()?.rows||[],V={};return C.forEach(D=>{const W=D.original,te=W.RL2020kat;a.includes(te)?V[te]=(V[te]||0)+1:te===null||te==="0"||te===0||String(te).toUpperCase()==="NE"?V["Ej bedömd"]=(V["Ej bedömd"]||0)+1:String(te).toUpperCase()==="NA"&&(V["Ej tillämplig"]=(V["Ej tillämplig"]||0)+1),W.SIGNAL_art==="S"&&(V.Signalart=(V.Signalart||0)+1)}),[...a.map(D=>{const W=c[D]||0,te=V[D]||0;return{label:`${K(D)} (${te}/${W})`,value:D}}),(()=>{const D=c["Ej bedömd"]||0;return{label:`Ej bedömd (${V["Ej bedömd"]||0}/${D})`,value:"Ej bedömd"}})(),(()=>{const D=c["Ej tillämplig"]||0;return{label:`Ej tillämplig (${V["Ej tillämplig"]||0}/${D})`,value:"Ej tillämplig"}})(),(()=>{const D=c.Signalart||0;return{label:`Signalart (${V.Signalart||0}/${D})`,value:"Signalart"}})()]}),v=G({pageIndex:0,pageSize:10}),i=Qe();function h(a,c){i.selectSpecies(a.original,"edna")}const M=a=>a?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():"",R=x(()=>Te.value.length>0?Te.value[0].sample_env_count:0),A=a=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[a]||"default-icon.webp"}`,E=a=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[a]||"neutral",K=a=>{const c={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return a===null||a===0||String(a).toUpperCase()==="NE"?"Ej bedömd":String(a).toUpperCase()==="NA"?"Ej tillämplig":c[a]||"Ej bedömd"},J=n.obs.startsWith("Rank"),X=G(J?[{id:n.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:n.obs,desc:!0}]),U=Je,pe=pa,se=ve,le=ya,be=ut,ke=[{accessorKey:"images",header:"Bild",sortable:!1,cell:({row:a})=>{const c=a.getValue("images")||[];return c.length?H("img",{src:c[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:a.original?.Commonname?`${a.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:a})=>{const c=a.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:"Namn",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>H("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},M(a.getValue("Commonname"))),filterFn:(a,c,C)=>{if(!C)return!0;const V=String(C).toLowerCase(),D=String(a.getValue("Commonname")||"").toLowerCase(),W=String(a.getValue("Scientificname")||"").toLowerCase();return D.includes(V)||W.includes(V)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:a})=>{const c=a.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:"Latinskt namn",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>H("div",{class:"truncate  text-[16px]"},a.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:n.grupp,header:()=>H(le,{items:Z.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Grupp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,C)=>!C||C.length===0?!0:C.includes(a.getValue(c)),cell:({row:a})=>{const c=a.getValue(n.grupp);return c!=="Saknas"?H("img",{src:A(c),alt:`${c||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):H(be,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:n.dataType!=="edna",header:()=>H(le,{items:k.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Mark",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,C)=>{if(!C||C.length===0)return!0;let V=!1;return C.includes("KALKmark")&&a.original.KALKmark&&(V=!0),C.includes("ANNANmark")&&a.original.ANNANmark&&(V=!0),V},cell:({row:a})=>H("div",{class:"flex items-center space-x-1"},[a.original.KALKmark&&H(U,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),a.original.ANNANmark&&H(U,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:n.mat,header:()=>H(le,{items:q.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Matsvamp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,C)=>{if(!C||C.length===0)return!0;let V=!1;return C.includes("Matsvamp")&&(n.mat==="Nyasvamp-boken"?V=V||a.getValue(c)?.toLowerCase()==="x":V=V||a.getValue(c)===1),C.includes("Giftsvamp")&&(V=V||(a.original.Giftsvamp||"").toLowerCase()==="x"),V},cell:({row:a})=>H("div",{class:"flex gap-1"},[(n.mat==="Nyasvamp-boken"?a.getValue(n.mat)?.toLowerCase()==="x":a.getValue(n.mat)===1)&&H(U,{color:"warning",variant:"subtle"},()=>"Matsvamp"),a.original.Giftsvamp?.toLowerCase()==="x"&&H(U,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>H(le,{items:ee.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Status",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,C)=>{if(!C||C.length===0)return!0;const V=a.getValue(c);return C.some(D=>D==="Ej bedömd"?V===null||V===0||V==="0"||String(V).toUpperCase()==="NE":D==="Ej tillämplig"?String(V).toUpperCase()==="NA":D==="Signalart"?a.original.SIGNAL_art==="S":D===V)},cell:({row:a})=>{const c=a.getValue("RL2020kat"),C=H(U,{color:E(c),variant:"subtle"},()=>K(c)),V=a.original.SIGNAL_art==="S"?H(U,{color:"signal",variant:"subtle"},"Signalart"):null;return H("div",{class:"flex gap-1"},[C,V].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:n.obs,header:({column:a})=>{const c=a.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:n.obsLabel,icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>{const c=a.getValue(n.obs);return n.obs.startsWith("Rank")?c===3?H("span",{class:"text-red-700"},"Sällsynt"):c===2?H("span",{class:"text-yellow-600"},"Ovanlig"):null:H(U,{variant:"subtle",color:"secondary"},()=>`${c} skogar`)},meta:{headerText:n.obsLabel}}],xe=[{header:"Namn",cell:({row:a})=>{const c=a.original.images||[];let C=null;const V=n.filterPoison?a.original["Rank giftsvamp"]:n.filterEdible?a.original["Rank matsvamp"]:a.original.RankRed;V===3?C=H(be,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):V===2&&(C=H(be,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const D=c.length?H("img",{src:c[0],alt:a.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):H("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[H("img",{src:A(a.original[n.grupp]),alt:`${a.original[n.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),W=H("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[H("div",{class:"flex-1 min-w-0"},[H("div",{class:"text-lg font-semibold whitespace-normal break-words"},[M(a.original.Commonname),C]),H("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},a.original.Scientificname)])]),te=a.original[n.mat];(n.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te===1)&&H(U,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const N=H("div",{class:"flex flex-wrap gap-2 mt-2 "},[a.original.RL2020kat!=="LC"&&a.original.RL2020kat!=="NA"&&a.original.RL2020kat!=="NE"&&a.original.RL2020kat!=="0"?H(U,{color:E(a.original.RL2020kat),variant:"subtle",size:"md"},()=>K(a.original.RL2020kat)):null,a.original.SIGNAL_art==="S"?H(U,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,n.dataType==="edna"?H(pe,{modelValue:a.getValue(n.obs),max:R.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return H("div",{class:"flex space-x-4 items-start"},[D,H("div",{class:"flex flex-col flex-1"},[W,N])])},meta:{headerText:"Namn"}},...ke.map(a=>a.accessorKey==="mark"?{...a,enableHiding:n.dataType!=="edna"}:a)],we=x(()=>r.value?xe:ke),Fe=x(()=>({thead:r.value?"hidden":"hidden md:table-header-group bg-neutral-50 dark:bg-neutral-800/40",tbody:r.value?"divide-none":"divide-none md:divide-dotted",td:r.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),Re=G(0),Ke=G(0),Te=G([]),Ve=G(!0),gt=G([]),qt=(a,c,C)=>{const V=(c[0]-a[0])/(C-1),D=(c[1]-a[1])/(C-1),W=(c[2]-a[2])/(C-1),te=[];for(let ue=0;ue<C;ue++){const N=Math.round(a[0]+V*ue),me=Math.round(a[1]+D*ue),ce=Math.round(a[2]+W*ue);te.push(`rgb(${N}, ${me}, ${ce})`)}return te},Oe=()=>{Te.value=[],Re.value=0,Ke.value=0,gt.value=[]},Wt=async()=>{if([de.geography,de.forestType,de.standAge,de.vegetationType].some(C=>!C)){Oe(),Ve.value=!1;return}if(n.dataTypeFolder==="edna"&&!at(de.geography,de.forestType,de.standAge,de.vegetationType)){Oe(),Ve.value=!1;return}const c=`${n.dataType}-${de.geography}-${de.forestType}-${de.standAge}-${de.vegetationType}.json`;try{const C=await fetch(`/${n.dataTypeFolder}/${c}`);if(!C.ok){if(C.status===404){Oe(),Ve.value=!1;return}throw new Error(`Failed to fetch data from ${c}`)}Te.value=await C.json(),Ve.value=!1,Te.value.forEach((te,ue)=>{te.colorIndex=ue});const V=Te.value.length;Re.value=Math.floor(V*.1),Ke.value=V-Re.value;const D=qt([82,82,82],[212,212,212],Re.value),W=Ht(Ke.value);gt.value=[...D,...W]}catch(C){console.error("Error fetching data:",C),Oe(),Ve.value=!1}};function Ht(a){const c=[];for(let D=0;D<a;D++){const W=45+300/(a-1||1)*D;c.push(`hsl(${W%360}, 70%, 50%)`)}return c}const de=Ne();oe(()=>[de.geography,de.forestType,de.standAge,de.vegetationType],()=>{Ve.value=!0,Wt()},{immediate:!0});const pt=G(""),ze=x(()=>{let a=Te.value;return pt.value&&(a=a.filter(c=>Object.values(c).some(C=>String(C).toLowerCase().includes(pt.value.toLowerCase())))),n.filterEdible?a=a.filter(c=>{const C=c[n.mat];return C&&String(C).toLowerCase()==="x"}):n.filterPoison&&(a=a.filter(c=>{const C=c[n.mat];return!(C&&String(C).toLowerCase()==="x")})),a}),Xt=x(()=>ze.value);oe(L,a=>{let c=a==="Alla"?We.value||Te.value.length:Number(a);v.value.pageSize=c,v.value.pageIndex=0,b.value?.tableApi&&(b.value.tableApi.setPageSize(c),b.value.tableApi.setPageIndex(0))});const Yt=x(()=>b.value?.tableApi?.getPaginationRowModel().rows||[]),qe=x(()=>b.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),Zt=x(()=>qe.value.pageIndex*qe.value.pageSize+1),Jt=x(()=>{const a=qe.value.pageIndex*qe.value.pageSize+Yt.value.length;return a>We.value?We.value:a}),We=x(()=>b.value?.tableApi?.getFilteredRowModel()?.rows.length||0),vt=x(()=>{const a=n.searchTerm?[{id:"Commonname",value:n.searchTerm}]:[];return p.value&&p.value.length>0&&a.push({id:n.mat,value:p.value}),F.value&&F.value.length>0&&a.push({id:"RL2020kat",value:F.value}),j.value&&j.value.length>0&&a.push({id:n.grupp,value:j.value}),S.value&&S.value.length>0&&a.push({id:"mark",value:S.value}),a});return oe(vt,a=>{b.value?.tableApi&&b.value.tableApi.setColumnFilters(a)}),oe(vt,a=>{const C=a.find(ue=>ue.id===n.mat)?.value??[];o("update:matsvampFilter",C.includes("Matsvamp")),o("update:giftsvampFilter",C.includes("Giftsvamp"));const D=a.find(ue=>ue.id===n.grupp)?.value??[];o("update:gruppFilter",D);const te=a.find(ue=>ue.id==="RL2020kat")?.value??[];o("update:statusFilter",te)},{deep:!0,immediate:!0}),(a,c)=>{const C=Ft,V=$t,D=Et,W=xa,te=Ot,ue=Bt;return u(),$("div",ss,[m("div",ls,[r.value?I("",!0):(u(),$("div",ns,[m("div",rs,[d(C,{"model-value":w(b)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":c[0]||(c[0]=N=>{w(b)?.tableApi?.getColumn("Commonname")?.setFilterValue(N),f(N)}),variant:"ghost"},null,8,["model-value"]),m("div",is,[m("div",us,[S.value.length?(u(!0),$(fe,{key:0},Se(S.value,N=>(u(),$("span",{key:"mark-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:N==="KALKmark"?"kalkmark":N==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>S.value=S.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(N==="KALKmark"?"Kalkmark":N==="ANNANmark"?"Vanlig skogsmark":M(N)),1)]),_:2},1032,["color","onClick"])]))),128)):I("",!0),p.value.length?(u(!0),$(fe,{key:1},Se(p.value,N=>(u(),$("span",{key:"svamp-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:N==="Matsvamp"?"warning":N==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>p.value=p.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(M(N)),1)]),_:2},1032,["color","onClick"])]))),128)):I("",!0),j.value.length?(u(!0),$(fe,{key:2},Se(j.value,N=>(u(),$("span",{key:"grupp-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>j.value=j.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(M(N)),1)]),_:2},1032,["onClick"])]))),128)):I("",!0),F.value.length?(u(!0),$(fe,{key:3},Se(F.value,N=>(u(),$("span",{key:"status-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:N==="Signalart"?"signal":E(N),class:"cursor-pointer mb-2 md:mb-0",onClick:me=>F.value=F.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(N==="Signalart"?"Signalart":K(N)),1)]),_:2},1032,["color","onClick"])]))),128)):I("",!0)]),r.value?I("",!0):(u(),O(w(le),{key:0,class:"flex",items:w(b)?.tableApi?.getAllColumns()?.filter(N=>N.getCanHide())?.map(N=>({label:N.columnDef.meta?.headerText||w(va)(N.id),type:"checkbox",checked:N.getIsVisible(),onUpdateChecked(me){w(b)?.tableApi?.getColumn(N.id)?.toggleVisibility(!!me)},onSelect(me){me?.preventDefault()}})),content:{align:"end"}},{default:z(()=>[d(w(se),{label:"Kolumner",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),s.isNormalView?I("",!0):(u(),$("div",cs,[d(V,{modelValue:L.value,"onUpdate:modelValue":c[1]||(c[1]=N=>L.value=N),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"ghost"},null,8,["modelValue"])]))])])])),r.value?(u(),$("div",ds,[S.value.length?(u(!0),$(fe,{key:0},Se(S.value,N=>(u(),$("span",{key:"mark-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:N==="KALKmark"?"kalkmark":N==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>S.value=S.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(N==="KALKmark"?"Kalkmark":N==="ANNANmark"?"Vanlig skogsmark":M(N)),1)]),_:2},1032,["color","onClick"])]))),128)):I("",!0),p.value.length?(u(!0),$(fe,{key:1},Se(p.value,N=>(u(),$("span",{key:"svamp-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:N==="Matsvamp"?"warning":N==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>p.value=p.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(M(N)),1)]),_:2},1032,["color","onClick"])]))),128)):I("",!0),j.value.length?(u(!0),$(fe,{key:2},Se(j.value,N=>(u(),$("span",{key:"grupp-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>j.value=j.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(M(N)),1)]),_:2},1032,["onClick"])]))),128)):I("",!0),F.value.length?(u(!0),$(fe,{key:3},Se(F.value,N=>(u(),$("span",{key:"status-"+N},[d(w(U),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:N==="Signalart"?"signal":E(N),class:"cursor-pointer mb-2 md:mb-0",onClick:me=>F.value=F.value.filter(ce=>ce!==N)},{default:z(()=>[Q(Y(N==="Signalart"?"Signalart":K(N)),1)]),_:2},1032,["color","onClick"])]))),128)):I("",!0)])):I("",!0)]),r.value?(u(),$("div",gs,[d(w(le),{size:w(e)?"xl":"md",items:re.value,content:{align:"start"}},{default:z(()=>[d(w(se),{variant:w(e)?"soft":"ghost",icon:"i-lucide-arrow-up-down",size:w(e)?"xl":"md",label:(w(e),null),color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),d(w(le),{size:w(e)?"xl":"md",items:he.value,content:{align:"start"}},{default:z(()=>[d(w(se),{variant:w(e)?"soft":"ghost",icon:"i-lucide-list-filter",size:w(e)?"xl":"md",label:(w(e),null),color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),d(C,{variant:w(e)?"soft":"ghost","model-value":w(b)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:w(e)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":c[2]||(c[2]=N=>{w(b)?.tableApi?.getColumn("Commonname")?.setFilterValue(N),f(N)})},null,8,["variant","model-value","size"])])):I("",!0),d(D,{ui:{border:"border-muted/50"},class:"mb-2"}),ze.value?(u(),$("div",{key:1,class:ne([(s.isNormalView,"")])},[m("div",ps,[d(W,{ref_key:"table",ref:b,"column-visibility":P.value,"onUpdate:columnVisibility":c[3]||(c[3]=N=>P.value=N),pagination:v.value,"onUpdate:pagination":c[4]||(c[4]=N=>v.value=N),data:Xt.value,columns:we.value,sticky:"",loading:Ve.value,sorting:X.value,"onUpdate:sorting":c[5]||(c[5]=N=>X.value=N),onSelect:h,autoResetAll:!0,"pagination-options":w(e)&&!s.isNormalView?!1:s.isNormalView?void 0:{getPaginationRowModel:w(_a)()},class:ne([{"":s.isNormalView},"rounded-sm"]),ui:Fe.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),r.value?I("",!0):(u(),$("div",vs,[m("div",ms,[m("h1",fs,[c[8]||(c[8]=Q(" Visar ",-1)),m("span",hs,"  "+Y(Zt.value)+" till  ",1),Q(" "+Y(Jt.value)+" av "+Y(We.value)+" arter ",1)]),s.isNormalView?(u(),O(w(se),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:c[6]||(c[6]=N=>o("enlarge"))})):I("",!0)]),m("div",null,[!s.isNormalView&&L.value!=="Alla"&&!w(e)?(u(),$("div",bs,[m("div",ks,[d(te,{"active-variant":"ghost",variant:"ghost","default-page":(w(b)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":w(b)?.tableApi?.getState().pagination.pageSize,total:w(b)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":c[7]||(c[7]=N=>w(b)?.tableApi?.setPageIndex(N-1))},null,8,["default-page","items-per-page","total"])])])):I("",!0)])]))])],2)):(u(),$("div",ys,[m("div",_s,[d(ue,{class:"h-4 w-full rounded"}),d(ue,{class:"h-4 w-[85%] rounded"})])]))])}}},ot=_e(xs,[["__scopeId","data-v-740b2533"]]),Ss={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},ws=ye({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(s){const t=s,e=["100%","200%","400%","800%"],r=G(0),o=x(()=>e[r.value]),l=G([]),g=Ne();function f(v){return v.sort((i,h)=>h.sample_plot_count-i.sample_plot_count)}function n(v,i,h){if(h<=0)return[];const M=(i[0]-v[0])/(h-1||1),R=(i[1]-v[1])/(h-1||1),A=(i[2]-v[2])/(h-1||1),E=[];for(let K=0;K<h;K++){const J=Math.round(v[0]+M*K),X=Math.round(v[1]+R*K),U=Math.round(v[2]+A*K);E.push(`rgb(${J}, ${X}, ${U})`)}return E}function b(v){const i=[];for(let R=0;R<v;R++){const A=45+300/(v-1||1)*R;i.push(`hsl(${A%360}, 70%, 50%)`)}return i}async function T(){const v=[g.geography,g.forestType,g.standAge,g.vegetationType];if(v.some(h=>!h)){l.value=[];return}if(!at(...v)){l.value=[];return}const i=`edna-${g.geography}-${g.forestType}-${g.standAge}-${g.vegetationType}.json`;try{const h=await fetch(`/edna/${i}`);if(!h.ok){if(h.status===404){l.value=[];return}throw new Error(`Failed to fetch ${i}`)}let M=await h.json();M=f(M);const R=M.length,A=Math.floor(R*.1),E=R-A,K=n([82,82,82],[212,212,212],A),J=b(E),X=[...K,...J];l.value=M.map((U,pe)=>({...U,fillColor:X[pe]||"var(--ui-primary)"}))}catch(h){console.error("Error fetching chart data:",h),l.value=[]}}Ge(T),oe(()=>[g.geography,g.forestType,g.standAge,g.vegetationType],T,{immediate:!0});const P=(v,i)=>i,S=v=>v.sample_plot_count,y=(v,i)=>{const h=F.value[i];if(!h)return"";const M=t.searchTerm.trim().toLowerCase(),R=String(h.Commonname||"").toLowerCase(),A=String(h.Scientificname||"").toLowerCase(),E=M?R.includes(M)||A.includes(M):!0,K=t.statusFilter.length>0,J=t.matsvampFilter||t.giftsvampFilter,X=t.gruppFilter.length>0;if(!K&&!J&&!X&&t.searchTerm.trim()!=="")return E?k(h.Commonname):"";const U=K&&t.statusFilter.includes("Signalart")&&h.SIGNAL_art==="S",pe=t.statusFilter.filter(Fe=>Fe!=="Signalart"),se=K&&t.statusFilter.includes("Ej bedömd")&&(h.RL2020kat===null||h.RL2020kat===0||h.RL2020kat==="0"||String(h.RL2020kat).toUpperCase()==="NE"),le=K&&t.statusFilter.includes("Ej tillämplig")&&String(h.RL2020kat).toUpperCase()==="NA",be=K?U||pe.includes(h.RL2020kat):!1,ke=t.matsvampFilter?h.matsvamp==1:!1,xe=t.giftsvampFilter?(h.Giftsvamp||"").toLowerCase()==="x":!1,we=X?t.gruppFilter.includes(h[t.groupKey]):!1;return K?!J&&!X?E&&(U||be||se||le)?k(h.Commonname):"":E&&(U||be||se||le)&&(J?ke||xe:!0)&&(X?we:!0)?k(h.Commonname):"":J||X?J&&!X?E&&(ke||xe)?k(h.Commonname):"":!J&&X?E&&we?k(h.Commonname):"":E&&(ke||xe)&&we?k(h.Commonname):"":""};function k(v){return v?v.charAt(0).toUpperCase()+v.slice(1):""}const _=G(null);function L(v){if(!v)return _.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';_.value=v;const i=v.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",h=v.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",M={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},R=M[v.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${M[v.RL2020kat]}</div>`:"",A=v.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${v["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${k(v.Commonname)}</strong> <em>${k(v.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${v.sample_plot_count} av ${v.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${i} ${h} ${R} ${A}
      </div>
    </div>
  `}const p={[ct.selectors.bar]:L},F=x(()=>{const v="#d4d4d4";return l.value.map(i=>{if(he.value&&i.Scientificname===re.selectedSpecies?.Scientificname)return{...i,barColor:"#b1835e"};const h=t.searchTerm.trim().toLowerCase(),M=String(i.Commonname||"").toLowerCase(),R=String(i.Scientificname||"").toLowerCase(),A=h?M.includes(h)||R.includes(h):!0,E=t.statusFilter.length>0,K=t.matsvampFilter||t.giftsvampFilter,J=t.gruppFilter.length>0;if(!E&&!K&&!J&&t.searchTerm.trim()!=="")return{...i,barColor:A?"#8b5cf6":v};const X=E&&t.statusFilter.includes("Signalart")&&i.SIGNAL_art==="S",U=t.statusFilter.filter(we=>we!=="Signalart"),pe=E&&t.statusFilter.includes("Ej bedömd")&&(i.RL2020kat===null||i.RL2020kat===0||i.RL2020kat==="0"||String(i.RL2020kat).toUpperCase()==="NE"),se=E&&t.statusFilter.includes("Ej tillämplig")&&String(i.RL2020kat).toUpperCase()==="NA",le=E?X||U.includes(i.RL2020kat):!1,be=t.matsvampFilter?i.matsvamp==1:!1,ke=t.giftsvampFilter?(i.Giftsvamp||"").toLowerCase()==="x":!1,xe=J?t.gruppFilter.includes(i[t.groupKey]):!1;if(E){if(!K&&!J)return A&&X?{...i,barColor:"#14b8a6"}:A&&(X||le||pe||se)?X?{...i,barColor:"#14b8a6"}:i.RL2020kat==="LC"?{...i,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(i.RL2020kat)?{...i,barColor:"#ef4444"}:pe||se?{...i,barColor:"#737373"}:{...i,barColor:"#1f2937"}:{...i,barColor:v};if(A&&(X||le||pe||se)&&(K?be||ke:!0)&&(J?xe:!0)){if(X)return{...i,barColor:"#14b8a6"};if(U.length>0)return i.RL2020kat==="LC"?{...i,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(i.RL2020kat)?{...i,barColor:"#ef4444"}:pe||se?{...i,barColor:"#737373"}:{...i,barColor:"#1f2937"};if(t.matsvampFilter&&be)return{...i,barColor:"#eab308"};if(t.giftsvampFilter&&ke)return{...i,barColor:"#84cc16"};if(J&&xe)return{...i,barColor:"#000000"}}return{...i,barColor:v}}if(K||J){if(K&&!J)return A&&be?{...i,barColor:"#eab308"}:A&&ke?{...i,barColor:"#84cc16"}:{...i,barColor:v};if(!K&&J)return A&&xe?{...i,barColor:"#000000"}:{...i,barColor:v};if(A&&(be||ke)&&xe){if(be)return{...i,barColor:"#eab308"};if(ke)return{...i,barColor:"#84cc16"}}return{...i,barColor:v}}return{...i,barColor:i.fillColor||"var(--ui-primary)"}})}),j=v=>v.barColor,Z=x(()=>F.value.length>0);oe(F,v=>{v.length||(_.value=null)});function q(){r.value<e.length-1&&r.value++}function ee(){r.value>0&&r.value--}const re=Qe(),he=x(()=>re.selectedSpecies!==null),ie=Be("(max-width: 767px)");function B(v){_.value?re.selectSpecies(_.value,"edna"):console.log("No datum available from tooltip.")}return(v,i)=>{const h=ve;return u(),$("div",null,[w(ie)?I("",!0):(u(),$("div",Ss,[d(h,{onClick:ee,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),d(h,{onClick:q,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),w(ie)?I("",!0):(u(),$("div",{key:1,class:ne(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":r.value===0}]),onClick:B},[d(w(za),{data:F.value,width:o.value,height:"200"},{default:z(()=>[d(w(po),{data:F.value,x:P,y:S,color:j,barPadding:.1},null,8,["data"]),d(w(_t),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:F.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":y},null,8,["numTicks"]),d(w(_t),{type:"y",label:"Antal skogar",gridLine:!1}),Z.value?(u(),O(w(mo),{key:0,triggers:p,followCursor:!0})):I("",!0),Z.value?(u(),O(w(Ua),{key:1,color:j,template:L})):I("",!0)]),_:1},8,["data","width"])],2))])}}}),Cs=Object.assign(_e(ws,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),st=ma("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:s=>t=>s.componentTabs[t]||"grid"},actions:{setActiveTab(s,t){this.componentTabs[s]=t}}}),Ns={class:"md:flex justify-between relative"},$s={class:"md:flex gap-4"},Ts={class:"md:mt-0 mt-1 mb-1 md:mb-2"},Ls={class:"text-3xl font-medium flex items-center text-secondary-500"},As={class:"flex gap-2"},Es={class:"text-md text-neutral-500"},Vs={class:"justify-between hidden"},Ps={class:"flex gap-3 items-start"},Bs={key:0,class:""},Fs={key:1,class:""},Rs=ye({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(s,{emit:t}){const e=G(!1),r=G(!1),o=G([]),l=G([]),g=G(""),f=G(!0),n=t,b=st(),T=x({get:()=>ie.value?"spatialForest":b.getActiveTab("EdnaComponent"),set:i=>{ie.value||b.setActiveTab("EdnaComponent",i)}}),P=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],S=Ne(),{geography:y,forestType:k,standAge:_,vegetationType:L}=fa(S),p=x(()=>y.value),F=x(()=>k.value),j=x(()=>_.value),Z=x(()=>L.value),q=G([]),ee=x(()=>q.value.length),re=x(()=>q.value.length>0&&q.value[0].sample_env_count||0),he=G("100%"),ie=Be("(max-width: 767px)"),B=x(()=>({mark:!1,...ie.value?{images:!1}:{}}));async function v(i,h,M,R){if(!i||!h||!M||!R){q.value=[];return}if(!at(i,h,M,R)){q.value=[];return}const A=`edna-${i}-${h}-${M}-${R}.json`;try{const E=await fetch(`/edna/${A}`);if(!E.ok){if(E.status===404){q.value=[];return}throw new Error(`Failed to fetch ${A}`)}const K=await E.json();K.sort((J,X)=>X.sample_plot_count-J.sample_plot_count),q.value=K}catch(E){console.error("Error fetching data:",E),q.value=[]}}return oe(()=>[y.value,k.value,_.value,L.value],([i,h,M,R])=>{i&&h&&M&&R&&v(i,h,M,R)},{immediate:!0}),(i,h)=>{const M=ve,R=je,A=Je,E=et,K=ot,J=Cs,X=Ue;return u(),$("div",null,[d(X,{class:"rounded-none sm:rounded-lg",variant:"ghost"},{default:z(()=>[m("div",Ns,[d(M,{color:"neutral",variant:"soft",size:"xl",onClick:h[0]||(h[0]=U=>i.$emit("enlarge")),class:ne([i.isNormalView?"hidden":"md:hidden","rounded-full absolute top-0 right-0"]),icon:i.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"]),m("div",$s,[m("div",Ts,[m("div",Ls,[d(R,{name:"solar:dna-linear",class:"mr-2"}),h[10]||(h[10]=m("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),m("div",As,[m("h1",Es,Y(ee.value)+" arter baserat på "+Y(re.value)+" skogar",1),re.value<10?(u(),O(A,{key:0,icon:re.value<10?"i-cuida-warning-outline":void 0,size:"md",color:re.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:z(()=>[Q(Y(re.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):I("",!0)])]),m("div",Vs,[d(E,{modelValue:T.value,"onUpdate:modelValue":h[1]||(h[1]=U=>T.value=U),items:P,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),m("div",Ps,[d(M,{class:"hidden md:flex h-fit ring-muted/60",color:"neutral",variant:"outline",size:"sm",onClick:h[2]||(h[2]=U=>f.value=!f.value),label:f.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),d(Pe,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:z(()=>[T.value==="spatialForest"?(u(),$("div",Bs,[d(K,{onEnlarge:h[3]||(h[3]=U=>n("enlarge")),isNormalView:i.isNormalView,"column-visibility-overrides":B.value},null,8,["isNormalView","column-visibility-overrides"])])):T.value==="columnChart"?(u(),$("div",Fs,[f.value?(u(),O(J,{key:0,class:"mb-6",chartData:q.value,chartWidth:he.value,geography:p.value,forestType:F.value,standAge:j.value,vegetationType:Z.value,matsvampFilter:e.value,giftsvampFilter:r.value,gruppFilter:o.value,statusFilter:l.value,"search-term":g.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):I("",!0),d(K,{onEnlarge:h[4]||(h[4]=U=>n("enlarge")),"onUpdate:matsvampFilter":h[5]||(h[5]=U=>e.value=U),"onUpdate:giftsvampFilter":h[6]||(h[6]=U=>r.value=U),"onUpdate:gruppFilter":h[7]||(h[7]=U=>o.value=U),"onUpdate:statusFilter":h[8]||(h[8]=U=>l.value=U),"onUpdate:searchTerm":h[9]||(h[9]=U=>g.value=U),isNormalView:i.isNormalView,"column-visibility-overrides":B.value,"search-term":g.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):I("",!0)]),_:1})]),_:1})])}}}),St=Object.assign(_e(Rs,[["__scopeId","data-v-d27777d3"]]),{__name:"EdnaComponent"}),zs={class:"p-2 flex gap-2"},Us={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},js=["onClick"],Is={class:"w-full h-24 relative"},Ds=["src"],Ms={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},Gs={class:"absolute bottom-1 left-1 flex gap-1"},Ks={class:"p-2 pt-1"},Os={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},qs={class:"flex justify-between items-center px-5 py-2"},dt={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(s){const t=G([]),e=G([]),r=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],o=s,l=Ne(),g=Qe(),f=G([]),n=G(!0);async function b(){const{geography:B,forestType:v,standAge:i,vegetationType:h}=l,M=`${o.dataType}-${B}-${v}-${i}-${h}.json`;try{const R=await fetch(`/${o.dataTypeFolder}/${M}`);if(!R.ok)throw new Error(`Failed to fetch data from ${M}`);f.value=await R.json(),n.value=!1}catch(R){console.error("Error fetching species data:",R)}}oe(()=>[l.geography,l.forestType,l.standAge,l.vegetationType],()=>{n.value=!0,b()},{immediate:!0});const T=G({column:"",direction:"asc"}),P=x(()=>{let B=f.value.slice();if(T.value?.column){const{column:v,direction:i}=T.value;B.sort((h,M)=>{const R=h[v],A=M[v];if(R==null&&A!=null)return 1;if(R!=null&&A==null)return-1;if(R==null&&A==null)return 0;const E=String(R).localeCompare(String(A),"sv",{numeric:!0,sensitivity:"base"});return i==="asc"?E:-E})}else B.sort((v,i)=>{const h=v.RankRed??99999,M=i.RankRed??99999;if(h!==M)return h-M;const R=v.Commonname?.toString().toLowerCase()||"",A=i.Commonname?.toString().toLowerCase()||"";return R.localeCompare(A,"sv",{numeric:!0,sensitivity:"base"})});return B}),S=G(""),y=x(()=>{let B=P.value;if(S.value.trim()!==""){const v=S.value.trim().toLowerCase();B=B.filter(i=>i.Commonname&&i.Commonname.toLowerCase().includes(v)||i.Scientificname&&i.Scientificname.toLowerCase().includes(v))}return o.filterEdible?B=B.filter(v=>{const i=v["Nyasvamp-boken"];return i&&String(i).toLowerCase()==="x"}):o.filterPoison&&(B=B.filter(v=>{const i=v["Nyasvamp-boken"];return!(i&&String(i).toLowerCase()==="x")})),B}),k=x(()=>r.map(B=>{let v=0;return B.value==="Ej bedömd"?v=y.value.filter(i=>{const h=String(i.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(h)}).length:B.value==="Signalart"?v=y.value.filter(i=>i.SIGNAL_art==="S").length:v=y.value.filter(i=>String(i.RL2020kat).trim()===B.value).length,{...B,label:`${B.label} (${v})`}})),_=x(()=>{const B={};return y.value.forEach(v=>{const i=v[o.grupp];if(i!=null){const h=String(i).trim();h&&h.toLowerCase()!=="undefined"&&(B[h]=(B[h]||0)+1)}}),Object.keys(B).map(v=>({value:v,label:`${re(v)} (${B[v]})`}))}),L=x(()=>{let B=P.value;if(S.value.trim()!==""){const v=S.value.trim().toLowerCase();B=B.filter(i=>i.Commonname&&i.Commonname.toLowerCase().includes(v)||i.Scientificname&&i.Scientificname.toLowerCase().includes(v)),console.log("After search filtering, count:",B.length)}return t.value.length>0&&(console.log("Status filter values:",t.value),B=B.filter(v=>{const i=String(v.RL2020kat).trim(),h=t.value.some(M=>{const R=M&&M.value?M.value:M;return R==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(i):R==="Signalart"?v.SIGNAL_art==="S":i===R});return console.log(`Row "${v.Commonname}" with RL2020kat "${i}" matches:`,h),h}),console.log("After status filtering, count:",B.length)),e.value.length>0&&(B=B.filter(v=>{const i=v[o.grupp],h=i!=null?String(i).trim():"";return e.value.includes(h)})),o.filterEdible?(B=B.filter(v=>{const i=v["Nyasvamp-boken"];return i&&String(i).toLowerCase()==="x"}),console.log("After edible filtering, count:",B.length)):o.filterPoison&&(B=B.filter(v=>{const i=v["Nyasvamp-boken"];return!(i&&String(i).toLowerCase()==="x")}),console.log("After poison filtering, count:",B.length)),console.log("Final filteredData count:",B.length),B}),p=x(()=>o.isNormalView?24:32),F=G(1),j=x(()=>{const B=(F.value-1)*p.value;return L.value.slice(B,B+p.value)}),Z=x(()=>L.value.length>0?(F.value-1)*p.value+1:0),q=x(()=>Math.min(F.value*p.value,L.value.length)),ee=x(()=>L.value.length);x(()=>Math.ceil(ee.value/p.value));function re(B){return B?B.charAt(0).toUpperCase()+B.slice(1).toLowerCase():""}function he(B){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[B]||"Ej bedömd"}function ie(B){g.selectSpecies(B,o.dataTypeFolder)}return(B,v)=>{const i=Ft,h=$t,M=ut,R=Je,A=Ot;return u(),$(fe,null,[m("div",zs,[d(i,{icon:"i-heroicons-magnifying-glass",modelValue:S.value,"onUpdate:modelValue":v[0]||(v[0]=E=>S.value=E),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),d(h,{modelValue:t.value,"onUpdate:modelValue":v[1]||(v[1]=E=>t.value=E),items:k.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),d(h,{modelValue:e.value,"onUpdate:modelValue":v[2]||(v[2]=E=>e.value=E),items:_.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),m("div",Us,[(u(!0),$(fe,null,Se(j.value,(E,K)=>(u(),$("div",{key:E.Commonname+E.Scientificname+K,class:"bg-white dark:bg-neutral-800 rounded border overflow-hidden border-muted/50 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:J=>ie(E)},[m("div",Is,[E.images&&E.images.length?(u(),$("img",{key:0,src:E.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,Ds)):(u(),$("div",Ms,[d(M,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),m("div",Gs,[E.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(E.RL2020kat)?(u(),O(R,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:E.RL2020kat!=="Saknas"?he(E.RL2020kat):"Ej bedömd"},null,8,["label"])):I("",!0),E.SIGNAL_art==="S"?(u(),O(R,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):I("",!0)])]),m("div",Ks,[m("div",Os,Y(re(E.Commonname)),1)])],8,js))),128))]),m("div",qs,[m("div",null,[m("p",null," Visar "+Y(Z.value)+" till "+Y(q.value)+" av "+Y(ee.value)+" arter ",1)]),m("div",null,[d(A,{"items-per-page":p.value,page:F.value,"onUpdate:page":v[3]||(v[3]=E=>F.value=E),total:ee.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},Ws={class:"md:flex justify-between items-start"},Hs={class:"w-full flex justify-between items-start"},Xs={class:"text-md text-neutral-500 md:mb-2"},Ys={class:"md:flex gap-1 items-center hidden"},Zs={key:0},Js={key:1},Qs={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(s,{emit:t}){const e=Ne(),r=G(0);async function o(y,k,_,L=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(j=>!j)){_.value=0;return}const F=`${k}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const j=await fetch(`/${y}/${F}`);if(!j.ok)throw new Error("Network response was not ok");const Z=await j.json();_.value=L?Z.filter(q=>q[L]==="x").length:Z.length}catch(j){console.error("Failed to fetch edible count",j),_.value=0}}oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("edible","edibledata",r,"Nyasvamp-boken"),{immediate:!0});const l=t,g=[{label:"Galleri",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"Tabell",icon:"material-symbols:table-outline",value:"table"}],f=st(),n=s,b=Be("(max-width: 767px)"),T=x(()=>b.value||n.isNormalView),P=x({get:()=>T.value?"table":f.getActiveTab("FullscreenEdible"),set:y=>{T.value||f.setActiveTab("FullscreenEdible",y)}}),S=x(()=>P.value==="table");return(y,k)=>{const _=je,L=ve,p=et,F=ot,j=dt,Z=Ue;return u(),$("div",null,[d(Z,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:z(()=>[m("div",Ws,[m("div",Hs,[m("div",null,[m("div",{onClick:k[0]||(k[0]=q=>y.$emit("enlarge")),class:"group cursor-pointer dark:text-neutral-300 text-warning-500 text-4xl md:text-3xl font-medium flex items-center"},[d(_,{name:"icon-park-solid:knife-fork",class:"mr-2"}),k[4]||(k[4]=m("h1",null," Matsvampar ",-1)),d(_,{name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})]),m("h2",Xs,Y(r.value)+" arter",1)]),d(L,{color:"neutral",variant:"soft",size:"xl",onClick:k[1]||(k[1]=q=>y.$emit("enlarge")),class:ne([s.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:s.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])]),m("div",Ys,[T.value?I("",!0):(u(),O(p,{key:0,class:"flex mt-2",modelValue:P.value,"onUpdate:modelValue":k[2]||(k[2]=q=>P.value=q),items:g,variant:"pill",color:"neutral",size:"md",ui:{list:"bg-transparent",indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),d(Pe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:z(()=>[S.value?(u(),$("div",Zs,[d(F,{onEnlarge:k[3]||(k[3]=q=>l("enlarge")),"is-normal-view":s.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(u(),$("div",Js,[d(j,{"is-normal-view":s.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},wt=_e(Qs,[["__scopeId","data-v-372515fe"]]),el={class:"md:flex justify-between items-start"},tl={class:"md:flex gap-4"},al={class:"w-full flex justify-between items-start"},ol={class:"text-md text-neutral-500 md:mb-2"},sl={class:"md:flex gap-4 items-center hidden"},ll={key:0},nl={key:1},rl={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(s,{emit:t}){const e=Ne(),r=G(0);async function o(k,_,L,p=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(Z=>!Z)){L.value=0;return}const j=`${_}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const Z=await fetch(`/${k}/${j}`);if(!Z.ok)throw new Error("Network response was not ok");const q=await Z.json();L.value=p?q.filter(ee=>ee[p]==="x").length:q.length}catch{L.value=0}}oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("edible","edibledata",r,"Giftsvamp"),{immediate:!0});const l=t,g=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],f=st(),n=s,b=Be("(max-width: 767px)"),T=x(()=>b.value||n.isNormalView),P=()=>{n.isNormalView&&l("enlarge")},S=x({get:()=>T.value?"table":f.getActiveTab("FullscreenEdible"),set:k=>{T.value||f.setActiveTab("FullscreenEdible",k)}}),y=x(()=>S.value==="table");return(k,_)=>{const L=je,p=ve,F=et,j=ot,Z=dt,q=Ue;return u(),O(q,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:z(()=>[m("div",el,[m("div",tl,[m("div",al,[m("div",null,[m("div",{onClick:P,class:ne(["flex items-center text-poison-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",s.isNormalView?"group cursor-pointer":"cursor-default"])},[d(L,{name:"i-hugeicons-danger",class:"mr-2"}),_[3]||(_[3]=m("h1",null," Giftsvampar ",-1)),s.isNormalView?(u(),O(L,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):I("",!0)],2),m("h2",ol,Y(r.value)+" arter",1)]),d(p,{color:"neutral",variant:"soft",size:"xl",onClick:_[0]||(_[0]=ee=>k.$emit("enlarge")),class:ne([s.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:s.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),m("div",sl,[T.value?I("",!0):(u(),O(F,{key:0,class:"flex mt-2",modelValue:S.value,"onUpdate:modelValue":_[1]||(_[1]=ee=>S.value=ee),items:g,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),d(Pe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:z(()=>[y.value?(u(),$("div",ll,[d(j,{onEnlarge:_[2]||(_[2]=ee=>l("enlarge")),"is-normal-view":s.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(u(),$("div",nl,[d(Z,{"is-normal-view":s.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Ct=_e(rl,[["__scopeId","data-v-e06edb37"]]),il={class:"md:flex justify-between items-start"},ul={class:"md:flex gap-4"},cl={class:"w-full flex justify-between items-start"},dl={class:"text-md text-neutral-500 md:mb-2"},gl={class:"md:flex gap-4 items-center hidden"},pl={key:0},vl={key:1},ml={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(s,{emit:t}){const e=Ne(),r=G(0);async function o(k,_,L,p=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(Z=>!Z)){L.value=0;return}const j=`${_}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const Z=await fetch(`/${k}/${j}`);if(!Z.ok)throw new Error("Network response was not ok");const q=await Z.json();L.value=p?q.filter(ee=>ee[p]==="x").length:q.length}catch(Z){console.error("Failed to fetch count for",_,Z),L.value=0}}oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>o("redlisted","redlisted",r),{immediate:!0});const l=t,g=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],f=s,n=Be("(max-width: 767px)"),b=x(()=>n.value||f.isNormalView),T=st(),P=x({get:()=>b.value?"table":T.getActiveTab("FullscreenEdible"),set:k=>{b.value||T.setActiveTab("FullscreenEdible",k)}}),S=()=>{f.isNormalView&&l("enlarge")},y=x(()=>P.value==="table");return(k,_)=>{const L=je,p=ve,F=et,j=ot,Z=dt,q=Ue;return u(),O(q,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:z(()=>[m("div",il,[m("div",ul,[m("div",cl,[m("div",null,[m("div",{onClick:S,class:ne(["flex items-center text-signal-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",s.isNormalView?"group cursor-pointer":"cursor-default"])},[d(L,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),_[3]||(_[3]=m("h1",{class:"truncate"}," Naturvårdsarter ",-1)),s.isNormalView?(u(),O(L,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):I("",!0)],2),m("h2",dl,Y(r.value)+" arter",1)]),d(p,{color:"neutral",variant:"soft",size:"xl",onClick:_[0]||(_[0]=ee=>k.$emit("enlarge")),class:ne([s.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:s.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),m("div",gl,[b.value?I("",!0):(u(),O(F,{key:0,class:"flex mt-2",modelValue:P.value,"onUpdate:modelValue":_[1]||(_[1]=ee=>P.value=ee),items:g,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),d(Pe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:z(()=>[y.value?(u(),$("div",pl,[d(j,{onEnlarge:_[2]||(_[2]=ee=>l("enlarge")),"is-normal-view":s.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(u(),$("div",vl,[d(Z,{"is-normal-view":s.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Nt=_e(ml,[["__scopeId","data-v-0d234cbe"]]),fl={class:"grid grid-cols-12"},hl={class:"col-span-12"},bl={key:0,class:"flex p-3 border-b border-muted/50 gap-3"},kl={key:1,class:"col-span-12 sm:pt-2"},yl={key:0,class:"col-span-12 sm:pt-2"},_l={key:0,class:"space-y-4"},xl={class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},Sl={class:"col-span-4 flex flex-col h-full"},wl={class:"col-span-4 flex flex-col"},Cl={class:"col-span-4 flex flex-col"},Nl={class:"flex justify-between items-center text-warning-500"},$l={class:"text-2xl font-semibold flex items-center"},Tl={key:1,class:"text-neutral-500"},Ll={class:"flex justify-between items-center text-poison-500"},Al={class:"text-2xl font-semibold flex items-center"},El={key:1,class:"text-neutral-500"},Vl={class:"flex justify-between items-center text-signal-500"},Pl={class:"text-2xl font-semibold flex items-center"},Bl={key:1,class:"text-neutral-500"},Fl={class:"flex justify-between items-center text-secondary-500"},Rl={class:"truncate"},zl={class:"text-2xl font-semibold flex items-center"},Ul={key:1,class:"text-neutral-500"},jl={__name:"NormalView",props:{activeView:{type:String,default:null}},emits:["enlarge","closeView"],setup(s,{emit:t}){const e=Ne(),r=Vt(),o=G(null),l=G(null),g=G(null),f=G(null),n=s,b=t,T={FullScreenEdible:"knowledge",FullScreenPoison:"knowledge",RedlistedComponent:"knowledge",FullScreenEdna:"dna"},P={FullScreenEdible:wt,FullScreenPoison:Ct,RedlistedComponent:Nt,FullScreenEdna:St},S=R=>{T[R]&&(y.value=T[R]),b("enlarge",R)},y=G("knowledge"),k=G(0),_=()=>{k.value=window.innerWidth};Ge(()=>{_(),window.addEventListener("resize",_)}),it(()=>{window.removeEventListener("resize",_)}),x(()=>(k.value>=768,"md"));const L=x(()=>k.value<768),p=x(()=>e.geography),F=x(()=>e.forestType),j=x(()=>e.standAge),Z=x(()=>e.vegetationType),q=x(()=>P[n.activeView??""]??null),ee=x(()=>n.activeView?n.activeView==="FullScreenEdible"||n.activeView==="FullScreenPoison"?{isNormalView:!1,geography:p.value,forestType:F.value,standAge:j.value,vegetationType:Z.value}:{isNormalView:!1}:{isNormalView:!1}),re=x(()=>n.activeView?`${n.activeView}-${r.fullPath}`:void 0),he={FullScreenEdible:"Matsvampar",FullScreenPoison:"Giftsvampar",RedlistedComponent:"Naturvårdsarter",FullScreenEdna:"Alla mykorrhizasvampar"},ie=x(()=>n.activeView==="FullScreenEdna"),B=x(()=>he[n.activeView??""]??"");function v(){y.value="knowledge",b("closeView")}x(()=>q.value?[{label:"Enligt samlad kunskap",onClick:v,class:"cursor-pointer p-1 px-2 rounded hover:bg-muted"},{label:B.value,class:"cursor-default text-neutral"}]:[]);const i=()=>{ie.value?(y.value="knowledge",b("closeView")):S("FullScreenEdna")};oe(()=>n.activeView,R=>{R&&T[R]&&(y.value=T[R])}),oe(y,R=>{n.activeView&&T[n.activeView]!==R&&b("closeView")});async function h(R,A,E,K=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(U=>!U)){E.value=0;return}const X=`${A}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const U=await fetch(`/${R}/${X}`);if(!U.ok)throw new Error("Network response was not ok");const pe=await U.json();K?E.value=pe.filter(se=>se[K]==="x").length:E.value=pe.length}catch(U){console.error("Failed to fetch count for",A,U),E.value=0}}async function M(){const R=e.geography,A=e.forestType,E=e.standAge,K=e.vegetationType;if(!R||!A||!E||!K){f.value=0;return}if(!at(R,A,E,K)){f.value=0;return}f.value=null;const J=`edna-${R}-${A}-${E}-${K}.json`;try{const X=await fetch(`/edna/${J}`);if(!X.ok){f.value=0;return}const U=await X.json();f.value=Array.isArray(U)?U.length:0}catch(X){console.error("Failed to fetch DNA count",X),f.value=0}}return oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>{h("redlisted","redlisted",o),h("edible","edibledata",l,"Nyasvamp-boken"),h("edible","edibledata",g,"Giftsvamp"),M()},{immediate:!0}),(R,A)=>{const E=ka,K=ve,J=je,X=Bt,U=Ue,pe=Et,se=Pt;return u(),$("div",fl,[m("div",hl,[L.value?I("",!0):(u(),$("div",bl,[d(K,{onClick:A[0]||(A[0]=le=>y.value="knowledge"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:y.value==="knowledge"?"soft":"outline",color:"neutral"},{default:z(()=>[d(E,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"})]),_:1},8,["variant"]),d(K,{onClick:A[1]||(A[1]=le=>y.value="dna"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:y.value==="dna"?"soft":"outline",color:"neutral"},{default:z(()=>[d(E,{title:"Enligt DNA",description:"Från markinventeringens jordprover"})]),_:1},8,["variant"])])),y.value==="dna"?(u(),$("div",kl,[m("div",null,[d(St,{isNormalView:!ie.value,onEnlarge:i},null,8,["isNormalView"])])])):I("",!0)]),y.value==="knowledge"?(u(),$("div",yl,[q.value?(u(),$("div",_l,[(u(),O(ha(q.value),Ce(ee.value,{key:re.value,onEnlarge:v,class:"w-full"}),null,16))])):(u(),$(fe,{key:1},[m("div",xl,[m("div",Sl,[(u(),O(wt,{geography:p.value,forestType:F.value,standAge:j.value,vegetationType:Z.value,isNormalView:!0,onEnlarge:A[2]||(A[2]=le=>S("FullScreenEdible")),key:w(r).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),m("div",wl,[(u(),O(Ct,{geography:p.value,forestType:F.value,standAge:j.value,vegetationType:Z.value,isNormalView:!0,onEnlarge:A[3]||(A[3]=le=>S("FullScreenPoison")),key:w(r).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),m("div",Cl,[d(Nt,{isNormalView:!0,onEnlarge:A[4]||(A[4]=le=>S("RedlistedComponent"))})])]),d(se,{class:"md:hidden space-y-3 pt-3 bg-muted/50"},{default:z(()=>[d(E,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"}),d(U,{onClick:A[5]||(A[5]=le=>S("FullScreenEdible")),class:"ring-muted/50"},{default:z(()=>[m("div",Nl,[m("div",null,[m("h1",$l,[d(J,{name:"icon-park-solid:knife-fork",class:"mr-2"}),A[9]||(A[9]=Q("Matsvampar ",-1))]),l.value===null?(u(),O(X,{key:0,class:"h-4 w-12 mt-2"})):(u(),$("h1",Tl,Y(l.value)+" arter",1))]),d(K,{icon:"i-heroicons-chevron-right",class:"rounded-full ring-muted/50",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),d(U,{onClick:A[6]||(A[6]=le=>S("FullScreenPoison")),class:"ring-muted/50"},{default:z(()=>[m("div",Ll,[m("div",null,[m("h1",Al,[d(J,{name:"i-hugeicons-danger",class:"mr-2"}),A[10]||(A[10]=Q("Giftsvampar ",-1))]),l.value===null?(u(),O(X,{key:0,class:"h-4 w-12 mt-2"})):(u(),$("h1",El,Y(g.value)+" arter",1))]),d(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),d(U,{onClick:A[7]||(A[7]=le=>S("RedlistedComponent")),class:"ring-muted/50"},{default:z(()=>[m("div",Vl,[m("div",null,[m("h1",Pl,[d(J,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),A[11]||(A[11]=Q(" Naturvårdsarter ",-1))]),o.value===null?(u(),O(X,{key:0,class:"h-4 w-12 mt-2"})):(u(),$("h1",Bl,Y(o.value)+" arter",1))]),d(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),d(pe),d(E,{title:"Enligt DNA",description:"Från markinventeringens jordprover"}),d(U,{onClick:A[8]||(A[8]=le=>S("FullScreenEdna")),class:"ring-muted/50"},{default:z(()=>[m("div",Fl,[m("div",Rl,[m("div",zl,[d(J,{name:"solar:dna-linear",class:"mr-2"}),A[12]||(A[12]=m("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),f.value===null?(u(),O(X,{key:0,class:"h-4 w-12 mt-2"})):(u(),$("h1",Ul,Y(f.value)+" arter",1))]),d(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1})],64))])):I("",!0)])}}},Il=_e(jl,[["__scopeId","data-v-ef13c22a"]]),Dl={class:"bg-muted"},Ml={class:"flex flex-col min-h-screen"},Gl={__name:"DashboardC",setup(s){Be("(max-width: 767px)");const t=Vt(),e=G(!1),r=G(!0),o=Qe(),l=Ne();oe(()=>o.selectedSpecies,y=>{y&&(e.value=!0)}),oe(e,y=>{y||o.clearSelection()});const g=G(null),f=x(()=>l.geography&&l.forestType&&l.standAge&&l.vegetationType),n=y=>{g.value=y},b=()=>{g.value=null},T=y=>{y.key==="Escape"&&o.selectedSpecies&&o.clearSelection()};function P(y){return Array.isArray(y)?y[0]??null:typeof y=="string"&&y.length>0?y:null}function S(y){const k={geography:P(y.geography),forestType:P(y.forestType),standAge:P(y.standAge),vegetationType:P(y.vegetationType)};k.geography&&k.forestType&&k.standAge&&k.vegetationType&&l.setParams(k)}return Ge(()=>{window.addEventListener("keydown",T),S(t.params)}),At(()=>{window.removeEventListener("keydown",T)}),oe(()=>t.params,y=>{S(y)},{immediate:!0}),oe(()=>[l.geography,l.forestType,l.standAge,l.vegetationType],()=>{l.geography&&l.forestType&&l.standAge&&l.vegetationType&&`${encodeURIComponent(l.geography)}${encodeURIComponent(l.forestType)}${encodeURIComponent(l.standAge)}${encodeURIComponent(l.vegetationType)}`},{deep:!0}),oe(g,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(y,k)=>{const _=Yo,L=ts,p=Sa,F=Pt;return u(),$("div",Dl,[d(L,{modelValue:e.value,"onUpdate:modelValue":k[0]||(k[0]=j=>e.value=j),pinned:r.value,"onUpdate:pinned":k[1]||(k[1]=j=>r.value=j)},{default:z(()=>[d(_,{species:w(o).selectedSpecies,source:w(o).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),d(F,null,{default:z(()=>[d(Pe,{name:"fade"},{default:z(()=>[f.value?(u(),O(p,{key:0})):I("",!0)]),_:1})]),_:1}),m("div",Ml,[d(F,{class:"w-full px-0"},{default:z(()=>[d(Pe,{name:"fade",mode:"out-in"},{default:z(()=>[d(Il,{class:"block sm:border border-muted/50 bg-white sm:rounded sm:shadow","active-view":g.value,onEnlarge:n,onCloseView:b},null,8,["active-view"])]),_:1})]),_:1})])])}}},Kl=_e(Gl,[["__scopeId","data-v-a485cf62"]]),Ol={};function ql(s,t){const e=Kl;return u(),O(e)}const rn=_e(Ol,[["render",ql]]);export{rn as default};
