import{_ as Fe,a as je}from"./kDotTuWK.js";import{_ as Ae}from"./CrWnOoLk.js";import{B as re,W as v,d as g,f as m,e as o,h as n,F as R,ag as W,g as a,aB as ue,N as f,t as S,_ as ce,aN as De,r as w,o as Be,aR as le,K as V,aD as ae,aI as Oe,P as C,w as i,T as oe,n as F,aH as Pe,aE as ne,aF as se,aC as Ee,aL as He,af as Ye,av as qe,L as Ke}from"#entry";import{M as Re}from"./CSTWAKIg.js";import{_ as We}from"./So-Q0rZ0.js";import{_ as de}from"./CZEyliDo.js";import{_ as Xe}from"./DChgQddm.js";import{_ as Qe}from"./BpGmDohq.js";import{u as Ge,_ as Je,a as Ze}from"./IBRE0o26.js";import{_ as et}from"./Bc9nj8bA.js";import"./BkTfL4Si.js";import"./Cpj98o6Y.js";import"./BFpLUR1s.js";import"./iik6CYzq.js";import"./BNt3Jpbo.js";import"./CudAv0bZ.js";import"./C34hH_Fk.js";const tt={key:0,class:"hide-scrollbar overflow-scroll"},lt={class:"px-0 sm:px-6"},at={class:"flex flex-col gap-4 sm:gap-6"},ot={key:0,class:"relative w-full overflow-hidden bg-muted"},nt={class:"p-5 sm:p-6 space-y-3"},st={key:0,class:"text-2xl font-semibold text-neutral-900"},it=re({__name:"InfoCarousel",props:{section:{},items:{},title:{},description:{}},setup(X){const u=X,T=v(()=>u.items??u.section?.items??[]),$=v(()=>u.section?.title??u.title??null),I=v(()=>u.section?.description??u.description??null);v(()=>!!($.value||I.value));function x(_){return _?.image??_?.img??""}function N(_){return _?.description??""}return(_,P)=>{const L=ue,h=de;return T.value.length?(o(),g("section",tt,[n("div",lt,[n("div",at,[(o(!0),g(R,null,W(T.value,(c,j)=>(o(),g("article",{key:j,class:"flex flex-col gap-4 rounded-2xl border border-muted/50 bg-white shadow-sm overflow-hidden"},[x(c)?(o(),g("div",ot,[a(L,{src:x(c),alt:c.title||"",fit:"cover",class:"w-full h-full object-cover",loading:"lazy",decoding:"async"},null,8,["src","alt"])])):m("",!0),n("div",nt,[c.title?(o(),g("h3",st,S(c.title),1)):m("",!0),N(c)?(o(),f(h,{key:1,value:N(c),class:"prose prose-neutral max-w-none"},null,8,["value"])):m("",!0)])]))),128))])])])):m("",!0)}}}),rt=Object.assign(ce(it,[["__scopeId","data-v-d75083d1"]]),{__name:"InfoCarousel"}),ut={key:0,class:"fixed top-18 inset-x-3 z-50 pointer-events-auto origin-top"},ct=["onClick"],dt={class:"text-lg p-2 px-3 font-medium text-nowrap"},mt={key:2,class:"p-4"},pt=["onClick"],ft={class:"text-lg p-2 px-3 font-medium text-nowrap"},vt={class:"w-full rounded-xl relative overflow-hidden"},_t={class:"grid gap-3 sm:gap-6 lg:grid-cols-3"},gt={class:"flex flex-col gap-6 min-w-0 max-w-full"},ht={class:"text-4xl font-medium"},wt={key:0,class:"flex flex-col gap-4 min-w-0 max-w-full"},xt={class:"w-full max-w-full min-w-0 overflow-x-auto overflow-y-visible"},kt={class:"flex flex-nowrap whitespace-nowrap gap-2 w-full my-1"},bt={class:"space-y-2"},yt={class:"text-xl font-semibold text-neutral-900"},Ct={class:"text-sm text-muted"},Tt={class:"text-sm"},$t={class:"flex flex-col gap-1 min-w-0 max-w-full"},St={class:"grid sm:grid-cols-1"},ie="modal-no-scrollbar",It=re({__name:"index",async setup(X){let u,T;const $=De("(max-width: 767px)"),I=w(!1);let x=null;const N=()=>{if(typeof window>"u")return;if(!$.value){I.value=!1;return}const e=window.innerHeight*.5;I.value=window.scrollY>e};Be(()=>{typeof window>"u"||(N(),x=()=>N(),window.addEventListener("scroll",x,{passive:!0}))}),le(()=>{x&&typeof window<"u"&&window.removeEventListener("scroll",x),x=null}),V($,()=>{$.value?N():I.value=!1});const _=w(!1),P=e=>{const t=document.documentElement;e?t.classList.add(ie):t.classList.remove(ie)};V(_,e=>P(e)),le(()=>P(!1));const L=Ge(),{data:h}=([u,T]=ae(()=>ne("skogsskotsel",()=>se("skogsskotsel").first())),u=await u,T(),u);if(!h.value)throw Oe({statusCode:404,statusMessage:"Page not found",fatal:!0});const c=v(()=>h.value?.methods??[]),j=v(()=>c.value.map((e,t)=>({label:e.title,value:t}))),E={id:"",title:"",image:"",shortdescription:"",description:"",descriptionsvamp:""},p=w(null),Q=w(!1);V(p,async(e,t)=>{e&&!t&&!Q.value&&(Q.value=!0,await Ke(),window.scrollTo({top:0}))});const s=v(()=>{const e=c.value;return!e.length||!p.value?E:e.find(t=>t.id===p.value)??E}),A=v({get(){if(!p.value)return null;const e=c.value.findIndex(t=>t.id===p.value);return e>=0?e:null},set(e){typeof e=="number"&&c.value[e]&&(p.value=c.value[e].id)}}),G=e=>{const t=e?.toLowerCase?.()??"";return t==="intekalavverkad"?"naturskog":t==="produktionsskog"?"produktionsskog_":e},J=e=>(e?.toLowerCase?.()??"")==="ingenatgard"?"naturskydd":e,H=e=>{const t=String(e).trim().toLowerCase();return t.includes("efter")?"efter":t.includes("innan")||t.includes("före")||t.includes("fore")?"fore":t.replace(/[^0-9]/g,"")||t},me=(e,t,d)=>{const r=B=>B.trim().normalize("NFD").replace(/å/gi,"a").replace(/ä/gi,"a").replace(/ö/gi,"o").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");return`/images/thumbnails/${`${r(e)}_${H(String(t))}_visa_visa_${r(d)}.webp`}`},{data:pe}=([u,T]=ae(()=>ne("forestry-timeline-skogsskotsel",()=>se("forestryTimelines").first())),u=await u,T(),u),D=[{label:"Inte kalavverkad",value:"naturskog"},{label:"Kalavverkad",value:"produktionsskog_"}],Y=D.map(e=>({label:e.label,value:e.value,icon:e.value==="naturskog"?"i-material-symbols-light-forest-rounded":"i-ph-farm"})),k=w(Y[L.selectedStartskog??0]?.value||Y[0].value);V(()=>L.selectedStartskog,e=>{const t=D[e??0];t&&t.value!==k.value&&(k.value=t.value)},{immediate:!0});function fe(e){k.value=e;const t=D.findIndex(d=>d.value===e);t!==-1&&(L.selectedStartskog=t)}v(()=>D.find(e=>e.value===k.value)?.label??"");const b=v(()=>{const e=pe.value?.entries??[],t=s.value.id,d=J(t);return e.map(r=>({...r,startskog:G(r.startskog),atgard:J(r.atgard)})).filter(r=>r.startskog===G(k.value)&&r.atgard===d).map(r=>({tid:r.tid,skog:r.skog,svamp:r.svamp,thumb:me(r.atgard,r.tid,r.startskog)}))}),M=w(null),y=w(0);function ve(){M.value?.emblaApi?.scrollPrev?.()}function _e(){M.value?.emblaApi?.scrollNext?.()}function ge(e){y.value=e}function he(e){y.value=e,M.value?.emblaApi?.scrollTo?.(e)}V(b,e=>{y.value=0,e.length&&requestAnimationFrame(()=>{M.value?.emblaApi?.scrollTo?.(0)})});const we=e=>{if(!e)return;const t=H(e);if(!t)return;if(t==="fore")return"före";if(t==="efter")return"efter";const d=Number(t);if(!Number.isNaN(d))return String(d)},xe=v(()=>we(b.value[y.value]?.tid));function ke(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function be(e){if(!e)return"";const t=H(e);if(t==="fore")return"Innan avverkning";if(t==="efter")return"Efter avverkning";const d=Number(t);return Number.isNaN(d)?e.charAt(0).toUpperCase()+e.slice(1):`${d} år efter avverkning`}w([{label:"Intro",icon:"i-heroicons-book-open",slot:"text"},{label:"Diagram",icon:"i-heroicons-presentation-chart-line",slot:"diagram"},{label:"Tidslinje",icon:"i-heroicons-list-bullet",slot:"timeline"}]),w("description");const ye=v(()=>[{label:`Om ${(s.value.title||"").toLowerCase()}`,icon:"i-hugeicons-tree-06",value:"description",content:s.value.description||""},{label:"Påverkan på mykorrhizasvampar",icon:"i-hugeicons-mushroom",value:"svamp",content:s.value.descriptionsvamp||""}]),Ce={naturskydd:0,trakthygge:1,luckhuggning:2,skarmtrad:3,skärmträd:3,bladning:4,blädning:4},Te=e=>(e||"").trim().normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase();function $e(){const e=Te(s.value.id),t=Ce[e];typeof t=="number"&&(L.selectedFramework=t),_.value=!0}return(e,t)=>{const d=Fe,r=Ae,U=Pe,B=Ee,O=ue,q=Re,Z=We,Se=de,Ie=Xe,K=je,Ne=Qe,Le=Ye,Me=Je,Ue=Ze,ee=qe,te=et,ze=He,Ve=rt;return C(h)?(o(),g("div",{key:0,class:F(["flex-1 transition-all",s.value.id?"bg-neutral-50":""])},[a(oe,{name:"fold-down"},{default:i(()=>[C($)&&I.value?(o(),g("div",ut,[a(d,{size:"xl",items:j.value,modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=l=>A.value=l),placeholder:s.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-full",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):m("",!0)]),_:1}),s.value.id?m("",!0):(o(),f(U,{key:0,class:"w-full px-0"},{default:i(()=>[a(r,{ui:{container:"py-20 pb-16 lg:py-24",title:"sm:text-7xl",headline:"text-neutral"},title:C(h).hero.title,description:C(h).hero.description,orientation:C(h).hero.orientation,class:""},null,8,["title","description","orientation"])]),_:1})),C($)?s.value.id?(o(),g("div",mt,[a(d,{size:"xl",items:j.value,modelValue:A.value,"onUpdate:modelValue":t[1]||(t[1]=l=>A.value=l),placeholder:s.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-full",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):(o(),f(q,{key:3,class:"relative",initial:{transform:"translateX(10px)",opacity:0,filter:"blur(5px)"},animate:{transform:"translateX(0px)",opacity:1,filter:"blur(0px)"},transition:{duration:.5,delay:.2}},{default:i(()=>[a(Z,{items:c.value,loop:"",speed:4,ui:{item:"basis-3/5 md:basis-1/3 p-2"}},{default:i(({item:l})=>[n("div",{onClick:z=>p.value=l.id,class:F(["shrink-0 bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow hover:shadow-md relative cursor-pointer",p.value?p.value===l.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[l.type&&!s.value.id?(o(),f(B,{key:0,class:"absolute top-2 left-2",label:l.type,color:"neutral",variant:"subtle"},null,8,["label"])):m("",!0),s.value.id?m("",!0):(o(),f(O,{key:1,src:l.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"])),n("h1",ft,S(l.title),1)],10,pt)]),_:1},8,["items"])]),_:1})):(o(),f(U,{key:1,class:F(["w-full flex flex-col sm:flex-row justify-between py-4 gap-3 sm:gap-6 overflow-x-auto transition-all overflow-visible",[s.value.id?"mt-0 flex-row":"mt-8 flex-col"]])},{default:i(()=>[(o(!0),g(R,null,W(c.value,l=>(o(),f(q,{key:l.id,class:"relative",initial:{scale:1,transform:"translateY(10px)",opacity:0},animate:{scale:1,transform:"translateY(0px)",opacity:1},transition:{duration:.3,delay:.7+.05*(l.index??0)}},{default:i(()=>[n("div",{onClick:z=>p.value=l.id,class:F(["shrink-0 lg:shrink sm:w-58 lg:w-full bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow-lg hover:shadow-md relative cursor-pointer",p.value?p.value===l.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[l.type&&!s.value.id?(o(),f(B,{key:0,class:"absolute top-2 left-2",label:l.type,color:"neutral",variant:"subtle"},null,8,["label"])):m("",!0),s.value.id?m("",!0):(o(),f(O,{key:1,src:l.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"])),n("h1",dt,S(l.title),1)],10,ct)]),_:2},1032,["transition"]))),128))]),_:1},8,["class"])),s.value.id?(o(),f(U,{key:4,class:"w-full pt-2 px-1 sm:px-6"},{default:i(()=>[a(q,{class:"flex justify-center w-full",initial:{opacity:0,transform:"translateY(10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.5}},{default:i(()=>[n("div",vt,[a(ze,{class:"p-3 pt-0 sm:pt-3"},{default:i(()=>[n("div",_t,[n("div",gt,[n("h1",ht,S(s.value.title),1),a(oe,{name:"fade",mode:"out-in"},{default:i(()=>[(o(),f(O,{src:s.value.image,key:s.value.image,width:"420",height:"250",class:"rounded-lg ring ring-muted/50",quality:"80"},null,8,["src"]))]),_:1}),a(K,{class:"ring-muted/50",variant:"outline",ui:{body:"py-1 sm:py-1"}},{default:i(()=>[a(Ie,{items:ye.value,"unmount-on-hide":!1,"default-value":["description"],ui:{trigger:"text-base font-medium",body:"text-md/7 text-neutral-800"}},{body:i(({item:l})=>[a(Se,{value:l.content,unwrap:"p"},null,8,["value"])]),_:1},8,["items"])]),_:1})]),b.value.length?(o(),g("div",wt,[t[5]||(t[5]=n("div",{class:"flex"},[n("span",{class:"text-xs text-muted"},"Har skogen varit kalavverkad tidigare?")],-1)),a(Ne,{items:C(Y),modelValue:k.value,"onUpdate:modelValue":t[2]||(t[2]=l=>k.value=l),onChange:fe,variant:"pill",size:"lg",class:"w-full -my-3",ui:{list:"grid grid-cols-2 gap-1 p-1",trigger:" data-[state=active]:text-neutral-900 px-4 py-2 text-sm font-medium",indicator:"bg-white"}},null,8,["items","modelValue"]),a(Z,{ref_key:"timelineCarousel",ref:M,items:b.value,prev:{onClick:ve},next:{onClick:_e},class:"w-full bg-neutral-950 overflow-hidden rounded-lg ring-muted/50",fade:"",onSelect:ge},{default:i(({item:l})=>[a(O,{src:l.thumb,alt:`Foto ${l.tid}`,width:"960",height:"540",class:"w-full aspect-video object-cover"},null,8,["src","alt"])]),_:1},8,["items","prev","next"]),n("div",xt,[n("div",kt,[(o(!0),g(R,null,W(b.value,(l,z)=>(o(),f(Le,{key:`timeline-thumb-${z}`,color:"neutral",class:F(["ring-muted/50 flex-none shrink-0 justify-center whitespace-nowrap",z===y.value?"border-neutral-900 bg-neutral-900 hover:bg-neutral-900 text-white opacity-100 ring-0 shadow":"border-transparent opacity-60 hover:opacity-100"]),variant:"outline",type:"button",onClick:Nt=>he(z),label:ke(l.tid)},null,8,["class","onClick","label"]))),128))])]),a(K,{class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 ring-muted/50"},{default:i(()=>[n("div",bt,[n("h3",yt,S(be(b.value[y.value]?.tid)),1),n("p",Ct,S(b.value[y.value]?.skog),1),n("p",Tt,S(b.value[y.value]?.svamp),1)])]),_:1})])):m("",!0),n("div",$t,[a(K,{ui:{body:"p-1 sm:p-1 sm:pb-3"},class:"ring-muted/50 h-fit"},{default:i(()=>[a(Me,{parentSelectedFrameworks:[s.value.id],currentStartskog:k.value,currentTimeValue:xe.value},null,8,["parentSelectedFrameworks","currentStartskog","currentTimeValue"])]),_:1}),a(ee,{open:_.value,"onUpdate:open":t[4]||(t[4]=l=>_.value=l),fullscreen:""},{content:i(()=>[a(Ue,{onClose:t[3]||(t[3]=l=>_.value=!1)})]),_:1},8,["open"]),n("div",St,[t[6]||(t[6]=n("div",null,null,-1)),a(te,{title:"Öppna modell i helskärm",description:"I helskärm går det att jämföra olika metoder och visa fler lager med mer information. ",icon:"i-material-symbols:interactive-space",class:"mt-6 cursor-pointer",color:"neutral",variant:"subtle",orientation:"vertical",onClick:$e})])])])]),_:1})])]),_:1})]),_:1})):m("",!0),a(U,null,{default:i(()=>[a(ee,{ui:{content:"bg-transparent shadow-none ring-0 rounded-2xl"}},{content:i(()=>[a(Ve,{section:C(h).carousel},null,8,["section"])]),default:i(()=>[a(te,{title:"test",description:"tejhtekht eklrjl",class:"w-fit"})]),_:1})]),_:1})],2)):m("",!0)}}}),Rt=ce(It,[["__scopeId","data-v-3c588f1e"]]);export{Rt as default};
