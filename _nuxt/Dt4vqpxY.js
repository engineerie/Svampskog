import{a5 as F,bz as M,r as T,br as U,ao as j,aC as G,aD as J,aB as K,a as Q,y as X,aE as H,u as Y,d as m,e as u,g as r,w as C,h as k,n,ai as W,F as $,at as Z,a8 as _,f as v,ag as ee,aa as s,a9 as p,t as N,aO as te,aL as ae,bA as ie,bB as le,av as O,ak as ne,bC as se,aT as R}from"./DNJk94Jn.js";function oe(){const a=T(),d=T([]),e=T([]);function I(g){g.forEach(h=>{const y=h.target.id;y&&(h.isIntersecting?d.value=[...d.value,y]:d.value=d.value.filter(L=>L!==y))})}function f(g){g.forEach(h=>{a.value&&a.value.observe(h)})}return F(d,(g,h)=>{g.length===0?e.value=h:e.value=g}),M(()=>a.value=new IntersectionObserver(I)),U(()=>a.value?.disconnect()),{visibleHeadings:d,activeHeadings:e,updateHeadings:f}}const re={slots:{root:"sticky top-(--ui-header-height) z-10 bg-default/75 lg:bg-[initial] backdrop-blur -mx-4 px-4 sm:px-6 sm:-mx-6 overflow-y-auto max-h-[calc(100vh-var(--ui-header-height))]",container:"pt-4 sm:pt-6 pb-2.5 sm:pb-4.5 lg:py-8 border-b border-dashed border-default lg:border-0 flex flex-col",top:"",bottom:"hidden lg:flex lg:flex-col gap-6",trigger:"group text-sm font-semibold flex-1 flex items-center gap-1.5 py-1.5 -mt-1.5 focus-visible:outline-primary",title:"truncate",trailing:"ms-auto inline-flex gap-1.5 items-center",trailingIcon:"size-5 transform transition-transform duration-200 shrink-0 group-data-[state=open]:rotate-180 lg:hidden",content:"data-[state=open]:animate-[collapsible-down_200ms_ease-out] data-[state=closed]:animate-[collapsible-up_200ms_ease-out] overflow-hidden focus:outline-none",list:"min-w-0",listWithChildren:"ms-3",item:"min-w-0",itemWithChildren:"",link:"group relative text-sm flex items-center focus-visible:outline-primary py-1",linkText:"truncate",indicator:"absolute ms-2.5 transition-[translate,height] duration-200 h-(--indicator-size) translate-y-(--indicator-position) w-px rounded-full"},variants:{color:{primary:"",secondary:"",tertiary:"",rodeodust:"",poison:"",signal:"",info:"",success:"",warning:"",error:"",kalkmark:"",vanligmark:"",time:"",neutral:""},highlightColor:{primary:{indicator:"bg-primary"},secondary:{indicator:"bg-secondary"},tertiary:{indicator:"bg-tertiary"},rodeodust:{indicator:"bg-rodeodust"},poison:{indicator:"bg-poison"},signal:{indicator:"bg-signal"},info:{indicator:"bg-info"},success:{indicator:"bg-success"},warning:{indicator:"bg-warning"},error:{indicator:"bg-error"},kalkmark:{indicator:"bg-kalkmark"},vanligmark:{indicator:"bg-vanligmark"},time:{indicator:"bg-time"},neutral:{indicator:"bg-inverted"}},active:{false:{link:["text-muted hover:text-default","transition-colors"]}},highlight:{true:{list:"ms-2.5 ps-4 border-s border-default",item:"-ms-px"}},body:{true:{bottom:"mt-6"}}},compoundVariants:[{color:"primary",active:!0,class:{link:"text-primary",linkLeadingIcon:"text-primary"}},{color:"secondary",active:!0,class:{link:"text-secondary",linkLeadingIcon:"text-secondary"}},{color:"tertiary",active:!0,class:{link:"text-tertiary",linkLeadingIcon:"text-tertiary"}},{color:"rodeodust",active:!0,class:{link:"text-rodeodust",linkLeadingIcon:"text-rodeodust"}},{color:"poison",active:!0,class:{link:"text-poison",linkLeadingIcon:"text-poison"}},{color:"signal",active:!0,class:{link:"text-signal",linkLeadingIcon:"text-signal"}},{color:"info",active:!0,class:{link:"text-info",linkLeadingIcon:"text-info"}},{color:"success",active:!0,class:{link:"text-success",linkLeadingIcon:"text-success"}},{color:"warning",active:!0,class:{link:"text-warning",linkLeadingIcon:"text-warning"}},{color:"error",active:!0,class:{link:"text-error",linkLeadingIcon:"text-error"}},{color:"kalkmark",active:!0,class:{link:"text-kalkmark",linkLeadingIcon:"text-kalkmark"}},{color:"vanligmark",active:!0,class:{link:"text-vanligmark",linkLeadingIcon:"text-vanligmark"}},{color:"time",active:!0,class:{link:"text-time",linkLeadingIcon:"text-time"}},{color:"neutral",active:!0,class:{link:"text-highlighted",linkLeadingIcon:"text-highlighted"}}],defaultVariants:{color:"primary",highlightColor:"primary"}},ce=["href","onClick"],ge=Object.assign({inheritAttrs:!1},{__name:"UContentToc",props:{as:{type:null,required:!1,default:"nav"},trailingIcon:{type:null,required:!1},title:{type:String,required:!1},color:{type:null,required:!1},highlight:{type:Boolean,required:!1},highlightColor:{type:null,required:!1},links:{type:Array,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultOpen:{type:Boolean,required:!1},open:{type:Boolean,required:!1}},emits:["update:open","move"],setup(a,{emit:d}){const e=a,I=d,f=j(),g=G(J(e,"as","open","defaultOpen"),I),{t:h}=K(),y=Q(),L=X(),{activeHeadings:b,updateHeadings:q}=oe(),[V,w]=H({props:{links:Array,level:Number}}),[D,A]=H(),t=W(()=>R({extend:R(re),...L.ui?.contentToc||{}})({color:e.color,highlight:e.highlight,highlightColor:e.highlightColor||e.color}));function E(i){const c=encodeURIComponent(i);y.push(`#${c}`),I("move",i)}function B(i){return i.flatMap(c=>[c,...c.children?B(c.children):[]])}const S=W(()=>{if(!b.value?.length)return;const c=B(e.links||[]).findIndex(l=>b.value.includes(l.id)),o=28,x=0;return{"--indicator-size":`${o*b.value.length+x*(b.value.length-1)}px`,"--indicator-position":c>=0?`${c*(o+x)}px`:"0px"}}),z=Y();return z.hooks.hook("page:loading:end",()=>{const i=Array.from(document.querySelectorAll("h2, h3"));q(i)}),z.hooks.hook("page:transition:finish",()=>{const i=Array.from(document.querySelectorAll("h2, h3"));q(i)}),(i,c)=>(u(),m($,null,[r(s(V),null,{default:C(({links:o,level:x})=>[k("ul",{class:n(x>0?t.value.listWithChildren({class:e.ui?.listWithChildren}):t.value.list({class:e.ui?.list}))},[(u(!0),m($,null,Z(o,(l,P)=>(u(),m("li",{key:P,class:n(l.children&&l.children.length>0?t.value.itemWithChildren({class:[e.ui?.itemWithChildren,l.ui?.itemWithChildren]}):t.value.item({class:[e.ui?.item,l.ui?.item]}))},[k("a",{href:`#${l.id}`,"data-slot":"link",class:n(t.value.link({class:[e.ui?.link,l.ui?.link,l.class],active:s(b).includes(l.id)})),onClick:ee(ue=>E(l.id),["prevent"])},[p(i.$slots,"link",{link:l},()=>[k("span",{"data-slot":"linkText",class:n(t.value.linkText({class:[e.ui?.linkText,l.ui?.linkText]}))},N(l.text),3)])],10,ce),l.children?.length?(u(),_(s(w),{key:0,links:l.children,level:x+1},null,8,["links","level"])):v("",!0)],2))),128))],2)]),_:3}),r(s(D),null,{default:C(({open:o})=>[p(i.$slots,"leading",{open:o,ui:t.value}),k("span",{"data-slot":"title",class:n(t.value.title({class:e.ui?.title}))},[p(i.$slots,"default",{open:o},()=>[te(N(a.title||s(h)("contentToc.title")),1)])],2),k("span",{"data-slot":"trailing",class:n(t.value.trailing({class:e.ui?.trailing}))},[p(i.$slots,"trailing",{open:o,ui:t.value},()=>[r(ae,{name:a.trailingIcon||s(L).ui.icons.chevronDown,"data-slot":"trailingIcon",class:n(t.value.trailingIcon({class:e.ui?.trailingIcon}))},null,8,["name","class"])])],2)]),_:3}),r(s(se),ne({...s(g),...i.$attrs},{"default-open":a.defaultOpen,"data-slot":"root",class:t.value.root({class:[e.ui?.root,e.class]})}),{default:C(({open:o})=>[k("div",{"data-slot":"container",class:n(t.value.container({class:e.ui?.container}))},[f.top?(u(),m("div",{key:0,"data-slot":"top",class:n(t.value.top({class:e.ui?.top}))},[p(i.$slots,"top",{links:a.links})],2)):v("",!0),a.links?.length?(u(),m($,{key:1},[r(s(ie),{"data-slot":"trigger",class:n(t.value.trigger({class:"lg:hidden"}))},{default:C(()=>[r(s(A),{open:o},null,8,["open"])]),_:2},1032,["class"]),r(s(le),{"data-slot":"content",class:n(t.value.content({class:[e.ui?.content,"lg:hidden"]}))},{default:C(()=>[a.highlight?(u(),m("div",{key:0,"data-slot":"indicator",class:n(t.value.indicator({class:e.ui?.indicator})),style:O(S.value)},null,6)):v("",!0),p(i.$slots,"content",{links:a.links},()=>[r(s(w),{links:a.links,level:0},null,8,["links"])])]),_:3},8,["class"]),k("p",{"data-slot":"trigger",class:n(t.value.trigger({class:"hidden lg:flex"}))},[r(s(A),{open:o},null,8,["open"])],2),k("div",{"data-slot":"content",class:n(t.value.content({class:[e.ui?.content,"hidden lg:flex"]}))},[a.highlight?(u(),m("div",{key:0,"data-slot":"indicator",class:n(t.value.indicator({class:e.ui?.indicator})),style:O(S.value)},null,6)):v("",!0),p(i.$slots,"content",{links:a.links},()=>[r(s(w),{links:a.links,level:0},null,8,["links"])])],2)],64)):v("",!0),f.bottom?(u(),m("div",{key:2,"data-slot":"bottom",class:n(t.value.bottom({class:e.ui?.bottom,body:!!f.top||!!a.links?.length}))},[p(i.$slots,"bottom",{links:a.links})],2)):v("",!0)],2)]),_:3},16,["default-open","class"])],64))}});export{ge as _};
