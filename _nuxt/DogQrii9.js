import{b as zt,_ as Pe,a as kt}from"./i4TTljSo.js";import{A as ke,Z as Le,M as q,e as o,w as R,N as de,ah as Q,Y as we,O as x,P as Te,B as jt,C as Mt,I as It,V as k,ar as Dt,as as Gt,t as X,aI as Kt,r as G,d as N,o as We,K as qt,c as yt,J as le,_ as ye,h as v,g as c,aO as lt,f as j,am as Ue,aB as He,n as re,aP as Ot,U as Wt,ae as pe,T as Ve,a4 as Ht,a6 as Zt,y as Xt,a7 as Yt,a8 as Jt,aa as ut,F as me,af as Se,aM as Ee,aS as _t,ac as Qt,bi as H,bn as ea,bo as ta,aL as St,aW as aa,bp as la,bq as xt,ay as sa,aG as wt}from"#entry";import{a as ra,u as Ze,_ as oa}from"./CHHGQ86p.js";import{d as na,g as ia,e as ua,f as Ct,c as ca}from"./DMN0HMvr.js";import{_ as Xe}from"./BSYi5FiS.js";import{_ as Nt}from"./CP5E47S_.js";import{u as Ce}from"./BkKXnW-1.js";import{X as da,O as $t,c as Ye,i as ga,a as pa,d as va,g as je,m as tt,k as ma,b as ct,v as fa,f as dt,j as Me,e as gt,o as ba,n as ha,u as ka,x as ya,t as _a,y as Sa,z as xa,A as wa,S as Ca,C as pt,B as Na,E as $a}from"./BU7ip5i4.js";import"./BaATwz3V.js";import"./B8AKx5ql.js";import"./4YrBz0CJ.js";import"./CkLhoWVU.js";import"./DNP0ZW8r.js";import"./Cpj98o6Y.js";var La=ke({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const l=a;return Le(),(e,p)=>(o(),q(x(Te),we(l,{"data-type":"ellipsis"}),{default:R(()=>[de(e.$slots,"default",{},()=>[p[0]||(p[0]=Q("…"))])]),_:3},16))}}),Ta=La;const[ze,Aa]=jt("PaginationRoot");var Va=ke({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(a,{emit:l}){const e=a,p=l,{siblingCount:u,disabled:n,showEdges:f}=Mt(e);Le();const b=It(e,"page",p,{defaultValue:e.defaultPage,passive:e.page===void 0}),i=k(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return Aa({page:b,onPageChange(h){b.value=h},pageCount:i,siblingCount:u,disabled:n,showEdges:f}),(h,U)=>(o(),q(x(Te),{as:h.as,"as-child":h.asChild},{default:R(()=>[de(h.$slots,"default",{page:x(b),pageCount:i.value})]),_:3},8,["as","as-child"]))}}),Ea=Va,Fa=ke({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const l=a,e=ze();Le();const p=k(()=>e.page.value===1||e.disabled.value);return(u,n)=>(o(),q(x(Te),we(l,{"aria-label":"First Page",type:u.as==="button"?"button":void 0,disabled:p.value,onClick:n[0]||(n[0]=f=>!p.value&&x(e).onPageChange(1))}),{default:R(()=>[de(u.$slots,"default",{},()=>[n[1]||(n[1]=Q("First page"))])]),_:3},16,["type","disabled"]))}}),Ba=Fa,Ra=ke({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const l=a,e=ze();Le();const p=k(()=>e.page.value===e.pageCount.value||e.disabled.value);return(u,n)=>(o(),q(x(Te),we(l,{"aria-label":"Last Page",type:u.as==="button"?"button":void 0,disabled:p.value,onClick:n[0]||(n[0]=f=>!p.value&&x(e).onPageChange(x(e).pageCount.value))}),{default:R(()=>[de(u.$slots,"default",{},()=>[n[1]||(n[1]=Q("Last page"))])]),_:3},16,["type","disabled"]))}}),Pa=Ra;function $e(a,l){const e=l-a+1;return Array.from({length:e},(p,u)=>u+a)}function Ua(a){return a.map(l=>typeof l=="number"?{type:"page",value:l}:{type:"ellipsis"})}const qe="ellipsis";function za(a,l,e,p){const n=l,f=Math.max(a-e,1),b=Math.min(a+e,n);if(p){const h=Math.min(2*e+5,l)-2,U=f>3&&Math.abs(n-h-1+1)>2&&Math.abs(f-1)>2,I=b<n-2&&Math.abs(n-h)>2&&Math.abs(n-b)>2;if(!U&&I)return[...$e(1,h),qe,n];if(U&&!I){const S=$e(n-h+1,n);return[1,qe,...S]}if(U&&I){const S=$e(f,b);return[1,qe,...S,qe,n]}return $e(1,n)}else{const i=e*2+1;return l<i?$e(1,n):a<=e+1?$e(1,i):l-a<=e?$e(l-i+1,n):$e(f,b)}}var ja=ke({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(a){const l=a;Le();const e=ze(),p=k(()=>Ua(za(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(u,n)=>(o(),q(x(Te),Dt(Gt(l)),{default:R(()=>[de(u.$slots,"default",{items:p.value})]),_:3},16))}}),Ma=ja,Ia=ke({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const l=a;Le();const e=ze(),p=k(()=>e.page.value===l.value),u=k(()=>e.disabled.value);return(n,f)=>(o(),q(x(Te),we(l,{"data-type":"page","aria-label":`Page ${n.value}`,"aria-current":p.value?"page":void 0,"data-selected":p.value?"true":void 0,disabled:u.value,type:n.as==="button"?"button":void 0,onClick:f[0]||(f[0]=b=>!u.value&&x(e).onPageChange(n.value))}),{default:R(()=>[de(n.$slots,"default",{},()=>[Q(X(n.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Da=Ia,Ga=ke({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const l=a;Le();const e=ze(),p=k(()=>e.page.value===e.pageCount.value||e.disabled.value);return(u,n)=>(o(),q(x(Te),we(l,{"aria-label":"Next Page",type:u.as==="button"?"button":void 0,disabled:p.value,onClick:n[0]||(n[0]=f=>!p.value&&x(e).onPageChange(x(e).page.value+1))}),{default:R(()=>[de(u.$slots,"default",{},()=>[n[1]||(n[1]=Q("Next page"))])]),_:3},16,["type","disabled"]))}}),Ka=Ga,qa=ke({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(a){const l=a;Le();const e=ze(),p=k(()=>e.page.value===1||e.disabled.value);return(u,n)=>(o(),q(x(Te),we(l,{"aria-label":"Previous Page",type:u.as==="button"?"button":void 0,disabled:p.value,onClick:n[0]||(n[0]=f=>!p.value&&x(e).onPageChange(x(e).page.value-1))}),{default:R(()=>[de(u.$slots,"default",{},()=>[n[1]||(n[1]=Q("Prev page"))])]),_:3},16,["type","disabled"]))}}),Oa=qa;const Wa=Object.assign(Object.assign({},da),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:$t.Vertical}),Lt=Ye`
  label: stacked-bar-component;
`,Ha=ga`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${Lt}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,Oe=Ye`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,at=Ye`
  label: barGroup;
`,Tt=Ye`
  label: barGroupExit;
`,Za=Object.freeze(Object.defineProperty({__proto__:null,bar:Oe,barGroup:at,barGroupExit:Tt,globalStyles:Ha,root:Lt},Symbol.toStringTag,{value:"Module"}));class st extends pa{constructor(l){super(),this._defaultConfig=Wa,this.config=this._defaultConfig,this.getAccessors=()=>va(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],l&&this.setConfig(l)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const l=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],e=this.dataScale.domain(),p=this._getBarWidth()/2,u=this._barData.map((S,y)=>je(S,this.config.x,y)),n=tt(u),f=ma(u),b=this.dataScale(n),i=this.dataScale(f),h=this.dataScale.invert(b+(l?p:-p)),U=this.dataScale.invert(i+(l?-p:p)),I=h<=e[0]?this.dataScale(e[0])-this.dataScale(h):0,L=U>e[1]?this.dataScale(U)-this.dataScale(e[1]):0;return{top:this.isVertical()?0:l?-L:I,bottom:this.isVertical()?0:l?-I:L,left:this.isVertical()?I:0,right:this.isVertical()?L:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===$t.Vertical}_render(l){const{config:e}=this,p=ct(l)?l:e.duration,u=this.getAccessors(),n=fa(this._barData,0,u,this._prevNegative);this._prevNegative=n.map(y=>!!y.isMostlyNegative);const f=this.g.selectAll(`.${at}`).data(this._barData,(y,_)=>{var $;return`${($=dt(y,e.id,_))!==null&&$!==void 0?$:_}`}),b=(y,_)=>{const $=this.dataScale(je(y,e.x,_)),d=this.isVertical()?$:0,E=this.isVertical()?0:$;return`translate(${d},${E})`},h=f.enter().append("g").attr("class",at).attr("transform",b).style("opacity",1).merge(f);Me(h,p).attr("transform",b).style("opacity",1);const U=f.exit().attr("class",Tt);Me(U,p).style("opacity",0).remove(),Me(U.selectAll(`.${Oe}`),p).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const I=h.selectAll(`.${Oe}`).data((y,_)=>n.map(($,d)=>Object.assign(Object.assign({},y),{_index:_,_stacked:$[_],_ending:d===n.length-1||d<=n.length-1&&n[d+1][_][0]!==$[_][1]}))),S=I.enter().append("path").attr("class",Oe).attr("d",(y,_)=>this._getBarPath(y,_,!0)).style("fill",(y,_)=>gt(y,e.color,_)).merge(I);Me(S,p).attr("d",(y,_)=>this._getBarPath(y,_)).style("fill",(y,_)=>gt(y,e.color,_)).style("cursor",(y,_)=>dt(y,e.cursor,_)),Me(I.exit(),p).style("opacity",0).remove()}_getBarWidth(){const{config:l,datamodel:{data:e}}=this;if(ba(e))return 0;if(l.barWidth)return tt([l.barWidth,l.barMaxWidth]);const p=this.dataScale.bandwidth,u=this.dataScale.domain?this.dataScale.domain():[];let f=1+(p?u.length:u[1]-u[0])/l.dataStep||!p&&e.filter((h,U)=>{const I=je(h,l.x,U);return I>=u[0]&&I<=u[1]}).length||e.length;!p&&f>=2&&(f+=1);const i=(f<2?1:1-l.barPadding)*(this.isVertical()?this._width:this._height)/f;return tt([i,l.barMaxWidth])}_getVisibleData(){const{config:l,datamodel:{data:e}}=this,p=this._getBarWidth(),u=e.length<2?0:p/2,n=this.dataScale,f=Math.abs(n.invert(u)-n.invert(0));return e?.filter((i,h)=>{const U=je(i,l.x,h),I=n.domain(),L=+I[0],S=+I[1];return U>=L-f&&U<=S+f})}_getBarPath(l,e,p=!1){const{config:u}=this,n=this.getAccessors(),f=this._getBarWidth(),b=l._stacked[1]<0,i=l._ending,h=je(l,n[e],l._index),U=p?0:Math.abs(this.valueScale(l._stacked[0])-this.valueScale(l._stacked[1])),I=!p&&u.barMinHeight1Px&&U<1&&isFinite(h)&&h!==u.barMinHeightZeroValue?1:U,L=p?this.valueScale(0):this.valueScale(b?l._stacked[0]:l._stacked[1])-(U<1&&u.barMinHeight1Px?1:0),S=-f/2,y=f,_=u.roundedCorners?ct(u.roundedCorners)?+u.roundedCorners:y/2:0,$=ka(_,0,Math.min(U,y)/2),d=this.yScale.range()[0]>this.yScale.range()[1];return ha({x:this.isVertical()?S:L-I,y:this.isVertical()?L+(d?0:-I):S,w:this.isVertical()?y:I,h:this.isVertical()?I:y,tl:i&&(this.isVertical()?!b&&d||b&&!d:b),tr:i&&(this.isVertical()?!b&&d||b&&!d:!b),br:i&&(this.isVertical()?b&&d||!b&&!d:!b),bl:i&&(this.isVertical()?b&&d||!b&&!d:b),r:$})}getValueScaleExtent(l){const{datamodel:e}=this,p=this.getAccessors(),u=l?this._getVisibleData():e.data;return ya(u,...p)}getDataScaleExtent(){const{config:l,datamodel:e}=this;return _a(e.data,l.x)}getYDataExtent(l){return this.isVertical()?this.getValueScaleExtent(l):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}st.selectors=Za;const Xa={"data-vis-component":""},Ya=ke({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(a,{expose:l}){const e=Kt(Sa),p=a,u=k(()=>e.data.value??p.data),n=xa(p),f=G();return We(()=>{qt(()=>{var b;f.value=new st(n.value),(b=f.value)==null||b.setData(u.value),e.update(f.value)})}),yt(()=>{var b;(b=f.value)==null||b.destroy(),e.destroy()}),le(n,(b,i)=>{var h;wa(b,i)||(h=f.value)==null||h.setConfig(n.value)}),le(u,()=>{var b;(b=f.value)==null||b.setData(u.value)}),l({component:f}),(b,i)=>(o(),N("div",Xa))}}),Ja={},Qa={class:"relative overflow-hidden rounded-(--ui-radius) border border-dashed border-(--ui-border-accented) opacity-75 px-4 flex items-center justify-center aspect-video"};function el(a,l){const e=ra;return o(),q(e,{variant:"subtle"},{default:R(()=>[v("div",Qa,[l[0]||(l[0]=v("svg",{class:"absolute inset-0 h-full w-full stroke-(--ui-border-inverted)/10",fill:"none"},[v("defs",null,[v("pattern",{id:"pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[v("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),v("rect",{stroke:"none",fill:"url(#pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e)",width:"100%",height:"100%"})],-1)),de(a.$slots,"default")])]),_:3})}const tl=Object.assign(ye(Ja,[["render",el]]),{__name:"ImagePlaceholder"}),al={class:"w-full relative overflow-visible"},ll={key:0,class:"group overflow-hidden"},sl=["src"],rl={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},ol={class:"flex"},nl={key:1,class:"overflow-hidden relative group"},il=["src"],ul={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},cl={class:"flex"},dl={class:"px-5 pb-3 mt-4"},gl={class:"text-2xl font-medium"},pl={class:"text-neutral-500"},vl={class:"my-1"},ml={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},fl={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},bl={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},hl={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},kl={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},yl={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},_l={class:"mt-3 text-lg"},Sl={class:"-mx-1 mt-4"},xl={key:0,class:"inline-flex m-1 h-fit align-bottom"},wl=["src"],Cl={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},Nl={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},$l={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},Ll={class:"text-lg font-semibold mb-2 flex"},Tl={key:0,class:"flex items-center space-x-2"},Al={size:"md",weight:"light"},Vl={size:"md",weight:"light"},vt=50,El={__name:"SpeciesInfo",props:{species:Object},setup(a){const l=G(0),e=a,p=k(()=>e.species.images||[]);le(p,()=>{l.value=0});const u=G(!1),n=G(!0),f=()=>{u.value=!u.value},b=k(()=>e.species.Kriteriedokumentation?u.value?e.species.Kriteriedokumentation:e.species.Kriteriedokumentation.slice(0,vt)+"...":""),i=k(()=>e.species.ekologi?n.value?e.species.ekologi:e.species.ekologi.slice(0,vt)+"...":""),h=$=>$?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():"",U=$=>$?$.replace("/detaljer","").replace("/artinformation",""):"",I=$=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[$]||"NE",L=$=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[$]||"bg-neutral-300",S=$=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[$]||"Ej bedömd",y=($,d)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[$==="0"&&d?d:$]||"default-icon.webp"}`,_=k(()=>e.species["Svamp-grupp"]==="0"&&e.species["Svamp-grupp-släkte"]?e.species["Svamp-grupp-släkte"]:e.species["Svamp-grupp"]);return($,d)=>{const E=zt,z=lt,Y=tl,O=Ue,ee=He,oe=Pe,fe=Ot;return o(),N("div",al,[p.value.length>1?(o(),N("div",ll,[c(E,{onSelect:d[0]||(d[0]=ne=>l.value=ne),items:p.value,ui:{item:"basis-full"}},{default:R(({item:ne})=>[(o(),N("div",{class:"w-full relative",key:ne},[v("img",{src:ne,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,sl)]))]),_:1},8,["items"]),v("div",rl,[v("div",ol,[c(z,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),d[1]||(d[1]=v("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),v("h1",null,X(l.value+1)+" av "+X(p.value.length),1)])])):p.value.length===1?(o(),N("div",nl,[v("img",{src:p.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,il),v("div",ul,[v("div",cl,[c(z,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),d[2]||(d[2]=v("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),v("h1",null,X(l.value+1)+" av "+X(p.value.length),1)])])):(o(),q(Y,{key:2,class:"rounded-none"})),v("div",dl,[v("h1",gl,X(h(a.species.Commonname)),1),v("h1",pl,X(a.species.Scientificname),1),v("div",vl,[a.species["Rank matsvamp"]===3?(o(),N("div",ml,[c(O,{name:"codicon:circle-large-filled",class:"size-3"}),d[3]||(d[3]=Q(" Sällsynt matsvamp ",-1))])):j("",!0),a.species["Rank matsvamp"]===2?(o(),N("div",fl,[c(O,{name:"codicon:color-mode",class:"size-3"}),d[4]||(d[4]=Q(" Ovanlig matsvamp ",-1))])):j("",!0),a.species["Rank giftsvamp"]===3?(o(),N("div",bl,[c(O,{name:"codicon:circle-large-filled",class:"size-3"}),d[5]||(d[5]=Q(" Sällsynt giftsvamp ",-1))])):j("",!0),a.species["Rank giftsvamp"]===2?(o(),N("div",hl,[c(O,{name:"codicon:color-mode",class:"size-3"}),d[6]||(d[6]=Q(" Ovanlig giftsvamp ",-1))])):j("",!0),a.species.RankRed===3?(o(),N("div",kl,[c(O,{name:"codicon:circle-large-filled",class:"size-3"}),d[7]||(d[7]=Q(" Sällsynt naturvårdsart ",-1))])):j("",!0),a.species.RankRed===2?(o(),N("div",yl,[c(O,{name:"codicon:color-mode",class:"size-3"}),d[8]||(d[8]=Q(" Ovanlig naturvårdsart ",-1))])):j("",!0)]),v("h1",_l,X(i.value),1),v("div",Sl,[a.species["Svamp-grupp"]?(o(),N("div",xl,[c(ee,{color:"neutral",variant:"subtle",size:"xl"},{default:R(()=>[v("img",{src:y(a.species["Svamp-grupp"],a.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,wl),Q(" "+X(h(_.value)),1)]),_:1})])):j("",!0),a.species["Nyasvamp-boken"]==="x"?(o(),N("div",Cl,[c(ee,{color:"warning",size:"xl",variant:"subtle",class:""},{default:R(()=>[c(z,{name:"icon-park-solid:knife-fork"}),d[9]||(d[9]=Q("Matsvamp ",-1))]),_:1})])):j("",!0),a.species.Giftsvamp==="x"?(o(),N("div",Nl,[c(ee,{color:"poison",size:"xl",variant:"subtle",class:""},{default:R(()=>[c(z,{name:"hugeicons:danger"}),d[10]||(d[10]=Q("Giftsvamp ",-1))]),_:1})])):j("",!0),a.species.SIGNAL_art==="S"?(o(),N("div",$l,[c(ee,{color:"signal",size:"xl",variant:"subtle",class:""},{default:R(()=>[...d[11]||(d[11]=[Q("Signalart",-1)])]),_:1})])):j("",!0),a.species.KALKmark?(o(),q(ee,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:R(()=>[...d[12]||(d[12]=[Q(" Kalkmark ",-1)])]),_:1})):j("",!0),a.species.ANNANmark?(o(),q(ee,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:R(()=>[...d[13]||(d[13]=[Q(" Vanlig skogsmark ",-1)])]),_:1})):j("",!0)]),a.species.Kriteriedokumentation?(o(),q(oe,{key:0,class:"my-4"},{default:R(()=>[v("div",{class:"flex justify-between cursor-pointer",onClick:f},[v("h1",Ll,[a.species.RL2020kat?(o(),N("div",Tl,[v("div",{class:re([L(a.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},X(I(a.species.RL2020kat)),3),v("h1",Al,X(S(a.species.RL2020kat)),1)])):j("",!0)]),c(z,{name:"mdi:chevron-down",class:re(["h-6 w-6 transition-transform duration-300 ease-in-out",u.value?"rotate-180":"rotate-0"])},null,8,["class"])]),a.species.Kriteriedokumentation?(o(),N("div",{key:0,class:re(["relative overflow-hidden transition-transform duration-300 ease-in-out",[u.value?"max-h-auto":"max-h-20"]]),onClick:f},[v("h1",Vl,X(b.value),1)],2)):j("",!0)]),_:1})):j("",!0),d[16]||(d[16]=v("h1",{class:"text-lg font-medium mt-4"},"Läs mer på",-1)),a.species.Artfakta!="Information saknas"?(o(),q(fe,{key:1,to:U(a.species.Artfakta),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:R(()=>[...d[14]||(d[14]=[Q(" Artfakta.se ",-1)])]),_:1},8,["to"])):j("",!0),d[17]||(d[17]=v("br",null,null,-1)),a.species.Svampguiden&&a.species.Svampguiden!=="0"?(o(),q(fe,{key:2,to:U(a.species.Svampguiden),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:R(()=>[...d[15]||(d[15]=[Q(" Svampguiden.com ",-1)])]),_:1},8,["to"])):j("",!0)])])}}},Fl={key:0,class:"fixed inset-0 z-50 flex pointer-events-none group"},Bl={class:"absolute top-3 left-3 items-end w-full gap-2 z-10 flex"},Rl={class:"h-full relative overflow-auto pb-16 no-scrollbar"},Pl={__name:"MySlideover",props:{modelValue:{type:Boolean,default:!1},pinned:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:modelValue","update:pinned"],setup(a,{emit:l}){const e=a,p=l,u=G(e.pinned);le(()=>e.pinned,f=>{u.value=f});function n(){u.value=!u.value,p("update:pinned",u.value)}return(f,b)=>{const i=pe;return o(),q(Ve,{name:"slide-in-right"},{default:R(()=>[a.modelValue?(o(),N("div",Fl,[u.value?j("",!0):(o(),N("div",{key:0,class:"fixed inset-0 pointer-events-auto",onClick:b[0]||(b[0]=h=>p("update:modelValue",!1))})),v("div",{ref:"panelRef",class:re(["ml-auto bg-white shadow-lg z-50 relative pointer-events-auto ring-1 ring-neutral-200 transition-all overflow-hidden",[u.value?"":"sm:ml-auto sm:m-2 sm:rounded",a.expanded?"w-[744px]":"w-screen sm:w-96"]]),onClick:b[2]||(b[2]=Wt(()=>{},["stop"]))},[v("div",Bl,[c(i,{class:"shadow hover:bg-white rounded-full mt-2 ml-1 md:m-0",color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},icon:"heroicons:x-mark",size:"lg",onClick:b[1]||(b[1]=h=>p("update:modelValue",!1))}),c(i,{class:re(["shadow hover:bg-white hidden md:flex rounded-full",u.value?"text-primary-500":"text-neutral-700"]),color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},onClick:n,icon:"codicon:pinned",size:"lg"},null,8,["class"])]),v("div",Rl,[de(f.$slots,"default",{},void 0,!0)])],2)])):j("",!0)]),_:3})}}},Ul=ye(Pl,[["__scopeId","data-v-fb1058c4"]]),zl={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},At={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(a,{emit:l}){const e=a,p=l,u=Ht(),{dir:n}=Zt(),f=Xt(),b=Yt(Jt(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),p),i=k(()=>e.firstIcon||(n.value==="rtl"?f.ui.icons.chevronDoubleRight:f.ui.icons.chevronDoubleLeft)),h=k(()=>e.prevIcon||(n.value==="rtl"?f.ui.icons.chevronRight:f.ui.icons.chevronLeft)),U=k(()=>e.nextIcon||(n.value==="rtl"?f.ui.icons.chevronLeft:f.ui.icons.chevronRight)),I=k(()=>e.lastIcon||(n.value==="rtl"?f.ui.icons.chevronDoubleLeft:f.ui.icons.chevronDoubleRight)),L=k(()=>ut({extend:ut(zl),...f.ui?.pagination||{}})());return(S,y)=>(o(),q(x(Ea),we(x(b),{class:L.value.root({class:[e.ui?.root,e.class]})}),{default:R(({page:_,pageCount:$})=>[c(x(Ma),{class:re(L.value.list({class:e.ui?.list}))},{default:R(({items:d})=>[a.showControls||u.first?(o(),q(x(Ba),{key:0,"as-child":"",class:re(L.value.first({class:e.ui?.first}))},{default:R(()=>[de(S.$slots,"first",{},()=>[c(pe,{color:a.color,variant:a.variant,size:a.size,icon:i.value,to:a.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):j("",!0),a.showControls||u.prev?(o(),q(x(Oa),{key:1,"as-child":"",class:re(L.value.prev({class:e.ui?.prev}))},{default:R(()=>[de(S.$slots,"prev",{},()=>[c(pe,{color:a.color,variant:a.variant,size:a.size,icon:h.value,to:_>1?a.to?.(_-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):j("",!0),(o(!0),N(me,null,Se(d,(E,z)=>(o(),N(me,null,[E.type==="page"?(o(),q(x(Da),{key:z,"as-child":"",value:E.value,class:re(L.value.item({class:e.ui?.item}))},{default:R(()=>[de(S.$slots,"item",we({ref_for:!0},{item:E,index:z,page:_,pageCount:$}),()=>[c(pe,{color:_===E.value?a.activeColor:a.color,variant:_===E.value?a.activeVariant:a.variant,size:a.size,label:String(E.value),ui:{label:L.value.label()},to:a.to?.(E.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(o(),q(x(Ta),{key:E.type,index:z,"as-child":"",class:re(L.value.ellipsis({class:e.ui?.ellipsis}))},{default:R(()=>[de(S.$slots,"ellipsis",{},()=>[c(pe,{color:a.color,variant:a.variant,size:a.size,icon:a.ellipsisIcon||x(f).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["index","class"]))],64))),256)),a.showControls||u.next?(o(),q(x(Ka),{key:2,"as-child":"",class:re(L.value.next({class:e.ui?.next}))},{default:R(()=>[de(S.$slots,"next",{},()=>[c(pe,{color:a.color,variant:a.variant,size:a.size,icon:U.value,to:_<$?a.to?.(_+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):j("",!0),a.showControls||u.last?(o(),q(x(Pa),{key:3,"as-child":"",class:re(L.value.last({class:e.ui?.last}))},{default:R(()=>[de(S.$slots,"last",{},()=>[c(pe,{color:a.color,variant:a.variant,size:a.size,icon:I.value,to:a.to?.($)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):j("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},jl=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function Je(a,l,e,p){return!a||!l||!e||!p?!1:jl.some(u=>u.geo===a&&u.forest===l&&u.age===e&&u.veg===p)}const Ml={class:""},Il={class:""},Dl={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},Gl={class:"flex gap-2 items-end justify-between w-full mb-2"},Kl={class:"flex gap-2"},ql={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Ol={key:1,class:"hidden md:flex"},Wl={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Hl={key:0,class:"flex gap-2 w-full mb-2"},Zl={class:""},Xl={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},Yl={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},Jl={class:"flex"},Ql={class:"hidden md:flex"},es={key:0},ts={class:"flex justify-center"},as={key:2},ls={class:"max-w-sm space-y-2 mt-2"},ss={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(a,{emit:l}){const e=Ee("(max-width: 767px)"),p=k(()=>e.value||i.isNormalView&&i.dataTypeFolder!=="edna"),u=l,n=G("");let f=null;function b(t){n.value=t,f&&clearTimeout(f),f=setTimeout(()=>{u("update:searchTerm",n.value)},300)}_t(()=>{f&&clearTimeout(f)});const i=a,h=Qt("table"),U=p.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[i.grupp]:!1,mark:!1,[i.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[i.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};i.dataType==="edna"&&(U.mark=!1);const I=G({...U,...i.columnVisibilityOverrides}),L=G([]),S=k(()=>{const t={};Re.value.forEach(V=>{V.KALKmark&&(t.KALKmark=(t.KALKmark||0)+1),V.ANNANmark&&(t.ANNANmark=(t.ANNANmark||0)+1)});const r=h.value?.tableApi?.getFilteredRowModel()?.rows||[],w={};return r.forEach(V=>{const M=V.original;M.KALKmark&&(w.KALKmark=(w.KALKmark||0)+1),M.ANNANmark&&(w.ANNANmark=(w.ANNANmark||0)+1)}),[{label:`Kalkmark (${w.KALKmark||0}/${t.KALKmark||0})`,value:"KALKmark"},{label:`Vanlig skogsmark (${w.ANNANmark||0}/${t.ANNANmark||0})`,value:"ANNANmark"}]}),y=k(()=>S.value.map(t=>({label:t.label,type:"checkbox",checked:L.value.includes(t.value),onUpdateChecked(r){r?L.value.includes(t.value)||L.value.push(t.value):L.value=L.value.filter(w=>w!==t.value)},onSelect(r){r.preventDefault()}}))),_=k(()=>{const t=["Matsvamp","Giftsvamp"],r={};Re.value.forEach(M=>{const W=M[i.mat];i.mat==="Nyasvamp-boken"?W&&String(W).toLowerCase()==="x"&&(r.Matsvamp=(r.Matsvamp||0)+1):W==1&&(r.Matsvamp=(r.Matsvamp||0)+1),(M.Giftsvamp||"").toLowerCase()==="x"&&(r.Giftsvamp=(r.Giftsvamp||0)+1)});const w=h.value?.tableApi?.getFilteredRowModel()?.rows||[],V={};return w.forEach(M=>{const W=M.original,te=W[i.mat];(i.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te==1)&&(V.Matsvamp=(V.Matsvamp||0)+1),(W.Giftsvamp||"").toLowerCase()==="x"&&(V.Giftsvamp=(V.Giftsvamp||0)+1)}),t.map(M=>{const W=r[M]||0,te=V[M]||0;return{label:`${M} (${te}/${W})`,value:M}})}),$=G(i.isNormalView?500:10),d=G([]),E=G([]),z=G([]),Y=k(()=>ne.value.map(t=>({label:t.label,type:"checkbox",checked:z.value.includes(t.value),onUpdateChecked(r){r?z.value.includes(t.value)||z.value.push(t.value):z.value=z.value.filter(w=>w!==t.value)},onSelect(r){r.preventDefault()}}))),O=k(()=>_.value.map(t=>({label:t.label,type:"checkbox",checked:d.value.includes(t.value),onUpdateChecked(r){r?d.value.includes(t.value)||d.value.push(t.value):d.value=d.value.filter(w=>w!==t.value)},onSelect(r){r.preventDefault()}}))),ee=k(()=>F.value.map(t=>({label:t.label,type:"checkbox",checked:E.value.includes(t.value),onUpdateChecked(r){r?E.value.includes(t.value)||E.value.push(t.value):E.value=E.value.filter(w=>w!==t.value)},onSelect(r){r.preventDefault()}}))),oe=k(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(t){t.preventDefault(),h.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(t){t.preventDefault(),h.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(t){t.preventDefault(),h.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(t){t.preventDefault(),h.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:i.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(t){t.preventDefault(),h.value?.tableApi?.setSorting([{id:i.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(t){t.preventDefault(),h.value?.tableApi?.setSorting([{id:i.obs,desc:!0}])}}]}]),fe=k(()=>[{label:"Grupp",children:Y.value},{label:"Matsvamp",children:O.value},{label:"Status",children:ee.value},{label:"Mark",children:y.value}]),ne=k(()=>{const t={};Re.value.forEach(V=>{const M=V[i.grupp];M&&(t[M]=(t[M]||0)+1)});const r=h.value?.tableApi?.getFilteredRowModel()?.rows||[],w={};return r.forEach(V=>{const W=V.original[i.grupp];W&&(w[W]=(w[W]||0)+1)}),Object.keys(t).map(V=>{const M=t[V]||0,W=w[V]||0;return{label:`${D(V)} (${W}/${M})`,value:V}})}),F=k(()=>{const t=["LC","NT","EN","VU","CR","RE","DD"],r={};Re.value.forEach(M=>{const W=M.RL2020kat;t.includes(W)?r[W]=(r[W]||0)+1:W===null||W==="0"||W===0||String(W).toUpperCase()==="NE"?r["Ej bedömd"]=(r["Ej bedömd"]||0)+1:String(W).toUpperCase()==="NA"&&(r["Ej tillämplig"]=(r["Ej tillämplig"]||0)+1),M.SIGNAL_art==="S"&&(r.Signalart=(r.Signalart||0)+1)});const w=h.value?.tableApi?.getFilteredRowModel()?.rows||[],V={};return w.forEach(M=>{const W=M.original,te=W.RL2020kat;t.includes(te)?V[te]=(V[te]||0)+1:te===null||te==="0"||te===0||String(te).toUpperCase()==="NE"?V["Ej bedömd"]=(V["Ej bedömd"]||0)+1:String(te).toUpperCase()==="NA"&&(V["Ej tillämplig"]=(V["Ej tillämplig"]||0)+1),W.SIGNAL_art==="S"&&(V.Signalart=(V.Signalart||0)+1)}),[...t.map(M=>{const W=r[M]||0,te=V[M]||0;return{label:`${K(M)} (${te}/${W})`,value:M}}),(()=>{const M=r["Ej bedömd"]||0;return{label:`Ej bedömd (${V["Ej bedömd"]||0}/${M})`,value:"Ej bedömd"}})(),(()=>{const M=r["Ej tillämplig"]||0;return{label:`Ej tillämplig (${V["Ej tillämplig"]||0}/${M})`,value:"Ej tillämplig"}})(),(()=>{const M=r.Signalart||0;return{label:`Signalart (${V.Signalart||0}/${M})`,value:"Signalart"}})()]}),g=G({pageIndex:0,pageSize:10}),s=Ze();function m(t,r){s.selectSpecies(t.original,"edna")}const D=t=>t?t.charAt(0).toUpperCase()+t.slice(1).toLowerCase():"",B=k(()=>Ne.value.length>0?Ne.value[0].sample_env_count:0),T=t=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[t]||"default-icon.webp"}`,A=t=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[t]||"neutral",K=t=>{const r={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return t===null||t===0||String(t).toUpperCase()==="NE"?"Ej bedömd":String(t).toUpperCase()==="NA"?"Ej tillämplig":r[t]||"Ej bedömd"},J=i.obs.startsWith("Rank"),Z=G(J?[{id:i.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:i.obs,desc:!0}]),P=He,ge=ea,ae=pe,se=na,be=lt,he=[{accessorKey:"images",header:"Bild",sortable:!1,cell:({row:t})=>{const r=t.getValue("images")||[];return r.length?H("img",{src:r[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:t.original?.Commonname?`${t.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:t})=>{const r=t.getIsSorted();return H(ae,{color:"neutral",variant:"ghost",label:"Namn",icon:r?r==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>t.toggleSorting(r==="asc")})},cell:({row:t})=>H("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},D(t.getValue("Commonname"))),filterFn:(t,r,w)=>{if(!w)return!0;const V=String(w).toLowerCase(),M=String(t.getValue("Commonname")||"").toLowerCase(),W=String(t.getValue("Scientificname")||"").toLowerCase();return M.includes(V)||W.includes(V)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:t})=>{const r=t.getIsSorted();return H(ae,{color:"neutral",variant:"ghost",label:"Latinskt namn",icon:r?r==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>t.toggleSorting(r==="asc")})},cell:({row:t})=>H("div",{class:"truncate  text-[16px]"},t.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:i.grupp,header:()=>H(se,{items:Y.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(ae,{label:"Grupp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(t,r,w)=>!w||w.length===0?!0:w.includes(t.getValue(r)),cell:({row:t})=>{const r=t.getValue(i.grupp);return r!=="Saknas"?H("img",{src:T(r),alt:`${r||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):H(be,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:i.dataType!=="edna",header:()=>H(se,{items:y.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(ae,{label:"Mark",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(t,r,w)=>{if(!w||w.length===0)return!0;let V=!1;return w.includes("KALKmark")&&t.original.KALKmark&&(V=!0),w.includes("ANNANmark")&&t.original.ANNANmark&&(V=!0),V},cell:({row:t})=>H("div",{class:"flex items-center space-x-1"},[t.original.KALKmark&&H(P,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),t.original.ANNANmark&&H(P,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:i.mat,header:()=>H(se,{items:O.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(ae,{label:"Matsvamp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(t,r,w)=>{if(!w||w.length===0)return!0;let V=!1;return w.includes("Matsvamp")&&(i.mat==="Nyasvamp-boken"?V=V||t.getValue(r)?.toLowerCase()==="x":V=V||t.getValue(r)===1),w.includes("Giftsvamp")&&(V=V||(t.original.Giftsvamp||"").toLowerCase()==="x"),V},cell:({row:t})=>H("div",{class:"flex gap-1"},[(i.mat==="Nyasvamp-boken"?t.getValue(i.mat)?.toLowerCase()==="x":t.getValue(i.mat)===1)&&H(P,{color:"warning",variant:"subtle"},()=>"Matsvamp"),t.original.Giftsvamp?.toLowerCase()==="x"&&H(P,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>H(se,{items:ee.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(ae,{label:"Status",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(t,r,w)=>{if(!w||w.length===0)return!0;const V=t.getValue(r);return w.some(M=>M==="Ej bedömd"?V===null||V===0||V==="0"||String(V).toUpperCase()==="NE":M==="Ej tillämplig"?String(V).toUpperCase()==="NA":M==="Signalart"?t.original.SIGNAL_art==="S":M===V)},cell:({row:t})=>{const r=t.getValue("RL2020kat"),w=H(P,{color:A(r),variant:"subtle"},()=>K(r)),V=t.original.SIGNAL_art==="S"?H(P,{color:"signal",variant:"subtle"},"Signalart"):null;return H("div",{class:"flex gap-1"},[w,V].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:i.obs,header:({column:t})=>{const r=t.getIsSorted();return H(ae,{color:"neutral",variant:"ghost",label:i.obsLabel,icon:r?r==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>t.toggleSorting(r==="asc")})},cell:({row:t})=>{const r=t.getValue(i.obs);return i.obs.startsWith("Rank")?r===3?H("span",{class:"text-red-700"},"Sällsynt"):r===2?H("span",{class:"text-yellow-600"},"Ovanlig"):null:H(P,{variant:"subtle",color:"secondary"},()=>`${r} skogar`)},meta:{headerText:i.obsLabel}}],_e=[{header:"Namn",cell:({row:t})=>{const r=t.original.images||[];let w=null;const V=i.filterPoison?t.original["Rank giftsvamp"]:i.filterEdible?t.original["Rank matsvamp"]:t.original.RankRed;V===3?w=H(be,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):V===2&&(w=H(be,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const M=r.length?H("img",{src:r[0],alt:t.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):H("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[H("img",{src:T(t.original[i.grupp]),alt:`${t.original[i.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),W=H("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[H("div",{class:"flex-1 min-w-0"},[H("div",{class:"text-lg font-semibold whitespace-normal break-words"},[D(t.original.Commonname),w]),H("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},t.original.Scientificname)])]),te=t.original[i.mat];(i.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te===1)&&H(P,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const C=H("div",{class:"flex flex-wrap gap-2 mt-2 "},[t.original.RL2020kat!=="LC"&&t.original.RL2020kat!=="NA"&&t.original.RL2020kat!=="NE"&&t.original.RL2020kat!=="0"?H(P,{color:A(t.original.RL2020kat),variant:"subtle",size:"md"},()=>K(t.original.RL2020kat)):null,t.original.SIGNAL_art==="S"?H(P,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,i.dataType==="edna"?H(ge,{modelValue:t.getValue(i.obs),max:B.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return H("div",{class:"flex space-x-4 items-start"},[M,H("div",{class:"flex flex-col flex-1"},[W,C])])},meta:{headerText:"Namn"}},...he.map(t=>t.accessorKey==="mark"?{...t,enableHiding:i.dataType!=="edna"}:t)],xe=k(()=>p.value?_e:he),Fe=k(()=>({thead:p.value?"hidden":"hidden md:table-header-group bg-neutral-50 dark:bg-neutral-800/40",tbody:p.value?"divide-none":"divide-none md:divide-dotted",td:p.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),Be=G(0),Ie=G(0),Ne=G([]),Ae=G(!0),ot=G([]),Vt=(t,r,w)=>{const V=(r[0]-t[0])/(w-1),M=(r[1]-t[1])/(w-1),W=(r[2]-t[2])/(w-1),te=[];for(let ie=0;ie<w;ie++){const C=Math.round(t[0]+V*ie),ve=Math.round(t[1]+M*ie),ue=Math.round(t[2]+W*ie);te.push(`rgb(${C}, ${ve}, ${ue})`)}return te},De=()=>{Ne.value=[],Be.value=0,Ie.value=0,ot.value=[]},Et=async()=>{if([ce.geography,ce.forestType,ce.standAge,ce.vegetationType].some(w=>!w)){De(),Ae.value=!1;return}if(i.dataTypeFolder==="edna"&&!Je(ce.geography,ce.forestType,ce.standAge,ce.vegetationType)){De(),Ae.value=!1;return}const r=`${i.dataType}-${ce.geography}-${ce.forestType}-${ce.standAge}-${ce.vegetationType}.json`;try{const w=await fetch(`/${i.dataTypeFolder}/${r}`);if(!w.ok){if(w.status===404){De(),Ae.value=!1;return}throw new Error(`Failed to fetch data from ${r}`)}Ne.value=await w.json(),Ae.value=!1,Ne.value.forEach((te,ie)=>{te.colorIndex=ie});const V=Ne.value.length;Be.value=Math.floor(V*.1),Ie.value=V-Be.value;const M=Vt([82,82,82],[212,212,212],Be.value),W=Ft(Ie.value);ot.value=[...M,...W]}catch(w){console.error("Error fetching data:",w),De(),Ae.value=!1}};function Ft(t){const r=[];for(let M=0;M<t;M++){const W=45+300/(t-1||1)*M;r.push(`hsl(${W%360}, 70%, 50%)`)}return r}const ce=Ce();le(()=>[ce.geography,ce.forestType,ce.standAge,ce.vegetationType],()=>{Ae.value=!0,Et()},{immediate:!0});const nt=G(""),Re=k(()=>{let t=Ne.value;return nt.value&&(t=t.filter(r=>Object.values(r).some(w=>String(w).toLowerCase().includes(nt.value.toLowerCase())))),i.filterEdible?t=t.filter(r=>{const w=r[i.mat];return w&&String(w).toLowerCase()==="x"}):i.filterPoison&&(t=t.filter(r=>{const w=r[i.mat];return!(w&&String(w).toLowerCase()==="x")})),t}),Bt=k(()=>Re.value);le($,t=>{let r=t==="Alla"?Ke.value||Ne.value.length:Number(t);g.value.pageSize=r,g.value.pageIndex=0,h.value?.tableApi&&(h.value.tableApi.setPageSize(r),h.value.tableApi.setPageIndex(0))});const Rt=k(()=>h.value?.tableApi?.getPaginationRowModel().rows||[]),Ge=k(()=>h.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),Pt=k(()=>Ge.value.pageIndex*Ge.value.pageSize+1),Ut=k(()=>{const t=Ge.value.pageIndex*Ge.value.pageSize+Rt.value.length;return t>Ke.value?Ke.value:t}),Ke=k(()=>h.value?.tableApi?.getFilteredRowModel()?.rows.length||0),it=k(()=>{const t=i.searchTerm?[{id:"Commonname",value:i.searchTerm}]:[];return d.value&&d.value.length>0&&t.push({id:i.mat,value:d.value}),E.value&&E.value.length>0&&t.push({id:"RL2020kat",value:E.value}),z.value&&z.value.length>0&&t.push({id:i.grupp,value:z.value}),L.value&&L.value.length>0&&t.push({id:"mark",value:L.value}),t});return le(it,t=>{h.value?.tableApi&&h.value.tableApi.setColumnFilters(t)}),le(it,t=>{const w=t.find(ie=>ie.id===i.mat)?.value??[];u("update:matsvampFilter",w.includes("Matsvamp")),u("update:giftsvampFilter",w.includes("Giftsvamp"));const M=t.find(ie=>ie.id===i.grupp)?.value??[];u("update:gruppFilter",M);const te=t.find(ie=>ie.id==="RL2020kat")?.value??[];u("update:statusFilter",te)},{deep:!0,immediate:!0}),(t,r)=>{const w=Nt,V=kt,M=St,W=ua,te=At,ie=Ct;return o(),N("div",Ml,[v("div",Il,[p.value?j("",!0):(o(),N("div",Dl,[v("div",Gl,[c(w,{"model-value":x(h)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":r[0]||(r[0]=C=>{x(h)?.tableApi?.getColumn("Commonname")?.setFilterValue(C),b(C)}),variant:"ghost"},null,8,["model-value"]),v("div",Kl,[v("div",ql,[L.value.length?(o(!0),N(me,{key:0},Se(L.value,C=>(o(),N("span",{key:"mark-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:C==="KALKmark"?"kalkmark":C==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>L.value=L.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(C==="KALKmark"?"Kalkmark":C==="ANNANmark"?"Vanlig skogsmark":D(C)),1)]),_:2},1032,["color","onClick"])]))),128)):j("",!0),d.value.length?(o(!0),N(me,{key:1},Se(d.value,C=>(o(),N("span",{key:"svamp-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:C==="Matsvamp"?"warning":C==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>d.value=d.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(D(C)),1)]),_:2},1032,["color","onClick"])]))),128)):j("",!0),z.value.length?(o(!0),N(me,{key:2},Se(z.value,C=>(o(),N("span",{key:"grupp-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>z.value=z.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(D(C)),1)]),_:2},1032,["onClick"])]))),128)):j("",!0),E.value.length?(o(!0),N(me,{key:3},Se(E.value,C=>(o(),N("span",{key:"status-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:C==="Signalart"?"signal":A(C),class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>E.value=E.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(C==="Signalart"?"Signalart":K(C)),1)]),_:2},1032,["color","onClick"])]))),128)):j("",!0)]),p.value?j("",!0):(o(),q(x(se),{key:0,class:"flex",items:x(h)?.tableApi?.getAllColumns()?.filter(C=>C.getCanHide())?.map(C=>({label:C.columnDef.meta?.headerText||x(ta)(C.id),type:"checkbox",checked:C.getIsVisible(),onUpdateChecked(ve){x(h)?.tableApi?.getColumn(C.id)?.toggleVisibility(!!ve)},onSelect(ve){ve?.preventDefault()}})),content:{align:"end"}},{default:R(()=>[c(x(ae),{label:"Kolumner",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),a.isNormalView?j("",!0):(o(),N("div",Ol,[c(V,{modelValue:$.value,"onUpdate:modelValue":r[1]||(r[1]=C=>$.value=C),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"ghost"},null,8,["modelValue"])]))])])])),p.value?(o(),N("div",Wl,[L.value.length?(o(!0),N(me,{key:0},Se(L.value,C=>(o(),N("span",{key:"mark-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:C==="KALKmark"?"kalkmark":C==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>L.value=L.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(C==="KALKmark"?"Kalkmark":C==="ANNANmark"?"Vanlig skogsmark":D(C)),1)]),_:2},1032,["color","onClick"])]))),128)):j("",!0),d.value.length?(o(!0),N(me,{key:1},Se(d.value,C=>(o(),N("span",{key:"svamp-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:C==="Matsvamp"?"warning":C==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>d.value=d.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(D(C)),1)]),_:2},1032,["color","onClick"])]))),128)):j("",!0),z.value.length?(o(!0),N(me,{key:2},Se(z.value,C=>(o(),N("span",{key:"grupp-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>z.value=z.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(D(C)),1)]),_:2},1032,["onClick"])]))),128)):j("",!0),E.value.length?(o(!0),N(me,{key:3},Se(E.value,C=>(o(),N("span",{key:"status-"+C},[c(x(P),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:C==="Signalart"?"signal":A(C),class:"cursor-pointer mb-2 md:mb-0",onClick:ve=>E.value=E.value.filter(ue=>ue!==C)},{default:R(()=>[Q(X(C==="Signalart"?"Signalart":K(C)),1)]),_:2},1032,["color","onClick"])]))),128)):j("",!0)])):j("",!0)]),p.value?(o(),N("div",Hl,[c(x(se),{size:x(e)?"xl":"md",items:oe.value,content:{align:"start"}},{default:R(()=>[c(x(ae),{variant:x(e)?"soft":"ghost",icon:"i-lucide-arrow-up-down",size:x(e)?"xl":"md",label:(x(e),null),color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),c(x(se),{size:x(e)?"xl":"md",items:fe.value,content:{align:"start"}},{default:R(()=>[c(x(ae),{variant:x(e)?"soft":"ghost",icon:"i-lucide-list-filter",size:x(e)?"xl":"md",label:(x(e),null),color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),c(w,{variant:x(e)?"soft":"ghost","model-value":x(h)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:x(e)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":r[2]||(r[2]=C=>{x(h)?.tableApi?.getColumn("Commonname")?.setFilterValue(C),b(C)})},null,8,["variant","model-value","size"])])):j("",!0),c(M,{ui:{border:"border-muted/50"},class:"mb-2"}),Re.value?(o(),N("div",{key:1,class:re([(a.isNormalView,"")])},[v("div",Zl,[c(W,{ref_key:"table",ref:h,"column-visibility":I.value,"onUpdate:columnVisibility":r[3]||(r[3]=C=>I.value=C),pagination:g.value,"onUpdate:pagination":r[4]||(r[4]=C=>g.value=C),data:Bt.value,columns:xe.value,sticky:"",loading:Ae.value,sorting:Z.value,"onUpdate:sorting":r[5]||(r[5]=C=>Z.value=C),onSelect:m,autoResetAll:!0,"pagination-options":x(e)&&!a.isNormalView?!1:a.isNormalView?void 0:{getPaginationRowModel:x(ia)()},class:re([{"":a.isNormalView},"rounded-sm"]),ui:Fe.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),p.value?j("",!0):(o(),N("div",Xl,[v("div",Yl,[v("h1",Jl,[r[8]||(r[8]=Q(" Visar ",-1)),v("span",Ql,"  "+X(Pt.value)+" till  ",1),Q(" "+X(Ut.value)+" av "+X(Ke.value)+" arter ",1)]),a.isNormalView?(o(),q(x(ae),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:r[6]||(r[6]=C=>u("enlarge"))})):j("",!0)]),v("div",null,[!a.isNormalView&&$.value!=="Alla"&&!x(e)?(o(),N("div",es,[v("div",ts,[c(te,{"active-variant":"ghost",variant:"ghost","default-page":(x(h)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":x(h)?.tableApi?.getState().pagination.pageSize,total:x(h)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":r[7]||(r[7]=C=>x(h)?.tableApi?.setPageIndex(C-1))},null,8,["default-page","items-per-page","total"])])])):j("",!0)])]))])],2)):(o(),N("div",as,[v("div",ls,[c(ie,{class:"h-4 w-full rounded"}),c(ie,{class:"h-4 w-[85%] rounded"})])]))])}}},Qe=ye(ss,[["__scopeId","data-v-740b2533"]]),rs={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},os=ke({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(a){const l=a,e=["100%","200%","400%","800%"],p=G(0),u=k(()=>e[p.value]),n=G([]),f=Ce();function b(g){return g.sort((s,m)=>m.sample_plot_count-s.sample_plot_count)}function i(g,s,m){if(m<=0)return[];const D=(s[0]-g[0])/(m-1||1),B=(s[1]-g[1])/(m-1||1),T=(s[2]-g[2])/(m-1||1),A=[];for(let K=0;K<m;K++){const J=Math.round(g[0]+D*K),Z=Math.round(g[1]+B*K),P=Math.round(g[2]+T*K);A.push(`rgb(${J}, ${Z}, ${P})`)}return A}function h(g){const s=[];for(let B=0;B<g;B++){const T=45+300/(g-1||1)*B;s.push(`hsl(${T%360}, 70%, 50%)`)}return s}async function U(){const g=[f.geography,f.forestType,f.standAge,f.vegetationType];if(g.some(m=>!m)){n.value=[];return}if(!Je(...g)){n.value=[];return}const s=`edna-${f.geography}-${f.forestType}-${f.standAge}-${f.vegetationType}.json`;try{const m=await fetch(`/edna/${s}`);if(!m.ok){if(m.status===404){n.value=[];return}throw new Error(`Failed to fetch ${s}`)}let D=await m.json();D=b(D);const B=D.length,T=Math.floor(B*.1),A=B-T,K=i([82,82,82],[212,212,212],T),J=h(A),Z=[...K,...J];n.value=D.map((P,ge)=>({...P,fillColor:Z[ge]||"var(--ui-primary)"}))}catch(m){console.error("Error fetching chart data:",m),n.value=[]}}We(U),le(()=>[f.geography,f.forestType,f.standAge,f.vegetationType],U,{immediate:!0});const I=(g,s)=>s,L=g=>g.sample_plot_count,S=(g,s)=>{const m=E.value[s];if(!m)return"";const D=l.searchTerm.trim().toLowerCase(),B=String(m.Commonname||"").toLowerCase(),T=String(m.Scientificname||"").toLowerCase(),A=D?B.includes(D)||T.includes(D):!0,K=l.statusFilter.length>0,J=l.matsvampFilter||l.giftsvampFilter,Z=l.gruppFilter.length>0;if(!K&&!J&&!Z&&l.searchTerm.trim()!=="")return A?y(m.Commonname):"";const P=K&&l.statusFilter.includes("Signalart")&&m.SIGNAL_art==="S",ge=l.statusFilter.filter(Fe=>Fe!=="Signalart"),ae=K&&l.statusFilter.includes("Ej bedömd")&&(m.RL2020kat===null||m.RL2020kat===0||m.RL2020kat==="0"||String(m.RL2020kat).toUpperCase()==="NE"),se=K&&l.statusFilter.includes("Ej tillämplig")&&String(m.RL2020kat).toUpperCase()==="NA",be=K?P||ge.includes(m.RL2020kat):!1,he=l.matsvampFilter?m.matsvamp==1:!1,_e=l.giftsvampFilter?(m.Giftsvamp||"").toLowerCase()==="x":!1,xe=Z?l.gruppFilter.includes(m[l.groupKey]):!1;return K?!J&&!Z?A&&(P||be||ae||se)?y(m.Commonname):"":A&&(P||be||ae||se)&&(J?he||_e:!0)&&(Z?xe:!0)?y(m.Commonname):"":J||Z?J&&!Z?A&&(he||_e)?y(m.Commonname):"":!J&&Z?A&&xe?y(m.Commonname):"":A&&(he||_e)&&xe?y(m.Commonname):"":""};function y(g){return g?g.charAt(0).toUpperCase()+g.slice(1):""}const _=G(null);function $(g){if(!g)return _.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';_.value=g;const s=g.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",m=g.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",D={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},B=D[g.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${D[g.RL2020kat]}</div>`:"",T=g.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${g["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${y(g.Commonname)}</strong> <em>${y(g.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${g.sample_plot_count} av ${g.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${s} ${m} ${B} ${T}
      </div>
    </div>
  `}const d={[st.selectors.bar]:$},E=k(()=>{const g="#d4d4d4";return n.value.map(s=>{if(fe.value&&s.Scientificname===oe.selectedSpecies?.Scientificname)return{...s,barColor:"#b1835e"};const m=l.searchTerm.trim().toLowerCase(),D=String(s.Commonname||"").toLowerCase(),B=String(s.Scientificname||"").toLowerCase(),T=m?D.includes(m)||B.includes(m):!0,A=l.statusFilter.length>0,K=l.matsvampFilter||l.giftsvampFilter,J=l.gruppFilter.length>0;if(!A&&!K&&!J&&l.searchTerm.trim()!=="")return{...s,barColor:T?"#8b5cf6":g};const Z=A&&l.statusFilter.includes("Signalart")&&s.SIGNAL_art==="S",P=l.statusFilter.filter(xe=>xe!=="Signalart"),ge=A&&l.statusFilter.includes("Ej bedömd")&&(s.RL2020kat===null||s.RL2020kat===0||s.RL2020kat==="0"||String(s.RL2020kat).toUpperCase()==="NE"),ae=A&&l.statusFilter.includes("Ej tillämplig")&&String(s.RL2020kat).toUpperCase()==="NA",se=A?Z||P.includes(s.RL2020kat):!1,be=l.matsvampFilter?s.matsvamp==1:!1,he=l.giftsvampFilter?(s.Giftsvamp||"").toLowerCase()==="x":!1,_e=J?l.gruppFilter.includes(s[l.groupKey]):!1;if(A){if(!K&&!J)return T&&Z?{...s,barColor:"#14b8a6"}:T&&(Z||se||ge||ae)?Z?{...s,barColor:"#14b8a6"}:s.RL2020kat==="LC"?{...s,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(s.RL2020kat)?{...s,barColor:"#ef4444"}:ge||ae?{...s,barColor:"#737373"}:{...s,barColor:"#1f2937"}:{...s,barColor:g};if(T&&(Z||se||ge||ae)&&(K?be||he:!0)&&(J?_e:!0)){if(Z)return{...s,barColor:"#14b8a6"};if(P.length>0)return s.RL2020kat==="LC"?{...s,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(s.RL2020kat)?{...s,barColor:"#ef4444"}:ge||ae?{...s,barColor:"#737373"}:{...s,barColor:"#1f2937"};if(l.matsvampFilter&&be)return{...s,barColor:"#eab308"};if(l.giftsvampFilter&&he)return{...s,barColor:"#84cc16"};if(J&&_e)return{...s,barColor:"#000000"}}return{...s,barColor:g}}if(K||J){if(K&&!J)return T&&be?{...s,barColor:"#eab308"}:T&&he?{...s,barColor:"#84cc16"}:{...s,barColor:g};if(!K&&J)return T&&_e?{...s,barColor:"#000000"}:{...s,barColor:g};if(T&&(be||he)&&_e){if(be)return{...s,barColor:"#eab308"};if(he)return{...s,barColor:"#84cc16"}}return{...s,barColor:g}}return{...s,barColor:s.fillColor||"var(--ui-primary)"}})}),z=g=>g.barColor,Y=k(()=>E.value.length>0);le(E,g=>{g.length||(_.value=null)});function O(){p.value<e.length-1&&p.value++}function ee(){p.value>0&&p.value--}const oe=Ze(),fe=k(()=>oe.selectedSpecies!==null),ne=Ee("(max-width: 767px)");function F(g){_.value?oe.selectSpecies(_.value,"edna"):console.log("No datum available from tooltip.")}return(g,s)=>{const m=pe;return o(),N("div",null,[x(ne)?j("",!0):(o(),N("div",rs,[c(m,{onClick:ee,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),c(m,{onClick:O,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),x(ne)?j("",!0):(o(),N("div",{key:1,class:re(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":p.value===0}]),onClick:F},[c(x(Ca),{data:E.value,width:u.value,height:"200"},{default:R(()=>[c(x(Ya),{data:E.value,x:I,y:L,color:z,barPadding:.1},null,8,["data"]),c(x(pt),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:E.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":S},null,8,["numTicks"]),c(x(pt),{type:"y",label:"Antal skogar",gridLine:!1}),Y.value?(o(),q(x(Na),{key:0,triggers:d,followCursor:!0})):j("",!0),Y.value?(o(),q(x($a),{key:1,color:z,template:$})):j("",!0)]),_:1},8,["data","width"])],2))])}}}),ns=Object.assign(ye(os,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),et=aa("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:a=>l=>a.componentTabs[l]||"grid"},actions:{setActiveTab(a,l){this.componentTabs[a]=l}}}),is={class:"md:flex justify-between relative"},us={class:"md:flex gap-4"},cs={class:"md:mt-0 mt-1 mb-1 md:mb-2"},ds={class:"text-3xl font-medium flex items-center"},gs={class:"flex gap-2"},ps={class:"text-md text-neutral-500"},vs={class:"justify-between hidden"},ms={class:"flex gap-3 items-start"},fs={key:0,class:""},bs={key:1,class:""},hs=ke({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(a,{emit:l}){const e=G(!1),p=G(!1),u=G([]),n=G([]),f=G(""),b=G(!0),i=l,h=et(),U=k({get:()=>ne.value?"spatialForest":h.getActiveTab("EdnaComponent"),set:s=>{ne.value||h.setActiveTab("EdnaComponent",s)}}),I=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],L=Ce(),{geography:S,forestType:y,standAge:_,vegetationType:$}=la(L),d=k(()=>S.value),E=k(()=>y.value),z=k(()=>_.value),Y=k(()=>$.value),O=G([]),ee=k(()=>O.value.length),oe=k(()=>O.value.length>0&&O.value[0].sample_env_count||0),fe=G("100%"),ne=Ee("(max-width: 767px)"),F=k(()=>({mark:!1,...ne.value?{images:!1}:{}}));async function g(s,m,D,B){if(!s||!m||!D||!B){O.value=[];return}if(!Je(s,m,D,B)){O.value=[];return}const T=`edna-${s}-${m}-${D}-${B}.json`;try{const A=await fetch(`/edna/${T}`);if(!A.ok){if(A.status===404){O.value=[];return}throw new Error(`Failed to fetch ${T}`)}const K=await A.json();K.sort((J,Z)=>Z.sample_plot_count-J.sample_plot_count),O.value=K}catch(A){console.error("Error fetching data:",A),O.value=[]}}return le(()=>[S.value,y.value,_.value,$.value],([s,m,D,B])=>{s&&m&&D&&B&&g(s,m,D,B)},{immediate:!0}),(s,m)=>{const D=pe,B=Ue,T=He,A=Xe,K=Qe,J=ns,Z=Pe;return o(),N("div",null,[c(Z,{class:"rounded-none sm:rounded-lg",variant:"ghost"},{default:R(()=>[v("div",is,[c(D,{color:"neutral",variant:"soft",size:"xl",onClick:m[0]||(m[0]=P=>s.$emit("enlarge")),class:re([s.isNormalView?"hidden":"md:hidden","rounded-full absolute top-0 right-0"]),icon:s.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"]),v("div",us,[v("div",cs,[v("div",ds,[c(B,{name:"solar:dna-linear",class:"mr-2"}),m[10]||(m[10]=v("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),v("div",gs,[v("h1",ps,X(ee.value)+" arter baserat på "+X(oe.value)+" skogar",1),oe.value<10?(o(),q(T,{key:0,icon:oe.value<10?"i-cuida-warning-outline":void 0,size:"md",color:oe.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:R(()=>[Q(X(oe.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):j("",!0)])]),v("div",vs,[c(A,{modelValue:U.value,"onUpdate:modelValue":m[1]||(m[1]=P=>U.value=P),items:I,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),v("div",ms,[c(D,{class:"hidden md:flex h-fit ring-muted/60",color:"neutral",variant:"outline",size:"sm",onClick:m[2]||(m[2]=P=>b.value=!b.value),label:b.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),c(Ve,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:R(()=>[U.value==="spatialForest"?(o(),N("div",fs,[c(K,{onEnlarge:m[3]||(m[3]=P=>i("enlarge")),isNormalView:s.isNormalView,"column-visibility-overrides":F.value},null,8,["isNormalView","column-visibility-overrides"])])):U.value==="columnChart"?(o(),N("div",bs,[b.value?(o(),q(J,{key:0,class:"mb-6",chartData:O.value,chartWidth:fe.value,geography:d.value,forestType:E.value,standAge:z.value,vegetationType:Y.value,matsvampFilter:e.value,giftsvampFilter:p.value,gruppFilter:u.value,statusFilter:n.value,"search-term":f.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):j("",!0),c(K,{onEnlarge:m[4]||(m[4]=P=>i("enlarge")),"onUpdate:matsvampFilter":m[5]||(m[5]=P=>e.value=P),"onUpdate:giftsvampFilter":m[6]||(m[6]=P=>p.value=P),"onUpdate:gruppFilter":m[7]||(m[7]=P=>u.value=P),"onUpdate:statusFilter":m[8]||(m[8]=P=>n.value=P),"onUpdate:searchTerm":m[9]||(m[9]=P=>f.value=P),isNormalView:s.isNormalView,"column-visibility-overrides":F.value,"search-term":f.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):j("",!0)]),_:1})]),_:1})])}}}),mt=Object.assign(ye(hs,[["__scopeId","data-v-1dbea63a"]]),{__name:"EdnaComponent"}),ks={class:"p-2 flex gap-2"},ys={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},_s=["onClick"],Ss={class:"w-full h-24 relative"},xs=["src"],ws={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},Cs={class:"absolute bottom-1 left-1 flex gap-1"},Ns={class:"p-2 pt-1"},$s={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},Ls={class:"flex justify-between items-center px-5 py-2"},rt={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(a){const l=G([]),e=G([]),p=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],u=a,n=Ce(),f=Ze(),b=G([]),i=G(!0);async function h(){const{geography:F,forestType:g,standAge:s,vegetationType:m}=n,D=`${u.dataType}-${F}-${g}-${s}-${m}.json`;try{const B=await fetch(`/${u.dataTypeFolder}/${D}`);if(!B.ok)throw new Error(`Failed to fetch data from ${D}`);b.value=await B.json(),i.value=!1}catch(B){console.error("Error fetching species data:",B)}}le(()=>[n.geography,n.forestType,n.standAge,n.vegetationType],()=>{i.value=!0,h()},{immediate:!0});const U=G({column:"",direction:"asc"}),I=k(()=>{let F=b.value.slice();if(U.value?.column){const{column:g,direction:s}=U.value;F.sort((m,D)=>{const B=m[g],T=D[g];if(B==null&&T!=null)return 1;if(B!=null&&T==null)return-1;if(B==null&&T==null)return 0;const A=String(B).localeCompare(String(T),"sv",{numeric:!0,sensitivity:"base"});return s==="asc"?A:-A})}else F.sort((g,s)=>{const m=g.RankRed??99999,D=s.RankRed??99999;if(m!==D)return m-D;const B=g.Commonname?.toString().toLowerCase()||"",T=s.Commonname?.toString().toLowerCase()||"";return B.localeCompare(T,"sv",{numeric:!0,sensitivity:"base"})});return F}),L=G(""),S=k(()=>{let F=I.value;if(L.value.trim()!==""){const g=L.value.trim().toLowerCase();F=F.filter(s=>s.Commonname&&s.Commonname.toLowerCase().includes(g)||s.Scientificname&&s.Scientificname.toLowerCase().includes(g))}return u.filterEdible?F=F.filter(g=>{const s=g["Nyasvamp-boken"];return s&&String(s).toLowerCase()==="x"}):u.filterPoison&&(F=F.filter(g=>{const s=g["Nyasvamp-boken"];return!(s&&String(s).toLowerCase()==="x")})),F}),y=k(()=>p.map(F=>{let g=0;return F.value==="Ej bedömd"?g=S.value.filter(s=>{const m=String(s.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(m)}).length:F.value==="Signalart"?g=S.value.filter(s=>s.SIGNAL_art==="S").length:g=S.value.filter(s=>String(s.RL2020kat).trim()===F.value).length,{...F,label:`${F.label} (${g})`}})),_=k(()=>{const F={};return S.value.forEach(g=>{const s=g[u.grupp];if(s!=null){const m=String(s).trim();m&&m.toLowerCase()!=="undefined"&&(F[m]=(F[m]||0)+1)}}),Object.keys(F).map(g=>({value:g,label:`${oe(g)} (${F[g]})`}))}),$=k(()=>{let F=I.value;if(L.value.trim()!==""){const g=L.value.trim().toLowerCase();F=F.filter(s=>s.Commonname&&s.Commonname.toLowerCase().includes(g)||s.Scientificname&&s.Scientificname.toLowerCase().includes(g)),console.log("After search filtering, count:",F.length)}return l.value.length>0&&(console.log("Status filter values:",l.value),F=F.filter(g=>{const s=String(g.RL2020kat).trim(),m=l.value.some(D=>{const B=D&&D.value?D.value:D;return B==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(s):B==="Signalart"?g.SIGNAL_art==="S":s===B});return console.log(`Row "${g.Commonname}" with RL2020kat "${s}" matches:`,m),m}),console.log("After status filtering, count:",F.length)),e.value.length>0&&(F=F.filter(g=>{const s=g[u.grupp],m=s!=null?String(s).trim():"";return e.value.includes(m)})),u.filterEdible?(F=F.filter(g=>{const s=g["Nyasvamp-boken"];return s&&String(s).toLowerCase()==="x"}),console.log("After edible filtering, count:",F.length)):u.filterPoison&&(F=F.filter(g=>{const s=g["Nyasvamp-boken"];return!(s&&String(s).toLowerCase()==="x")}),console.log("After poison filtering, count:",F.length)),console.log("Final filteredData count:",F.length),F}),d=k(()=>u.isNormalView?24:32),E=G(1),z=k(()=>{const F=(E.value-1)*d.value;return $.value.slice(F,F+d.value)}),Y=k(()=>$.value.length>0?(E.value-1)*d.value+1:0),O=k(()=>Math.min(E.value*d.value,$.value.length)),ee=k(()=>$.value.length);k(()=>Math.ceil(ee.value/d.value));function oe(F){return F?F.charAt(0).toUpperCase()+F.slice(1).toLowerCase():""}function fe(F){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[F]||"Ej bedömd"}function ne(F){f.selectSpecies(F,u.dataTypeFolder)}return(F,g)=>{const s=Nt,m=kt,D=lt,B=He,T=At;return o(),N(me,null,[v("div",ks,[c(s,{icon:"i-heroicons-magnifying-glass",modelValue:L.value,"onUpdate:modelValue":g[0]||(g[0]=A=>L.value=A),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),c(m,{modelValue:l.value,"onUpdate:modelValue":g[1]||(g[1]=A=>l.value=A),items:y.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),c(m,{modelValue:e.value,"onUpdate:modelValue":g[2]||(g[2]=A=>e.value=A),items:_.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),v("div",ys,[(o(!0),N(me,null,Se(z.value,(A,K)=>(o(),N("div",{key:A.Commonname+A.Scientificname+K,class:"bg-white dark:bg-neutral-800 rounded border overflow-hidden border-muted/50 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:J=>ne(A)},[v("div",Ss,[A.images&&A.images.length?(o(),N("img",{key:0,src:A.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,xs)):(o(),N("div",ws,[c(D,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),v("div",Cs,[A.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(A.RL2020kat)?(o(),q(B,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:A.RL2020kat!=="Saknas"?fe(A.RL2020kat):"Ej bedömd"},null,8,["label"])):j("",!0),A.SIGNAL_art==="S"?(o(),q(B,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):j("",!0)])]),v("div",Ns,[v("div",$s,X(oe(A.Commonname)),1)])],8,_s))),128))]),v("div",Ls,[v("div",null,[v("p",null," Visar "+X(Y.value)+" till "+X(O.value)+" av "+X(ee.value)+" arter ",1)]),v("div",null,[c(T,{"items-per-page":d.value,page:E.value,"onUpdate:page":g[3]||(g[3]=A=>E.value=A),total:ee.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},Ts={class:"md:flex justify-between items-start"},As={class:"w-full flex justify-between items-start"},Vs={class:"text-md text-neutral-500 md:mb-2"},Es={class:"md:flex gap-1 items-center hidden"},Fs={key:0},Bs={key:1},Rs={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(a,{emit:l}){const e=Ce(),p=G(0);async function u(S,y,_,$=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(z=>!z)){_.value=0;return}const E=`${y}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const z=await fetch(`/${S}/${E}`);if(!z.ok)throw new Error("Network response was not ok");const Y=await z.json();_.value=$?Y.filter(O=>O[$]==="x").length:Y.length}catch(z){console.error("Failed to fetch edible count",z),_.value=0}}le(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>u("edible","edibledata",p,"Nyasvamp-boken"),{immediate:!0});const n=l,f=[{label:"Galleri",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"Tabell",icon:"material-symbols:table-outline",value:"table"}],b=et(),i=a,h=Ee("(max-width: 767px)"),U=k(()=>h.value||i.isNormalView),I=k({get:()=>U.value?"table":b.getActiveTab("FullscreenEdible"),set:S=>{U.value||b.setActiveTab("FullscreenEdible",S)}}),L=k(()=>I.value==="table");return(S,y)=>{const _=Ue,$=pe,d=Xe,E=Qe,z=rt,Y=Pe;return o(),N("div",null,[c(Y,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:R(()=>[v("div",Ts,[v("div",As,[v("div",null,[v("div",{onClick:y[0]||(y[0]=O=>S.$emit("enlarge")),class:"group cursor-pointer dark:text-neutral-300 text-4xl md:text-3xl font-medium flex items-center"},[c(_,{name:"icon-park-solid:knife-fork",class:"mr-2"}),y[4]||(y[4]=v("h1",null," Matsvampar ",-1)),c(_,{name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})]),v("h2",Vs,X(p.value)+" arter",1)]),c($,{color:"neutral",variant:"soft",size:"xl",onClick:y[1]||(y[1]=O=>S.$emit("enlarge")),class:re([a.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:a.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])]),v("div",Es,[U.value?j("",!0):(o(),q(d,{key:0,class:"flex mt-2",modelValue:I.value,"onUpdate:modelValue":y[2]||(y[2]=O=>I.value=O),items:f,variant:"pill",color:"neutral",size:"md",ui:{list:"bg-transparent",indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),c(Ve,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:R(()=>[L.value?(o(),N("div",Fs,[c(E,{onEnlarge:y[3]||(y[3]=O=>n("enlarge")),"is-normal-view":a.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(o(),N("div",Bs,[c(z,{"is-normal-view":a.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},ft=ye(Rs,[["__scopeId","data-v-6267f98a"]]),Ps={class:"md:flex justify-between items-start"},Us={class:"md:flex gap-4"},zs={class:"w-full flex justify-between items-start"},js={class:"text-md text-neutral-500 md:mb-2"},Ms={class:"md:flex gap-4 items-center hidden"},Is={key:0},Ds={key:1},Gs={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(a,{emit:l}){const e=Ce(),p=G(0);async function u(y,_,$,d=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(Y=>!Y)){$.value=0;return}const z=`${_}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const Y=await fetch(`/${y}/${z}`);if(!Y.ok)throw new Error("Network response was not ok");const O=await Y.json();$.value=d?O.filter(ee=>ee[d]==="x").length:O.length}catch{$.value=0}}le(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>u("edible","edibledata",p,"Giftsvamp"),{immediate:!0});const n=l,f=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],b=et(),i=a,h=Ee("(max-width: 767px)"),U=k(()=>h.value||i.isNormalView),I=()=>{i.isNormalView&&n("enlarge")},L=k({get:()=>U.value?"table":b.getActiveTab("FullscreenEdible"),set:y=>{U.value||b.setActiveTab("FullscreenEdible",y)}}),S=k(()=>L.value==="table");return(y,_)=>{const $=Ue,d=pe,E=Xe,z=Qe,Y=rt,O=Pe;return o(),q(O,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:R(()=>[v("div",Ps,[v("div",Us,[v("div",zs,[v("div",null,[v("div",{onClick:I,class:re(["flex items-center dark:text-neutral-300 text-4xl font-medium md:text-3xl",a.isNormalView?"group cursor-pointer":"cursor-default"])},[c($,{name:"i-hugeicons-danger",class:"mr-2"}),_[3]||(_[3]=v("h1",null," Giftsvampar ",-1)),a.isNormalView?(o(),q($,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):j("",!0)],2),v("h2",js,X(p.value)+" arter",1)]),c(d,{color:"neutral",variant:"soft",size:"xl",onClick:_[0]||(_[0]=ee=>y.$emit("enlarge")),class:re([a.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:a.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),v("div",Ms,[U.value?j("",!0):(o(),q(E,{key:0,class:"flex mt-2",modelValue:L.value,"onUpdate:modelValue":_[1]||(_[1]=ee=>L.value=ee),items:f,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),c(Ve,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:R(()=>[S.value?(o(),N("div",Is,[c(z,{onEnlarge:_[2]||(_[2]=ee=>n("enlarge")),"is-normal-view":a.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(o(),N("div",Ds,[c(Y,{"is-normal-view":a.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},bt=ye(Gs,[["__scopeId","data-v-f8f4172e"]]),Ks={class:"md:flex justify-between items-start"},qs={class:"md:flex gap-4"},Os={class:"w-full flex justify-between items-start"},Ws={class:"text-md text-neutral-500 md:mb-2"},Hs={class:"md:flex gap-4 items-center hidden"},Zs={key:0},Xs={key:1},Ys={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(a,{emit:l}){const e=Ce(),p=G(0);async function u(y,_,$,d=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(Y=>!Y)){$.value=0;return}const z=`${_}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const Y=await fetch(`/${y}/${z}`);if(!Y.ok)throw new Error("Network response was not ok");const O=await Y.json();$.value=d?O.filter(ee=>ee[d]==="x").length:O.length}catch(Y){console.error("Failed to fetch count for",_,Y),$.value=0}}le(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>u("redlisted","redlisted",p),{immediate:!0});const n=l,f=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],b=a,i=Ee("(max-width: 767px)"),h=k(()=>i.value||b.isNormalView),U=et(),I=k({get:()=>h.value?"table":U.getActiveTab("FullscreenEdible"),set:y=>{h.value||U.setActiveTab("FullscreenEdible",y)}}),L=()=>{b.isNormalView&&n("enlarge")},S=k(()=>I.value==="table");return(y,_)=>{const $=Ue,d=pe,E=Xe,z=Qe,Y=rt,O=Pe;return o(),q(O,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:R(()=>[v("div",Ks,[v("div",qs,[v("div",Os,[v("div",null,[v("div",{onClick:L,class:re(["flex items-center dark:text-neutral-300 text-4xl font-medium md:text-3xl",a.isNormalView?"group cursor-pointer":"cursor-default"])},[c($,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),_[3]||(_[3]=v("h1",{class:"truncate"}," Naturvårdsarter ",-1)),a.isNormalView?(o(),q($,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):j("",!0)],2),v("h2",Ws,X(p.value)+" arter",1)]),c(d,{color:"neutral",variant:"soft",size:"xl",onClick:_[0]||(_[0]=ee=>y.$emit("enlarge")),class:re([a.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:a.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),v("div",Hs,[h.value?j("",!0):(o(),q(E,{key:0,class:"flex mt-2",modelValue:I.value,"onUpdate:modelValue":_[1]||(_[1]=ee=>I.value=ee),items:f,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),c(Ve,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:R(()=>[S.value?(o(),N("div",Zs,[c(z,{onEnlarge:_[2]||(_[2]=ee=>n("enlarge")),"is-normal-view":a.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(o(),N("div",Xs,[c(Y,{"is-normal-view":a.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},ht=ye(Ys,[["__scopeId","data-v-811884f7"]]),Js={class:"grid grid-cols-12"},Qs={class:"col-span-12"},er={key:0,class:"flex p-3 border-b border-muted/50 gap-3"},tr={key:1,class:"col-span-12 sm:pt-2"},ar={key:0,class:"col-span-12 sm:pt-2"},lr={key:0,class:"space-y-4"},sr={class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},rr={class:"col-span-4 flex flex-col h-full"},or={class:"col-span-4 flex flex-col"},nr={class:"col-span-4 flex flex-col"},ir={class:"flex justify-between items-center"},ur={class:"text-2xl font-semibold flex items-center"},cr={key:1,class:"text-neutral-500"},dr={class:"flex justify-between items-center"},gr={class:"text-2xl font-semibold flex items-center"},pr={key:1,class:"text-neutral-500"},vr={class:"flex justify-between items-center"},mr={class:"text-2xl font-semibold flex items-center"},fr={key:1,class:"text-neutral-500"},br={class:"flex justify-between items-center"},hr={class:"truncate"},kr={class:"text-2xl font-semibold flex items-center"},yr={key:1,class:"text-neutral-500"},_r={__name:"NormalView",props:{activeView:{type:String,default:null}},emits:["enlarge","closeView"],setup(a,{emit:l}){const e=Ce(),p=xt(),u=G(null),n=G(null),f=G(null),b=G(null),i=a,h=l,U={FullScreenEdible:"knowledge",FullScreenPoison:"knowledge",RedlistedComponent:"knowledge",FullScreenEdna:"dna"},I={FullScreenEdible:ft,FullScreenPoison:bt,RedlistedComponent:ht,FullScreenEdna:mt},L=B=>{U[B]&&(S.value=U[B]),h("enlarge",B)},S=G("knowledge"),y=G(0),_=()=>{y.value=window.innerWidth};We(()=>{_(),window.addEventListener("resize",_)}),yt(()=>{window.removeEventListener("resize",_)}),k(()=>(y.value>=768,"md"));const $=k(()=>y.value<768),d=k(()=>e.geography),E=k(()=>e.forestType),z=k(()=>e.standAge),Y=k(()=>e.vegetationType),O=k(()=>I[i.activeView??""]??null),ee=k(()=>i.activeView?i.activeView==="FullScreenEdible"||i.activeView==="FullScreenPoison"?{isNormalView:!1,geography:d.value,forestType:E.value,standAge:z.value,vegetationType:Y.value}:{isNormalView:!1}:{isNormalView:!1}),oe=k(()=>i.activeView?`${i.activeView}-${p.fullPath}`:void 0),fe={FullScreenEdible:"Matsvampar",FullScreenPoison:"Giftsvampar",RedlistedComponent:"Naturvårdsarter",FullScreenEdna:"Alla mykorrhizasvampar"},ne=k(()=>i.activeView==="FullScreenEdna"),F=k(()=>fe[i.activeView??""]??"");function g(){S.value="knowledge",h("closeView")}k(()=>O.value?[{label:"Enligt samlad kunskap",onClick:g,class:"cursor-pointer p-1 px-2 rounded hover:bg-muted"},{label:F.value,class:"cursor-default text-neutral"}]:[]);const s=()=>{ne.value?(S.value="knowledge",h("closeView")):L("FullScreenEdna")};le(()=>i.activeView,B=>{B&&U[B]&&(S.value=U[B])}),le(S,B=>{i.activeView&&U[i.activeView]!==B&&h("closeView")});async function m(B,T,A,K=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(P=>!P)){A.value=0;return}const Z=`${T}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const P=await fetch(`/${B}/${Z}`);if(!P.ok)throw new Error("Network response was not ok");const ge=await P.json();K?A.value=ge.filter(ae=>ae[K]==="x").length:A.value=ge.length}catch(P){console.error("Failed to fetch count for",T,P),A.value=0}}async function D(){const B=e.geography,T=e.forestType,A=e.standAge,K=e.vegetationType;if(!B||!T||!A||!K){b.value=0;return}if(!Je(B,T,A,K)){b.value=0;return}b.value=null;const J=`edna-${B}-${T}-${A}-${K}.json`;try{const Z=await fetch(`/edna/${J}`);if(!Z.ok){b.value=0;return}const P=await Z.json();b.value=Array.isArray(P)?P.length:0}catch(Z){console.error("Failed to fetch DNA count",Z),b.value=0}}return le(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>{m("redlisted","redlisted",u),m("edible","edibledata",n,"Nyasvamp-boken"),m("edible","edibledata",f,"Giftsvamp"),D()},{immediate:!0}),(B,T)=>{const A=oa,K=pe,J=Ue,Z=Ct,P=Pe,ge=St,ae=wt;return o(),N("div",Js,[v("div",Qs,[$.value?j("",!0):(o(),N("div",er,[c(K,{onClick:T[0]||(T[0]=se=>S.value="knowledge"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:S.value==="knowledge"?"soft":"outline",color:"neutral"},{default:R(()=>[c(A,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"})]),_:1},8,["variant"]),c(K,{onClick:T[1]||(T[1]=se=>S.value="dna"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:S.value==="dna"?"soft":"outline",color:"neutral"},{default:R(()=>[c(A,{title:"Enligt DNA",description:"Från markinventeringens jordprover"})]),_:1},8,["variant"])])),S.value==="dna"?(o(),N("div",tr,[v("div",null,[c(mt,{isNormalView:!ne.value,onEnlarge:s},null,8,["isNormalView"])])])):j("",!0)]),S.value==="knowledge"?(o(),N("div",ar,[O.value?(o(),N("div",lr,[(o(),q(sa(O.value),we(ee.value,{key:oe.value,onEnlarge:g,class:"w-full"}),null,16))])):(o(),N(me,{key:1},[v("div",sr,[v("div",rr,[(o(),q(ft,{geography:d.value,forestType:E.value,standAge:z.value,vegetationType:Y.value,isNormalView:!0,onEnlarge:T[2]||(T[2]=se=>L("FullScreenEdible")),key:x(p).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),v("div",or,[(o(),q(bt,{geography:d.value,forestType:E.value,standAge:z.value,vegetationType:Y.value,isNormalView:!0,onEnlarge:T[3]||(T[3]=se=>L("FullScreenPoison")),key:x(p).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),v("div",nr,[c(ht,{isNormalView:!0,onEnlarge:T[4]||(T[4]=se=>L("RedlistedComponent"))})])]),c(ae,{class:"md:hidden space-y-3 pt-3 bg-muted/50"},{default:R(()=>[c(A,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"}),c(P,{onClick:T[5]||(T[5]=se=>L("FullScreenEdible")),class:"ring-muted/50"},{default:R(()=>[v("div",ir,[v("div",null,[v("h1",ur,[c(J,{name:"icon-park-solid:knife-fork",class:"mr-2"}),T[9]||(T[9]=Q("Matsvampar ",-1))]),n.value===null?(o(),q(Z,{key:0,class:"h-4 w-12 mt-2"})):(o(),N("h1",cr,X(n.value)+" arter",1))]),c(K,{icon:"i-heroicons-chevron-right",class:"rounded-full ring-muted/50",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),c(P,{onClick:T[6]||(T[6]=se=>L("FullScreenPoison")),class:"ring-muted/50"},{default:R(()=>[v("div",dr,[v("div",null,[v("h1",gr,[c(J,{name:"i-hugeicons-danger",class:"mr-2"}),T[10]||(T[10]=Q("Giftsvampar ",-1))]),n.value===null?(o(),q(Z,{key:0,class:"h-4 w-12 mt-2"})):(o(),N("h1",pr,X(f.value)+" arter",1))]),c(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),c(P,{onClick:T[7]||(T[7]=se=>L("RedlistedComponent")),class:"ring-muted/50"},{default:R(()=>[v("div",vr,[v("div",null,[v("h1",mr,[c(J,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),T[11]||(T[11]=Q(" Naturvårdsarter ",-1))]),u.value===null?(o(),q(Z,{key:0,class:"h-4 w-12 mt-2"})):(o(),N("h1",fr,X(u.value)+" arter",1))]),c(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),c(ge),c(A,{title:"Enligt DNA",description:"Från markinventeringens jordprover"}),c(P,{onClick:T[8]||(T[8]=se=>L("FullScreenEdna")),class:"ring-muted/50"},{default:R(()=>[v("div",br,[v("div",hr,[v("div",kr,[c(J,{name:"solar:dna-linear",class:"mr-2"}),T[12]||(T[12]=v("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),b.value===null?(o(),q(Z,{key:0,class:"h-4 w-12 mt-2"})):(o(),N("h1",yr,X(b.value)+" arter",1))]),c(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1})],64))])):j("",!0)])}}},Sr=ye(_r,[["__scopeId","data-v-ac2b1550"]]),xr={class:"bg-muted"},wr={class:"flex flex-col min-h-screen"},Cr={__name:"DashboardC",setup(a){Ee("(max-width: 767px)");const l=xt(),e=G(!1),p=G(!0),u=Ze(),n=Ce();le(()=>u.selectedSpecies,S=>{S&&(e.value=!0)}),le(e,S=>{S||u.clearSelection()});const f=G(null),b=k(()=>n.geography&&n.forestType&&n.standAge&&n.vegetationType),i=S=>{f.value=S},h=()=>{f.value=null},U=S=>{S.key==="Escape"&&u.selectedSpecies&&u.clearSelection()};function I(S){return Array.isArray(S)?S[0]??null:typeof S=="string"&&S.length>0?S:null}function L(S){const y={geography:I(S.geography),forestType:I(S.forestType),standAge:I(S.standAge),vegetationType:I(S.vegetationType)};y.geography&&y.forestType&&y.standAge&&y.vegetationType&&n.setParams(y)}return We(()=>{window.addEventListener("keydown",U),L(l.params)}),_t(()=>{window.removeEventListener("keydown",U)}),le(()=>l.params,S=>{L(S)},{immediate:!0}),le(()=>[n.geography,n.forestType,n.standAge,n.vegetationType],()=>{n.geography&&n.forestType&&n.standAge&&n.vegetationType&&`${encodeURIComponent(n.geography)}${encodeURIComponent(n.forestType)}${encodeURIComponent(n.standAge)}${encodeURIComponent(n.vegetationType)}`},{deep:!0}),le(f,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(S,y)=>{const _=El,$=Ul,d=ca,E=wt;return o(),N("div",xr,[c($,{modelValue:e.value,"onUpdate:modelValue":y[0]||(y[0]=z=>e.value=z),pinned:p.value,"onUpdate:pinned":y[1]||(y[1]=z=>p.value=z)},{default:R(()=>[c(_,{species:x(u).selectedSpecies,source:x(u).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),c(E,null,{default:R(()=>[c(Ve,{name:"fade"},{default:R(()=>[b.value?(o(),q(d,{key:0})):j("",!0)]),_:1})]),_:1}),v("div",wr,[c(E,{class:"w-full px-0"},{default:R(()=>[c(Ve,{name:"fade",mode:"out-in"},{default:R(()=>[c(Sr,{class:"block sm:border border-muted/50 bg-white sm:rounded sm:shadow","active-view":f.value,onEnlarge:i,onCloseView:h},null,8,["active-view"])]),_:1})]),_:1})])])}}},Nr=ye(Cr,[["__scopeId","data-v-a485cf62"]]),$r={};function Lr(a,l){const e=Nr;return o(),q(e)}const Gr=ye($r,[["render",Lr]]);export{Gr as default};
