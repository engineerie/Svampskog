import{a as au}from"./7W2OwDCj.js";import{A as De,Z as At,M as X,e as C,w as H,N as Ne,ah as fe,Y as Tt,O as B,P as $t,B as ou,C as Jo,I as su,V as D,av as lu,aw as uu,t as oe,_ as Qe,h as N,r as q,J as me,d as V,g as L,aS as Hi,f as G,am as cu,aF as It,n as Ce,aT as du,U as fu,ae as Ve,T as Bt,a4 as hu,a6 as gu,y as pu,a7 as mu,a8 as vu,aa as Ma,F as Ge,af as nt,aQ as Ot,b2 as es,ac as bu,bb as ee,bg as yu,bh as xu,bi as _u,bc as ku,bj as Ea,b9 as wu,aU as Su,aX as oi,o as Nt,c as on,aA as fn,aM as Or,K as Ur,bk as Cu,ay as Tu,bl as ts,aK as ns,aC as Au}from"#entry";import{_ as $u,u as Wr}from"./CDROwgv-.js";import{a as sn,f as Nu,_ as rs,g as Mu,h as Eu,i as is,e as as}from"./7dnmpwsP.js";import{_ as Bn}from"./C5XK07ZC.js";import{_ as os}from"./DpsIk57s.js";import{u as yt}from"./BfHFORaB.js";import{g as Lu}from"./CqkleIqs.js";import"./DLjr7qcw.js";import"./OfaiGQ73.js";import"./C6aQJq_i.js";import"./B2VA6R4E.js";import"./DOfIjxMR.js";var Ru=De({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;return At(),(n,r)=>(C(),X(B($t),Tt(t,{"data-type":"ellipsis"}),{default:H(()=>[Ne(n.$slots,"default",{},()=>[r[0]||(r[0]=fe("…"))])]),_:3},16))}}),Fu=Ru;const[ln,Du]=ou("PaginationRoot");var Bu=De({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(e,{emit:t}){const n=e,r=t,{siblingCount:i,disabled:a,showEdges:o}=Jo(n);At();const s=su(n,"page",r,{defaultValue:n.defaultPage,passive:n.page===void 0}),l=D(()=>Math.max(1,Math.ceil(n.total/(n.itemsPerPage||1))));return Du({page:s,onPageChange(u){s.value=u},pageCount:l,siblingCount:i,disabled:a,showEdges:o}),(u,c)=>(C(),X(B($t),{as:u.as,"as-child":u.asChild},{default:H(()=>[Ne(u.$slots,"default",{page:B(s),pageCount:l.value})]),_:3},8,["as","as-child"]))}}),Pu=Bu,Vu=De({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,n=ln();At();const r=D(()=>n.page.value===1||n.disabled.value);return(i,a)=>(C(),X(B($t),Tt(t,{"aria-label":"First Page",type:i.as==="button"?"button":void 0,disabled:r.value,onClick:a[0]||(a[0]=o=>!r.value&&B(n).onPageChange(1))}),{default:H(()=>[Ne(i.$slots,"default",{},()=>[a[1]||(a[1]=fe("First page"))])]),_:3},16,["type","disabled"]))}}),zu=Vu,Iu=De({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e,n=ln();At();const r=D(()=>n.page.value===n.pageCount.value||n.disabled.value);return(i,a)=>(C(),X(B($t),Tt(t,{"aria-label":"Last Page",type:i.as==="button"?"button":void 0,disabled:r.value,onClick:a[0]||(a[0]=o=>!r.value&&B(n).onPageChange(B(n).pageCount.value))}),{default:H(()=>[Ne(i.$slots,"default",{},()=>[a[1]||(a[1]=fe("Last page"))])]),_:3},16,["type","disabled"]))}}),Ou=Iu;function xt(e,t){const n=t-e+1;return Array.from({length:n},(r,i)=>i+e)}function Uu(e){return e.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const jn="ellipsis";function Wu(e,t,n,r){const a=t,o=Math.max(e-n,1),s=Math.min(e+n,a);if(r){const u=Math.min(2*n+5,t)-2,c=o>3&&Math.abs(a-u-1+1)>2&&Math.abs(o-1)>2,d=s<a-2&&Math.abs(a-u)>2&&Math.abs(a-s)>2;if(!c&&d)return[...xt(1,u),jn,a];if(c&&!d){const h=xt(a-u+1,a);return[1,jn,...h]}if(c&&d){const h=xt(o,s);return[1,jn,...h,jn,a]}return xt(1,a)}else{const l=n*2+1;return t<l?xt(1,a):e<=n+1?xt(1,l):t-e<=n?xt(t-l+1,a):xt(o,s)}}var Hu=De({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(e){const t=e;At();const n=ln(),r=D(()=>Uu(Wu(n.page.value,n.pageCount.value,n.siblingCount.value,n.showEdges.value)));return(i,a)=>(C(),X(B($t),lu(uu(t)),{default:H(()=>[Ne(i.$slots,"default",{items:r.value})]),_:3},16))}}),Gu=Hu,Yu=De({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;At();const n=ln(),r=D(()=>n.page.value===t.value),i=D(()=>n.disabled.value);return(a,o)=>(C(),X(B($t),Tt(t,{"data-type":"page","aria-label":`Page ${a.value}`,"aria-current":r.value?"page":void 0,"data-selected":r.value?"true":void 0,disabled:i.value,type:a.as==="button"?"button":void 0,onClick:o[0]||(o[0]=s=>!i.value&&B(n).onPageChange(a.value))}),{default:H(()=>[Ne(a.$slots,"default",{},()=>[fe(oe(a.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),qu=Yu,ju=De({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;At();const n=ln(),r=D(()=>n.page.value===n.pageCount.value||n.disabled.value);return(i,a)=>(C(),X(B($t),Tt(t,{"aria-label":"Next Page",type:i.as==="button"?"button":void 0,disabled:r.value,onClick:a[0]||(a[0]=o=>!r.value&&B(n).onPageChange(B(n).page.value+1))}),{default:H(()=>[Ne(i.$slots,"default",{},()=>[a[1]||(a[1]=fe("Next page"))])]),_:3},16,["type","disabled"]))}}),Xu=ju,Ku=De({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(e){const t=e;At();const n=ln(),r=D(()=>n.page.value===1||n.disabled.value);return(i,a)=>(C(),X(B($t),Tt(t,{"aria-label":"Previous Page",type:i.as==="button"?"button":void 0,disabled:r.value,onClick:a[0]||(a[0]=o=>!r.value&&B(n).onPageChange(B(n).page.value-1))}),{default:H(()=>[Ne(i.$slots,"default",{},()=>[a[1]||(a[1]=fe("Prev page"))])]),_:3},16,["type","disabled"]))}}),Zu=Ku;const Qu={},Ju={class:"relative overflow-hidden rounded-(--ui-radius) border border-dashed border-(--ui-border-accented) opacity-75 px-4 flex items-center justify-center aspect-video"};function ec(e,t){const n=$u;return C(),X(n,{variant:"subtle"},{default:H(()=>[N("div",Ju,[t[0]||(t[0]=N("svg",{class:"absolute inset-0 h-full w-full stroke-(--ui-border-inverted)/10",fill:"none"},[N("defs",null,[N("pattern",{id:"pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[N("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),N("rect",{stroke:"none",fill:"url(#pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e)",width:"100%",height:"100%"})],-1)),Ne(e.$slots,"default")])]),_:3})}const tc=Object.assign(Qe(Qu,[["render",ec]]),{__name:"ImagePlaceholder"}),nc={class:"w-full relative overflow-visible"},rc={key:0,class:"group overflow-hidden"},ic=["src"],ac={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},oc={class:"flex"},sc={key:1,class:"overflow-hidden relative group"},lc=["src"],uc={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},cc={class:"flex"},dc={class:"px-5 pb-3 mt-4"},fc={class:"text-2xl font-medium"},hc={class:"text-neutral-500"},gc={class:"my-1"},pc={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},mc={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},vc={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},bc={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},yc={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},xc={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},_c={class:"mt-3 text-lg"},kc={class:"-mx-1 mt-4"},wc={key:0,class:"inline-flex m-1 h-fit align-bottom"},Sc=["src"],Cc={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},Tc={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},Ac={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},$c={class:"text-lg font-semibold mb-2 flex"},Nc={key:0,class:"flex items-center space-x-2"},Mc={size:"md",weight:"light"},Ec={size:"md",weight:"light"},La=50,Lc={__name:"SpeciesInfo",props:{species:Object},setup(e){const t=q(0),n=e,r=D(()=>n.species.images||[]);me(r,()=>{t.value=0});const i=q(!1),a=q(!0),o=()=>{i.value=!i.value},s=D(()=>n.species.Kriteriedokumentation?i.value?n.species.Kriteriedokumentation:n.species.Kriteriedokumentation.slice(0,La)+"...":""),l=D(()=>n.species.ekologi?a.value?n.species.ekologi:n.species.ekologi.slice(0,La)+"...":""),u=b=>b?b.charAt(0).toUpperCase()+b.slice(1).toLowerCase():"",c=b=>b?b.replace("/detaljer","").replace("/artinformation",""):"",d=b=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[b]||"NE",f=b=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[b]||"bg-neutral-300",h=b=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[b]||"Ej bedömd",g=(b,m)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[b==="0"&&m?m:b]||"default-icon.webp"}`,p=D(()=>n.species["Svamp-grupp"]==="0"&&n.species["Svamp-grupp-släkte"]?n.species["Svamp-grupp-släkte"]:n.species["Svamp-grupp"]);return(b,m)=>{const x=au,k=Hi,R=tc,S=cu,T=It,M=sn,Z=du;return C(),V("div",nc,[r.value.length>1?(C(),V("div",rc,[L(x,{onSelect:m[0]||(m[0]=K=>t.value=K),items:r.value,ui:{item:"basis-full"}},{default:H(({item:K})=>[(C(),V("div",{class:"w-full relative",key:K},[N("img",{src:K,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,ic)]))]),_:1},8,["items"]),N("div",ac,[N("div",oc,[L(k,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),m[1]||(m[1]=N("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),N("h1",null,oe(t.value+1)+" av "+oe(r.value.length),1)])])):r.value.length===1?(C(),V("div",sc,[N("img",{src:r.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,lc),N("div",uc,[N("div",cc,[L(k,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),m[2]||(m[2]=N("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),N("h1",null,oe(t.value+1)+" av "+oe(r.value.length),1)])])):(C(),X(R,{key:2,class:"rounded-none"})),N("div",dc,[N("h1",fc,oe(u(e.species.Commonname)),1),N("h1",hc,oe(e.species.Scientificname),1),N("div",gc,[e.species["Rank matsvamp"]===3?(C(),V("div",pc,[L(S,{name:"codicon:circle-large-filled",class:"size-3"}),m[3]||(m[3]=fe(" Sällsynt matsvamp ",-1))])):G("",!0),e.species["Rank matsvamp"]===2?(C(),V("div",mc,[L(S,{name:"codicon:color-mode",class:"size-3"}),m[4]||(m[4]=fe(" Ovanlig matsvamp ",-1))])):G("",!0),e.species["Rank giftsvamp"]===3?(C(),V("div",vc,[L(S,{name:"codicon:circle-large-filled",class:"size-3"}),m[5]||(m[5]=fe(" Sällsynt giftsvamp ",-1))])):G("",!0),e.species["Rank giftsvamp"]===2?(C(),V("div",bc,[L(S,{name:"codicon:color-mode",class:"size-3"}),m[6]||(m[6]=fe(" Ovanlig giftsvamp ",-1))])):G("",!0),e.species.RankRed===3?(C(),V("div",yc,[L(S,{name:"codicon:circle-large-filled",class:"size-3"}),m[7]||(m[7]=fe(" Sällsynt naturvårdsart ",-1))])):G("",!0),e.species.RankRed===2?(C(),V("div",xc,[L(S,{name:"codicon:color-mode",class:"size-3"}),m[8]||(m[8]=fe(" Ovanlig naturvårdsart ",-1))])):G("",!0)]),N("h1",_c,oe(l.value),1),N("div",kc,[e.species["Svamp-grupp"]?(C(),V("div",wc,[L(T,{color:"neutral",variant:"subtle",size:"xl"},{default:H(()=>[N("img",{src:g(e.species["Svamp-grupp"],e.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,Sc),fe(" "+oe(u(p.value)),1)]),_:1})])):G("",!0),e.species["Nyasvamp-boken"]==="x"?(C(),V("div",Cc,[L(T,{color:"warning",size:"xl",variant:"subtle",class:""},{default:H(()=>[L(k,{name:"icon-park-solid:knife-fork"}),m[9]||(m[9]=fe("Matsvamp ",-1))]),_:1})])):G("",!0),e.species.Giftsvamp==="x"?(C(),V("div",Tc,[L(T,{color:"poison",size:"xl",variant:"subtle",class:""},{default:H(()=>[L(k,{name:"hugeicons:danger"}),m[10]||(m[10]=fe("Giftsvamp ",-1))]),_:1})])):G("",!0),e.species.SIGNAL_art==="S"?(C(),V("div",Ac,[L(T,{color:"signal",size:"xl",variant:"subtle",class:""},{default:H(()=>[...m[11]||(m[11]=[fe("Signalart",-1)])]),_:1})])):G("",!0),e.species.KALKmark?(C(),X(T,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:H(()=>[...m[12]||(m[12]=[fe(" Kalkmark ",-1)])]),_:1})):G("",!0),e.species.ANNANmark?(C(),X(T,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:H(()=>[...m[13]||(m[13]=[fe(" Vanlig skogsmark ",-1)])]),_:1})):G("",!0)]),e.species.Kriteriedokumentation?(C(),X(M,{key:0,class:"my-4"},{default:H(()=>[N("div",{class:"flex justify-between cursor-pointer",onClick:o},[N("h1",$c,[e.species.RL2020kat?(C(),V("div",Nc,[N("div",{class:Ce([f(e.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},oe(d(e.species.RL2020kat)),3),N("h1",Mc,oe(h(e.species.RL2020kat)),1)])):G("",!0)]),L(k,{name:"mdi:chevron-down",class:Ce(["h-6 w-6 transition-transform duration-300 ease-in-out",i.value?"rotate-180":"rotate-0"])},null,8,["class"])]),e.species.Kriteriedokumentation?(C(),V("div",{key:0,class:Ce(["relative overflow-hidden transition-transform duration-300 ease-in-out",[i.value?"max-h-auto":"max-h-20"]]),onClick:o},[N("h1",Ec,oe(s.value),1)],2)):G("",!0)]),_:1})):G("",!0),m[16]||(m[16]=N("h1",{class:"text-lg font-medium mt-4"},"Läs mer på",-1)),e.species.Artfakta!="Information saknas"?(C(),X(Z,{key:1,to:c(e.species.Artfakta),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:H(()=>[...m[14]||(m[14]=[fe(" Artfakta.se ",-1)])]),_:1},8,["to"])):G("",!0),m[17]||(m[17]=N("br",null,null,-1)),e.species.Svampguiden&&e.species.Svampguiden!=="0"?(C(),X(Z,{key:2,to:c(e.species.Svampguiden),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:H(()=>[...m[15]||(m[15]=[fe(" Svampguiden.com ",-1)])]),_:1},8,["to"])):G("",!0)])])}}},Rc={key:0,class:"fixed inset-0 z-50 flex pointer-events-none group"},Fc={class:"absolute top-3 left-3 items-end w-full gap-2 z-10 flex"},Dc={class:"h-full relative overflow-auto pb-16 no-scrollbar"},Bc={__name:"MySlideover",props:{modelValue:{type:Boolean,default:!1},pinned:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:modelValue","update:pinned"],setup(e,{emit:t}){const n=e,r=t,i=q(n.pinned);me(()=>n.pinned,o=>{i.value=o});function a(){i.value=!i.value,r("update:pinned",i.value)}return(o,s)=>{const l=Ve;return C(),X(Bt,{name:"slide-in-right"},{default:H(()=>[e.modelValue?(C(),V("div",Rc,[i.value?G("",!0):(C(),V("div",{key:0,class:"fixed inset-0 pointer-events-auto",onClick:s[0]||(s[0]=u=>r("update:modelValue",!1))})),N("div",{ref:"panelRef",class:Ce(["ml-auto bg-white shadow-lg z-50 relative pointer-events-auto ring-1 ring-neutral-200 transition-all overflow-hidden",[i.value?"":"sm:ml-auto sm:m-2 sm:rounded",e.expanded?"w-[744px]":"w-screen sm:w-96"]]),onClick:s[2]||(s[2]=fu(()=>{},["stop"]))},[N("div",Fc,[L(l,{class:"shadow hover:bg-white rounded-full mt-2 ml-1 md:m-0",color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},icon:"heroicons:x-mark",size:"lg",onClick:s[1]||(s[1]=u=>r("update:modelValue",!1))}),L(l,{class:Ce(["shadow hover:bg-white hidden md:flex rounded-full",i.value?"text-primary-500":"text-neutral-700"]),color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},onClick:a,icon:"codicon:pinned",size:"lg"},null,8,["class"])]),N("div",Dc,[Ne(o.$slots,"default",{},void 0,!0)])],2)])):G("",!0)]),_:3})}}},Pc=Qe(Bc,[["__scopeId","data-v-fb1058c4"]]),Vc={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},ss={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(e,{emit:t}){const n=e,r=t,i=hu(),{dir:a}=gu(),o=pu(),s=mu(vu(n,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),r),l=D(()=>n.firstIcon||(a.value==="rtl"?o.ui.icons.chevronDoubleRight:o.ui.icons.chevronDoubleLeft)),u=D(()=>n.prevIcon||(a.value==="rtl"?o.ui.icons.chevronRight:o.ui.icons.chevronLeft)),c=D(()=>n.nextIcon||(a.value==="rtl"?o.ui.icons.chevronLeft:o.ui.icons.chevronRight)),d=D(()=>n.lastIcon||(a.value==="rtl"?o.ui.icons.chevronDoubleLeft:o.ui.icons.chevronDoubleRight)),f=D(()=>Ma({extend:Ma(Vc),...o.ui?.pagination||{}})());return(h,g)=>(C(),X(B(Pu),Tt(B(s),{class:f.value.root({class:[n.ui?.root,n.class]})}),{default:H(({page:p,pageCount:b})=>[L(B(Gu),{class:Ce(f.value.list({class:n.ui?.list}))},{default:H(({items:m})=>[e.showControls||i.first?(C(),X(B(zu),{key:0,"as-child":"",class:Ce(f.value.first({class:n.ui?.first}))},{default:H(()=>[Ne(h.$slots,"first",{},()=>[L(Ve,{color:e.color,variant:e.variant,size:e.size,icon:l.value,to:e.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):G("",!0),e.showControls||i.prev?(C(),X(B(Zu),{key:1,"as-child":"",class:Ce(f.value.prev({class:n.ui?.prev}))},{default:H(()=>[Ne(h.$slots,"prev",{},()=>[L(Ve,{color:e.color,variant:e.variant,size:e.size,icon:u.value,to:p>1?e.to?.(p-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):G("",!0),(C(!0),V(Ge,null,nt(m,(x,k)=>(C(),V(Ge,null,[x.type==="page"?(C(),X(B(qu),{key:k,"as-child":"",value:x.value,class:Ce(f.value.item({class:n.ui?.item}))},{default:H(()=>[Ne(h.$slots,"item",Tt({ref_for:!0},{item:x,index:k,page:p,pageCount:b}),()=>[L(Ve,{color:p===x.value?e.activeColor:e.color,variant:p===x.value?e.activeVariant:e.variant,size:e.size,label:String(x.value),ui:{label:f.value.label()},to:e.to?.(x.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(C(),X(B(Fu),{key:x.type,index:k,"as-child":"",class:Ce(f.value.ellipsis({class:n.ui?.ellipsis}))},{default:H(()=>[Ne(h.$slots,"ellipsis",{},()=>[L(Ve,{color:e.color,variant:e.variant,size:e.size,icon:e.ellipsisIcon||B(o).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["index","class"]))],64))),256)),e.showControls||i.next?(C(),X(B(Xu),{key:2,"as-child":"",class:Ce(f.value.next({class:n.ui?.next}))},{default:H(()=>[Ne(h.$slots,"next",{},()=>[L(Ve,{color:e.color,variant:e.variant,size:e.size,icon:c.value,to:p<b?e.to?.(p+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):G("",!0),e.showControls||i.last?(C(),X(B(Ou),{key:3,"as-child":"",class:Ce(f.value.last({class:n.ui?.last}))},{default:H(()=>[Ne(h.$slots,"last",{},()=>[L(Ve,{color:e.color,variant:e.variant,size:e.size,icon:d.value,to:e.to?.(b)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):G("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},zc=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function Gi(e,t,n,r){return!e||!t||!n||!r?!1:zc.some(i=>i.geo===e&&i.forest===t&&i.age===n&&i.veg===r)}const Ic={class:""},Oc={class:""},Uc={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},Wc={class:"flex gap-2 items-end justify-between w-full mb-2"},Hc={class:"flex gap-2"},Gc={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Yc={key:1,class:"hidden md:flex"},qc={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},jc={key:0,class:"flex gap-2 w-full mb-2"},Xc={class:""},Kc={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},Zc={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},Qc={class:"flex"},Jc={class:"hidden md:flex"},ed={key:0},td={class:"flex justify-center"},nd={key:2},rd={class:"max-w-sm space-y-2 mt-2"},id={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(e,{emit:t}){const n=Ot("(max-width: 767px)"),r=D(()=>n.value||l.isNormalView&&l.dataTypeFolder!=="edna"),i=t,a=q("");let o=null;function s(v){a.value=v,o&&clearTimeout(o),o=setTimeout(()=>{i("update:searchTerm",a.value)},300)}es(()=>{o&&clearTimeout(o)});const l=e,u=bu("table"),c=r.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[l.grupp]:!1,mark:!1,[l.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[l.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};l.dataType==="edna"&&(c.mark=!1);const d=q({...c,...l.columnVisibilityOverrides}),f=q([]),h=D(()=>{const v={};Gt.value.forEach(I=>{I.KALKmark&&(v.KALKmark=(v.KALKmark||0)+1),I.ANNANmark&&(v.ANNANmark=(v.ANNANmark||0)+1)});const A=u.value?.tableApi?.getFilteredRowModel()?.rows||[],P={};return A.forEach(I=>{const Y=I.original;Y.KALKmark&&(P.KALKmark=(P.KALKmark||0)+1),Y.ANNANmark&&(P.ANNANmark=(P.ANNANmark||0)+1)}),[{label:`Kalkmark (${P.KALKmark||0}/${v.KALKmark||0})`,value:"KALKmark"},{label:`Vanlig skogsmark (${P.ANNANmark||0}/${v.ANNANmark||0})`,value:"ANNANmark"}]}),g=D(()=>h.value.map(v=>({label:v.label,type:"checkbox",checked:f.value.includes(v.value),onUpdateChecked(A){A?f.value.includes(v.value)||f.value.push(v.value):f.value=f.value.filter(P=>P!==v.value)},onSelect(A){A.preventDefault()}}))),p=D(()=>{const v=["Matsvamp","Giftsvamp"],A={};Gt.value.forEach(Y=>{const J=Y[l.mat];l.mat==="Nyasvamp-boken"?J&&String(J).toLowerCase()==="x"&&(A.Matsvamp=(A.Matsvamp||0)+1):J==1&&(A.Matsvamp=(A.Matsvamp||0)+1),(Y.Giftsvamp||"").toLowerCase()==="x"&&(A.Giftsvamp=(A.Giftsvamp||0)+1)});const P=u.value?.tableApi?.getFilteredRowModel()?.rows||[],I={};return P.forEach(Y=>{const J=Y.original,he=J[l.mat];(l.mat==="Nyasvamp-boken"?he&&String(he).toLowerCase()==="x":he==1)&&(I.Matsvamp=(I.Matsvamp||0)+1),(J.Giftsvamp||"").toLowerCase()==="x"&&(I.Giftsvamp=(I.Giftsvamp||0)+1)}),v.map(Y=>{const J=A[Y]||0,he=I[Y]||0;return{label:`${Y} (${he}/${J})`,value:Y}})}),b=q(l.isNormalView?500:10),m=q([]),x=q([]),k=q([]),R=D(()=>K.value.map(v=>({label:v.label,type:"checkbox",checked:k.value.includes(v.value),onUpdateChecked(A){A?k.value.includes(v.value)||k.value.push(v.value):k.value=k.value.filter(P=>P!==v.value)},onSelect(A){A.preventDefault()}}))),S=D(()=>p.value.map(v=>({label:v.label,type:"checkbox",checked:m.value.includes(v.value),onUpdateChecked(A){A?m.value.includes(v.value)||m.value.push(v.value):m.value=m.value.filter(P=>P!==v.value)},onSelect(A){A.preventDefault()}}))),T=D(()=>$.value.map(v=>({label:v.label,type:"checkbox",checked:x.value.includes(v.value),onUpdateChecked(A){A?x.value.includes(v.value)||x.value.push(v.value):x.value=x.value.filter(P=>P!==v.value)},onSelect(A){A.preventDefault()}}))),M=D(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(v){v.preventDefault(),u.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(v){v.preventDefault(),u.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(v){v.preventDefault(),u.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(v){v.preventDefault(),u.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:l.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(v){v.preventDefault(),u.value?.tableApi?.setSorting([{id:l.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(v){v.preventDefault(),u.value?.tableApi?.setSorting([{id:l.obs,desc:!0}])}}]}]),Z=D(()=>[{label:"Grupp",children:R.value},{label:"Matsvamp",children:S.value},{label:"Status",children:T.value},{label:"Mark",children:g.value}]),K=D(()=>{const v={};Gt.value.forEach(I=>{const Y=I[l.grupp];Y&&(v[Y]=(v[Y]||0)+1)});const A=u.value?.tableApi?.getFilteredRowModel()?.rows||[],P={};return A.forEach(I=>{const J=I.original[l.grupp];J&&(P[J]=(P[J]||0)+1)}),Object.keys(v).map(I=>{const Y=v[I]||0,J=P[I]||0;return{label:`${W(I)} (${J}/${Y})`,value:I}})}),$=D(()=>{const v=["LC","NT","EN","VU","CR","RE","DD"],A={};Gt.value.forEach(Y=>{const J=Y.RL2020kat;v.includes(J)?A[J]=(A[J]||0)+1:J===null||J==="0"||J===0||String(J).toUpperCase()==="NE"?A["Ej bedömd"]=(A["Ej bedömd"]||0)+1:String(J).toUpperCase()==="NA"&&(A["Ej tillämplig"]=(A["Ej tillämplig"]||0)+1),Y.SIGNAL_art==="S"&&(A.Signalart=(A.Signalart||0)+1)});const P=u.value?.tableApi?.getFilteredRowModel()?.rows||[],I={};return P.forEach(Y=>{const J=Y.original,he=J.RL2020kat;v.includes(he)?I[he]=(I[he]||0)+1:he===null||he==="0"||he===0||String(he).toUpperCase()==="NE"?I["Ej bedömd"]=(I["Ej bedömd"]||0)+1:String(he).toUpperCase()==="NA"&&(I["Ej tillämplig"]=(I["Ej tillämplig"]||0)+1),J.SIGNAL_art==="S"&&(I.Signalart=(I.Signalart||0)+1)}),[...v.map(Y=>{const J=A[Y]||0,he=I[Y]||0;return{label:`${te(Y)} (${he}/${J})`,value:Y}}),(()=>{const Y=A["Ej bedömd"]||0;return{label:`Ej bedömd (${I["Ej bedömd"]||0}/${Y})`,value:"Ej bedömd"}})(),(()=>{const Y=A["Ej tillämplig"]||0;return{label:`Ej tillämplig (${I["Ej tillämplig"]||0}/${Y})`,value:"Ej tillämplig"}})(),(()=>{const Y=A.Signalart||0;return{label:`Signalart (${I.Signalart||0}/${Y})`,value:"Signalart"}})()]}),_=q({pageIndex:0,pageSize:10}),y=Wr();function w(v,A){y.selectSpecies(v.original,"edna")}const W=v=>v?v.charAt(0).toUpperCase()+v.slice(1).toLowerCase():"",j=D(()=>E.value.length>0?E.value[0].sample_env_count:0),Q=v=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[v]||"default-icon.webp"}`,O=v=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[v]||"neutral",te=v=>{const A={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return v===null||v===0||String(v).toUpperCase()==="NE"?"Ej bedömd":String(v).toUpperCase()==="NA"?"Ej tillämplig":A[v]||"Ej bedömd"},ie=l.obs.startsWith("Rank"),pe=q(ie?[{id:l.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:l.obs,desc:!0}]),se=It,re=yu,xe=Ve,Le=Nu,Be=Hi,Pe=[{accessorKey:"images",header:"Bild",sortable:!1,cell:({row:v})=>{const A=v.getValue("images")||[];return A.length?ee("img",{src:A[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:v.original?.Commonname?`${v.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:v})=>{const A=v.getIsSorted();return ee(xe,{color:"neutral",variant:"ghost",label:"Namn",icon:A?A==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>v.toggleSorting(A==="asc")})},cell:({row:v})=>ee("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},W(v.getValue("Commonname"))),filterFn:(v,A,P)=>{if(!P)return!0;const I=String(P).toLowerCase(),Y=String(v.getValue("Commonname")||"").toLowerCase(),J=String(v.getValue("Scientificname")||"").toLowerCase();return Y.includes(I)||J.includes(I)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:v})=>{const A=v.getIsSorted();return ee(xe,{color:"neutral",variant:"ghost",label:"Latinskt namn",icon:A?A==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>v.toggleSorting(A==="asc")})},cell:({row:v})=>ee("div",{class:"truncate  text-[16px]"},v.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:l.grupp,header:()=>ee(Le,{items:R.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>ee(xe,{label:"Grupp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(v,A,P)=>!P||P.length===0?!0:P.includes(v.getValue(A)),cell:({row:v})=>{const A=v.getValue(l.grupp);return A!=="Saknas"?ee("img",{src:Q(A),alt:`${A||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):ee(Be,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:l.dataType!=="edna",header:()=>ee(Le,{items:g.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>ee(xe,{label:"Mark",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(v,A,P)=>{if(!P||P.length===0)return!0;let I=!1;return P.includes("KALKmark")&&v.original.KALKmark&&(I=!0),P.includes("ANNANmark")&&v.original.ANNANmark&&(I=!0),I},cell:({row:v})=>ee("div",{class:"flex items-center space-x-1"},[v.original.KALKmark&&ee(se,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),v.original.ANNANmark&&ee(se,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:l.mat,header:()=>ee(Le,{items:S.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>ee(xe,{label:"Matsvamp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(v,A,P)=>{if(!P||P.length===0)return!0;let I=!1;return P.includes("Matsvamp")&&(l.mat==="Nyasvamp-boken"?I=I||v.getValue(A)?.toLowerCase()==="x":I=I||v.getValue(A)===1),P.includes("Giftsvamp")&&(I=I||(v.original.Giftsvamp||"").toLowerCase()==="x"),I},cell:({row:v})=>ee("div",{class:"flex gap-1"},[(l.mat==="Nyasvamp-boken"?v.getValue(l.mat)?.toLowerCase()==="x":v.getValue(l.mat)===1)&&ee(se,{color:"warning",variant:"subtle"},()=>"Matsvamp"),v.original.Giftsvamp?.toLowerCase()==="x"&&ee(se,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>ee(Le,{items:T.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>ee(xe,{label:"Status",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(v,A,P)=>{if(!P||P.length===0)return!0;const I=v.getValue(A);return P.some(Y=>Y==="Ej bedömd"?I===null||I===0||I==="0"||String(I).toUpperCase()==="NE":Y==="Ej tillämplig"?String(I).toUpperCase()==="NA":Y==="Signalart"?v.original.SIGNAL_art==="S":Y===I)},cell:({row:v})=>{const A=v.getValue("RL2020kat"),P=ee(se,{color:O(A),variant:"subtle"},()=>te(A)),I=v.original.SIGNAL_art==="S"?ee(se,{color:"signal",variant:"subtle"},"Signalart"):null;return ee("div",{class:"flex gap-1"},[P,I].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:l.obs,header:({column:v})=>{const A=v.getIsSorted();return ee(xe,{color:"neutral",variant:"ghost",label:l.obsLabel,icon:A?A==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>v.toggleSorting(A==="asc")})},cell:({row:v})=>{const A=v.getValue(l.obs);return l.obs.startsWith("Rank")?A===3?ee("span",{class:"text-red-700"},"Sällsynt"):A===2?ee("span",{class:"text-yellow-600"},"Ovanlig"):null:ee(se,{variant:"subtle",color:"secondary"},()=>`${A} skogar`)},meta:{headerText:l.obsLabel}}],He=[{header:"Namn",cell:({row:v})=>{const A=v.original.images||[];let P=null;const I=l.filterPoison?v.original["Rank giftsvamp"]:l.filterEdible?v.original["Rank matsvamp"]:v.original.RankRed;I===3?P=ee(Be,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):I===2&&(P=ee(Be,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const Y=A.length?ee("img",{src:A[0],alt:v.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):ee("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[ee("img",{src:Q(v.original[l.grupp]),alt:`${v.original[l.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),J=ee("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[ee("div",{class:"flex-1 min-w-0"},[ee("div",{class:"text-lg font-semibold whitespace-normal break-words"},[W(v.original.Commonname),P]),ee("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},v.original.Scientificname)])]),he=v.original[l.mat];(l.mat==="Nyasvamp-boken"?he&&String(he).toLowerCase()==="x":he===1)&&ee(se,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const Fe=ee("div",{class:"flex flex-wrap gap-2 mt-2 "},[v.original.RL2020kat!=="LC"&&v.original.RL2020kat!=="NA"&&v.original.RL2020kat!=="NE"&&v.original.RL2020kat!=="0"?ee(se,{color:O(v.original.RL2020kat),variant:"subtle",size:"md"},()=>te(v.original.RL2020kat)):null,v.original.SIGNAL_art==="S"?ee(se,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,l.dataType==="edna"?ee(re,{modelValue:v.getValue(l.obs),max:j.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return ee("div",{class:"flex space-x-4 items-start"},[Y,ee("div",{class:"flex flex-col flex-1"},[J,Fe])])},meta:{headerText:"Namn"}},...Pe.map(v=>v.accessorKey==="mark"?{...v,enableHiding:l.dataType!=="edna"}:v)],je=D(()=>r.value?He:Pe),z=D(()=>({thead:r.value?"hidden":"hidden md:table-header-group bg-neutral-50 dark:bg-neutral-800/40",tbody:r.value?"divide-none":"divide-none md:divide-dotted",td:r.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),ne=q(0),ae=q(0),E=q([]),be=q(!0),ge=q([]),Re=(v,A,P)=>{const I=(A[0]-v[0])/(P-1),Y=(A[1]-v[1])/(P-1),J=(A[2]-v[2])/(P-1),he=[];for(let F=0;F<P;F++){const Fe=Math.round(v[0]+I*F),Ae=Math.round(v[1]+Y*F),iu=Math.round(v[2]+J*F);he.push(`rgb(${Fe}, ${Ae}, ${iu})`)}return he},Se=()=>{E.value=[],ne.value=0,ae.value=0,ge.value=[]},st=async()=>{if([Me.geography,Me.forestType,Me.standAge,Me.vegetationType].some(P=>!P)){Se(),be.value=!1;return}if(l.dataTypeFolder==="edna"&&!Gi(Me.geography,Me.forestType,Me.standAge,Me.vegetationType)){Se(),be.value=!1;return}const A=`${l.dataType}-${Me.geography}-${Me.forestType}-${Me.standAge}-${Me.vegetationType}.json`;try{const P=await fetch(`/${l.dataTypeFolder}/${A}`);if(!P.ok){if(P.status===404){Se(),be.value=!1;return}throw new Error(`Failed to fetch data from ${A}`)}E.value=await P.json(),be.value=!1,E.value.forEach((he,F)=>{he.colorIndex=F});const I=E.value.length;ne.value=Math.floor(I*.1),ae.value=I-ne.value;const Y=Re([82,82,82],[212,212,212],ne.value),J=Gn(ae.value);ge.value=[...Y,...J]}catch(P){console.error("Error fetching data:",P),Se(),be.value=!1}};function Gn(v){const A=[];for(let Y=0;Y<v;Y++){const J=45+300/(v-1||1)*Y;A.push(`hsl(${J%360}, 70%, 50%)`)}return A}const Me=yt();me(()=>[Me.geography,Me.forestType,Me.standAge,Me.vegetationType],()=>{be.value=!0,st()},{immediate:!0});const $a=q(""),Gt=D(()=>{let v=E.value;return $a.value&&(v=v.filter(A=>Object.values(A).some(P=>String(P).toLowerCase().includes($a.value.toLowerCase())))),l.filterEdible?v=v.filter(A=>{const P=A[l.mat];return P&&String(P).toLowerCase()==="x"}):l.filterPoison&&(v=v.filter(A=>{const P=A[l.mat];return!(P&&String(P).toLowerCase()==="x")})),v}),eu=D(()=>Gt.value);me(b,v=>{let A=v==="Alla"?qn.value||E.value.length:Number(v);_.value.pageSize=A,_.value.pageIndex=0,u.value?.tableApi&&(u.value.tableApi.setPageSize(A),u.value.tableApi.setPageIndex(0))});const tu=D(()=>u.value?.tableApi?.getPaginationRowModel().rows||[]),Yn=D(()=>u.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),nu=D(()=>Yn.value.pageIndex*Yn.value.pageSize+1),ru=D(()=>{const v=Yn.value.pageIndex*Yn.value.pageSize+tu.value.length;return v>qn.value?qn.value:v}),qn=D(()=>u.value?.tableApi?.getFilteredRowModel()?.rows.length||0),Na=D(()=>{const v=l.searchTerm?[{id:"Commonname",value:l.searchTerm}]:[];return m.value&&m.value.length>0&&v.push({id:l.mat,value:m.value}),x.value&&x.value.length>0&&v.push({id:"RL2020kat",value:x.value}),k.value&&k.value.length>0&&v.push({id:l.grupp,value:k.value}),f.value&&f.value.length>0&&v.push({id:"mark",value:f.value}),v});return me(Na,v=>{u.value?.tableApi&&u.value.tableApi.setColumnFilters(v)}),me(Na,v=>{const P=v.find(F=>F.id===l.mat)?.value??[];i("update:matsvampFilter",P.includes("Matsvamp")),i("update:giftsvampFilter",P.includes("Giftsvamp"));const Y=v.find(F=>F.id===l.grupp)?.value??[];i("update:gruppFilter",Y);const he=v.find(F=>F.id==="RL2020kat")?.value??[];i("update:statusFilter",he)},{deep:!0,immediate:!0}),(v,A)=>{const P=os,I=rs,Y=Eu,J=ss,he=is;return C(),V("div",Ic,[N("div",Oc,[r.value?G("",!0):(C(),V("div",Uc,[N("div",Wc,[L(P,{"model-value":B(u)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":A[0]||(A[0]=F=>{B(u)?.tableApi?.getColumn("Commonname")?.setFilterValue(F),s(F)}),variant:"soft"},null,8,["model-value"]),N("div",Hc,[N("div",Gc,[f.value.length?(C(!0),V(Ge,{key:0},nt(f.value,F=>(C(),V("span",{key:"mark-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:F==="KALKmark"?"kalkmark":F==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>f.value=f.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(F==="KALKmark"?"Kalkmark":F==="ANNANmark"?"Vanlig skogsmark":W(F)),1)]),_:2},1032,["color","onClick"])]))),128)):G("",!0),m.value.length?(C(!0),V(Ge,{key:1},nt(m.value,F=>(C(),V("span",{key:"svamp-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:F==="Matsvamp"?"warning":F==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>m.value=m.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(W(F)),1)]),_:2},1032,["color","onClick"])]))),128)):G("",!0),k.value.length?(C(!0),V(Ge,{key:2},nt(k.value,F=>(C(),V("span",{key:"grupp-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>k.value=k.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(W(F)),1)]),_:2},1032,["onClick"])]))),128)):G("",!0),x.value.length?(C(!0),V(Ge,{key:3},nt(x.value,F=>(C(),V("span",{key:"status-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:F==="Signalart"?"signal":O(F),class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>x.value=x.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(F==="Signalart"?"Signalart":te(F)),1)]),_:2},1032,["color","onClick"])]))),128)):G("",!0)]),r.value?G("",!0):(C(),X(B(Le),{key:0,class:"flex",items:B(u)?.tableApi?.getAllColumns()?.filter(F=>F.getCanHide())?.map(F=>({label:F.columnDef.meta?.headerText||B(xu)(F.id),type:"checkbox",checked:F.getIsVisible(),onUpdateChecked(Fe){B(u)?.tableApi?.getColumn(F.id)?.toggleVisibility(!!Fe)},onSelect(Fe){Fe?.preventDefault()}})),content:{align:"end"}},{default:H(()=>[L(B(xe),{label:"Kolumner",color:"neutral",variant:"soft","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),e.isNormalView?G("",!0):(C(),V("div",Yc,[L(I,{modelValue:b.value,"onUpdate:modelValue":A[1]||(A[1]=F=>b.value=F),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"soft"},null,8,["modelValue"])]))])])])),r.value?(C(),V("div",qc,[f.value.length?(C(!0),V(Ge,{key:0},nt(f.value,F=>(C(),V("span",{key:"mark-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:F==="KALKmark"?"kalkmark":F==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>f.value=f.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(F==="KALKmark"?"Kalkmark":F==="ANNANmark"?"Vanlig skogsmark":W(F)),1)]),_:2},1032,["color","onClick"])]))),128)):G("",!0),m.value.length?(C(!0),V(Ge,{key:1},nt(m.value,F=>(C(),V("span",{key:"svamp-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:F==="Matsvamp"?"warning":F==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>m.value=m.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(W(F)),1)]),_:2},1032,["color","onClick"])]))),128)):G("",!0),k.value.length?(C(!0),V(Ge,{key:2},nt(k.value,F=>(C(),V("span",{key:"grupp-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>k.value=k.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(W(F)),1)]),_:2},1032,["onClick"])]))),128)):G("",!0),x.value.length?(C(!0),V(Ge,{key:3},nt(x.value,F=>(C(),V("span",{key:"status-"+F},[L(B(se),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:F==="Signalart"?"signal":O(F),class:"cursor-pointer mb-2 md:mb-0",onClick:Fe=>x.value=x.value.filter(Ae=>Ae!==F)},{default:H(()=>[fe(oe(F==="Signalart"?"Signalart":te(F)),1)]),_:2},1032,["color","onClick"])]))),128)):G("",!0)])):G("",!0)]),r.value?(C(),V("div",jc,[L(B(Le),{size:B(n)?"xl":"md",items:M.value,content:{align:"start"}},{default:H(()=>[L(B(xe),{variant:(B(n),"soft"),icon:"i-lucide-arrow-up-down",size:B(n)?"xl":"md",label:B(n)?null:"Sortera",color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),L(B(Le),{size:B(n)?"xl":"md",items:Z.value,content:{align:"start"}},{default:H(()=>[L(B(xe),{variant:(B(n),"soft"),icon:"i-lucide-list-filter",size:B(n)?"xl":"md",label:B(n)?null:"Filter",color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),L(P,{variant:(B(n),"soft"),"model-value":B(u)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:B(n)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":A[2]||(A[2]=F=>{B(u)?.tableApi?.getColumn("Commonname")?.setFilterValue(F),s(F)})},null,8,["variant","model-value","size"])])):G("",!0),Gt.value?(C(),V("div",{key:1,class:Ce([(e.isNormalView,"")])},[N("div",Xc,[L(Y,{ref_key:"table",ref:u,"column-visibility":d.value,"onUpdate:columnVisibility":A[3]||(A[3]=F=>d.value=F),pagination:_.value,"onUpdate:pagination":A[4]||(A[4]=F=>_.value=F),data:eu.value,columns:je.value,sticky:"",loading:be.value,sorting:pe.value,"onUpdate:sorting":A[5]||(A[5]=F=>pe.value=F),onSelect:w,autoResetAll:!0,"pagination-options":B(n)&&!e.isNormalView?!1:e.isNormalView?void 0:{getPaginationRowModel:B(Mu)()},class:Ce([{"":e.isNormalView},"rounded-sm"]),ui:z.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),r.value?G("",!0):(C(),V("div",Kc,[N("div",Zc,[N("h1",Qc,[A[8]||(A[8]=fe(" Visar ",-1)),N("span",Jc,"  "+oe(nu.value)+" till  ",1),fe(" "+oe(ru.value)+" av "+oe(qn.value)+" arter ",1)]),e.isNormalView?(C(),X(B(xe),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:A[6]||(A[6]=F=>i("enlarge"))})):G("",!0)]),N("div",null,[!e.isNormalView&&b.value!=="Alla"&&!B(n)?(C(),V("div",ed,[N("div",td,[L(J,{"active-variant":"ghost",variant:"ghost","default-page":(B(u)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":B(u)?.tableApi?.getState().pagination.pageSize,total:B(u)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":A[7]||(A[7]=F=>B(u)?.tableApi?.setPageIndex(F-1))},null,8,["default-page","items-per-page","total"])])])):G("",!0)])]))])],2)):(C(),V("div",nd,[N("div",rd,[L(he,{class:"h-4 w-full rounded"}),L(he,{class:"h-4 w-[85%] rounded"})])]))])}}},Hr=Qe(id,[["__scopeId","data-v-9024b0c9"]]),ad={class:"p-2 flex gap-2"},od={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},sd=["onClick"],ld={class:"w-full h-24 relative"},ud=["src"],cd={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},dd={class:"absolute bottom-1 left-1 flex gap-1"},fd={class:"p-2 pt-1"},hd={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},gd={class:"flex justify-between items-center px-5 py-2"},Yi={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(e){const t=q([]),n=q([]),r=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],i=e,a=yt(),o=Wr(),s=q([]),l=q(!0);async function u(){const{geography:$,forestType:_,standAge:y,vegetationType:w}=a,W=`${i.dataType}-${$}-${_}-${y}-${w}.json`;try{const j=await fetch(`/${i.dataTypeFolder}/${W}`);if(!j.ok)throw new Error(`Failed to fetch data from ${W}`);s.value=await j.json(),l.value=!1}catch(j){console.error("Error fetching species data:",j)}}me(()=>[a.geography,a.forestType,a.standAge,a.vegetationType],()=>{l.value=!0,u()},{immediate:!0});const c=q({column:"",direction:"asc"}),d=D(()=>{let $=s.value.slice();if(c.value?.column){const{column:_,direction:y}=c.value;$.sort((w,W)=>{const j=w[_],Q=W[_];if(j==null&&Q!=null)return 1;if(j!=null&&Q==null)return-1;if(j==null&&Q==null)return 0;const O=String(j).localeCompare(String(Q),"sv",{numeric:!0,sensitivity:"base"});return y==="asc"?O:-O})}else $.sort((_,y)=>{const w=_.RankRed??99999,W=y.RankRed??99999;if(w!==W)return w-W;const j=_.Commonname?.toString().toLowerCase()||"",Q=y.Commonname?.toString().toLowerCase()||"";return j.localeCompare(Q,"sv",{numeric:!0,sensitivity:"base"})});return $}),f=q(""),h=D(()=>{let $=d.value;if(f.value.trim()!==""){const _=f.value.trim().toLowerCase();$=$.filter(y=>y.Commonname&&y.Commonname.toLowerCase().includes(_)||y.Scientificname&&y.Scientificname.toLowerCase().includes(_))}return i.filterEdible?$=$.filter(_=>{const y=_["Nyasvamp-boken"];return y&&String(y).toLowerCase()==="x"}):i.filterPoison&&($=$.filter(_=>{const y=_["Nyasvamp-boken"];return!(y&&String(y).toLowerCase()==="x")})),$}),g=D(()=>r.map($=>{let _=0;return $.value==="Ej bedömd"?_=h.value.filter(y=>{const w=String(y.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(w)}).length:$.value==="Signalart"?_=h.value.filter(y=>y.SIGNAL_art==="S").length:_=h.value.filter(y=>String(y.RL2020kat).trim()===$.value).length,{...$,label:`${$.label} (${_})`}})),p=D(()=>{const $={};return h.value.forEach(_=>{const y=_[i.grupp];if(y!=null){const w=String(y).trim();w&&w.toLowerCase()!=="undefined"&&($[w]=($[w]||0)+1)}}),Object.keys($).map(_=>({value:_,label:`${M(_)} (${$[_]})`}))}),b=D(()=>{let $=d.value;if(f.value.trim()!==""){const _=f.value.trim().toLowerCase();$=$.filter(y=>y.Commonname&&y.Commonname.toLowerCase().includes(_)||y.Scientificname&&y.Scientificname.toLowerCase().includes(_)),console.log("After search filtering, count:",$.length)}return t.value.length>0&&(console.log("Status filter values:",t.value),$=$.filter(_=>{const y=String(_.RL2020kat).trim(),w=t.value.some(W=>{const j=W&&W.value?W.value:W;return j==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(y):j==="Signalart"?_.SIGNAL_art==="S":y===j});return console.log(`Row "${_.Commonname}" with RL2020kat "${y}" matches:`,w),w}),console.log("After status filtering, count:",$.length)),n.value.length>0&&($=$.filter(_=>{const y=_[i.grupp],w=y!=null?String(y).trim():"";return n.value.includes(w)})),i.filterEdible?($=$.filter(_=>{const y=_["Nyasvamp-boken"];return y&&String(y).toLowerCase()==="x"}),console.log("After edible filtering, count:",$.length)):i.filterPoison&&($=$.filter(_=>{const y=_["Nyasvamp-boken"];return!(y&&String(y).toLowerCase()==="x")}),console.log("After poison filtering, count:",$.length)),console.log("Final filteredData count:",$.length),$}),m=D(()=>i.isNormalView?24:32),x=q(1),k=D(()=>{const $=(x.value-1)*m.value;return b.value.slice($,$+m.value)}),R=D(()=>b.value.length>0?(x.value-1)*m.value+1:0),S=D(()=>Math.min(x.value*m.value,b.value.length)),T=D(()=>b.value.length);D(()=>Math.ceil(T.value/m.value));function M($){return $?$.charAt(0).toUpperCase()+$.slice(1).toLowerCase():""}function Z($){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[$]||"Ej bedömd"}function K($){o.selectSpecies($,i.dataTypeFolder)}return($,_)=>{const y=os,w=rs,W=Hi,j=It,Q=ss;return C(),V(Ge,null,[N("div",ad,[L(y,{icon:"i-heroicons-magnifying-glass",modelValue:f.value,"onUpdate:modelValue":_[0]||(_[0]=O=>f.value=O),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),L(w,{modelValue:t.value,"onUpdate:modelValue":_[1]||(_[1]=O=>t.value=O),items:g.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),L(w,{modelValue:n.value,"onUpdate:modelValue":_[2]||(_[2]=O=>n.value=O),items:p.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),N("div",od,[(C(!0),V(Ge,null,nt(k.value,(O,te)=>(C(),V("div",{key:O.Commonname+O.Scientificname+te,class:"bg-white dark:bg-neutral-800 rounded-sm border overflow-hidden border-neutral-200 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:ie=>K(O)},[N("div",ld,[O.images&&O.images.length?(C(),V("img",{key:0,src:O.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,ud)):(C(),V("div",cd,[L(W,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),N("div",dd,[O.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(O.RL2020kat)?(C(),X(j,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:O.RL2020kat!=="Saknas"?Z(O.RL2020kat):"Ej bedömd"},null,8,["label"])):G("",!0),O.SIGNAL_art==="S"?(C(),X(j,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):G("",!0)])]),N("div",fd,[N("div",hd,oe(M(O.Commonname)),1)])],8,sd))),128))]),N("div",gd,[N("div",null,[N("p",null," Visar "+oe(R.value)+" till "+oe(S.value)+" av "+oe(T.value)+" arter ",1)]),N("div",null,[L(Q,{"items-per-page":m.value,page:x.value,"onUpdate:page":_[3]||(_[3]=O=>x.value=O),total:T.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},Gr=_u("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:e=>t=>e.componentTabs[t]||"grid"},actions:{setActiveTab(e,t){this.componentTabs[e]=t}}}),pd={class:"md:flex justify-between items-start"},md={class:"md:flex gap-4"},vd={class:"w-full flex justify-between items-start"},bd={class:"text-md text-neutral-500 md:mb-2"},yd={class:"md:flex gap-4 items-center hidden"},xd={key:0},_d={key:1},kd={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(e,{emit:t}){const n=yt(),r=q(0);async function i(h,g,p,b=null){if([n.geography,n.forestType,n.standAge,n.vegetationType].some(k=>!k)){p.value=0;return}const x=`${g}-${n.geography}-${n.forestType}-${n.standAge}-${n.vegetationType}.json`;try{const k=await fetch(`/${h}/${x}`);if(!k.ok)throw new Error("Network response was not ok");const R=await k.json();p.value=b?R.filter(S=>S[b]==="x").length:R.length}catch{p.value=0}}me(()=>[n.geography,n.forestType,n.standAge,n.vegetationType],()=>i("edible","edibledata",r,"Giftsvamp"),{immediate:!0});const a=t,o=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],s=Gr(),l=e,u=Ot("(max-width: 767px)"),c=D(()=>u.value||l.isNormalView),d=D({get:()=>c.value?"table":s.getActiveTab("FullscreenEdible"),set:h=>{c.value||s.setActiveTab("FullscreenEdible",h)}}),f=D(()=>d.value==="table");return(h,g)=>{const p=Ve,b=It,m=Bn,x=Hr,k=Yi,R=sn;return C(),X(R,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:H(()=>[N("div",pd,[N("div",md,[N("div",vd,[N("div",null,[N("h1",{onClick:g[0]||(g[0]=S=>h.$emit("enlarge")),class:"text-lime-500 dark:text-neutral-300 text-4xl font-bold md:font-medium md:text-3xl cursor-default"}," Giftsvampar "),N("h2",bd,oe(r.value)+" arter",1)]),L(p,{color:"neutral",variant:"soft",size:"xl",onClick:g[1]||(g[1]=S=>h.$emit("enlarge")),class:Ce([e.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:e.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),N("div",yd,[e.isNormalView?G("",!0):(C(),X(b,{key:0,icon:"lineicons:mushroom-1",size:"lg",color:"tertiary",variant:"subtle",label:"Enligt samlad kunskap, främst var fruktkroppar förekommer",class:"h-fit hidden md:flex"})),c.value?G("",!0):(C(),X(m,{key:1,class:"flex mt-2",modelValue:d.value,"onUpdate:modelValue":g[2]||(g[2]=S=>d.value=S),items:o,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"])),L(p,{label:e.isNormalView?"Visa mer":"Tillbaka till översikt",color:"neutral",variant:"outline",size:"sm",onClick:g[3]||(g[3]=S=>h.$emit("enlarge")),class:"hidden md:flex ring-muted/60"},null,8,["label"])])]),L(Bt,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:H(()=>[f.value?(C(),V("div",xd,[L(x,{onEnlarge:g[4]||(g[4]=S=>a("enlarge")),"is-normal-view":e.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(C(),V("div",_d,[L(k,{"is-normal-view":e.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},ls=Qe(kd,[["__scopeId","data-v-b8566b99"]]),wd={class:"md:flex justify-between items-start"},Sd={class:"md:flex gap-4"},Cd={class:"w-full flex justify-between items-start"},Td={class:"text-md text-neutral-500 md:mb-2"},Ad={class:"md:flex gap-4 items-center hidden"},$d={key:0},Nd={key:1},Md={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(e,{emit:t}){const n=yt(),r=q(0);async function i(h,g,p,b=null){if([n.geography,n.forestType,n.standAge,n.vegetationType].some(k=>!k)){p.value=0;return}const x=`${g}-${n.geography}-${n.forestType}-${n.standAge}-${n.vegetationType}.json`;try{const k=await fetch(`/${h}/${x}`);if(!k.ok)throw new Error("Network response was not ok");const R=await k.json();p.value=b?R.filter(S=>S[b]==="x").length:R.length}catch(k){console.error("Failed to fetch edible count",k),p.value=0}}me(()=>[n.geography,n.forestType,n.standAge,n.vegetationType],()=>i("edible","edibledata",r,"Nyasvamp-boken"),{immediate:!0});const a=t,o=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],s=Gr(),l=e,u=Ot("(max-width: 767px)"),c=D(()=>u.value||l.isNormalView),d=D({get:()=>c.value?"table":s.getActiveTab("FullscreenEdible"),set:h=>{c.value||s.setActiveTab("FullscreenEdible",h)}}),f=D(()=>d.value==="table");return(h,g)=>{const p=Ve,b=It,m=Bn,x=Hr,k=Yi,R=sn;return C(),V("div",null,[L(R,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:H(()=>[N("div",wd,[N("div",Sd,[N("div",Cd,[N("div",null,[N("h1",{onClick:g[0]||(g[0]=S=>h.$emit("enlarge")),class:"text-yellow-500 dark:text-neutral-300 text-4xl md:text-3xl font-bold md:font-medium"}," Matsvampar "),N("h2",Td,oe(r.value)+" arter",1)]),L(p,{color:"neutral",variant:"soft",size:"xl",onClick:g[1]||(g[1]=S=>h.$emit("enlarge")),class:Ce([e.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:e.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])])]),N("div",Ad,[e.isNormalView?G("",!0):(C(),X(b,{key:0,icon:"lineicons:mushroom-1",size:"lg",color:"tertiary",variant:"subtle",label:"Enligt samlad kunskap, främst var fruktkroppar förekommer",class:"h-fit hidden md:flex"})),c.value?G("",!0):(C(),X(m,{key:1,class:"flex mt-2",modelValue:d.value,"onUpdate:modelValue":g[2]||(g[2]=S=>d.value=S),items:o,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"])),L(p,{label:e.isNormalView?"Visa mer":"Tillbaka till översikt",color:"neutral",variant:"outline",size:"md",onClick:g[3]||(g[3]=S=>h.$emit("enlarge")),class:"hidden md:flex"},null,8,["label"])])]),L(Bt,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:H(()=>[f.value?(C(),V("div",$d,[L(x,{onEnlarge:g[4]||(g[4]=S=>a("enlarge")),"is-normal-view":e.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(C(),V("div",Nd,[L(k,{"is-normal-view":e.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},us=Qe(Md,[["__scopeId","data-v-e6919e31"]]),Ed={class:"md:flex justify-between items-start"},Ld={class:"md:flex gap-4"},Rd={class:"w-full flex justify-between items-start"},Fd={class:"text-md text-neutral-500 md:mb-2"},Dd={class:"md:flex gap-4 items-center hidden"},Bd={key:0},Pd={key:1},Vd={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(e,{emit:t}){const n=yt(),r=q(0);async function i(h,g,p,b=null){if([n.geography,n.forestType,n.standAge,n.vegetationType].some(k=>!k)){p.value=0;return}const x=`${g}-${n.geography}-${n.forestType}-${n.standAge}-${n.vegetationType}.json`;try{const k=await fetch(`/${h}/${x}`);if(!k.ok)throw new Error("Network response was not ok");const R=await k.json();p.value=b?R.filter(S=>S[b]==="x").length:R.length}catch(k){console.error("Failed to fetch count for",g,k),p.value=0}}me(()=>[n.geography,n.forestType,n.standAge,n.vegetationType],()=>i("redlisted","redlisted",r),{immediate:!0});const a=t,o=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],s=e,l=Ot("(max-width: 767px)"),u=D(()=>l.value||s.isNormalView),c=Gr(),d=D({get:()=>u.value?"table":c.getActiveTab("FullscreenEdible"),set:h=>{u.value||c.setActiveTab("FullscreenEdible",h)}}),f=D(()=>d.value==="table");return(h,g)=>{const p=Ve,b=It,m=Bn,x=Hr,k=Yi,R=sn;return C(),X(R,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:H(()=>[N("div",Ed,[N("div",Ld,[N("div",Rd,[N("div",null,[N("h1",{onClick:g[0]||(g[0]=S=>h.$emit("enlarge")),class:"text-teal-500 dark:text-neutral-300 text-4xl font-bold md:font-medium md:text-3xl"}," Naturvårdsarter "),N("h2",Fd,oe(r.value)+" arter",1)]),L(p,{color:"neutral",variant:"soft",size:"xl",onClick:g[1]||(g[1]=S=>h.$emit("enlarge")),class:Ce([e.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:e.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),N("div",Dd,[e.isNormalView?G("",!0):(C(),X(b,{key:0,icon:"lineicons:mushroom-1",size:"lg",color:"tertiary",variant:"subtle",label:"Enligt samlad kunskap, främst var fruktkroppar förekommer",class:"h-fit hidden md:flex"})),u.value?G("",!0):(C(),X(m,{key:1,class:"flex mt-2",modelValue:d.value,"onUpdate:modelValue":g[2]||(g[2]=S=>d.value=S),items:o,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"])),L(p,{label:e.isNormalView?"Visa mer":"Tillbaka till översikt",color:"neutral",variant:"outline",size:"md",onClick:g[3]||(g[3]=S=>h.$emit("enlarge")),class:"hidden md:flex"},null,8,["label"])])]),L(Bt,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:H(()=>[f.value?(C(),V("div",Bd,[L(x,{onEnlarge:g[4]||(g[4]=S=>a("enlarge")),"is-normal-view":e.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(C(),V("div",Pd,[L(k,{"is-normal-view":e.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},cs=Qe(Vd,[["__scopeId","data-v-82c36803"]]);var xi="http://www.w3.org/1999/xhtml";const Ra={svg:"http://www.w3.org/2000/svg",xhtml:xi,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Yr(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),Ra.hasOwnProperty(t)?{space:Ra[t],local:e}:e}function zd(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===xi&&t.documentElement.namespaceURI===xi?t.createElement(e):t.createElementNS(n,e)}}function Id(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function ds(e){var t=Yr(e);return(t.local?Id:zd)(t)}function Od(){}function qi(e){return e==null?Od:function(){return this.querySelector(e)}}function Ud(e){typeof e!="function"&&(e=qi(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=new Array(o),l,u,c=0;c<o;++c)(l=a[c])&&(u=e.call(l,l.__data__,c,a))&&("__data__"in l&&(u.__data__=l.__data__),s[c]=u);return new We(r,this._parents)}function Wd(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Hd(){return[]}function fs(e){return e==null?Hd:function(){return this.querySelectorAll(e)}}function Gd(e){return function(){return Wd(e.apply(this,arguments))}}function Yd(e){typeof e=="function"?e=Gd(e):e=fs(e);for(var t=this._groups,n=t.length,r=[],i=[],a=0;a<n;++a)for(var o=t[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&(r.push(e.call(l,l.__data__,u,o)),i.push(l));return new We(r,i)}function hs(e){return function(){return this.matches(e)}}function gs(e){return function(t){return t.matches(e)}}var qd=Array.prototype.find;function jd(e){return function(){return qd.call(this.children,e)}}function Xd(){return this.firstElementChild}function Kd(e){return this.select(e==null?Xd:jd(typeof e=="function"?e:gs(e)))}var Zd=Array.prototype.filter;function Qd(){return Array.from(this.children)}function Jd(e){return function(){return Zd.call(this.children,e)}}function ef(e){return this.selectAll(e==null?Qd:Jd(typeof e=="function"?e:gs(e)))}function tf(e){typeof e!="function"&&(e=hs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new We(r,this._parents)}function ps(e){return new Array(e.length)}function nf(){return new We(this._enter||this._groups.map(ps),this._parents)}function yr(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}yr.prototype={constructor:yr,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function rf(e){return function(){return e}}function af(e,t,n,r,i,a){for(var o=0,s,l=t.length,u=a.length;o<u;++o)(s=t[o])?(s.__data__=a[o],r[o]=s):n[o]=new yr(e,a[o]);for(;o<l;++o)(s=t[o])&&(i[o]=s)}function of(e,t,n,r,i,a,o){var s,l,u=new Map,c=t.length,d=a.length,f=new Array(c),h;for(s=0;s<c;++s)(l=t[s])&&(f[s]=h=o.call(l,l.__data__,s,t)+"",u.has(h)?i[s]=l:u.set(h,l));for(s=0;s<d;++s)h=o.call(e,a[s],s,a)+"",(l=u.get(h))?(r[s]=l,l.__data__=a[s],u.delete(h)):n[s]=new yr(e,a[s]);for(s=0;s<c;++s)(l=t[s])&&u.get(f[s])===l&&(i[s]=l)}function sf(e){return e.__data__}function lf(e,t){if(!arguments.length)return Array.from(this,sf);var n=t?of:af,r=this._parents,i=this._groups;typeof e!="function"&&(e=rf(e));for(var a=i.length,o=new Array(a),s=new Array(a),l=new Array(a),u=0;u<a;++u){var c=r[u],d=i[u],f=d.length,h=uf(e.call(c,c&&c.__data__,u,r)),g=h.length,p=s[u]=new Array(g),b=o[u]=new Array(g),m=l[u]=new Array(f);n(c,d,p,b,m,h,t);for(var x=0,k=0,R,S;x<g;++x)if(R=p[x]){for(x>=k&&(k=x+1);!(S=b[k])&&++k<g;);R._next=S||null}}return o=new We(o,r),o._enter=s,o._exit=l,o}function uf(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function cf(){return new We(this._exit||this._groups.map(ps),this._parents)}function df(e,t,n){var r=this.enter(),i=this,a=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?a.remove():n(a),r&&i?r.merge(i).order():i}function ff(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,a=r.length,o=Math.min(i,a),s=new Array(i),l=0;l<o;++l)for(var u=n[l],c=r[l],d=u.length,f=s[l]=new Array(d),h,g=0;g<d;++g)(h=u[g]||c[g])&&(f[g]=h);for(;l<i;++l)s[l]=n[l];return new We(s,this._parents)}function hf(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,a=r[i],o;--i>=0;)(o=r[i])&&(a&&o.compareDocumentPosition(a)^4&&a.parentNode.insertBefore(o,a),a=o);return this}function gf(e){e||(e=pf);function t(d,f){return d&&f?e(d.__data__,f.__data__):!d-!f}for(var n=this._groups,r=n.length,i=new Array(r),a=0;a<r;++a){for(var o=n[a],s=o.length,l=i[a]=new Array(s),u,c=0;c<s;++c)(u=o[c])&&(l[c]=u);l.sort(t)}return new We(i,this._parents).order()}function pf(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function mf(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function vf(){return Array.from(this)}function bf(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length;i<a;++i){var o=r[i];if(o)return o}return null}function yf(){let e=0;for(const t of this)++e;return e}function xf(){return!this.node()}function _f(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],a=0,o=i.length,s;a<o;++a)(s=i[a])&&e.call(s,s.__data__,a,i);return this}function kf(e){return function(){this.removeAttribute(e)}}function wf(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Sf(e,t){return function(){this.setAttribute(e,t)}}function Cf(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Tf(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Af(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function $f(e,t){var n=Yr(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?wf:kf:typeof t=="function"?n.local?Af:Tf:n.local?Cf:Sf)(n,t))}function ms(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Nf(e){return function(){this.style.removeProperty(e)}}function Mf(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Ef(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Lf(e,t,n){return arguments.length>1?this.each((t==null?Nf:typeof t=="function"?Ef:Mf)(e,t,n??"")):Zt(this.node(),e)}function Zt(e,t){return e.style.getPropertyValue(t)||ms(e).getComputedStyle(e,null).getPropertyValue(t)}function Rf(e){return function(){delete this[e]}}function Ff(e,t){return function(){this[e]=t}}function Df(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Bf(e,t){return arguments.length>1?this.each((t==null?Rf:typeof t=="function"?Df:Ff)(e,t)):this.node()[e]}function vs(e){return e.trim().split(/^|\s+/)}function ji(e){return e.classList||new bs(e)}function bs(e){this._node=e,this._names=vs(e.getAttribute("class")||"")}bs.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function ys(e,t){for(var n=ji(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function xs(e,t){for(var n=ji(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Pf(e){return function(){ys(this,e)}}function Vf(e){return function(){xs(this,e)}}function zf(e,t){return function(){(t.apply(this,arguments)?ys:xs)(this,e)}}function If(e,t){var n=vs(e+"");if(arguments.length<2){for(var r=ji(this.node()),i=-1,a=n.length;++i<a;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?zf:t?Pf:Vf)(n,t))}function Of(){this.textContent=""}function Uf(e){return function(){this.textContent=e}}function Wf(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Hf(e){return arguments.length?this.each(e==null?Of:(typeof e=="function"?Wf:Uf)(e)):this.node().textContent}function Gf(){this.innerHTML=""}function Yf(e){return function(){this.innerHTML=e}}function qf(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function jf(e){return arguments.length?this.each(e==null?Gf:(typeof e=="function"?qf:Yf)(e)):this.node().innerHTML}function Xf(){this.nextSibling&&this.parentNode.appendChild(this)}function Kf(){return this.each(Xf)}function Zf(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Qf(){return this.each(Zf)}function Jf(e){var t=typeof e=="function"?e:ds(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function eh(){return null}function th(e,t){var n=typeof e=="function"?e:ds(e),r=t==null?eh:typeof t=="function"?t:qi(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function nh(){var e=this.parentNode;e&&e.removeChild(this)}function rh(){return this.each(nh)}function ih(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function ah(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function oh(e){return this.select(e?ah:ih)}function sh(e){return arguments.length?this.property("__data__",e):this.node().__data__}function lh(e){return function(t){e.call(this,t,this.__data__)}}function uh(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function ch(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,a;n<i;++n)a=t[n],(!e.type||a.type===e.type)&&a.name===e.name?this.removeEventListener(a.type,a.listener,a.options):t[++r]=a;++r?t.length=r:delete this.__on}}}function dh(e,t,n){return function(){var r=this.__on,i,a=lh(t);if(r){for(var o=0,s=r.length;o<s;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=a,i.options=n),i.value=t;return}}this.addEventListener(e.type,a,n),i={type:e.type,name:e.name,value:t,listener:a,options:n},r?r.push(i):this.__on=[i]}}function fh(e,t,n){var r=uh(e+""),i,a=r.length,o;if(arguments.length<2){var s=this.node().__on;if(s){for(var l=0,u=s.length,c;l<u;++l)for(i=0,c=s[l];i<a;++i)if((o=r[i]).type===c.type&&o.name===c.name)return c.value}return}for(s=t?dh:ch,i=0;i<a;++i)this.each(s(r[i],t,n));return this}function _s(e,t,n){var r=ms(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function hh(e,t){return function(){return _s(this,e,t)}}function gh(e,t){return function(){return _s(this,e,t.apply(this,arguments))}}function ph(e,t){return this.each((typeof t=="function"?gh:hh)(e,t))}function*mh(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,a=r.length,o;i<a;++i)(o=r[i])&&(yield o)}var ks=[null];function We(e,t){this._groups=e,this._parents=t}function Pn(){return new We([[document.documentElement]],ks)}function vh(){return this}We.prototype=Pn.prototype={constructor:We,select:Ud,selectAll:Yd,selectChild:Kd,selectChildren:ef,filter:tf,data:lf,enter:nf,exit:cf,join:df,merge:ff,selection:vh,order:hf,sort:gf,call:mf,nodes:vf,node:bf,size:yf,empty:xf,each:_f,attr:$f,style:Lf,property:Bf,classed:If,text:Hf,html:jf,raise:Kf,lower:Qf,append:Jf,insert:th,remove:rh,clone:oh,datum:sh,on:fh,dispatch:ph,[Symbol.iterator]:mh};function gt(e){return typeof e=="string"?new We([[document.querySelector(e)]],[document.documentElement]):new We([[e]],ks)}function bh(e){let t;for(;t=e.sourceEvent;)e=t;return e}function xr(e,t){if(e=bh(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}var wn;(function(e){e[e.SVG=0]="SVG",e[e.HTML=1]="HTML"})(wn||(wn={}));var Qt;(function(e){e.Fit="fit",e.Extend="extend",e.FitWidth="fit_width"})(Qt||(Qt={}));function Sn(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function yh(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function Xi(e){let t,n,r;e.length!==2?(t=Sn,n=(s,l)=>Sn(e(s),l),r=(s,l)=>e(s)-l):(t=e===Sn||e===yh?e:xh,n=e,r=e);function i(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<0?u=d+1:c=d}while(u<c)}return u}function a(s,l,u=0,c=s.length){if(u<c){if(t(l,l)!==0)return c;do{const d=u+c>>>1;n(s[d],l)<=0?u=d+1:c=d}while(u<c)}return u}function o(s,l,u=0,c=s.length){const d=i(s,l,u,c-1);return d>u&&r(s[d-1],l)>-r(s[d],l)?d-1:d}return{left:i,center:o,right:a}}function xh(){return 0}function ws(e){return e===null?NaN:+e}const Ss=Xi(Sn),Vn=Ss.right,_h=Ss.left;Xi(ws).center;function kh(e,t){let n,r;for(const i of e)i!=null&&(n===void 0?i>=i&&(n=r=i):(n>i&&(n=i),r<i&&(r=i)));return[n,r]}class Fa extends Map{constructor(t,n=Ch){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[r,i]of t)this.set(r,i)}get(t){return super.get(Da(this,t))}has(t){return super.has(Da(this,t))}set(t,n){return super.set(wh(this,t),n)}delete(t){return super.delete(Sh(this,t))}}function Da({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):n}function wh({_intern:e,_key:t},n){const r=t(n);return e.has(r)?e.get(r):(e.set(r,n),n)}function Sh({_intern:e,_key:t},n){const r=t(n);return e.has(r)&&(n=e.get(r),e.delete(r)),n}function Ch(e){return e!==null&&typeof e=="object"?e.valueOf():e}const Th=Math.sqrt(50),Ah=Math.sqrt(10),$h=Math.sqrt(2);function _r(e,t,n){const r=(t-e)/Math.max(0,n),i=Math.floor(Math.log10(r)),a=r/Math.pow(10,i),o=a>=Th?10:a>=Ah?5:a>=$h?2:1;let s,l,u;return i<0?(u=Math.pow(10,-i)/o,s=Math.round(e*u),l=Math.round(t*u),s/u<e&&++s,l/u>t&&--l,u=-u):(u=Math.pow(10,i)*o,s=Math.round(e/u),l=Math.round(t/u),s*u<e&&++s,l*u>t&&--l),l<s&&.5<=n&&n<2?_r(e,t,n*2):[s,l,u]}function _i(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const r=t<e,[i,a,o]=r?_r(t,e,n):_r(e,t,n);if(!(a>=i))return[];const s=a-i+1,l=new Array(s);if(r)if(o<0)for(let u=0;u<s;++u)l[u]=(a-u)/-o;else for(let u=0;u<s;++u)l[u]=(a-u)*o;else if(o<0)for(let u=0;u<s;++u)l[u]=(i+u)/-o;else for(let u=0;u<s;++u)l[u]=(i+u)*o;return l}function ki(e,t,n){return t=+t,e=+e,n=+n,_r(e,t,n)[2]}function wi(e,t,n){t=+t,e=+e,n=+n;const r=t<e,i=r?ki(t,e,n):ki(e,t,n);return(r?-1:1)*(i<0?1/-i:i)}function Si(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n<r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n<i||n===void 0&&i>=i)&&(n=i)}return n}function Cn(e,t){let n;if(t===void 0)for(const r of e)r!=null&&(n>r||n===void 0&&r>=r)&&(n=r);else{let r=-1;for(let i of e)(i=t(i,++r,e))!=null&&(n>i||n===void 0&&i>=i)&&(n=i)}return n}function Nh(e,t,n=ws){if(!(!(r=e.length)||isNaN(t=+t))){if(t<=0||r<2)return+n(e[0],0,e);if(t>=1)return+n(e[r-1],r-1,e);var r,i=(r-1)*t,a=Math.floor(i),o=+n(e[a],a,e),s=+n(e[a+1],a+1,e);return o+(s-o)*(i-a)}}function Mh(e,t){let n=0,r=0;if(t===void 0)for(let i of e)i!=null&&(i=+i)>=i&&(++n,r+=i);else{let i=-1;for(let a of e)(a=t(a,++i,e))!=null&&(a=+a)>=a&&(++n,r+=a)}if(n)return r/n}function*Eh(e){for(const t of e)yield*t}function Lh(e){return Array.from(Eh(e))}function Rh(e,t,n){e=+e,t=+t,n=(i=arguments.length)<2?(t=e,e=0,1):i<3?1:+n;for(var r=-1,i=Math.max(0,Math.ceil((t-e)/n))|0,a=new Array(i);++r<i;)a[r]=e+r*n;return a}function Fh(e,t){let n=0;if(t===void 0)for(let r of e)(r=+r)&&(n+=r);else{let r=-1;for(let i of e)(i=+t(i,++r,e))&&(n+=i)}return n}function Dh(e,t,n){var r={},i=r.noTrailing,a=i===void 0?!1:i,o=r.noLeading,s=o===void 0?!1:o,l=r.debounceMode,u=l===void 0?void 0:l,c,d=!1,f=0;function h(){c&&clearTimeout(c)}function g(b){var m=b||{},x=m.upcomingOnly,k=x===void 0?!1:x;h(),d=!k}function p(){for(var b=arguments.length,m=new Array(b),x=0;x<b;x++)m[x]=arguments[x];var k=this,R=Date.now()-f;if(d)return;function S(){f=Date.now(),t.apply(k,m)}function T(){c=void 0}!s&&u&&!c&&S(),h(),u===void 0&&R>e?s?(f=Date.now(),a||(c=setTimeout(u?T:S,e))):S():a!==!0&&(c=setTimeout(u?T:S,u===void 0?e-R:e))}return p.cancel=g,p}var ct;(function(e){e.Left="left",e.Right="right",e.Auto="auto"})(ct||(ct={}));const St=e=>typeof e=="number",Ki=e=>typeof e=="function",un=e=>Array.isArray(e),Bh=e=>e instanceof Object,kr=e=>e.constructor.name!=="Function"&&e.constructor.name!=="Object",Ba=e=>Bh(e)&&!un(e)&&!Ki(e)&&!kr(e),Ph=e=>[Object,Array].includes((e||{}).constructor)&&!Object.entries(e||{}).length,Pt=(e,t,n=[],r=new Set)=>{if(Array.isArray(e)){if(!Array.isArray(t)||e.length!==t.length)return!1;if(r.has(e))return!0;r.add(e);for(let i=0;i<e.length;i++)if(!Pt(e[i],t[i],n,r))return!1;return!0}if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(typeof e=="object"&&e!==null&&t!==null){if(typeof t!="object")return!1;if(e===t)return!0;const i=Object.keys(e).filter(o=>!n.includes(o)),a=Object.keys(t).filter(o=>!n.includes(o));if(i.length!==a.length)return!1;if(r.has(e))return!0;r.add(e);for(const o of i)if(!Pt(e[o],t[o],n,r))return!1;return!0}return e===t},Ci=e=>e.flat(),wr=(e,t=new Map)=>{if(typeof e!="object"||e===null)return e;if(e instanceof Date)return new Date(e.getTime());if(e instanceof Array){const n=[];t.set(e,n);for(const r of e)n.push(t.has(r)?t.get(r):wr(r,t));return n}if(kr(e))return e;if(e instanceof Object){const n={};t.set(e,n);const r=e;return Object.keys(e).reduce((i,a)=>(i[a]=t.has(r[a])?t.get(r[a]):wr(r[a],t),i),n),n}return e},Jt=(e,t,n=new Map)=>{if(!e||!t||e===t)return e;const r=kr(e)?e:wr(e);return n.has(t)?n.get(t):(n.set(t,r),Object.keys(t).forEach(i=>{i==="__proto__"||i==="constructor"||(Ba(e[i])&&Ba(t[i])?r[i]=Jt(e[i],t[i],n):kr(t)?r[i]=t:r[i]=wr(t[i]))}),r)},Sr=(e,t,n)=>Dh(t,e);function Cs(e,t,n){return Ki(t)?t(e,n):t}function Ti(e,t,n){return Cs(e,t,n)}function ye(e,t,n){return Cs(e,t,n)}function hn(e){return e.filter(t=>t&&!St(t))}function dt(e,t,n){return Math.min(Math.max(e,t),n)}function Vh(e,...t){if(!e)return[void 0,void 0];if(un(t)){let n=0,r=0;return e.forEach((i,a)=>{let o=0,s=0;for(const l of t){const u=ye(i,l,a)||0;u>=0?o+=u:s+=u}o>r&&(r=o),s<n&&(n=s)}),[n,r]}}function zh(e,t,...n){const r=[];let i=0,a=0;for(const o of n){const s=ye(e,o,t)||0;s>=0?r.push(i+=s):r.push(a+=s)}return r}function Ih(e,t,n,r){const i=e.map((s,l)=>ye(s,t,l)||0),a=n.map((s,l)=>{const u=Mh(e,(c,d)=>ye(c,s,d)||0);return u===0&&Array.isArray(r)?r[l]:u<0}),o=n.map(()=>[]);return e.forEach((s,l)=>{let u=i[l],c=i[l];n.forEach((d,f)=>{const h=ye(s,d,l)||0;h>=0?o[f].push([u,u+=h]):o[f].push([c,c+=h])})}),o.forEach((s,l)=>{s.isMostlyNegative=a[l]}),o}function Oh(e,...t){return e?Cn(e,(r,i)=>Cn(t,a=>ye(r,a,i))):void 0}function Uh(e,...t){return e?Si(e,(r,i)=>Si(t,a=>ye(r,a,i))):void 0}function rr(e,...t){return[Oh(e,...t),Uh(e,...t)]}function Cr(e,t,n,r=ct.Auto){if(e.length<=1)return e[0];const a=e.map((l,u)=>[l,u]).sort(([l,u],[c,d])=>ye(l,n,u)-ye(c,n,d)),o=a.map(([l,u])=>ye(l,n,u)),s=r===ct.Right?_h(o,t,0,e.length-1):Vn(o,t,1,e.length);return r===ct.Right?a[s][0]:r===ct.Left?a[s-1][0]:t-o[s-1]>o[s]-t?a[s][0]:a[s-1][0]}function Wh(e,t,n,r=!1){if(!n)return[];const i=e.filter((a,o)=>{const s=ye(a,n,o);return s>=t[0]&&s<=t[1]});if(r){if(i.length===0){const d=Cr(e,t[0],n,ct.Left),f=Cr(e,t[1],n,ct.Right);return[d,f].filter(Boolean)}const a=i[0],o=i[i.length-1],s=e.findIndex(d=>d===a),l=e.findIndex(d=>d===o),u=Math.max(0,s-1),c=Math.min(e.length-1,l+1);return e.slice(u,c+1)}return i}var Lt=[],Hh=function(){return Lt.some(function(e){return e.activeTargets.length>0})},Gh=function(){return Lt.some(function(e){return e.skippedTargets.length>0})},Pa="ResizeObserver loop completed with undelivered notifications.",Yh=function(){var e;typeof ErrorEvent=="function"?e=new ErrorEvent("error",{message:Pa}):(e=document.createEvent("Event"),e.initEvent("error",!1,!1),e.message=Pa),window.dispatchEvent(e)},$n;(function(e){e.BORDER_BOX="border-box",e.CONTENT_BOX="content-box",e.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box"})($n||($n={}));var Rt=function(e){return Object.freeze(e)},qh=(function(){function e(t,n){this.inlineSize=t,this.blockSize=n,Rt(this)}return e})(),Ts=(function(){function e(t,n,r,i){return this.x=t,this.y=n,this.width=r,this.height=i,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Rt(this)}return e.prototype.toJSON=function(){var t=this,n=t.x,r=t.y,i=t.top,a=t.right,o=t.bottom,s=t.left,l=t.width,u=t.height;return{x:n,y:r,top:i,right:a,bottom:o,left:s,width:l,height:u}},e.fromRect=function(t){return new e(t.x,t.y,t.width,t.height)},e})(),Zi=function(e){return e instanceof SVGElement&&"getBBox"in e},As=function(e){if(Zi(e)){var t=e.getBBox(),n=t.width,r=t.height;return!n&&!r}var i=e,a=i.offsetWidth,o=i.offsetHeight;return!(a||o||e.getClientRects().length)},Va=function(e){var t;if(e instanceof Element)return!0;var n=(t=e?.ownerDocument)===null||t===void 0?void 0:t.defaultView;return!!(n&&e instanceof n.Element)},jh=function(e){switch(e.tagName){case"INPUT":if(e.type!=="image")break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1},Tn=typeof window<"u"?window:{},Xn=new WeakMap,za=/auto|scroll/,Xh=/^tb|vertical/,Kh=/msie|trident/i.test(Tn.navigator&&Tn.navigator.userAgent),tt=function(e){return parseFloat(e||"0")},jt=function(e,t,n){return e===void 0&&(e=0),t===void 0&&(t=0),n===void 0&&(n=!1),new qh((n?t:e)||0,(n?e:t)||0)},Ia=Rt({devicePixelContentBoxSize:jt(),borderBoxSize:jt(),contentBoxSize:jt(),contentRect:new Ts(0,0,0,0)}),$s=function(e,t){if(t===void 0&&(t=!1),Xn.has(e)&&!t)return Xn.get(e);if(As(e))return Xn.set(e,Ia),Ia;var n=getComputedStyle(e),r=Zi(e)&&e.ownerSVGElement&&e.getBBox(),i=!Kh&&n.boxSizing==="border-box",a=Xh.test(n.writingMode||""),o=!r&&za.test(n.overflowY||""),s=!r&&za.test(n.overflowX||""),l=r?0:tt(n.paddingTop),u=r?0:tt(n.paddingRight),c=r?0:tt(n.paddingBottom),d=r?0:tt(n.paddingLeft),f=r?0:tt(n.borderTopWidth),h=r?0:tt(n.borderRightWidth),g=r?0:tt(n.borderBottomWidth),p=r?0:tt(n.borderLeftWidth),b=d+u,m=l+c,x=p+h,k=f+g,R=s?e.offsetHeight-k-e.clientHeight:0,S=o?e.offsetWidth-x-e.clientWidth:0,T=i?b+x:0,M=i?m+k:0,Z=r?r.width:tt(n.width)-T-S,K=r?r.height:tt(n.height)-M-R,$=Z+b+S+x,_=K+m+R+k,y=Rt({devicePixelContentBoxSize:jt(Math.round(Z*devicePixelRatio),Math.round(K*devicePixelRatio),a),borderBoxSize:jt($,_,a),contentBoxSize:jt(Z,K,a),contentRect:new Ts(d,l,Z,K)});return Xn.set(e,y),y},Ns=function(e,t,n){var r=$s(e,n),i=r.borderBoxSize,a=r.contentBoxSize,o=r.devicePixelContentBoxSize;switch(t){case $n.DEVICE_PIXEL_CONTENT_BOX:return o;case $n.BORDER_BOX:return i;default:return a}},Zh=(function(){function e(t){var n=$s(t);this.target=t,this.contentRect=n.contentRect,this.borderBoxSize=Rt([n.borderBoxSize]),this.contentBoxSize=Rt([n.contentBoxSize]),this.devicePixelContentBoxSize=Rt([n.devicePixelContentBoxSize])}return e})(),Ms=function(e){if(As(e))return 1/0;for(var t=0,n=e.parentNode;n;)t+=1,n=n.parentNode;return t},Qh=function(){var e=1/0,t=[];Lt.forEach(function(o){if(o.activeTargets.length!==0){var s=[];o.activeTargets.forEach(function(u){var c=new Zh(u.target),d=Ms(u.target);s.push(c),u.lastReportedSize=Ns(u.target,u.observedBox),d<e&&(e=d)}),t.push(function(){o.callback.call(o.observer,s,o.observer)}),o.activeTargets.splice(0,o.activeTargets.length)}});for(var n=0,r=t;n<r.length;n++){var i=r[n];i()}return e},Oa=function(e){Lt.forEach(function(n){n.activeTargets.splice(0,n.activeTargets.length),n.skippedTargets.splice(0,n.skippedTargets.length),n.observationTargets.forEach(function(i){i.isActive()&&(Ms(i.target)>e?n.activeTargets.push(i):n.skippedTargets.push(i))})})},Jh=function(){var e=0;for(Oa(e);Hh();)e=Qh(),Oa(e);return Gh()&&Yh(),e>0},si,Es=[],eg=function(){return Es.splice(0).forEach(function(e){return e()})},tg=function(e){if(!si){var t=0,n=document.createTextNode(""),r={characterData:!0};new MutationObserver(function(){return eg()}).observe(n,r),si=function(){n.textContent="".concat(t?t--:t++)}}Es.push(e),si()},ng=function(e){tg(function(){requestAnimationFrame(e)})},ir=0,rg=function(){return!!ir},ig=250,ag={attributes:!0,characterData:!0,childList:!0,subtree:!0},Ua=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],Wa=function(e){return e===void 0&&(e=0),Date.now()+e},li=!1,og=(function(){function e(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return e.prototype.run=function(t){var n=this;if(t===void 0&&(t=ig),!li){li=!0;var r=Wa(t);ng(function(){var i=!1;try{i=Jh()}finally{if(li=!1,t=r-Wa(),!rg())return;i?n.run(1e3):t>0?n.run(t):n.start()}})}},e.prototype.schedule=function(){this.stop(),this.run()},e.prototype.observe=function(){var t=this,n=function(){return t.observer&&t.observer.observe(document.body,ag)};document.body?n():Tn.addEventListener("DOMContentLoaded",n)},e.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),Ua.forEach(function(n){return Tn.addEventListener(n,t.listener,!0)}))},e.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),Ua.forEach(function(n){return Tn.removeEventListener(n,t.listener,!0)}),this.stopped=!0)},e})(),Ai=new og,Ha=function(e){!ir&&e>0&&Ai.start(),ir+=e,!ir&&Ai.stop()},sg=function(e){return!Zi(e)&&!jh(e)&&getComputedStyle(e).display==="inline"},lg=(function(){function e(t,n){this.target=t,this.observedBox=n||$n.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return e.prototype.isActive=function(){var t=Ns(this.target,this.observedBox,!0);return sg(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},e})(),ug=(function(){function e(t,n){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=n}return e})(),Kn=new WeakMap,Ga=function(e,t){for(var n=0;n<e.length;n+=1)if(e[n].target===t)return n;return-1},Zn=(function(){function e(){}return e.connect=function(t,n){var r=new ug(t,n);Kn.set(t,r)},e.observe=function(t,n,r){var i=Kn.get(t),a=i.observationTargets.length===0;Ga(i.observationTargets,n)<0&&(a&&Lt.push(i),i.observationTargets.push(new lg(n,r&&r.box)),Ha(1),Ai.schedule())},e.unobserve=function(t,n){var r=Kn.get(t),i=Ga(r.observationTargets,n),a=r.observationTargets.length===1;i>=0&&(a&&Lt.splice(Lt.indexOf(r),1),r.observationTargets.splice(i,1),Ha(-1))},e.disconnect=function(t){var n=this,r=Kn.get(t);r.observationTargets.slice().forEach(function(i){return n.unobserve(t,i.target)}),r.activeTargets.splice(0,r.activeTargets.length)},e})(),cg=(function(){function e(t){if(arguments.length===0)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if(typeof t!="function")throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Zn.connect(this,t)}return e.prototype.observe=function(t,n){if(arguments.length===0)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Va(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Zn.observe(this,t,n)},e.prototype.unobserve=function(t){if(arguments.length===0)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!Va(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Zn.unobserve(this,t)},e.prototype.disconnect=function(){Zn.disconnect(this)},e.toString=function(){return"function ResizeObserver () { [polyfill code] }"},e})();const dg=globalThis.ResizeObserver||cg,Ls={duration:void 0,margin:{top:0,bottom:0,left:0,right:0},padding:{top:0,bottom:0,left:0,right:0},sizing:Qt.Fit,width:void 0,height:void 0,svgDefs:void 0,ariaLabel:void 0};class Nn{constructor(t){this._defaultConfig=Ls,this._isFirstRender=!0,this._renderAnimationFrameId=null,this._container=t;const n=gt(this._container);n.attr("role","figure"),this.svg=n.append("svg").style("display","block").attr("xmlns","http://www.w3.org/2000/svg").attr("height",Nn.DEFAULT_CONTAINER_HEIGHT).attr("aria-hidden",!0),this._svgDefs=this.svg.append("defs"),this._svgDefsExternal=this.svg.append("defs"),this.element=this.svg.node()}updateContainer(t){var n;this.prevConfig=this.config,this.config=Jt(this._defaultConfig,t),t?.svgDefs!==((n=this.prevConfig)===null||n===void 0?void 0:n.svgDefs)&&(this._svgDefsExternal.selectAll("*").remove(),this._svgDefsExternal.html(t.svgDefs))}_preRender(){}_render(t){const{config:n}=this;gt(this._container).attr("aria-label",n.ariaLabel),this._isFirstRender=!1}render(t=this.config.duration){const n=this.config.width||this.containerWidth,r=this.config.height||this.containerHeight;this.svg.attr("width",n).attr("height",r),this._resizeObserver||this._setUpResizeObserver(),cancelAnimationFrame(this._renderAnimationFrameId),this._renderAnimationFrameId=requestAnimationFrame(()=>{this._preRender(),this._render(t)})}get containerWidth(){return this.config.width?this.element.clientWidth:this._container.clientWidth||this._container.getBoundingClientRect().width}get containerHeight(){return this.config.height?this.element.clientHeight:this._container.clientHeight||this._container.getBoundingClientRect().height||Nn.DEFAULT_CONTAINER_HEIGHT}get width(){return dt(this.containerWidth-this.config.margin.left-this.config.margin.right,0,Number.POSITIVE_INFINITY)}get height(){return dt(this.containerHeight-this.config.margin.top-this.config.margin.bottom,0,Number.POSITIVE_INFINITY)}_removeAllChildren(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild)}_onResize(){const{config:t}=this;(t.sizing===Qt.Fit||t.sizing===Qt.FitWidth)&&this.render(0)}_setUpResizeObserver(){if(this._resizeObserver)return;const t=this._container.getBoundingClientRect();this._containerSize={width:t.width,height:t.height},this._resizeObserver=new dg((n,r)=>{cancelAnimationFrame(this._resizeObserverAnimationFrameId),this._resizeObserverAnimationFrameId=requestAnimationFrame(()=>{const i=this._container.getBoundingClientRect(),a={width:i.width,height:i.height};!Pt(this._containerSize,a)&&a.width&&a.height&&(this._containerSize=a,this._onResize())})}),this._resizeObserver.observe(this._container)}destroy(){var t;cancelAnimationFrame(this._renderAnimationFrameId),cancelAnimationFrame(this._resizeObserverAnimationFrameId),(t=this._resizeObserver)===null||t===void 0||t.disconnect(),this.svg.remove()}}Nn.DEFAULT_CONTAINER_HEIGHT=300;function fg(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function hg(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var gg=(function(){function e(n){var r=this;this._insertTag=function(i){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(i,a),r.tags.push(i)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(r){r.forEach(this._insertTag)},t.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(hg(this));var i=this.tags[this.tags.length-1];if(this.isSpeedy){var a=fg(i);try{a.insertRule(r,a.cssRules.length)}catch{}}else i.appendChild(document.createTextNode(r));this.ctr++},t.flush=function(){this.tags.forEach(function(r){var i;return(i=r.parentNode)==null?void 0:i.removeChild(r)}),this.tags=[],this.ctr=0},e})(),Ee="-ms-",Tr="-moz-",ce="-webkit-",Rs="comm",Qi="rule",Ji="decl",pg="@import",Fs="@keyframes",mg="@layer",vg=Math.abs,qr=String.fromCharCode,bg=Object.assign;function yg(e,t){return $e(e,0)^45?(((t<<2^$e(e,0))<<2^$e(e,1))<<2^$e(e,2))<<2^$e(e,3):0}function Ds(e){return e.trim()}function xg(e,t){return(e=t.exec(e))?e[0]:e}function de(e,t,n){return e.replace(t,n)}function $i(e,t){return e.indexOf(t)}function $e(e,t){return e.charCodeAt(t)|0}function Mn(e,t,n){return e.slice(t,n)}function rt(e){return e.length}function ea(e){return e.length}function Qn(e,t){return t.push(e),e}function _g(e,t){return e.map(t).join("")}var jr=1,en=1,Bs=0,Oe=0,ke=0,cn="";function Xr(e,t,n,r,i,a,o){return{value:e,root:t,parent:n,type:r,props:i,children:a,line:jr,column:en,length:o,return:""}}function gn(e,t){return bg(Xr("",null,null,"",null,null,0),e,{length:-e.length},t)}function kg(){return ke}function wg(){return ke=Oe>0?$e(cn,--Oe):0,en--,ke===10&&(en=1,jr--),ke}function Ue(){return ke=Oe<Bs?$e(cn,Oe++):0,en++,ke===10&&(en=1,jr++),ke}function it(){return $e(cn,Oe)}function ar(){return Oe}function zn(e,t){return Mn(cn,e,t)}function En(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Ps(e){return jr=en=1,Bs=rt(cn=e),Oe=0,[]}function Vs(e){return cn="",e}function or(e){return Ds(zn(Oe-1,Ni(e===91?e+2:e===40?e+1:e)))}function Sg(e){for(;(ke=it())&&ke<33;)Ue();return En(e)>2||En(ke)>3?"":" "}function Cg(e,t){for(;--t&&Ue()&&!(ke<48||ke>102||ke>57&&ke<65||ke>70&&ke<97););return zn(e,ar()+(t<6&&it()==32&&Ue()==32))}function Ni(e){for(;Ue();)switch(ke){case e:return Oe;case 34:case 39:e!==34&&e!==39&&Ni(ke);break;case 40:e===41&&Ni(e);break;case 92:Ue();break}return Oe}function Tg(e,t){for(;Ue()&&e+ke!==57;)if(e+ke===84&&it()===47)break;return"/*"+zn(t,Oe-1)+"*"+qr(e===47?e:Ue())}function Ag(e){for(;!En(it());)Ue();return zn(e,Oe)}function $g(e){return Vs(sr("",null,null,null,[""],e=Ps(e),0,[0],e))}function sr(e,t,n,r,i,a,o,s,l){for(var u=0,c=0,d=o,f=0,h=0,g=0,p=1,b=1,m=1,x=0,k="",R=i,S=a,T=r,M=k;b;)switch(g=x,x=Ue()){case 40:if(g!=108&&$e(M,d-1)==58){$i(M+=de(or(x),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:M+=or(x);break;case 9:case 10:case 13:case 32:M+=Sg(g);break;case 92:M+=Cg(ar()-1,7);continue;case 47:switch(it()){case 42:case 47:Qn(Ng(Tg(Ue(),ar()),t,n),l);break;default:M+="/"}break;case 123*p:s[u++]=rt(M)*m;case 125*p:case 59:case 0:switch(x){case 0:case 125:b=0;case 59+c:m==-1&&(M=de(M,/\f/g,"")),h>0&&rt(M)-d&&Qn(h>32?qa(M+";",r,n,d-1):qa(de(M," ","")+";",r,n,d-2),l);break;case 59:M+=";";default:if(Qn(T=Ya(M,t,n,u,c,i,s,k,R=[],S=[],d),a),x===123)if(c===0)sr(M,t,T,T,R,a,d,s,S);else switch(f===99&&$e(M,3)===110?100:f){case 100:case 108:case 109:case 115:sr(e,T,T,r&&Qn(Ya(e,T,T,0,0,i,s,k,i,R=[],d),S),i,S,d,s,r?R:S);break;default:sr(M,T,T,T,[""],S,0,s,S)}}u=c=h=0,p=m=1,k=M="",d=o;break;case 58:d=1+rt(M),h=g;default:if(p<1){if(x==123)--p;else if(x==125&&p++==0&&wg()==125)continue}switch(M+=qr(x),x*p){case 38:m=c>0?1:(M+="\f",-1);break;case 44:s[u++]=(rt(M)-1)*m,m=1;break;case 64:it()===45&&(M+=or(Ue())),f=it(),c=d=rt(k=M+=Ag(ar())),x++;break;case 45:g===45&&rt(M)==2&&(p=0)}}return a}function Ya(e,t,n,r,i,a,o,s,l,u,c){for(var d=i-1,f=i===0?a:[""],h=ea(f),g=0,p=0,b=0;g<r;++g)for(var m=0,x=Mn(e,d+1,d=vg(p=o[g])),k=e;m<h;++m)(k=Ds(p>0?f[m]+" "+x:de(x,/&\f/g,f[m])))&&(l[b++]=k);return Xr(e,t,n,i===0?Qi:s,l,u,c)}function Ng(e,t,n){return Xr(e,t,n,Rs,qr(kg()),Mn(e,2,-2),0)}function qa(e,t,n,r){return Xr(e,t,n,Ji,Mn(e,0,r),Mn(e,r+1,-1),r)}function Xt(e,t){for(var n="",r=ea(e),i=0;i<r;i++)n+=t(e[i],i,e,t)||"";return n}function Mg(e,t,n,r){switch(e.type){case mg:if(e.children.length)break;case pg:case Ji:return e.return=e.return||e.value;case Rs:return"";case Fs:return e.return=e.value+"{"+Xt(e.children,r)+"}";case Qi:e.value=e.props.join(",")}return rt(n=Xt(e.children,r))?e.return=e.value+"{"+n+"}":""}function Eg(e){var t=ea(e);return function(n,r,i,a){for(var o="",s=0;s<t;s++)o+=e[s](n,r,i,a)||"";return o}}function Lg(e){return function(t){t.root||(t=t.return)&&e(t)}}function Rg(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var Fg=function(t,n,r){for(var i=0,a=0;i=a,a=it(),i===38&&a===12&&(n[r]=1),!En(a);)Ue();return zn(t,Oe)},Dg=function(t,n){var r=-1,i=44;do switch(En(i)){case 0:i===38&&it()===12&&(n[r]=1),t[r]+=Fg(Oe-1,n,r);break;case 2:t[r]+=or(i);break;case 4:if(i===44){t[++r]=it()===58?"&\f":"",n[r]=t[r].length;break}default:t[r]+=qr(i)}while(i=Ue());return t},Bg=function(t,n){return Vs(Dg(Ps(t),n))},ja=new WeakMap,Pg=function(t){if(!(t.type!=="rule"||!t.parent||t.length<1)){for(var n=t.value,r=t.parent,i=t.column===r.column&&t.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(t.props.length===1&&n.charCodeAt(0)!==58&&!ja.get(r))&&!i){ja.set(t,!0);for(var a=[],o=Bg(n,a),s=r.props,l=0,u=0;l<o.length;l++)for(var c=0;c<s.length;c++,u++)t.props[u]=a[l]?o[l].replace(/&\f/g,s[c]):s[c]+" "+o[l]}}},Vg=function(t){if(t.type==="decl"){var n=t.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(t.return="",t.value="")}};function zs(e,t){switch(yg(e,t)){case 5103:return ce+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return ce+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return ce+e+Tr+e+Ee+e+e;case 6828:case 4268:return ce+e+Ee+e+e;case 6165:return ce+e+Ee+"flex-"+e+e;case 5187:return ce+e+de(e,/(\w+).+(:[^]+)/,ce+"box-$1$2"+Ee+"flex-$1$2")+e;case 5443:return ce+e+Ee+"flex-item-"+de(e,/flex-|-self/,"")+e;case 4675:return ce+e+Ee+"flex-line-pack"+de(e,/align-content|flex-|-self/,"")+e;case 5548:return ce+e+Ee+de(e,"shrink","negative")+e;case 5292:return ce+e+Ee+de(e,"basis","preferred-size")+e;case 6060:return ce+"box-"+de(e,"-grow","")+ce+e+Ee+de(e,"grow","positive")+e;case 4554:return ce+de(e,/([^-])(transform)/g,"$1"+ce+"$2")+e;case 6187:return de(de(de(e,/(zoom-|grab)/,ce+"$1"),/(image-set)/,ce+"$1"),e,"")+e;case 5495:case 3959:return de(e,/(image-set\([^]*)/,ce+"$1$`$1");case 4968:return de(de(e,/(.+:)(flex-)?(.*)/,ce+"box-pack:$3"+Ee+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+ce+e+e;case 4095:case 3583:case 4068:case 2532:return de(e,/(.+)-inline(.+)/,ce+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(rt(e)-1-t>6)switch($e(e,t+1)){case 109:if($e(e,t+4)!==45)break;case 102:return de(e,/(.+:)(.+)-([^]+)/,"$1"+ce+"$2-$3$1"+Tr+($e(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~$i(e,"stretch")?zs(de(e,"stretch","fill-available"),t)+e:e}break;case 4949:if($e(e,t+1)!==115)break;case 6444:switch($e(e,rt(e)-3-(~$i(e,"!important")&&10))){case 107:return de(e,":",":"+ce)+e;case 101:return de(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+ce+($e(e,14)===45?"inline-":"")+"box$3$1"+ce+"$2$3$1"+Ee+"$2box$3")+e}break;case 5936:switch($e(e,t+11)){case 114:return ce+e+Ee+de(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return ce+e+Ee+de(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return ce+e+Ee+de(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return ce+e+Ee+e+e}return e}var zg=function(t,n,r,i){if(t.length>-1&&!t.return)switch(t.type){case Ji:t.return=zs(t.value,t.length);break;case Fs:return Xt([gn(t,{value:de(t.value,"@","@"+ce)})],i);case Qi:if(t.length)return _g(t.props,function(a){switch(xg(a,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return Xt([gn(t,{props:[de(a,/:(read-\w+)/,":"+Tr+"$1")]})],i);case"::placeholder":return Xt([gn(t,{props:[de(a,/:(plac\w+)/,":"+ce+"input-$1")]}),gn(t,{props:[de(a,/:(plac\w+)/,":"+Tr+"$1")]}),gn(t,{props:[de(a,/:(plac\w+)/,Ee+"input-$1")]})],i)}return""})}},Ig=[zg],Og=function(t){var n=t.key;if(n==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(p){var b=p.getAttribute("data-emotion");b.indexOf(" ")!==-1&&(document.head.appendChild(p),p.setAttribute("data-s",""))})}var i=t.stylisPlugins||Ig,a={},o,s=[];o=t.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(p){for(var b=p.getAttribute("data-emotion").split(" "),m=1;m<b.length;m++)a[b[m]]=!0;s.push(p)});var l,u=[Pg,Vg];{var c,d=[Mg,Lg(function(p){c.insert(p)})],f=Eg(u.concat(i,d)),h=function(b){return Xt($g(b),f)};l=function(b,m,x,k){c=x,h(b?b+"{"+m.styles+"}":m.styles),k&&(g.inserted[m.name]=!0)}}var g={key:n,sheet:new gg({key:n,container:o,nonce:t.nonce,speedy:t.speedy,prepend:t.prepend,insertionPoint:t.insertionPoint}),nonce:t.nonce,inserted:a,registered:{},insert:l};return g.sheet.hydrate(s),g};function Ug(e){for(var t=0,n,r=0,i=e.length;i>=4;++r,i-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(i){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var Wg={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},Hg=/[A-Z]|^ms/g,Gg=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Is=function(t){return t.charCodeAt(1)===45},Xa=function(t){return t!=null&&typeof t!="boolean"},ui=Rg(function(e){return Is(e)?e:e.replace(Hg,"-$&").toLowerCase()}),Ka=function(t,n){switch(t){case"animation":case"animationName":if(typeof n=="string")return n.replace(Gg,function(r,i,a){return wt={name:i,styles:a,next:wt},i})}return Wg[t]!==1&&!Is(t)&&typeof n=="number"&&n!==0?n+"px":n};function Ar(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var i=n;if(i.anim===1)return wt={name:i.name,styles:i.styles,next:wt},i.name;var a=n;if(a.styles!==void 0){var o=a.next;if(o!==void 0)for(;o!==void 0;)wt={name:o.name,styles:o.styles,next:wt},o=o.next;var s=a.styles+";";return s}return Yg(e,t,n)}}var l=n;if(t==null)return l;var u=t[l];return u!==void 0?u:l}function Yg(e,t,n){var r="";if(Array.isArray(n))for(var i=0;i<n.length;i++)r+=Ar(e,t,n[i])+";";else for(var a in n){var o=n[a];if(typeof o!="object"){var s=o;t!=null&&t[s]!==void 0?r+=a+"{"+t[s]+"}":Xa(s)&&(r+=ui(a)+":"+Ka(a,s)+";")}else if(Array.isArray(o)&&typeof o[0]=="string"&&(t==null||t[o[0]]===void 0))for(var l=0;l<o.length;l++)Xa(o[l])&&(r+=ui(a)+":"+Ka(a,o[l])+";");else{var u=Ar(e,t,o);switch(a){case"animation":case"animationName":{r+=ui(a)+":"+u+";";break}default:r+=a+"{"+u+"}"}}}return r}var Za=/label:\s*([^\s;{]+)\s*(;|$)/g,wt;function ci(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,i="";wt=void 0;var a=e[0];if(a==null||a.raw===void 0)r=!1,i+=Ar(n,t,a);else{var o=a;i+=o[0]}for(var s=1;s<e.length;s++)if(i+=Ar(n,t,e[s]),r){var l=a;i+=l[s]}Za.lastIndex=0;for(var u="",c;(c=Za.exec(i))!==null;)u+="-"+c[1];var d=Ug(i)+u;return{name:d,styles:i,next:wt}}function Os(e,t,n){var r="";return n.split(" ").forEach(function(i){e[i]!==void 0?t.push(e[i]+";"):i&&(r+=i+" ")}),r}var qg=function(t,n,r){var i=t.key+"-"+n.name;t.registered[i]===void 0&&(t.registered[i]=n.styles)},jg=function(t,n,r){qg(t,n);var i=t.key+"-"+n.name;if(t.inserted[n.name]===void 0){var a=n;do t.insert(n===a?"."+i:"",a,t.sheet,!0),a=a.next;while(a!==void 0)}};function Qa(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function Ja(e,t,n){var r=[],i=Os(e,r,n);return r.length<2?n:i+t(r)}var Xg=function(t){var n=Og(t);n.sheet.speedy=function(s){this.isSpeedy=s},n.compat=!0;var r=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=ci(u,n.registered,void 0);return jg(n,d),n.key+"-"+d.name},i=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=ci(u,n.registered),f="animation-"+d.name;return Qa(n,{name:d.name,styles:"@keyframes "+f+"{"+d.styles+"}"}),f},a=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];var d=ci(u,n.registered);Qa(n,d)},o=function(){for(var l=arguments.length,u=new Array(l),c=0;c<l;c++)u[c]=arguments[c];return Ja(n.registered,r,Kg(u))};return{css:r,cx:o,injectGlobal:a,keyframes:i,hydrate:function(l){l.forEach(function(u){n.inserted[u]=!0})},flush:function(){n.registered={},n.inserted={},n.sheet.flush()},sheet:n.sheet,cache:n,getRegisteredStyles:Os.bind(null,n.registered),merge:Ja.bind(null,n.registered,r)}},Kg=function e(t){for(var n="",r=0;r<t.length;r++){var i=t[r];if(i!=null){var a=void 0;switch(typeof i){case"boolean":break;case"object":{if(Array.isArray(i))a=e(i);else{a="";for(var o in i)i[o]&&o&&(a&&(a+=" "),a+=o)}break}default:a=i}a&&(n&&(n+=" "),n+=a)}}return n},Us=Xg({key:"css"}),In=Us.injectGlobal,ve=Us.css,di,eo;function Zg(){return eo||(eo=1,di=function(t,n){n||(n=[0,""]),t=String(t);var r=parseFloat(t,10);return n[0]=r,n[1]=t.match(/[\d.\-\+]*\s*(.*)/)[1]||"",n}),di}var fi,to;function Qg(){if(to)return fi;to=1;var e=Zg();fi=i;var t=r("in",document.body);function n(a,o){var s=e(getComputedStyle(a).getPropertyValue(o));return s[0]*i(s[1],a)}function r(a,o){var s=document.createElement("div");s.style.height="128"+a,o.appendChild(s);var l=n(s,"height")/128;return o.removeChild(s),l}function i(a,o){if(!a)return null;switch(o=o||document.body,a=(a+""||"px").trim().toLowerCase(),(o===window||o===document)&&(o=document.body),a){case"%":return o.clientHeight/100;case"ch":case"ex":return r(a,o);case"em":return n(o,"font-size");case"rem":return n(document.body,"font-size");case"vw":return window.innerWidth/100;case"vh":return window.innerHeight/100;case"vmin":return Math.min(window.innerWidth,window.innerHeight)/100;case"vmax":return Math.max(window.innerWidth,window.innerHeight)/100;case"in":return t;case"cm":return t/2.54;case"mm":return t/25.4;case"pt":return t/72;case"pc":return t/6;case"px":return 1}var s=e(a);if(!isNaN(s[0])&&s[1]){var l=i(s[1],o);return typeof l=="number"?s[0]*l:null}return null}return fi}Qg();function Ws(){const e=()=>Math.floor((1+crypto.getRandomValues(new Uint32Array(1))[0])*65536).toString(16).substring(1);return`${e()+e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`}function Jg(e,t){const n=e.substr(4,e.length-5);return getComputedStyle(t).getPropertyValue(n)}function ep(e,t,n=0){const[r,i,a,o]=[e.x+n,e.y+e.height-2*n,e.x+e.width-2*n,e.y+n],[s,l,u,c]=[t.x+n,t.y+t.height-2*n,t.x+t.width-2*n,t.y+n];return!(i<c||l<o||a<s||u<r)}function ta(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Hs(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function On(){}var Ln=.7,$r=1/Ln,Kt="\\s*([+-]?\\d+)\\s*",Rn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",at="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",tp=/^#([0-9a-f]{3,8})$/,np=new RegExp(`^rgb\\(${Kt},${Kt},${Kt}\\)$`),rp=new RegExp(`^rgb\\(${at},${at},${at}\\)$`),ip=new RegExp(`^rgba\\(${Kt},${Kt},${Kt},${Rn}\\)$`),ap=new RegExp(`^rgba\\(${at},${at},${at},${Rn}\\)$`),op=new RegExp(`^hsl\\(${Rn},${at},${at}\\)$`),sp=new RegExp(`^hsla\\(${Rn},${at},${at},${Rn}\\)$`),no={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ta(On,Vt,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:ro,formatHex:ro,formatHex8:lp,formatHsl:up,formatRgb:io,toString:io});function ro(){return this.rgb().formatHex()}function lp(){return this.rgb().formatHex8()}function up(){return Gs(this).formatHsl()}function io(){return this.rgb().formatRgb()}function Vt(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=tp.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ao(t):n===3?new ze(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Jn(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Jn(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=np.exec(e))?new ze(t[1],t[2],t[3],1):(t=rp.exec(e))?new ze(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=ip.exec(e))?Jn(t[1],t[2],t[3],t[4]):(t=ap.exec(e))?Jn(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=op.exec(e))?lo(t[1],t[2]/100,t[3]/100,1):(t=sp.exec(e))?lo(t[1],t[2]/100,t[3]/100,t[4]):no.hasOwnProperty(e)?ao(no[e]):e==="transparent"?new ze(NaN,NaN,NaN,0):null}function ao(e){return new ze(e>>16&255,e>>8&255,e&255,1)}function Jn(e,t,n,r){return r<=0&&(e=t=n=NaN),new ze(e,t,n,r)}function cp(e){return e instanceof On||(e=Vt(e)),e?(e=e.rgb(),new ze(e.r,e.g,e.b,e.opacity)):new ze}function Mi(e,t,n,r){return arguments.length===1?cp(e):new ze(e,t,n,r??1)}function ze(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ta(ze,Mi,Hs(On,{brighter(e){return e=e==null?$r:Math.pow($r,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ln:Math.pow(Ln,e),new ze(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new ze(Ft(this.r),Ft(this.g),Ft(this.b),Nr(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:oo,formatHex:oo,formatHex8:dp,formatRgb:so,toString:so}));function oo(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}`}function dp(){return`#${Mt(this.r)}${Mt(this.g)}${Mt(this.b)}${Mt((isNaN(this.opacity)?1:this.opacity)*255)}`}function so(){const e=Nr(this.opacity);return`${e===1?"rgb(":"rgba("}${Ft(this.r)}, ${Ft(this.g)}, ${Ft(this.b)}${e===1?")":`, ${e})`}`}function Nr(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ft(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Mt(e){return e=Ft(e),(e<16?"0":"")+e.toString(16)}function lo(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ke(e,t,n,r)}function Gs(e){if(e instanceof Ke)return new Ke(e.h,e.s,e.l,e.opacity);if(e instanceof On||(e=Vt(e)),!e)return new Ke;if(e instanceof Ke)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),a=Math.max(t,n,r),o=NaN,s=a-i,l=(a+i)/2;return s?(t===a?o=(n-r)/s+(n<r)*6:n===a?o=(r-t)/s+2:o=(t-n)/s+4,s/=l<.5?a+i:2-a-i,o*=60):s=l>0&&l<1?0:o,new Ke(o,s,l,e.opacity)}function na(e,t,n,r){return arguments.length===1?Gs(e):new Ke(e,t,n,r??1)}function Ke(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ta(Ke,na,Hs(On,{brighter(e){return e=e==null?$r:Math.pow($r,e),new Ke(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ln:Math.pow(Ln,e),new Ke(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new ze(hi(e>=240?e-240:e+120,i,r),hi(e,i,r),hi(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ke(uo(this.h),er(this.s),er(this.l),Nr(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Nr(this.opacity);return`${e===1?"hsl(":"hsla("}${uo(this.h)}, ${er(this.s)*100}%, ${er(this.l)*100}%${e===1?")":`, ${e})`}`}}));function uo(e){return e=(e||0)%360,e<0?e+360:e}function er(e){return Math.max(0,Math.min(1,e||0))}function hi(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const yn=globalThis?.UNOVIS_COLORS||["#4D8CFD","#FF6B7E","#F4B83E","#A6CC74","#00C19A","#6859BE"],fp=globalThis?.UNOVIS_COLORS_DARK||["#4D8CFD","#FF6B7E","#FFC16D","#A6CC74","#00C19A","#7887E0"],_t=e=>`--vis-${St(e)?`color${e%yn.length}`:e}`;function hp(e,t=.4){const n=na(e);return n.l=n.l*(1+t),n.formatHex()}function gp(e,t=.4,n=.6){const r=na(e);return r.s=r.s*(1-n),r.l=r.l*(1-t),r.formatHex()}const Mr=10,Ei=[{id:"stripes-diagonal",svg:'<path d="M-1,1 l2,-2 M0,10 l10,-10 M9,11 l2,-2" stroke="#000"/>'},{id:"dots",svg:'<path d="m0-1.5a1 1 0 010 3m10-3a1 1 0 000 3M5 3.5a1 1 0 010 3 1 1 0 010-3M0 8.5 a1 1 0 010 3m10-3a1 1 0 000 3" fill"#000"/>'},{id:"stripes-vertical",svg:'<path d="M 5,-1 L5,11" stroke="#000"/>'},{id:"crosshatch",svg:'<path d="M0 0L10 10ZM10 0L0 10Z" stroke="#000"/>'},{id:"waves",svg:'<path d="M0 4Q2.5 1 5 4 7.5 7 10 4v2Q7.5 9 5 6 2.5 3 0 6Z" fill="#000"/>'},{id:"circles",svg:'<circle cx="5" cy="5" r="3" stroke="#000" fill="#fff"/>'}],Li=[{id:"circle",marker:'<circle cx="5" cy="5" r="5"/>',dashArray:[]},{id:"triangle",marker:'<path d="M5,0 L10,9 L0,9Z">',dashArray:[9,1]},{id:"diamond",marker:'<path d="M 0 5 L5 0 L 10 5 L 5 10 L 0 5Z">',dashArray:[2]},{id:"arrow",marker:'<path d="M4 0 0 0 6 5 0 10 4 10 10 5Z">',dashArray:[2,3,8,3]},{id:"square",marker:'<rect x="1" y="1" width="8" height="8"/>',dashArray:[6]},{id:"star",marker:'<path d="m2 9 3-9 3 9L0 3h10Z"/>',dashArray:[1,6]}];function kt(e){return`vis-${`pattern-${e.svg?"fill":"marker"}`}-${e.id}`}const pp=e=>`<mask id="${kt(e)}">
    <pattern id="${e.id}" viewBox="0 0 10 10" width="${Mr}" height="${Mr}" patternUnits="userSpaceOnUse">
      <rect width="100%" height="100%" fill="#fff"/>
      ${e.svg}
    </pattern>
    <rect x="-50%" y="-50%" width="200%" height="200%" fill="url(#${e.id})"/>
  </mask>`,mp=(e,t)=>`<marker id="${kt(e)}"
    fill="var(${_t(t)})"
    markerUnits="userSpaceOnUse"
    refX="5"
    refY="5"
    markerWidth="${Mr}"
    markerHeight="${Mr}">
    ${e.marker}
  </marker>`;function vp(){const e=Ei.map(pp).concat(Li.map(mp)).join(""),t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.setAttribute("height","100%"),t.setAttribute("width","100%"),t.style.position="fixed",t.style.zIndex="-99999999",t.innerHTML=`<defs>${e}</defs>`,document.body.appendChild(t)}typeof window<"u"&&vp();const Ys=globalThis?.UNOVIS_FONT_W2H_RATIO_DEFAULT||.5,qs=globalThis?.UNOVIS_TEXT_SEPARATOR_DEFAULT||[" ","-",".",","],js=globalThis?.UNOVIS_TEXT_HYPHEN_CHARACTER_DEFAULT||"-",An=globalThis?.UNOVIS_TEXT_DEFAULT||{text:"",fontSize:12,fontFamily:"var(--vis-font-family)",lineHeight:1.25,marginTop:0,marginBottom:0};In`
  :root {
    label: vis-root-styles;
    --vis-font-family: Inter, Arial, "Helvetica Neue", Helvetica, sans-serif;
    --vis-font-wh-ratio: ${Ys};
    --vis-color-main: var(${_t(0)});
    --vis-color-main-light: ${hp(yn[0])};
    --vis-color-main-dark: ${gp(yn[0])};
    --vis-color-grey: #2a2a2a;
    ${yn.map((e,t)=>`${_t(t)}: ${e};`)}
    ${fp.map((e,t)=>`--vis-dark-color${t}: ${e};`)}
    ${Ei.map((e,t)=>`
      --${kt(e)}: url(#${kt(e)});
      --vis-pattern-fill${t}: var(--${kt(e)});
    `)}
    ${Li.map((e,t)=>{var n;return`
      --${kt(e)}: url(#${kt(e)});
      --vis-pattern-marker${t}: var(--${kt(e)});
      --vis-pattern-dasharray${t}: ${(n=e.dashArray)===null||n===void 0?void 0:n.join(" ")};
    `})}

    body.theme-dark {
      ${yn.map((e,t)=>`${_t(t)}: var(--vis-dark-color${t});`)}
    }

    body.theme-patterns {
      ${Ei.map((e,t)=>`path[style*="fill: var(${_t(t)})"]  {
        mask: var(--vis-pattern-fill${t});
      }`)}
      ${Li.map((e,t)=>`
      path[stroke="var(${_t(t)})"]:not([style*="fill"]),
      path[style*="stroke: var(${_t(t)})"]:not([style*="fill"]) {
        marker: var(--vis-pattern-marker${t});
        stroke-dasharray: var(--vis-pattern-dasharray${t});
      }
    `)}
}
`;function Xs(e=window?.document.body){return e?+Jg("var(--vis-font-wh-ratio)",e):Ys}var bp={value:()=>{}};function Ks(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new lr(n)}function lr(e){this._=e}function yp(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}lr.prototype=Ks.prototype={constructor:lr,on:function(e,t){var n=this._,r=yp(e+"",n),i,a=-1,o=r.length;if(arguments.length<2){for(;++a<o;)if((i=(e=r[a]).type)&&(i=xp(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++a<o;)if(i=(e=r[a]).type)n[i]=co(n[i],e.name,t);else if(t==null)for(i in n)n[i]=co(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new lr(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,a;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(a=this._[e],r=0,i=a.length;r<i;++r)a[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,a=r.length;i<a;++i)r[i].value.apply(t,n)}};function xp(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function co(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=bp,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var tn=0,xn=0,pn=0,Zs=1e3,Er,_n,Lr=0,zt=0,Kr=0,Fn=typeof performance=="object"&&performance.now?performance:Date,Qs=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function ra(){return zt||(Qs(_p),zt=Fn.now()+Kr)}function _p(){zt=0}function Rr(){this._call=this._time=this._next=null}Rr.prototype=Js.prototype={constructor:Rr,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?ra():+n)+(t==null?0:+t),!this._next&&_n!==this&&(_n?_n._next=this:Er=this,_n=this),this._call=e,this._time=n,Ri()},stop:function(){this._call&&(this._call=null,this._time=1/0,Ri())}};function Js(e,t,n){var r=new Rr;return r.restart(e,t,n),r}function kp(){ra(),++tn;for(var e=Er,t;e;)(t=zt-e._time)>=0&&e._call.call(void 0,t),e=e._next;--tn}function fo(){zt=(Lr=Fn.now())+Kr,tn=xn=0;try{kp()}finally{tn=0,Sp(),zt=0}}function wp(){var e=Fn.now(),t=e-Lr;t>Zs&&(Kr-=t,Lr=e)}function Sp(){for(var e,t=Er,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Er=n);_n=e,Ri(r)}function Ri(e){if(!tn){xn&&(xn=clearTimeout(xn));var t=e-zt;t>24?(e<1/0&&(xn=setTimeout(fo,e-Fn.now()-Kr)),pn&&(pn=clearInterval(pn))):(pn||(Lr=Fn.now(),pn=setInterval(wp,Zs)),tn=1,Qs(fo))}}function ho(e,t,n){var r=new Rr;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Cp=Ks("start","end","cancel","interrupt"),Tp=[],el=0,go=1,Fi=2,ur=3,po=4,Di=5,cr=6;function Zr(e,t,n,r,i,a){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Ap(e,n,{name:t,index:r,group:i,on:Cp,tween:Tp,time:a.time,delay:a.delay,duration:a.duration,ease:a.ease,timer:null,state:el})}function ia(e,t){var n=Je(e,t);if(n.state>el)throw new Error("too late; already scheduled");return n}function ot(e,t){var n=Je(e,t);if(n.state>ur)throw new Error("too late; already running");return n}function Je(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Ap(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=Js(a,0,n.time);function a(u){n.state=go,n.timer.restart(o,n.delay,n.time),n.delay<=u&&o(u-n.delay)}function o(u){var c,d,f,h;if(n.state!==go)return l();for(c in r)if(h=r[c],h.name===n.name){if(h.state===ur)return ho(o);h.state===po?(h.state=cr,h.timer.stop(),h.on.call("interrupt",e,e.__data__,h.index,h.group),delete r[c]):+c<t&&(h.state=cr,h.timer.stop(),h.on.call("cancel",e,e.__data__,h.index,h.group),delete r[c])}if(ho(function(){n.state===ur&&(n.state=po,n.timer.restart(s,n.delay,n.time),s(u))}),n.state=Fi,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Fi){for(n.state=ur,i=new Array(f=n.tween.length),c=0,d=-1;c<f;++c)(h=n.tween[c].value.call(e,e.__data__,n.index,n.group))&&(i[++d]=h);i.length=d+1}}function s(u){for(var c=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(l),n.state=Di,1),d=-1,f=i.length;++d<f;)i[d].call(e,c);n.state===Di&&(n.on.call("end",e,e.__data__,n.index,n.group),l())}function l(){n.state=cr,n.timer.stop(),delete r[t];for(var u in r)return;delete e.__transition}}function aa(e,t){var n=e.__transition,r,i,a=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){a=!1;continue}i=r.state>Fi&&r.state<Di,r.state=cr,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}a&&delete e.__transition}}function $p(e){return this.each(function(){aa(this,e)})}const oa=e=>()=>e;function Np(e,t){return function(n){return e+n*t}}function Mp(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Ep(e){return(e=+e)==1?tl:function(t,n){return n-t?Mp(t,n,e):oa(isNaN(t)?n:t)}}function tl(e,t){var n=t-e;return n?Np(e,n):oa(isNaN(e)?t:e)}const Fr=(function e(t){var n=Ep(t);function r(i,a){var o=n((i=Mi(i)).r,(a=Mi(a)).r),s=n(i.g,a.g),l=n(i.b,a.b),u=tl(i.opacity,a.opacity);return function(c){return i.r=o(c),i.g=s(c),i.b=l(c),i.opacity=u(c),i+""}}return r.gamma=e,r})(1);function Lp(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(a){for(i=0;i<n;++i)r[i]=e[i]*(1-a)+t[i]*a;return r}}function Rp(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Fp(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),a=new Array(n),o;for(o=0;o<r;++o)i[o]=dn(e[o],t[o]);for(;o<n;++o)a[o]=t[o];return function(s){for(o=0;o<r;++o)a[o]=i[o](s);return a}}function Dp(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Xe(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Bp(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=dn(e[i],t[i]):r[i]=t[i];return function(a){for(i in n)r[i]=n[i](a);return r}}var Bi=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,gi=new RegExp(Bi.source,"g");function Pp(e){return function(){return e}}function Vp(e){return function(t){return e(t)+""}}function nl(e,t){var n=Bi.lastIndex=gi.lastIndex=0,r,i,a,o=-1,s=[],l=[];for(e=e+"",t=t+"";(r=Bi.exec(e))&&(i=gi.exec(t));)(a=i.index)>n&&(a=t.slice(n,a),s[o]?s[o]+=a:s[++o]=a),(r=r[0])===(i=i[0])?s[o]?s[o]+=i:s[++o]=i:(s[++o]=null,l.push({i:o,x:Xe(r,i)})),n=gi.lastIndex;return n<t.length&&(a=t.slice(n),s[o]?s[o]+=a:s[++o]=a),s.length<2?l[0]?Vp(l[0].x):Pp(t):(t=l.length,function(u){for(var c=0,d;c<t;++c)s[(d=l[c]).i]=d.x(u);return s.join("")})}function dn(e,t){var n=typeof t,r;return t==null||n==="boolean"?oa(t):(n==="number"?Xe:n==="string"?(r=Vt(t))?(t=r,Fr):nl:t instanceof Vt?Fr:t instanceof Date?Dp:Rp(t)?Lp:Array.isArray(t)?Fp:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Bp:Xe)(e,t)}function sa(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}var mo=180/Math.PI,Pi={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function rl(e,t,n,r,i,a){var o,s,l;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(l=e*n+t*r)&&(n-=e*l,r-=t*l),(s=Math.sqrt(n*n+r*r))&&(n/=s,r/=s,l/=s),e*r<t*n&&(e=-e,t=-t,l=-l,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(t,e)*mo,skewX:Math.atan(l)*mo,scaleX:o,scaleY:s}}var tr;function zp(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Pi:rl(t.a,t.b,t.c,t.d,t.e,t.f)}function Ip(e){return e==null||(tr||(tr=document.createElementNS("http://www.w3.org/2000/svg","g")),tr.setAttribute("transform",e),!(e=tr.transform.baseVal.consolidate()))?Pi:(e=e.matrix,rl(e.a,e.b,e.c,e.d,e.e,e.f))}function il(e,t,n,r){function i(u){return u.length?u.pop()+" ":""}function a(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push("translate(",null,t,null,n);g.push({i:p-4,x:Xe(u,d)},{i:p-2,x:Xe(c,f)})}else(d||f)&&h.push("translate("+d+t+f+n)}function o(u,c,d,f){u!==c?(u-c>180?c+=360:c-u>180&&(u+=360),f.push({i:d.push(i(d)+"rotate(",null,r)-2,x:Xe(u,c)})):c&&d.push(i(d)+"rotate("+c+r)}function s(u,c,d,f){u!==c?f.push({i:d.push(i(d)+"skewX(",null,r)-2,x:Xe(u,c)}):c&&d.push(i(d)+"skewX("+c+r)}function l(u,c,d,f,h,g){if(u!==d||c!==f){var p=h.push(i(h)+"scale(",null,",",null,")");g.push({i:p-4,x:Xe(u,d)},{i:p-2,x:Xe(c,f)})}else(d!==1||f!==1)&&h.push(i(h)+"scale("+d+","+f+")")}return function(u,c){var d=[],f=[];return u=e(u),c=e(c),a(u.translateX,u.translateY,c.translateX,c.translateY,d,f),o(u.rotate,c.rotate,d,f),s(u.skewX,c.skewX,d,f),l(u.scaleX,u.scaleY,c.scaleX,c.scaleY,d,f),u=c=null,function(h){for(var g=-1,p=f.length,b;++g<p;)d[(b=f[g]).i]=b.x(h);return d.join("")}}}var Op=il(zp,"px, ","px)","deg)"),Up=il(Ip,", ",")",")");function Wp(e,t){t===void 0&&(t=e,e=dn);for(var n=0,r=t.length-1,i=t[0],a=new Array(r<0?0:r);n<r;)a[n]=e(i,i=t[++n]);return function(o){var s=Math.max(0,Math.min(r-1,Math.floor(o*=r)));return a[s](o-s)}}function Hp(e,t){var n,r;return function(){var i=ot(this,e),a=i.tween;if(a!==n){r=n=a;for(var o=0,s=r.length;o<s;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Gp(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var a=ot(this,e),o=a.tween;if(o!==r){i=(r=o).slice();for(var s={name:t,value:n},l=0,u=i.length;l<u;++l)if(i[l].name===t){i[l]=s;break}l===u&&i.push(s)}a.tween=i}}function Yp(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Je(this.node(),n).tween,i=0,a=r.length,o;i<a;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Hp:Gp)(n,e,t))}function la(e,t,n){var r=e._id;return e.each(function(){var i=ot(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Je(i,r).value[t]}}function al(e,t){var n;return(typeof t=="number"?Xe:t instanceof Vt?Fr:(n=Vt(t))?(t=n,Fr):nl)(e,t)}function qp(e){return function(){this.removeAttribute(e)}}function jp(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Xp(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttribute(e);return o===i?null:o===r?a:a=t(r=o,n)}}function Kp(e,t,n){var r,i=n+"",a;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?a:a=t(r=o,n)}}function Zp(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttribute(e):(o=this.getAttribute(e),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function Qp(e,t,n){var r,i,a;return function(){var o,s=n(this),l;return s==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),l=s+"",o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s)))}}function Jp(e,t){var n=Yr(e),r=n==="transform"?Up:al;return this.attrTween(e,typeof t=="function"?(n.local?Qp:Zp)(n,r,la(this,"attr."+e,t)):t==null?(n.local?jp:qp)(n):(n.local?Kp:Xp)(n,r,t))}function em(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function tm(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function nm(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&tm(e,a)),n}return i._value=t,i}function rm(e,t){var n,r;function i(){var a=t.apply(this,arguments);return a!==r&&(n=(r=a)&&em(e,a)),n}return i._value=t,i}function im(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Yr(e);return this.tween(n,(r.local?nm:rm)(r,t))}function am(e,t){return function(){ia(this,e).delay=+t.apply(this,arguments)}}function om(e,t){return t=+t,function(){ia(this,e).delay=t}}function sm(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?am:om)(t,e)):Je(this.node(),t).delay}function lm(e,t){return function(){ot(this,e).duration=+t.apply(this,arguments)}}function um(e,t){return t=+t,function(){ot(this,e).duration=t}}function cm(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?lm:um)(t,e)):Je(this.node(),t).duration}function dm(e,t){if(typeof t!="function")throw new Error;return function(){ot(this,e).ease=t}}function fm(e){var t=this._id;return arguments.length?this.each(dm(t,e)):Je(this.node(),t).ease}function hm(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ot(this,e).ease=n}}function gm(e){if(typeof e!="function")throw new Error;return this.each(hm(this._id,e))}function pm(e){typeof e!="function"&&(e=hs(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var a=t[i],o=a.length,s=r[i]=[],l,u=0;u<o;++u)(l=a[u])&&e.call(l,l.__data__,u,a)&&s.push(l);return new pt(r,this._parents,this._name,this._id)}function mm(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,a=Math.min(r,i),o=new Array(r),s=0;s<a;++s)for(var l=t[s],u=n[s],c=l.length,d=o[s]=new Array(c),f,h=0;h<c;++h)(f=l[h]||u[h])&&(d[h]=f);for(;s<r;++s)o[s]=t[s];return new pt(o,this._parents,this._name,this._id)}function vm(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function bm(e,t,n){var r,i,a=vm(t)?ia:ot;return function(){var o=a(this,e),s=o.on;s!==r&&(i=(r=s).copy()).on(t,n),o.on=i}}function ym(e,t){var n=this._id;return arguments.length<2?Je(this.node(),n).on.on(e):this.each(bm(n,e,t))}function xm(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function _m(){return this.on("end.remove",xm(this._id))}function km(e){var t=this._name,n=this._id;typeof e!="function"&&(e=qi(e));for(var r=this._groups,i=r.length,a=new Array(i),o=0;o<i;++o)for(var s=r[o],l=s.length,u=a[o]=new Array(l),c,d,f=0;f<l;++f)(c=s[f])&&(d=e.call(c,c.__data__,f,s))&&("__data__"in c&&(d.__data__=c.__data__),u[f]=d,Zr(u[f],t,n,f,u,Je(c,n)));return new pt(a,this._parents,t,n)}function wm(e){var t=this._name,n=this._id;typeof e!="function"&&(e=fs(e));for(var r=this._groups,i=r.length,a=[],o=[],s=0;s<i;++s)for(var l=r[s],u=l.length,c,d=0;d<u;++d)if(c=l[d]){for(var f=e.call(c,c.__data__,d,l),h,g=Je(c,n),p=0,b=f.length;p<b;++p)(h=f[p])&&Zr(h,t,n,p,f,g);a.push(f),o.push(c)}return new pt(a,o,t,n)}var Sm=Pn.prototype.constructor;function Cm(){return new Sm(this._groups,this._parents)}function Tm(e,t){var n,r,i;return function(){var a=Zt(this,e),o=(this.style.removeProperty(e),Zt(this,e));return a===o?null:a===n&&o===r?i:i=t(n=a,r=o)}}function ol(e){return function(){this.style.removeProperty(e)}}function Am(e,t,n){var r,i=n+"",a;return function(){var o=Zt(this,e);return o===i?null:o===r?a:a=t(r=o,n)}}function $m(e,t,n){var r,i,a;return function(){var o=Zt(this,e),s=n(this),l=s+"";return s==null&&(l=s=(this.style.removeProperty(e),Zt(this,e))),o===l?null:o===r&&l===i?a:(i=l,a=t(r=o,s))}}function Nm(e,t){var n,r,i,a="style."+t,o="end."+a,s;return function(){var l=ot(this,e),u=l.on,c=l.value[a]==null?s||(s=ol(t)):void 0;(u!==n||i!==c)&&(r=(n=u).copy()).on(o,i=c),l.on=r}}function Mm(e,t,n){var r=(e+="")=="transform"?Op:al;return t==null?this.styleTween(e,Tm(e,r)).on("end.style."+e,ol(e)):typeof t=="function"?this.styleTween(e,$m(e,r,la(this,"style."+e,t))).each(Nm(this._id,e)):this.styleTween(e,Am(e,r,t),n).on("end.style."+e,null)}function Em(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function Lm(e,t,n){var r,i;function a(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&Em(e,o,n)),r}return a._value=t,a}function Rm(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,Lm(e,t,n??""))}function Fm(e){return function(){this.textContent=e}}function Dm(e){return function(){var t=e(this);this.textContent=t??""}}function Bm(e){return this.tween("text",typeof e=="function"?Dm(la(this,"text",e)):Fm(e==null?"":e+""))}function Pm(e){return function(t){this.textContent=e.call(this,t)}}function Vm(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&Pm(i)),t}return r._value=e,r}function zm(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Vm(e))}function Im(){for(var e=this._name,t=this._id,n=sl(),r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)if(l=o[u]){var c=Je(l,t);Zr(l,e,n,u,o,{time:c.time+c.delay+c.duration,delay:0,duration:c.duration,ease:c.ease})}return new pt(r,this._parents,e,n)}function Om(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(a,o){var s={value:o},l={value:function(){--i===0&&a()}};n.each(function(){var u=ot(this,r),c=u.on;c!==e&&(t=(e=c).copy(),t._.cancel.push(s),t._.interrupt.push(s),t._.end.push(l)),u.on=t}),i===0&&a()})}var Um=0;function pt(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function sl(){return++Um}var lt=Pn.prototype;pt.prototype={constructor:pt,select:km,selectAll:wm,selectChild:lt.selectChild,selectChildren:lt.selectChildren,filter:pm,merge:mm,selection:Cm,transition:Im,call:lt.call,nodes:lt.nodes,node:lt.node,size:lt.size,empty:lt.empty,each:lt.each,on:ym,attr:Jp,attrTween:im,style:Mm,styleTween:Rm,text:Bm,textTween:zm,remove:_m,tween:Yp,delay:sm,duration:cm,ease:fm,easeVarying:gm,end:Om,[Symbol.iterator]:lt[Symbol.iterator]};const vo=e=>+e;function Wm(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Hm={time:null,delay:0,duration:250,ease:Wm};function Gm(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Ym(e){var t,n;e instanceof pt?(t=e._id,e=e._name):(t=sl(),(n=Hm).time=ra(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,a=0;a<i;++a)for(var o=r[a],s=o.length,l,u=0;u<s;++u)(l=o[u])&&Zr(l,e,t,u,o,n||Gm(l,t));return new pt(r,this._parents,e,t)}Pn.prototype.interrupt=$p;Pn.prototype.transition=Ym;function Ye(e,t,n){if(e.nodes().forEach(r=>aa(r)),t){const r=e.transition().duration(t);return n&&r.ease(n),r}else return e}class ua{constructor(t){this.data=t}get data(){return this._data}set data(t){this._data=t}}var le;(function(e){e.X="x",e.Y="y"})(le||(le={}));function et(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function ll(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const bo=Symbol("implicit");function ca(){var e=new Fa,t=[],n=[],r=bo;function i(a){let o=e.get(a);if(o===void 0){if(r!==bo)return r;e.set(a,o=t.push(a)-1)}return n[o%n.length]}return i.domain=function(a){if(!arguments.length)return t.slice();t=[],e=new Fa;for(const o of a)e.has(o)||e.set(o,t.push(o)-1);return i},i.range=function(a){return arguments.length?(n=Array.from(a),i):n.slice()},i.unknown=function(a){return arguments.length?(r=a,i):r},i.copy=function(){return ca(t,n).unknown(r)},et.apply(i,arguments),i}function da(){var e=ca().unknown(void 0),t=e.domain,n=e.range,r=0,i=1,a,o,s=!1,l=0,u=0,c=.5;delete e.unknown;function d(){var f=t().length,h=i<r,g=h?i:r,p=h?r:i;a=(p-g)/Math.max(1,f-l+u*2),s&&(a=Math.floor(a)),g+=(p-g-a*(f-l))*c,o=a*(1-l),s&&(g=Math.round(g),o=Math.round(o));var b=Rh(f).map(function(m){return g+a*m});return n(h?b.reverse():b)}return e.domain=function(f){return arguments.length?(t(f),d()):t()},e.range=function(f){return arguments.length?([r,i]=f,r=+r,i=+i,d()):[r,i]},e.rangeRound=function(f){return[r,i]=f,r=+r,i=+i,s=!0,d()},e.bandwidth=function(){return o},e.step=function(){return a},e.round=function(f){return arguments.length?(s=!!f,d()):s},e.padding=function(f){return arguments.length?(l=Math.min(1,u=+f),d()):l},e.paddingInner=function(f){return arguments.length?(l=Math.min(1,f),d()):l},e.paddingOuter=function(f){return arguments.length?(u=+f,d()):u},e.align=function(f){return arguments.length?(c=Math.max(0,Math.min(1,f)),d()):c},e.copy=function(){return da(t(),[r,i]).round(s).paddingInner(l).paddingOuter(u).align(c)},et.apply(d(),arguments)}function ul(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return ul(t())},e}function qm(){return ul(da.apply(null,arguments).paddingInner(1))}function jm(e){return function(){return e}}function Vi(e){return+e}var yo=[0,1];function Ie(e){return e}function zi(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:jm(isNaN(t)?NaN:.5)}function Xm(e,t){var n;return e>t&&(n=e,e=t,t=n),function(r){return Math.max(e,Math.min(t,r))}}function Km(e,t,n){var r=e[0],i=e[1],a=t[0],o=t[1];return i<r?(r=zi(i,r),a=n(o,a)):(r=zi(r,i),a=n(a,o)),function(s){return a(r(s))}}function Zm(e,t,n){var r=Math.min(e.length,t.length)-1,i=new Array(r),a=new Array(r),o=-1;for(e[r]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<r;)i[o]=zi(e[o],e[o+1]),a[o]=n(t[o],t[o+1]);return function(s){var l=Vn(e,s,1,r)-1;return a[l](i[l](s))}}function Un(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function Qr(){var e=yo,t=yo,n=dn,r,i,a,o=Ie,s,l,u;function c(){var f=Math.min(e.length,t.length);return o!==Ie&&(o=Xm(e[0],e[f-1])),s=f>2?Zm:Km,l=u=null,d}function d(f){return f==null||isNaN(f=+f)?a:(l||(l=s(e.map(r),t,n)))(r(o(f)))}return d.invert=function(f){return o(i((u||(u=s(t,e.map(r),Xe)))(f)))},d.domain=function(f){return arguments.length?(e=Array.from(f,Vi),c()):e.slice()},d.range=function(f){return arguments.length?(t=Array.from(f),c()):t.slice()},d.rangeRound=function(f){return t=Array.from(f),n=sa,c()},d.clamp=function(f){return arguments.length?(o=f?!0:Ie,c()):o!==Ie},d.interpolate=function(f){return arguments.length?(n=f,c()):n},d.unknown=function(f){return arguments.length?(a=f,d):a},function(f,h){return r=f,i=h,c()}}function cl(){return Qr()(Ie,Ie)}function Qm(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function Dr(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,r=e.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+e.slice(n+1)]}function nn(e){return e=Dr(Math.abs(e)),e?e[1]:NaN}function Jm(e,t){return function(n,r){for(var i=n.length,a=[],o=0,s=e[0],l=0;i>0&&s>0&&(l+s+1>r&&(s=Math.max(1,r-l)),a.push(n.substring(i-=s,i+s)),!((l+=s+1)>r));)s=e[o=(o+1)%e.length];return a.reverse().join(t)}}function ev(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var tv=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Dn(e){if(!(t=tv.exec(e)))throw new Error("invalid format: "+e);var t;return new fa({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Dn.prototype=fa.prototype;function fa(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}fa.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function nv(e){e:for(var t=e.length,n=1,r=-1,i;n<t;++n)switch(e[n]){case".":r=i=n;break;case"0":r===0&&(r=n),i=n;break;default:if(!+e[n])break e;r>0&&(r=0);break}return r>0?e.slice(0,r)+e.slice(i+1):e}var dl;function rv(e,t){var n=Dr(e,t);if(!n)return e+"";var r=n[0],i=n[1],a=i-(dl=Math.max(-8,Math.min(8,Math.floor(i/3)))*3)+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+Dr(e,Math.max(0,t+a-1))[0]}function xo(e,t){var n=Dr(e,t);if(!n)return e+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}const _o={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Qm,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>xo(e*100,t),r:xo,s:rv,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function ko(e){return e}var wo=Array.prototype.map,So=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function iv(e){var t=e.grouping===void 0||e.thousands===void 0?ko:Jm(wo.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",r=e.currency===void 0?"":e.currency[1]+"",i=e.decimal===void 0?".":e.decimal+"",a=e.numerals===void 0?ko:ev(wo.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",s=e.minus===void 0?"−":e.minus+"",l=e.nan===void 0?"NaN":e.nan+"";function u(d){d=Dn(d);var f=d.fill,h=d.align,g=d.sign,p=d.symbol,b=d.zero,m=d.width,x=d.comma,k=d.precision,R=d.trim,S=d.type;S==="n"?(x=!0,S="g"):_o[S]||(k===void 0&&(k=12),R=!0,S="g"),(b||f==="0"&&h==="=")&&(b=!0,f="0",h="=");var T=p==="$"?n:p==="#"&&/[boxX]/.test(S)?"0"+S.toLowerCase():"",M=p==="$"?r:/[%p]/.test(S)?o:"",Z=_o[S],K=/[defgprs%]/.test(S);k=k===void 0?6:/[gprs]/.test(S)?Math.max(1,Math.min(21,k)):Math.max(0,Math.min(20,k));function $(_){var y=T,w=M,W,j,Q;if(S==="c")w=Z(_)+w,_="";else{_=+_;var O=_<0||1/_<0;if(_=isNaN(_)?l:Z(Math.abs(_),k),R&&(_=nv(_)),O&&+_==0&&g!=="+"&&(O=!1),y=(O?g==="("?g:s:g==="-"||g==="("?"":g)+y,w=(S==="s"?So[8+dl/3]:"")+w+(O&&g==="("?")":""),K){for(W=-1,j=_.length;++W<j;)if(Q=_.charCodeAt(W),48>Q||Q>57){w=(Q===46?i+_.slice(W+1):_.slice(W))+w,_=_.slice(0,W);break}}}x&&!b&&(_=t(_,1/0));var te=y.length+_.length+w.length,ie=te<m?new Array(m-te+1).join(f):"";switch(x&&b&&(_=t(ie+_,ie.length?m-w.length:1/0),ie=""),h){case"<":_=y+_+w+ie;break;case"=":_=y+ie+_+w;break;case"^":_=ie.slice(0,te=ie.length>>1)+y+_+w+ie.slice(te);break;default:_=ie+y+_+w;break}return a(_)}return $.toString=function(){return d+""},$}function c(d,f){var h=u((d=Dn(d),d.type="f",d)),g=Math.max(-8,Math.min(8,Math.floor(nn(f)/3)))*3,p=Math.pow(10,-g),b=So[8+g/3];return function(m){return h(p*m)+b}}return{format:u,formatPrefix:c}}var nr,ha,fl;av({thousands:",",grouping:[3],currency:["$",""]});function av(e){return nr=iv(e),ha=nr.format,fl=nr.formatPrefix,nr}function ov(e){return Math.max(0,-nn(Math.abs(e)))}function sv(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nn(t)/3)))*3-nn(Math.abs(e)))}function lv(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nn(t)-nn(e))+1}function uv(e,t,n,r){var i=wi(e,t,n),a;switch(r=Dn(r??",f"),r.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return r.precision==null&&!isNaN(a=sv(i,o))&&(r.precision=a),fl(r,o)}case"":case"e":case"g":case"p":case"r":{r.precision==null&&!isNaN(a=lv(i,Math.max(Math.abs(e),Math.abs(t))))&&(r.precision=a-(r.type==="e"));break}case"f":case"%":{r.precision==null&&!isNaN(a=ov(i))&&(r.precision=a-(r.type==="%")*2);break}}return ha(r)}function Ut(e){var t=e.domain;return e.ticks=function(n){var r=t();return _i(r[0],r[r.length-1],n??10)},e.tickFormat=function(n,r){var i=t();return uv(i[0],i[i.length-1],n??10,r)},e.nice=function(n){n==null&&(n=10);var r=t(),i=0,a=r.length-1,o=r[i],s=r[a],l,u,c=10;for(s<o&&(u=o,o=s,s=u,u=i,i=a,a=u);c-- >0;){if(u=ki(o,s,n),u===l)return r[i]=o,r[a]=s,t(r);if(u>0)o=Math.floor(o/u)*u,s=Math.ceil(s/u)*u;else if(u<0)o=Math.ceil(o*u)/u,s=Math.floor(s*u)/u;else break;l=u}return e},e}function hl(){var e=cl();return e.copy=function(){return Un(e,hl())},et.apply(e,arguments),Ut(e)}function gl(e){var t;function n(r){return r==null||isNaN(r=+r)?t:r}return n.invert=n,n.domain=n.range=function(r){return arguments.length?(e=Array.from(r,Vi),n):e.slice()},n.unknown=function(r){return arguments.length?(t=r,n):t},n.copy=function(){return gl(e).unknown(t)},e=arguments.length?Array.from(e,Vi):[0,1],Ut(n)}function pl(e,t){e=e.slice();var n=0,r=e.length-1,i=e[n],a=e[r],o;return a<i&&(o=n,n=r,r=o,o=i,i=a,a=o),e[n]=t.floor(i),e[r]=t.ceil(a),e}function Co(e){return Math.log(e)}function To(e){return Math.exp(e)}function cv(e){return-Math.log(-e)}function dv(e){return-Math.exp(-e)}function fv(e){return isFinite(e)?+("1e"+e):e<0?0:e}function hv(e){return e===10?fv:e===Math.E?Math.exp:t=>Math.pow(e,t)}function gv(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function Ao(e){return(t,n)=>-e(-t,n)}function pv(e){const t=e(Co,To),n=t.domain;let r=10,i,a;function o(){return i=gv(r),a=hv(r),n()[0]<0?(i=Ao(i),a=Ao(a),e(cv,dv)):e(Co,To),t}return t.base=function(s){return arguments.length?(r=+s,o()):r},t.domain=function(s){return arguments.length?(n(s),o()):n()},t.ticks=s=>{const l=n();let u=l[0],c=l[l.length-1];const d=c<u;d&&([u,c]=[c,u]);let f=i(u),h=i(c),g,p;const b=s==null?10:+s;let m=[];if(!(r%1)&&h-f<b){if(f=Math.floor(f),h=Math.ceil(h),u>0){for(;f<=h;++f)for(g=1;g<r;++g)if(p=f<0?g/a(-f):g*a(f),!(p<u)){if(p>c)break;m.push(p)}}else for(;f<=h;++f)for(g=r-1;g>=1;--g)if(p=f>0?g/a(-f):g*a(f),!(p<u)){if(p>c)break;m.push(p)}m.length*2<b&&(m=_i(u,c,b))}else m=_i(f,h,Math.min(h-f,b)).map(a);return d?m.reverse():m},t.tickFormat=(s,l)=>{if(s==null&&(s=10),l==null&&(l=r===10?"s":","),typeof l!="function"&&(!(r%1)&&(l=Dn(l)).precision==null&&(l.trim=!0),l=ha(l)),s===1/0)return l;const u=Math.max(1,r*s/t.ticks().length);return c=>{let d=c/a(Math.round(i(c)));return d*r<r-.5&&(d*=r),d<=u?l(c):""}},t.nice=()=>n(pl(n(),{floor:s=>a(Math.floor(i(s))),ceil:s=>a(Math.ceil(i(s)))})),t}function ml(){const e=pv(Qr()).domain([1,10]);return e.copy=()=>Un(e,ml()).base(e.base()),et.apply(e,arguments),e}function $o(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function No(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function mv(e){var t=1,n=e($o(t),No(t));return n.constant=function(r){return arguments.length?e($o(t=+r),No(t)):t},Ut(n)}function vl(){var e=mv(Qr());return e.copy=function(){return Un(e,vl()).constant(e.constant())},et.apply(e,arguments)}function Mo(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function vv(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function bv(e){return e<0?-e*e:e*e}function yv(e){var t=e(Ie,Ie),n=1;function r(){return n===1?e(Ie,Ie):n===.5?e(vv,bv):e(Mo(n),Mo(1/n))}return t.exponent=function(i){return arguments.length?(n=+i,r()):n},Ut(t)}function ga(){var e=yv(Qr());return e.copy=function(){return Un(e,ga()).exponent(e.exponent())},et.apply(e,arguments),e}function xv(){return ga.apply(null,arguments).exponent(.5)}function bl(){var e=[],t=[],n=[],r;function i(){var o=0,s=Math.max(1,t.length);for(n=new Array(s-1);++o<s;)n[o-1]=Nh(e,o/s);return a}function a(o){return o==null||isNaN(o=+o)?r:t[Vn(n,o)]}return a.invertExtent=function(o){var s=t.indexOf(o);return s<0?[NaN,NaN]:[s>0?n[s-1]:e[0],s<n.length?n[s]:e[e.length-1]]},a.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let s of o)s!=null&&!isNaN(s=+s)&&e.push(s);return e.sort(Sn),i()},a.range=function(o){return arguments.length?(t=Array.from(o),i()):t.slice()},a.unknown=function(o){return arguments.length?(r=o,a):r},a.quantiles=function(){return n.slice()},a.copy=function(){return bl().domain(e).range(t).unknown(r)},et.apply(a,arguments)}function yl(){var e=0,t=1,n=1,r=[.5],i=[0,1],a;function o(l){return l!=null&&l<=l?i[Vn(r,l,0,n)]:a}function s(){var l=-1;for(r=new Array(n);++l<n;)r[l]=((l+1)*t-(l-n)*e)/(n+1);return o}return o.domain=function(l){return arguments.length?([e,t]=l,e=+e,t=+t,s()):[e,t]},o.range=function(l){return arguments.length?(n=(i=Array.from(l)).length-1,s()):i.slice()},o.invertExtent=function(l){var u=i.indexOf(l);return u<0?[NaN,NaN]:u<1?[e,r[0]]:u>=n?[r[n-1],t]:[r[u-1],r[u]]},o.unknown=function(l){return arguments.length&&(a=l),o},o.thresholds=function(){return r.slice()},o.copy=function(){return yl().domain([e,t]).range(i).unknown(a)},et.apply(Ut(o),arguments)}function xl(){var e=[.5],t=[0,1],n,r=1;function i(a){return a!=null&&a<=a?t[Vn(e,a,0,r)]:n}return i.domain=function(a){return arguments.length?(e=Array.from(a),r=Math.min(e.length,t.length-1),i):e.slice()},i.range=function(a){return arguments.length?(t=Array.from(a),r=Math.min(e.length,t.length-1),i):t.slice()},i.invertExtent=function(a){var o=t.indexOf(a);return[e[o-1],e[o]]},i.unknown=function(a){return arguments.length?(n=a,i):n},i.copy=function(){return xl().domain(e).range(t).unknown(n)},et.apply(i,arguments)}const pi=new Date,mi=new Date;function we(e,t,n,r){function i(a){return e(a=arguments.length===0?new Date:new Date(+a)),a}return i.floor=a=>(e(a=new Date(+a)),a),i.ceil=a=>(e(a=new Date(a-1)),t(a,1),e(a),a),i.round=a=>{const o=i(a),s=i.ceil(a);return a-o<s-a?o:s},i.offset=(a,o)=>(t(a=new Date(+a),o==null?1:Math.floor(o)),a),i.range=(a,o,s)=>{const l=[];if(a=i.ceil(a),s=s==null?1:Math.floor(s),!(a<o)||!(s>0))return l;let u;do l.push(u=new Date(+a)),t(a,s),e(a);while(u<a&&a<o);return l},i.filter=a=>we(o=>{if(o>=o)for(;e(o),!a(o);)o.setTime(o-1)},(o,s)=>{if(o>=o)if(s<0)for(;++s<=0;)for(;t(o,-1),!a(o););else for(;--s>=0;)for(;t(o,1),!a(o););}),n&&(i.count=(a,o)=>(pi.setTime(+a),mi.setTime(+o),e(pi),e(mi),Math.floor(n(pi,mi))),i.every=a=>(a=Math.floor(a),!isFinite(a)||!(a>0)?null:a>1?i.filter(r?o=>r(o)%a===0:o=>i.count(0,o)%a===0):i)),i}const Br=we(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);Br.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?we(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):Br);Br.range;const ft=1e3,qe=ft*60,ht=qe*60,mt=ht*24,pa=mt*7,Eo=mt*30,vi=mt*365,Et=we(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*ft)},(e,t)=>(t-e)/ft,e=>e.getUTCSeconds());Et.range;const ma=we(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ft)},(e,t)=>{e.setTime(+e+t*qe)},(e,t)=>(t-e)/qe,e=>e.getMinutes());ma.range;const va=we(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*qe)},(e,t)=>(t-e)/qe,e=>e.getUTCMinutes());va.range;const ba=we(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*ft-e.getMinutes()*qe)},(e,t)=>{e.setTime(+e+t*ht)},(e,t)=>(t-e)/ht,e=>e.getHours());ba.range;const ya=we(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ht)},(e,t)=>(t-e)/ht,e=>e.getUTCHours());ya.range;const Wn=we(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*qe)/mt,e=>e.getDate()-1);Wn.range;const Jr=we(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mt,e=>e.getUTCDate()-1);Jr.range;const _l=we(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/mt,e=>Math.floor(e/mt));_l.range;function Wt(e){return we(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*qe)/pa)}const ei=Wt(0),Pr=Wt(1),_v=Wt(2),kv=Wt(3),rn=Wt(4),wv=Wt(5),Sv=Wt(6);ei.range;Pr.range;_v.range;kv.range;rn.range;wv.range;Sv.range;function Ht(e){return we(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/pa)}const ti=Ht(0),Vr=Ht(1),Cv=Ht(2),Tv=Ht(3),an=Ht(4),Av=Ht(5),$v=Ht(6);ti.range;Vr.range;Cv.range;Tv.range;an.range;Av.range;$v.range;const xa=we(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());xa.range;const _a=we(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());_a.range;const vt=we(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());vt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:we(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});vt.range;const bt=we(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());bt.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:we(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});bt.range;function kl(e,t,n,r,i,a){const o=[[Et,1,ft],[Et,5,5*ft],[Et,15,15*ft],[Et,30,30*ft],[a,1,qe],[a,5,5*qe],[a,15,15*qe],[a,30,30*qe],[i,1,ht],[i,3,3*ht],[i,6,6*ht],[i,12,12*ht],[r,1,mt],[r,2,2*mt],[n,1,pa],[t,1,Eo],[t,3,3*Eo],[e,1,vi]];function s(u,c,d){const f=c<u;f&&([u,c]=[c,u]);const h=d&&typeof d.range=="function"?d:l(u,c,d),g=h?h.range(u,+c+1):[];return f?g.reverse():g}function l(u,c,d){const f=Math.abs(c-u)/d,h=Xi(([,,b])=>b).right(o,f);if(h===o.length)return e.every(wi(u/vi,c/vi,d));if(h===0)return Br.every(Math.max(wi(u,c,d),1));const[g,p]=o[f/o[h-1][2]<o[h][2]/f?h-1:h];return g.every(p)}return[s,l]}const[Nv,Mv]=kl(bt,_a,ti,_l,ya,va),[Ev,Lv]=kl(vt,xa,ei,Wn,ba,ma);function bi(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function yi(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function mn(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function Rv(e){var t=e.dateTime,n=e.date,r=e.time,i=e.periods,a=e.days,o=e.shortDays,s=e.months,l=e.shortMonths,u=vn(i),c=bn(i),d=vn(a),f=bn(a),h=vn(o),g=bn(o),p=vn(s),b=bn(s),m=vn(l),x=bn(l),k={a:O,A:te,b:ie,B:pe,c:null,d:Po,e:Po,f:n0,g:f0,G:g0,H:Jv,I:e0,j:t0,L:wl,m:r0,M:i0,p:se,q:re,Q:Io,s:Oo,S:a0,u:o0,U:s0,V:l0,w:u0,W:c0,x:null,X:null,y:d0,Y:h0,Z:p0,"%":zo},R={a:xe,A:Le,b:Be,B:Pe,c:null,d:Vo,e:Vo,f:y0,g:N0,G:E0,H:m0,I:v0,j:b0,L:Cl,m:x0,M:_0,p:He,q:je,Q:Io,s:Oo,S:k0,u:w0,U:S0,V:C0,w:T0,W:A0,x:null,X:null,y:$0,Y:M0,Z:L0,"%":zo},S={a:$,A:_,b:y,B:w,c:W,d:Do,e:Do,f:Xv,g:Fo,G:Ro,H:Bo,I:Bo,j:Gv,L:jv,m:Hv,M:Yv,p:K,q:Wv,Q:Zv,s:Qv,S:qv,u:Vv,U:zv,V:Iv,w:Pv,W:Ov,x:j,X:Q,y:Fo,Y:Ro,Z:Uv,"%":Kv};k.x=T(n,k),k.X=T(r,k),k.c=T(t,k),R.x=T(n,R),R.X=T(r,R),R.c=T(t,R);function T(z,ne){return function(ae){var E=[],be=-1,ge=0,Re=z.length,Se,st,Gn;for(ae instanceof Date||(ae=new Date(+ae));++be<Re;)z.charCodeAt(be)===37&&(E.push(z.slice(ge,be)),(st=Lo[Se=z.charAt(++be)])!=null?Se=z.charAt(++be):st=Se==="e"?" ":"0",(Gn=ne[Se])&&(Se=Gn(ae,st)),E.push(Se),ge=be+1);return E.push(z.slice(ge,be)),E.join("")}}function M(z,ne){return function(ae){var E=mn(1900,void 0,1),be=Z(E,z,ae+="",0),ge,Re;if(be!=ae.length)return null;if("Q"in E)return new Date(E.Q);if("s"in E)return new Date(E.s*1e3+("L"in E?E.L:0));if(ne&&!("Z"in E)&&(E.Z=0),"p"in E&&(E.H=E.H%12+E.p*12),E.m===void 0&&(E.m="q"in E?E.q:0),"V"in E){if(E.V<1||E.V>53)return null;"w"in E||(E.w=1),"Z"in E?(ge=yi(mn(E.y,0,1)),Re=ge.getUTCDay(),ge=Re>4||Re===0?Vr.ceil(ge):Vr(ge),ge=Jr.offset(ge,(E.V-1)*7),E.y=ge.getUTCFullYear(),E.m=ge.getUTCMonth(),E.d=ge.getUTCDate()+(E.w+6)%7):(ge=bi(mn(E.y,0,1)),Re=ge.getDay(),ge=Re>4||Re===0?Pr.ceil(ge):Pr(ge),ge=Wn.offset(ge,(E.V-1)*7),E.y=ge.getFullYear(),E.m=ge.getMonth(),E.d=ge.getDate()+(E.w+6)%7)}else("W"in E||"U"in E)&&("w"in E||(E.w="u"in E?E.u%7:"W"in E?1:0),Re="Z"in E?yi(mn(E.y,0,1)).getUTCDay():bi(mn(E.y,0,1)).getDay(),E.m=0,E.d="W"in E?(E.w+6)%7+E.W*7-(Re+5)%7:E.w+E.U*7-(Re+6)%7);return"Z"in E?(E.H+=E.Z/100|0,E.M+=E.Z%100,yi(E)):bi(E)}}function Z(z,ne,ae,E){for(var be=0,ge=ne.length,Re=ae.length,Se,st;be<ge;){if(E>=Re)return-1;if(Se=ne.charCodeAt(be++),Se===37){if(Se=ne.charAt(be++),st=S[Se in Lo?ne.charAt(be++):Se],!st||(E=st(z,ae,E))<0)return-1}else if(Se!=ae.charCodeAt(E++))return-1}return E}function K(z,ne,ae){var E=u.exec(ne.slice(ae));return E?(z.p=c.get(E[0].toLowerCase()),ae+E[0].length):-1}function $(z,ne,ae){var E=h.exec(ne.slice(ae));return E?(z.w=g.get(E[0].toLowerCase()),ae+E[0].length):-1}function _(z,ne,ae){var E=d.exec(ne.slice(ae));return E?(z.w=f.get(E[0].toLowerCase()),ae+E[0].length):-1}function y(z,ne,ae){var E=m.exec(ne.slice(ae));return E?(z.m=x.get(E[0].toLowerCase()),ae+E[0].length):-1}function w(z,ne,ae){var E=p.exec(ne.slice(ae));return E?(z.m=b.get(E[0].toLowerCase()),ae+E[0].length):-1}function W(z,ne,ae){return Z(z,t,ne,ae)}function j(z,ne,ae){return Z(z,n,ne,ae)}function Q(z,ne,ae){return Z(z,r,ne,ae)}function O(z){return o[z.getDay()]}function te(z){return a[z.getDay()]}function ie(z){return l[z.getMonth()]}function pe(z){return s[z.getMonth()]}function se(z){return i[+(z.getHours()>=12)]}function re(z){return 1+~~(z.getMonth()/3)}function xe(z){return o[z.getUTCDay()]}function Le(z){return a[z.getUTCDay()]}function Be(z){return l[z.getUTCMonth()]}function Pe(z){return s[z.getUTCMonth()]}function He(z){return i[+(z.getUTCHours()>=12)]}function je(z){return 1+~~(z.getUTCMonth()/3)}return{format:function(z){var ne=T(z+="",k);return ne.toString=function(){return z},ne},parse:function(z){var ne=M(z+="",!1);return ne.toString=function(){return z},ne},utcFormat:function(z){var ne=T(z+="",R);return ne.toString=function(){return z},ne},utcParse:function(z){var ne=M(z+="",!0);return ne.toString=function(){return z},ne}}}var Lo={"-":"",_:" ",0:"0"},Te=/^\s*\d+/,Fv=/^%/,Dv=/[\\^$*+?|[\]().{}]/g;function ue(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(t)+i:i)}function Bv(e){return e.replace(Dv,"\\$&")}function vn(e){return new RegExp("^(?:"+e.map(Bv).join("|")+")","i")}function bn(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function Pv(e,t,n){var r=Te.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Vv(e,t,n){var r=Te.exec(t.slice(n,n+1));return r?(e.u=+r[0],n+r[0].length):-1}function zv(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.U=+r[0],n+r[0].length):-1}function Iv(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.V=+r[0],n+r[0].length):-1}function Ov(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.W=+r[0],n+r[0].length):-1}function Ro(e,t,n){var r=Te.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Fo(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Uv(e,t,n){var r=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return r?(e.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Wv(e,t,n){var r=Te.exec(t.slice(n,n+1));return r?(e.q=r[0]*3-3,n+r[0].length):-1}function Hv(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function Do(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function Gv(e,t,n){var r=Te.exec(t.slice(n,n+3));return r?(e.m=0,e.d=+r[0],n+r[0].length):-1}function Bo(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function Yv(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function qv(e,t,n){var r=Te.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function jv(e,t,n){var r=Te.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function Xv(e,t,n){var r=Te.exec(t.slice(n,n+6));return r?(e.L=Math.floor(r[0]/1e3),n+r[0].length):-1}function Kv(e,t,n){var r=Fv.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function Zv(e,t,n){var r=Te.exec(t.slice(n));return r?(e.Q=+r[0],n+r[0].length):-1}function Qv(e,t,n){var r=Te.exec(t.slice(n));return r?(e.s=+r[0],n+r[0].length):-1}function Po(e,t){return ue(e.getDate(),t,2)}function Jv(e,t){return ue(e.getHours(),t,2)}function e0(e,t){return ue(e.getHours()%12||12,t,2)}function t0(e,t){return ue(1+Wn.count(vt(e),e),t,3)}function wl(e,t){return ue(e.getMilliseconds(),t,3)}function n0(e,t){return wl(e,t)+"000"}function r0(e,t){return ue(e.getMonth()+1,t,2)}function i0(e,t){return ue(e.getMinutes(),t,2)}function a0(e,t){return ue(e.getSeconds(),t,2)}function o0(e){var t=e.getDay();return t===0?7:t}function s0(e,t){return ue(ei.count(vt(e)-1,e),t,2)}function Sl(e){var t=e.getDay();return t>=4||t===0?rn(e):rn.ceil(e)}function l0(e,t){return e=Sl(e),ue(rn.count(vt(e),e)+(vt(e).getDay()===4),t,2)}function u0(e){return e.getDay()}function c0(e,t){return ue(Pr.count(vt(e)-1,e),t,2)}function d0(e,t){return ue(e.getFullYear()%100,t,2)}function f0(e,t){return e=Sl(e),ue(e.getFullYear()%100,t,2)}function h0(e,t){return ue(e.getFullYear()%1e4,t,4)}function g0(e,t){var n=e.getDay();return e=n>=4||n===0?rn(e):rn.ceil(e),ue(e.getFullYear()%1e4,t,4)}function p0(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+ue(t/60|0,"0",2)+ue(t%60,"0",2)}function Vo(e,t){return ue(e.getUTCDate(),t,2)}function m0(e,t){return ue(e.getUTCHours(),t,2)}function v0(e,t){return ue(e.getUTCHours()%12||12,t,2)}function b0(e,t){return ue(1+Jr.count(bt(e),e),t,3)}function Cl(e,t){return ue(e.getUTCMilliseconds(),t,3)}function y0(e,t){return Cl(e,t)+"000"}function x0(e,t){return ue(e.getUTCMonth()+1,t,2)}function _0(e,t){return ue(e.getUTCMinutes(),t,2)}function k0(e,t){return ue(e.getUTCSeconds(),t,2)}function w0(e){var t=e.getUTCDay();return t===0?7:t}function S0(e,t){return ue(ti.count(bt(e)-1,e),t,2)}function Tl(e){var t=e.getUTCDay();return t>=4||t===0?an(e):an.ceil(e)}function C0(e,t){return e=Tl(e),ue(an.count(bt(e),e)+(bt(e).getUTCDay()===4),t,2)}function T0(e){return e.getUTCDay()}function A0(e,t){return ue(Vr.count(bt(e)-1,e),t,2)}function $0(e,t){return ue(e.getUTCFullYear()%100,t,2)}function N0(e,t){return e=Tl(e),ue(e.getUTCFullYear()%100,t,2)}function M0(e,t){return ue(e.getUTCFullYear()%1e4,t,4)}function E0(e,t){var n=e.getUTCDay();return e=n>=4||n===0?an(e):an.ceil(e),ue(e.getUTCFullYear()%1e4,t,4)}function L0(){return"+0000"}function zo(){return"%"}function Io(e){return+e}function Oo(e){return Math.floor(+e/1e3)}var Yt,Al,$l;R0({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function R0(e){return Yt=Rv(e),Al=Yt.format,Yt.parse,$l=Yt.utcFormat,Yt.utcParse,Yt}function F0(e){return new Date(e)}function D0(e){return e instanceof Date?+e:+new Date(+e)}function ka(e,t,n,r,i,a,o,s,l,u){var c=cl(),d=c.invert,f=c.domain,h=u(".%L"),g=u(":%S"),p=u("%I:%M"),b=u("%I %p"),m=u("%a %d"),x=u("%b %d"),k=u("%B"),R=u("%Y");function S(T){return(l(T)<T?h:s(T)<T?g:o(T)<T?p:a(T)<T?b:r(T)<T?i(T)<T?m:x:n(T)<T?k:R)(T)}return c.invert=function(T){return new Date(d(T))},c.domain=function(T){return arguments.length?f(Array.from(T,D0)):f().map(F0)},c.ticks=function(T){var M=f();return e(M[0],M[M.length-1],T??10)},c.tickFormat=function(T,M){return M==null?S:u(M)},c.nice=function(T){var M=f();return(!T||typeof T.range!="function")&&(T=t(M[0],M[M.length-1],T??10)),T?f(pl(M,T)):c},c.copy=function(){return Un(c,ka(e,t,n,r,i,a,o,s,l,u))},c}function B0(){return et.apply(ka(Ev,Lv,vt,xa,ei,Wn,ba,ma,Et,Al).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function P0(){return et.apply(ka(Nv,Mv,bt,_a,ti,Jr,ya,va,Et,$l).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function V0(){var e=0,t=1,n,r,i,a,o=Ie,s=!1,l;function u(d){return d==null||isNaN(d=+d)?l:o(i===0?.5:(d=(a(d)-n)*i,s?Math.max(0,Math.min(1,d)):d))}u.domain=function(d){return arguments.length?([e,t]=d,n=a(e=+e),r=a(t=+t),i=n===r?0:1/(r-n),u):[e,t]},u.clamp=function(d){return arguments.length?(s=!!d,u):s},u.interpolator=function(d){return arguments.length?(o=d,u):o};function c(d){return function(f){var h,g;return arguments.length?([h,g]=f,o=d(h,g),u):[o(0),o(1)]}}return u.range=c(dn),u.rangeRound=c(sa),u.unknown=function(d){return arguments.length?(l=d,u):l},function(d){return a=d,n=d(e),r=d(t),i=n===r?0:1/(r-n),u}}function Nl(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function Ml(){var e=Ut(V0()(Ie));return e.copy=function(){return Nl(e,Ml())},ll.apply(e,arguments)}function z0(){var e=0,t=.5,n=1,r=1,i,a,o,s,l,u=Ie,c,d=!1,f;function h(p){return isNaN(p=+p)?f:(p=.5+((p=+c(p))-a)*(r*p<r*a?s:l),u(d?Math.max(0,Math.min(1,p)):p))}h.domain=function(p){return arguments.length?([e,t,n]=p,i=c(e=+e),a=c(t=+t),o=c(n=+n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,h):[e,t,n]},h.clamp=function(p){return arguments.length?(d=!!p,h):d},h.interpolator=function(p){return arguments.length?(u=p,h):u};function g(p){return function(b){var m,x,k;return arguments.length?([m,x,k]=b,u=Wp(p,[m,x,k]),h):[u(0),u(.5),u(1)]}}return h.range=g(dn),h.rangeRound=g(sa),h.unknown=function(p){return arguments.length?(f=p,h):f},function(p){return c=p,i=p(e),a=p(t),o=p(n),s=i===a?0:.5/(a-i),l=a===o?0:.5/(o-a),r=a<i?-1:1,h}}function El(){var e=Ut(z0()(Ie));return e.copy=function(){return Nl(e,El())},ll.apply(e,arguments)}const Uo={scaleLinear:hl,scalePow:ga,scaleSqrt:xv,scaleLog:ml,scaleSymlog:vl,scaleIdentity:gl,scaleTime:B0,scaleUtc:P0,scaleSequential:Ml,scaleDiverging:El,scaleQuantize:yl,scaleQuantile:bl,scaleThreshold:xl,scaleOrdinal:ca,scaleBand:da,scalePoint:qm};var _e;(function(e){e.X="x",e.Y="y"})(_e||(_e={}));var zr;(function(e){e.West="west",e.East="east",e.North="north",e.South="south"})(zr||(zr={}));const I0=Object.assign(Object.assign({},Ls),{components:[],tooltip:void 0,crosshair:void 0,annotations:void 0,xAxis:void 0,yAxis:void 0,autoMargin:!0,xScale:void 0,xDomain:void 0,xDomainMinConstraint:void 0,xDomainMaxConstraint:void 0,xRange:void 0,yScale:void 0,yDomain:void 0,yDomainMinConstraint:void 0,yDomainMaxConstraint:void 0,yRange:void 0,yDirection:zr.North,preventEmptyDomain:null,scaleByDomain:!1,clipPathExtend:2});class O0 extends Nn{constructor(t,n,r){var i,a;super(t),this._defaultConfig=I0,this.datamodel=new ua,this.config=this._defaultConfig,this._clipPathId=Ws(),this._axisMargin={top:0,bottom:0,left:0,right:0},this._firstRender=!0,this._clipPath=this.svg.append("clipPath").attr("id",this._clipPathId),this._clipPath.append("rect");const o="saturate",s=window.location.href.replace(window.location.hash,"");this.svg.attr("class",ve`
      --highlight-filter-id: url(${s}#${o}); // defining a css variable
    `),this._svgDefs.append("filter").attr("id",o).attr("filterUnits","objectBoundingBox").html('<feColorMatrix type="saturate" in="SourceGraphic" values="1.35"/>'),n&&this.updateContainer(n,!0),r&&this.setData(r,!0),(this.config.xAxis||this.config.yAxis||!((i=this.components)===null||i===void 0)&&i.some(l=>l.datamodel.data))&&this.render(),(a=document.fonts)===null||a===void 0||a.ready.then(()=>{this._firstRender||this._renderAxes(0)})}get components(){return this.config.components}get width(){const t=this._getMargin();return dt(this.containerWidth-t.left-t.right,0,Number.POSITIVE_INFINITY)}get height(){const t=this._getMargin();return dt(this.containerHeight-t.top-t.bottom,0,Number.POSITIVE_INFINITY)}setData(t,n){var r,i,a,o,s;const{components:l,config:u}=this;if(!t)return;this.datamodel.data=t,l.forEach(d=>{d.setData(t)}),(r=u.crosshair)===null||r===void 0||r.setData(t),(i=u.xAxis)===null||i===void 0||i.setData(t),(a=u.yAxis)===null||a===void 0||a.setData(t),!Pt(this.datamodel.data,t)&&((o=u.tooltip)===null||o===void 0||o.hide(),(s=u.crosshair)===null||s===void 0||s.hide()),n||this.render()}updateContainer(t,n){super.updateContainer(t),this._removeAllChildren(),this.setData(this.datamodel.data,!0),t.xAxis&&(this.config.xAxis.config.type=le.X,this.element.appendChild(t.xAxis.element)),t.yAxis&&(this.config.yAxis.config.type=le.Y,this.element.appendChild(t.yAxis.element));for(const o of this.components)this.element.appendChild(o.element);const r=t.tooltip;r&&(r.hasContainer()||r.setContainer(this._container),r.setComponents(this.components));const i=t.crosshair;i&&(i.setContainer(this.svg),i.tooltip=r,this.element.appendChild(i.element));const a=t.annotations;a&&this.element.appendChild(a.element),this.element.appendChild(this._clipPath.node()),this.element.appendChild(this._svgDefs.node()),this.element.appendChild(this._svgDefsExternal.node()),n||this.render()}updateComponents(t,n){const{config:r}=this;this.components.forEach((i,a)=>{t[a]&&i.setConfig(t[a])}),this._updateScales(...this.components,r.xAxis,r.yAxis,r.crosshair),n||this.render()}update(t,n,r){r&&(this.datamodel.data=r),t&&this.updateContainer(t,!0),n&&this.updateComponents(n,!0),this.render()}_preRender(){const{config:t}=this;super._preRender(),t.autoMargin&&this._setAutoMargin();const n=hn([...this.components,t.xAxis,t.yAxis,t.crosshair,t.annotations]),r=this._getMargin();for(const i of n)i.setSize(this.width,this.height,this.containerWidth,this.containerHeight),i.setContainerMargin(r);this._updateScales(...this.components,t.xAxis,t.yAxis,t.crosshair)}_render(t){var n,r,i,a,o;const{config:s}=this;super._render();const l=this._getMargin();for(const d of this.components)d.g.attr("transform",`translate(${l.left},${l.top})`).style("clip-path",d.clippable?`url(#${this._clipPathId})`:null).style("-webkit-clip-path",d.clippable?`url(#${this._clipPathId})`:null),d.render(t);this._renderAxes(this._firstRender?0:t);const u=s.clipPathExtend;this._clipPath.select("rect").attr("x",-u).attr("y",-u).attr("width",this.width+2*u).attr("height",this.height+2*u),(n=s.tooltip)===null||n===void 0||n.update();const c=s.crosshair;if(c){const d=this.components.filter(p=>!p.stacked).map(p=>p.config.y),f=this.components.filter(p=>p.stacked).map(p=>p.config.y),h=(r=this.components.find(p=>p.config.baseline))===null||r===void 0?void 0:r.config,g=h?.baseline;c.accessors={x:(i=this.components[0])===null||i===void 0?void 0:i.config.x,y:Ci(d),yStacked:Ci(f),baseline:g},c.g.attr("transform",`translate(${l.left},${l.top})`).style("clip-path",`url(#${this._clipPathId})`).style("-webkit-clip-path",`url(#${this._clipPathId})`),c.render()}(a=s.annotations)===null||a===void 0||a.g.attr("transform",`translate(${l.left},${l.top})`),(o=s.annotations)===null||o===void 0||o.render(),this._firstRender=!1}_updateScales(...t){const n=hn(t||this.components);this._setScales(...n),this._updateScalesDomain(...n),this._updateScalesRange(...n)}_setScales(...t){const{config:n}=this;t&&(n.xScale&&t.forEach(r=>r.setScale(_e.X,n.xScale)),n.yScale&&t.forEach(r=>r.setScale(_e.Y,n.yScale)))}_updateScalesDomain(...t){const{config:n}=this;if(!t)return;const r=t.filter(i=>!i.config.excludeFromDomainCalculation);Object.values(_e).forEach(i=>{var a,o,s,l,u,c,d,f;const[h,g]=kh(Lh(r.map(S=>S.getDataExtent(i,n.scaleByDomain)))),p=i===_e.Y?n.yDomain:n.xDomain,b=i===_e.Y?n.yDomainMinConstraint:n.xDomainMinConstraint,m=i===_e.Y?n.yDomainMaxConstraint:n.xDomainMaxConstraint,x=(o=(a=p?.[0])!==null&&a!==void 0?a:h)!==null&&o!==void 0?o:0,k=(l=(s=p?.[1])!==null&&s!==void 0?s:g)!==null&&l!==void 0?l:1,R=[dt(x,(u=b?.[0])!==null&&u!==void 0?u:Number.NEGATIVE_INFINITY,(c=b?.[1])!==null&&c!==void 0?c:Number.POSITIVE_INFINITY),dt(k,(d=m?.[0])!==null&&d!==void 0?d:Number.NEGATIVE_INFINITY,(f=m?.[1])!==null&&f!==void 0?f:Number.POSITIVE_INFINITY)];if(R[0]===R[1]){const S=r.some(T=>{var M;return((M=T.datamodel.data)===null||M===void 0?void 0:M.length)>0});(n.preventEmptyDomain||n.preventEmptyDomain===null&&(!S||i===_e.Y))&&(R[1]=R[0]+1)}t.forEach(S=>S.setScaleDomain(i,R))})}_updateScalesRange(...t){var n,r,i,a,o,s;const{config:l}=this;if(!t)return;const u=l.yDirection===zr.South,c=[(n=l.padding.left)!==null&&n!==void 0?n:0,this.width-((r=l.padding.right)!==null&&r!==void 0?r:0)],d=[this.height-((i=l.padding.bottom)!==null&&i!==void 0?i:0),(a=l.padding.top)!==null&&a!==void 0?a:0];u&&d.reverse();for(const h of t)h.setSize(this.width,this.height,this.containerWidth,this.containerHeight),h.setScaleRange(_e.X,(o=l.xRange)!==null&&o!==void 0?o:c),h.setScaleRange(_e.Y,(s=l.yRange)!==null&&s!==void 0?s:d);const f=t.map(h=>h.bleed).reduce((h,g)=>{for(const p of Object.keys(h)){const b=p;h[b]<g[b]&&(h[b]=g[b])}return h},{top:0,bottom:0,left:0,right:0});for(const h of t)h.setScaleRange(_e.X,[c[0]+f.left,c[1]-f.right]),h.setScaleRange(_e.Y,u?[d[0]+f.top,d[1]-f.bottom]:[d[0]-f.bottom,d[1]+f.top])}_renderAxes(t){const{config:{xAxis:n,yAxis:r}}=this,i=this._getMargin();hn([n,r]).forEach(o=>{const s=o.getOffset(i);o.g.attr("transform",`translate(${s.left},${s.top})`),o.render(t)})}_setAutoMargin(){const{config:{xAxis:t,yAxis:n}}=this,r=hn([...this.components,t,n]);this._setScales(...r),this._updateScalesDomain(...r);const i=this._firstRender?2:1;for(let a=0;a<i;a+=1){const o={top:0,bottom:0,left:0,right:0};this._updateScalesRange(...r),hn([t,n]).forEach(l=>{l.preRender();const u=l.getRequiredMargin();o.top<u.top&&(o.top=u.top),o.bottom<u.bottom&&(o.bottom=u.bottom),o.left<u.left&&(o.left=u.left),o.right<u.right&&(o.right=u.right)}),this._axisMargin=o}}_getMargin(){const{config:{margin:t}}=this;return{top:t.top+this._axisMargin.top,bottom:t.bottom+this._axisMargin.bottom,left:t.left+this._axisMargin.left,right:t.right+this._axisMargin.right}}destroy(){const{components:t,config:{tooltip:n,crosshair:r,annotations:i,xAxis:a,yAxis:o}}=this;super.destroy();for(const s of t)s?.destroy();n?.destroy(),r?.destroy(),i?.destroy(),a?.destroy(),o?.destroy()}}const Ll={duration:600,events:{},attributes:{}};class U0{constructor(t=wn.SVG){var n,r;this.type=wn.SVG,this.datamodel=new ua,this.sizing=Qt.Fit,this.events={},this._defaultConfig=Ll,this._width=400,this._height=200,this._containerWidth=void 0,this._containerHeight=void 0,this._containerMargin={top:0,bottom:0,left:0,right:0},this._setUpComponentEventsThrottled=Sr(this._setUpComponentEvents,500),this._setCustomAttributesThrottled=Sr(this._setCustomAttributes,500),t===wn.SVG?this.element=document.createElementNS("http://www.w3.org/2000/svg","g"):this.element=document.createElement("div"),this.uid=Ws(),this.g=gt(this.element);const i=(r=(n=this.constructor)===null||n===void 0?void 0:n.selectors)===null||r===void 0?void 0:r.root;i&&this.g.attr("class",i)}setContainerMargin(t){this._containerMargin=t}setConfig(t){this.prevConfig=this.config,this.config=Jt(this._defaultConfig,t)}setData(t){this.datamodel.data=t}setSize(t,n,r,i){isFinite(t)&&(this._width=t),isFinite(n)&&(this._height=n),isFinite(r)&&(this._containerWidth=r),isFinite(i)&&(this._containerHeight=i)}render(t=this.config.duration){this._render(t);const n="animating";t&&(this.g.attr(n,""),this.g.transition(n).duration(t).on("end interrupt",()=>{this.g.attr(n,null)})),this._setUpComponentEventsThrottled(),this._setCustomAttributesThrottled()}get bleed(){return{top:0,bottom:0,left:0,right:0}}_render(t=this.config.duration){}_setCustomAttributes(){const t=this.config.attributes;Object.keys(t).forEach(n=>{Object.keys(t[n]).forEach(r=>{this.g.selectAll(`.${n}`).attr(r,t[n][r])})})}_setUpComponentEvents(){this._bindEvents(this.events),this._bindEvents(this.config.events,".user")}_bindEvents(t=this.events,n=""){Object.keys(t).forEach(r=>{Object.keys(t[r]).forEach(i=>{const a=this.g.selectAll(`.${r}`);a.on(i+n,(o,s)=>{const l=a.nodes(),u=l.indexOf(o.currentTarget),c=t[r][i];return c?.(s,o,u,l)})})})}destroy(){var t;(t=this.g)===null||t===void 0||t.remove(),this.element=void 0}isDestroyed(){return!this.element}}class W0 extends ua{constructor(t){super(t)}get data(){var t;return(t=this._data)!==null&&t!==void 0?t:[]}set data(t){Array.isArray(t)&&(this._data=t)}}const ni=Object.assign(Object.assign({},Ll),{x:void 0,y:void 0,id:(e,t)=>{var n;return(n=e.id)!==null&&n!==void 0?n:`${t}`},color:e=>e.color,xScale:void 0,yScale:void 0,excludeFromDomainCalculation:!1});class wa extends U0{constructor(){super(...arguments),this.datamodel=new W0,this.clippable=!0,this.stacked=!1,this._defaultConfig=ni,this._xScale=Uo.scaleLinear(),this._yScale=Uo.scaleLinear()}get xScale(){return this.config.xScale||this._xScale}get yScale(){return this.config.yScale||this._yScale}setConfig(t){var n,r;!((n=this.config)===null||n===void 0)&&n.xScale&&(t.xScale=this.config.xScale),!((r=this.config)===null||r===void 0)&&r.yScale&&(t.yScale=this.config.yScale),super.setConfig(t)}setScaleDomain(t,n){var r,i;t===_e.X&&((r=this._xScale)===null||r===void 0||r.domain(n)),t===_e.Y&&((i=this._yScale)===null||i===void 0||i.domain(n))}setScaleRange(t,n){var r,i;t===_e.X&&((r=this._xScale)===null||r===void 0||r.range(n)),t===_e.Y&&((i=this._yScale)===null||i===void 0||i.range(n))}setScale(t,n){n&&t===_e.X&&(this._xScale=n),n&&t===_e.Y&&(this._yScale=n)}getDataExtent(t,n){const{config:r,datamodel:i}=this;switch(t){case _e.X:return this.getXDataExtent();case _e.Y:return this.getYDataExtent(n);default:return rr(i.data,r[t])}}getXDataExtent(){const{config:t,datamodel:n}=this;return rr(n.data,t.x)}getYDataExtent(t){const{config:n,datamodel:r}=this,i=this.xScale.domain(),a=t?Wh(r.data,i,n.x,!0):r.data,o=un(n.y)?n.y:[n.y];return rr(a,...o)}}var U;(function(e){e.Top="top",e.Bottom="bottom",e.Left="left",e.Right="right",e.Center="center",e.Auto="auto"})(U||(U={}));var Wo;(function(e){e.Absolute="absolute",e.Fixed="fixed"})(Wo||(Wo={}));var Ho;(function(e){e.Inside="inside",e.Outside="outside",e.Center="center"})(Ho||(Ho={}));var Ir;(function(e){e.Horizontal="horizontal",e.Vertical="vertical"})(Ir||(Ir={}));const H0={components:[],container:void 0,followCursor:!0,allowHover:!1,horizontalPlacement:U.Auto,horizontalShift:0,verticalPlacement:U.Top,verticalShift:0,attributes:{},triggers:{},className:void 0,showDelay:void 0,hideDelay:void 0},ri=ve`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  opacity: 0;
  transition: opacity;
  transition-duration: var(--vis-tooltip-transition-duration);
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  color: var(--vis-tooltip-text-color);
  border-radius: var(--vis-tooltip-border-radius);
  box-shadow: var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,G0=ri,Y0=In`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;
    --vis-tooltip-border-radius: 5px;
    --vis-tooltip-transition-duration: 300ms;
    --vis-tooltip-box-shadow: none;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${ri}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,Rl=ve`
  bottom: unset;
  position: fixed;
`,dr=ve`
  opacity: 1;
`,fr=ve`
  display: none;
`,Fl=ve`
  label: non-interactive;
  pointer-events: none;
  user-select: none;
`,q0=Object.freeze(Object.defineProperty({__proto__:null,hidden:fr,nonInteractive:Fl,positionFixed:Rl,root:ri,show:dr,tooltip:G0,variables:Y0},Symbol.toStringTag,{value:"Module"}));class Dl{constructor(t={}){this._defaultConfig=H0,this.config=this._defaultConfig,this._setUpEventsThrottled=Sr(this._setUpEvents,500),this._setContainerPositionThrottled=Sr(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement("div"),this.div=gt(this.element).attr("class",ri).classed(dr,!1).classed(fr,!0),this.setConfig(t),this.components=this.config.components,this._mutationObserver=new MutationObserver(()=>{this._isShown&&(!this.config.followCursor&&this._hoveredElement?this.placeByElement(this._hoveredElement):this._position&&this.place({x:this._position[0],y:this._position[1]}))}),this._mutationObserver.observe(this.div.node(),{childList:!0,subtree:!0})}setConfig(t){var n;this.prevConfig=this.config,this.config=Jt(this._defaultConfig,t),this.prevConfig.horizontalPlacement!==this.config.horizontalPlacement&&this.overrideHorizontalPlacement(void 0),this.config.container&&this.config.container!==((n=this.prevConfig)===null||n===void 0?void 0:n.container)&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(t){var n;(n=this.element.parentNode)===null||n===void 0||n.removeChild(this.element),this._container=t,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(t){this.components=t}update(){this._container&&this._setUpEventsThrottled()}show(t,n){this.render(t),this.place(n)}_hide(){this.div.classed(dr,!1).on("transitionend",()=>{this.div.classed(fr,!this._isShown)}),this._isShown=!1}hide(){window.clearTimeout(this._showDelayTimeoutId),this.config.hideDelay?(window.clearTimeout(this._hideDelayTimeoutId),this._hideDelayTimeoutId=setTimeout(()=>this._hide(),this.config.hideDelay)):this._hide()}_display(){window.clearTimeout(this._hideDelayTimeoutId),this.div.classed(fr,!1).classed(dr,!0),this._isShown=!0}display(){this._isShown||(this.config.showDelay?(window.clearTimeout(this._showDelayTimeoutId),this._showDelayTimeoutId=setTimeout(()=>{this._display(),this.place({x:this._position[0],y:this._position[1]})},this.config.showDelay)):this._display())}place(t){if(this._position=[t.x,t.y],!this.hasContainer()){console.warn("Unovis | Tooltip: Container was not set or is not initialized yet");return}const{config:n}=this,r=this.element.offsetWidth,i=this.element.offsetHeight,a=this._overriddenHorizontalPlacement||(n.horizontalPlacement===U.Auto?U.Center:n.horizontalPlacement),o=n.verticalPlacement===U.Auto?t.y-i<0?U.Bottom:U.Top:n.verticalPlacement,s=5,l=a===U.Left?-r-s-n.horizontalShift:a===U.Center?-r/2:s+n.horizontalShift,u=o===U.Bottom?s+n.verticalShift:o===U.Center?-i/2:-s-n.verticalShift-i,[c,d]=this._constraintPosToContainer(t.x+l,t.y+u,r,i);this._applyPosition(c,d,i)}placeByElement(t){const{config:n}=this;this._hoveredElement=t;const r=5,i=this.element.offsetWidth,a=this.element.offsetHeight,o=this.isContainerBody(),s=o?window.innerWidth:this._container.scrollWidth,l=t.getBoundingClientRect(),u=o?[l.x,l.y]:xr({clientX:l.x,clientY:l.y,pageX:l.x,pageY:l.y},this._container),c=this._overriddenHorizontalPlacement||(n.horizontalPlacement===U.Auto?u[0]-i<0?U.Right:u[0]+i>s?U.Left:U.Center:n.horizontalPlacement);let d=0;switch(c){case U.Left:d=-i-r-n.horizontalShift;break;case U.Right:d=l.width+r+n.horizontalShift;break;case U.Center:default:d=(-i+l.width)/2;break}const f=n.verticalPlacement===U.Auto?c!==U.Center?U.Center:u[1]-a<0?U.Bottom:U.Top:n.verticalPlacement;let h=-a;switch(f){case U.Center:h+=(a+l.height)/2;break;case U.Bottom:h+=a+l.height+r+n.verticalShift;break;case U.Top:default:h+=-r-n.verticalShift;break}const[g,p]=this._constraintPosToContainer(u[0]+d,u[1]+h,i,a);this._applyPosition(g,p,a)}isContainerBody(){return this._container===document.body}overrideHorizontalPlacement(t){this._overriddenHorizontalPlacement=t}render(t){var n;const{config:r,prevConfig:i}=this;t instanceof HTMLElement?this.div.select(":first-child").node()!==t&&this.div.html("").append(()=>t):t&&this.div.html(t),this.div.classed((n=r.className)!==null&&n!==void 0?n:"",!!r.className).classed(Fl,!r.allowHover),i?.className&&i.className!==r.className&&this.div.classed(i.className,!1),this.display()}_applyPosition(t,n,r){const i=this.isContainerBody(),a=i?window.innerHeight:this._container.scrollHeight;this.div.classed(Rl,i).style("top",i?`${n}px`:"unset").style("bottom",i?"unset":`${a-n-r}px`).style("left",`${t}px`)}_constraintPosToContainer(t,n,r,i){const a=this.isContainerBody(),o=a?window.innerHeight:this._container.scrollHeight,s=a?window.innerWidth:this._container.scrollWidth,l=10,u=t>s-r-l,c=t<l,d=u?s-r-l:c?l:t,f=10,h=n>o-i-f,g=n<f,p=h?o-i-f:g?f:n;return[s<r?0:d,o<i?0:p]}_setContainerPosition(){var t;this._container!==document.body&&((t=getComputedStyle(this._container))===null||t===void 0?void 0:t.position)==="static"&&(this._container.style.position="relative")}_setUpEvents(){const{config:t}=this;this.components.forEach(n=>{const r=gt(n.element);r.on("mousemove.tooltip",i=>{const{config:a}=this,o=i.composedPath&&i.composedPath()||i.path||[i.target];for(const s of Object.keys(a.triggers)){const l=a.triggers[s];if(!l)continue;const u=r.selectAll(`.${s}`).nodes();for(const c of o){if(c===r.node())break;if(c.classList.contains(s)){const d=u.indexOf(c),f=gt(c).datum(),h=l(f,d,u),[g,p]=this.isContainerBody()?[i.clientX,i.clientY]:xr(i,this._container);h===null?this.hide():(this.render(h),a.followCursor?this.place({x:g,y:p}):this.placeByElement(c)),i.stopPropagation();return}}}this._isShown&&this.hide()}).on("mouseleave.tooltip",i=>{i.stopPropagation(),this.hide()})}),t.allowHover?this.div.on("mouseenter.tooltip",this._display.bind(this)).on("mouseleave.tooltip",this.hide.bind(this)):this.div.on("mouseenter.tooltip",null).on("mouseleave.tooltip",null)}_setUpAttributes(){const t=this.config.attributes;t&&Object.keys(t).forEach(n=>{this.div.attr(n,t[n])})}destroy(){var t;this._mutationObserver.disconnect(),window.clearTimeout(this._hideDelayTimeoutId),window.clearTimeout(this._showDelayTimeoutId),(t=this.div)===null||t===void 0||t.remove()}}Dl.selectors=q0;function qt(e,t,n,r){return Array.isArray(t)&&isFinite(n)?t[n%t.length]:Ti(e,t,n)||(St(n)?`var(${_t(n)})`:null)}function j0({x:e,y:t,w:n,h:r,tl:i=!1,tr:a=!1,bl:o=!1,br:s=!1,r:l=0}){let u;u=`M${e+l},${t}h${n-2*l}`;let c=a?l:0,d=a?0:l;return u+=`a${c},${c} 0 0 1 ${c},${c}`,u+=`h${d}v${d}`,u+=`v${r-2*l}`,c=s?l:0,d=s?0:l,u+=`a${c},${c} 0 0 1 ${-c},${c}`,u+=`v${d}h${-d}`,u+=`h${2*l-n}`,c=o?l:0,d=o?0:l,u+=`a${c},${c} 0 0 1 ${-c},${-c}`,u+=`h${-d}v${-d}`,u+=`v${2*l-r}`,c=i?l:0,d=i?0:l,u+=`a${c},${c} 0 0 1 ${c},${-c}`,u+=`v${-d}h${d}`,u+="z",u}const X0=Object.assign(Object.assign({},ni),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:Ir.Vertical}),Bl=ve`
  label: stacked-bar-component;
`,K0=In`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${Bl}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,hr=ve`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,Ii=ve`
  label: barGroup;
`,Pl=ve`
  label: barGroupExit;
`,Z0=Object.freeze(Object.defineProperty({__proto__:null,bar:hr,barGroup:Ii,barGroupExit:Pl,globalStyles:K0,root:Bl},Symbol.toStringTag,{value:"Module"}));class Sa extends wa{constructor(t){super(),this._defaultConfig=X0,this.config=this._defaultConfig,this.getAccessors=()=>un(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],t&&this.setConfig(t)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const t=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],n=this.dataScale.domain(),r=this._getBarWidth()/2,i=this._barData.map((h,g)=>ye(h,this.config.x,g)),a=Cn(i),o=Si(i),s=this.dataScale(a),l=this.dataScale(o),u=this.dataScale.invert(s+(t?r:-r)),c=this.dataScale.invert(l+(t?-r:r)),d=u<=n[0]?this.dataScale(n[0])-this.dataScale(u):0,f=c>n[1]?this.dataScale(c)-this.dataScale(n[1]):0;return{top:this.isVertical()?0:t?-f:d,bottom:this.isVertical()?0:t?-d:f,left:this.isVertical()?d:0,right:this.isVertical()?f:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===Ir.Vertical}_render(t){const{config:n}=this,r=St(t)?t:n.duration,i=this.getAccessors(),a=Ih(this._barData,0,i,this._prevNegative);this._prevNegative=a.map(g=>!!g.isMostlyNegative);const o=this.g.selectAll(`.${Ii}`).data(this._barData,(g,p)=>{var b;return`${(b=Ti(g,n.id,p))!==null&&b!==void 0?b:p}`}),s=(g,p)=>{const b=this.dataScale(ye(g,n.x,p)),m=this.isVertical()?b:0,x=this.isVertical()?0:b;return`translate(${m},${x})`},u=o.enter().append("g").attr("class",Ii).attr("transform",s).style("opacity",1).merge(o);Ye(u,r).attr("transform",s).style("opacity",1);const c=o.exit().attr("class",Pl);Ye(c,r).style("opacity",0).remove(),Ye(c.selectAll(`.${hr}`),r).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const d=u.selectAll(`.${hr}`).data((g,p)=>a.map((b,m)=>Object.assign(Object.assign({},g),{_index:p,_stacked:b[p],_ending:m===a.length-1||m<=a.length-1&&a[m+1][p][0]!==b[p][1]}))),h=d.enter().append("path").attr("class",hr).attr("d",(g,p)=>this._getBarPath(g,p,!0)).style("fill",(g,p)=>qt(g,n.color,p)).merge(d);Ye(h,r).attr("d",(g,p)=>this._getBarPath(g,p)).style("fill",(g,p)=>qt(g,n.color,p)).style("cursor",(g,p)=>Ti(g,n.cursor,p)),Ye(d.exit(),r).style("opacity",0).remove()}_getBarWidth(){const{config:t,datamodel:{data:n}}=this;if(Ph(n))return 0;if(t.barWidth)return Cn([t.barWidth,t.barMaxWidth]);const r=this.dataScale.bandwidth,i=this.dataScale.domain?this.dataScale.domain():[];let o=1+(r?i.length:i[1]-i[0])/t.dataStep||!r&&n.filter((u,c)=>{const d=ye(u,t.x,c);return d>=i[0]&&d<=i[1]}).length||n.length;!r&&o>=2&&(o+=1);const l=(o<2?1:1-t.barPadding)*(this.isVertical()?this._width:this._height)/o;return Cn([l,t.barMaxWidth])}_getVisibleData(){const{config:t,datamodel:{data:n}}=this,r=this._getBarWidth(),i=n.length<2?0:r/2,a=this.dataScale,o=Math.abs(a.invert(i)-a.invert(0));return n?.filter((l,u)=>{const c=ye(l,t.x,u),d=a.domain(),f=+d[0],h=+d[1];return c>=f-o&&c<=h+o})}_getBarPath(t,n,r=!1){const{config:i}=this,a=this.getAccessors(),o=this._getBarWidth(),s=t._stacked[1]<0,l=t._ending,u=ye(t,a[n],t._index),c=r?0:Math.abs(this.valueScale(t._stacked[0])-this.valueScale(t._stacked[1])),d=!r&&i.barMinHeight1Px&&c<1&&isFinite(u)&&u!==i.barMinHeightZeroValue?1:c,f=r?this.valueScale(0):this.valueScale(s?t._stacked[0]:t._stacked[1])-(c<1&&i.barMinHeight1Px?1:0),h=-o/2,g=o,p=i.roundedCorners?St(i.roundedCorners)?+i.roundedCorners:g/2:0,b=dt(p,0,Math.min(c,g)/2),m=this.yScale.range()[0]>this.yScale.range()[1];return j0({x:this.isVertical()?h:f-d,y:this.isVertical()?f+(m?0:-d):h,w:this.isVertical()?g:d,h:this.isVertical()?d:g,tl:l&&(this.isVertical()?!s&&m||s&&!m:s),tr:l&&(this.isVertical()?!s&&m||s&&!m:!s),br:l&&(this.isVertical()?s&&m||!s&&!m:!s),bl:l&&(this.isVertical()?s&&m||!s&&!m:s),r:b})}getValueScaleExtent(t){const{datamodel:n}=this,r=this.getAccessors(),i=t?this._getVisibleData():n.data;return Vh(i,...r)}getDataScaleExtent(){const{config:t,datamodel:n}=this;return rr(n.data,t.x)}getYDataExtent(t){return this.isVertical()?this.getValueScaleExtent(t):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}Sa.selectors=Z0;function Q0(e){return e}var gr=1,pr=2,Oi=3,kn=4,Go=1e-6;function J0(e){return"translate("+e+",0)"}function eb(e){return"translate(0,"+e+")"}function tb(e){return t=>+e(t)}function nb(e,t){return t=Math.max(0,e.bandwidth()-t*2)/2,e.round()&&(t=Math.round(t)),n=>+e(n)+t}function rb(){return!this.__axis}function ii(e,t){var n=[],r=null,i=null,a=6,o=6,s=3,l=typeof window<"u"&&window.devicePixelRatio>1?0:.5,u=e===gr||e===kn?-1:1,c=e===kn||e===pr?"x":"y",d=e===gr||e===Oi?J0:eb;function f(h){var g=r??(t.ticks?t.ticks.apply(t,n):t.domain()),p=i??(t.tickFormat?t.tickFormat.apply(t,n):Q0),b=Math.max(a,0)+s,m=t.range(),x=+m[0]+l,k=+m[m.length-1]+l,R=(t.bandwidth?nb:tb)(t.copy(),l),S=h.selection?h.selection():h,T=S.selectAll(".domain").data([null]),M=S.selectAll(".tick").data(g,t).order(),Z=M.exit(),K=M.enter().append("g").attr("class","tick"),$=M.select("line"),_=M.select("text");T=T.merge(T.enter().insert("path",".tick").attr("class","domain").attr("stroke","currentColor")),M=M.merge(K),$=$.merge(K.append("line").attr("stroke","currentColor").attr(c+"2",u*a)),_=_.merge(K.append("text").attr("fill","currentColor").attr(c,u*b).attr("dy",e===gr?"0em":e===Oi?"0.71em":"0.32em")),h!==S&&(T=T.transition(h),M=M.transition(h),$=$.transition(h),_=_.transition(h),Z=Z.transition(h).attr("opacity",Go).attr("transform",function(y){return isFinite(y=R(y))?d(y+l):this.getAttribute("transform")}),K.attr("opacity",Go).attr("transform",function(y){var w=this.parentNode.__axis;return d((w&&isFinite(w=w(y))?w:R(y))+l)})),Z.remove(),T.attr("d",e===kn||e===pr?o?"M"+u*o+","+x+"H"+l+"V"+k+"H"+u*o:"M"+l+","+x+"V"+k:o?"M"+x+","+u*o+"V"+l+"H"+k+"V"+u*o:"M"+x+","+l+"H"+k),M.attr("opacity",1).attr("transform",function(y){return d(R(y)+l)}),$.attr(c+"2",u*a),_.attr(c,u*b).text(p),S.filter(rb).attr("fill","none").attr("font-size",10).attr("font-family","sans-serif").attr("text-anchor",e===pr?"start":e===kn?"end":"middle"),S.each(function(){this.__axis=R})}return f.scale=function(h){return arguments.length?(t=h,f):t},f.ticks=function(){return n=Array.from(arguments),f},f.tickArguments=function(h){return arguments.length?(n=h==null?[]:Array.from(h),f):n.slice()},f.tickValues=function(h){return arguments.length?(r=h==null?null:Array.from(h),f):r&&r.slice()},f.tickFormat=function(h){return arguments.length?(i=h,f):i},f.tickSize=function(h){return arguments.length?(a=o=+h,f):a},f.tickSizeInner=function(h){return arguments.length?(a=+h,f):a},f.tickSizeOuter=function(h){return arguments.length?(o=+h,f):o},f.tickPadding=function(h){return arguments.length?(s=+h,f):s},f.offset=function(h){return arguments.length?(l=+h,f):l},f}function Yo(e){return ii(gr,e)}function qo(e){return ii(pr,e)}function jo(e){return ii(Oi,e)}function Xo(e){return ii(kn,e)}var Ct;(function(e){e.Start="start",e.Middle="middle",e.End="end"})(Ct||(Ct={}));var Dt;(function(e){e.Top="top",e.Middle="middle",e.Bottom="bottom"})(Dt||(Dt={}));var ut;(function(e){e.Wrap="wrap",e.Trim="trim"})(ut||(ut={}));var Ze;(function(e){e.Left="left",e.Center="center",e.Right="right"})(Ze||(Ze={}));var mr={exports:{}},ib=mr.exports,Ko;function ab(){return Ko||(Ko=1,(function(e){(function(t){if(typeof n!="function"){var n=function(g){return g};n.nonNative=!0}const r=n("plaintext"),i=n("html"),a=n("comment"),o=/<(\w*)>/g,s=/<\/?([^\s\/>]+)/;function l(g,p,b){g=g||"",p=p||[],b=b||"";let m=c(p,b);return d(g,m)}function u(g,p){g=g||[],p=p||"";let b=c(g,p);return function(x){return d(x||"",b)}}l.init_streaming_mode=u;function c(g,p){return g=f(g),{allowable_tags:g,tag_replacement:p,state:r,tag_buffer:"",depth:0,in_quote_char:""}}function d(g,p){if(typeof g!="string")throw new TypeError("'html' parameter must be a string");let b=p.allowable_tags,m=p.tag_replacement,x=p.state,k=p.tag_buffer,R=p.depth,S=p.in_quote_char,T="";for(let M=0,Z=g.length;M<Z;M++){let K=g[M];if(x===r)switch(K){case"<":x=i,k+=K;break;default:T+=K;break}else if(x===i)switch(K){case"<":if(S)break;R++;break;case">":if(S)break;if(R){R--;break}S="",x=r,k+=">",b.has(h(k))?T+=k:T+=m,k="";break;case'"':case"'":K===S?S="":S=S||K,k+=K;break;case"-":k==="<!-"&&(x=a),k+=K;break;case" ":case`
`:if(k==="<"){x=r,T+="< ",k="";break}k+=K;break;default:k+=K;break}else if(x===a)switch(K){case">":k.slice(-2)=="--"&&(x=r),k="";break;default:k+=K;break}}return p.state=x,p.tag_buffer=k,p.depth=R,p.in_quote_char=S,T}function f(g){let p=new Set;if(typeof g=="string"){let b;for(;b=o.exec(g);)p.add(b[1])}else!n.nonNative&&typeof g[n.iterator]=="function"?p=new Set(g):typeof g.forEach=="function"&&g.forEach(p.add,p);return p}function h(g){let p=s.exec(g);return p?p[1].toLowerCase():null}e.exports?e.exports=l:t.striptags=l})(ib)})(mr)),mr.exports}var ob=ab();const sb=Lu(ob);function lb(e){switch(e){case Ze.Center:return"middle";case Ze.Right:return"end";case Ze.Left:default:return"start"}}const ub=e=>{switch(e){case Ze.Left:return"start";case Ze.Right:return"end";case Ze.Center:return"middle";default:return null}};function cb(e){return e.replace(/-([a-z])/g,(t,n)=>n.toUpperCase())}function db(e){var t;return(t=e.match(/[A-Z]{2,}(?=[A-Z][a-z0-9]*|\b)|[A-Z]?[a-z0-9]*|[A-Z]|[0-9]+/g))===null||t===void 0?void 0:t.filter(Boolean).map(n=>n.toLowerCase()).join("-")}function fb(e){return e.replace(/['"]/g,"&#39;").replace(/\u0000/g,"\\0").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\v/g,"\\v").replace(/\t/g,"\\t").replace(/\f/g,"\\f")}function hb(e,t=15){return e?e.length>t?`…${e.substr(e.length-t,t)}`:e:""}function gb(e,t=15){if(!e)return"";const n=Math.floor((t-3)/2);return e.length>t?`${e.substr(0,n)}…${e.substr(-n,n)}`:e}function pb(e,t=15){return e?e.length>t?`${e.substr(0,t)}…`:e:""}function mb(e,t=15,n=Ct.Middle){if(!e)return"";let r=pb(e,t);return n===Ct.Start?r=hb(e,t):n===Ct.Middle&&(r=gb(e,t)),r}function Vl(e,t=[" "]){let n=[e];for(let r=0;r<t.length;r++){const i=t[r];n.forEach((a,o)=>{const s=a.split(i),l=s.map((u,c)=>`${u}${c===s.length-1?"":i}`);n[o]=l}),n=Ci(n)}return n}function vb(e,t,n=[" ","-",".",","]){const r=e.text();if(!r)return;const i=un(n)?n:[n],a=Vl(r,i),o=parseFloat(e.attr("x"))||0;e.text("");let s=e.append("tspan").attr("x",o),l=`${a[0]}`;s.text(l),a.forEach((u,c)=>{if(c===0)return;const d=`${l}${u}`;s.text(d),s.node().getComputedTextLength()>t?(s.text(l.trim()),s=e.append("tspan").attr("x",o).attr("dy","1.2em").text(u),l=u):l+=u})}function Zo(e,t,n,r,i,a){var o;t===void 0&&(t=50),n===void 0&&(n=Ct.Middle),i===void 0&&(i=+((o=window.getComputedStyle(e.node()))===null||o===void 0?void 0:o.fontSize)||0),a===void 0&&(a=Xs());const s=e.text()||"",l=s.length,u=i*l*a,d=Math.ceil(l*t/(1.1*u));return d<l?(e.text(mb(s,d,n)),!0):!1}function vr(e,t,n=Xs()){return e.length*t*n||0}function br(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),a=document.createElementNS(r,"text");a.textContent=e,a.setAttribute("font-size",`${n}`),a.setAttribute("font-family",t),i.appendChild(a),document.body.appendChild(i);const o=a.getComputedTextLength();return document.body.removeChild(i),o}function bb(e,t=void 0,n=!0,r=qs,i=!1){var a,o,s;const l=`${e.text}`;if(!l)return[];const u=(a=e.fontSize)!==null&&a!==void 0?a:An.fontSize,c=(o=e.fontFamily)!==null&&o!==void 0?o:An.fontFamily,d=(s=e.fontWidthToHeightRatio)!==null&&s!==void 0?s:An.fontWidthToHeightRatio,f=Array.isArray(r)?r:[r];return l.split(`
`).map(g=>{const p=[];if(!t)return[g];const b=Vl(g,f);let m="";for(let x=0;x<b.length;x+=1){(n?vr(m+b[x],u,d):br(m+b[x],c,u))<t||x===0?m+=b[x]:(p.push(m.trim()),m=b[x]);const R=2;if(i)for(;m.trim().length>R&&(n?vr(m,u,d):br(m,c,u))>t;){let T=m.trim().length-R;for(;T>0;){const M=`${m.substring(0,T)}${js}`;if((n?vr(M,u,d):br(M,c,u))<=t||T===1){p.push(M.trim()),m=m.substring(T);break}T--}}}return m&&p.push(m.trim()),p}).flat()}function yb(e,t=void 0,n=void 0,r=!0,i=qs,a=!1){const o=Array.isArray(e)?e.map(d=>Jt(An,d)):[Jt(An,e)],s=o.map(d=>bb(d,t,r,i,a)),l=o[0];let u=-l.fontSize*(l.lineHeight-1);const c=[];return o.forEach((d,f)=>{var h;let g=s[f];const p=f>0?c[f-1]:void 0,b=p?p.marginBottom:0,m=d.marginTop,x=Math.max(b,m);u+=x;const k=d.fontSize*d.lineHeight;let R=0;for(let S=0;S<g.length;S+=1){let T=g[S];u+=k;const M=`${T} …`,Z=r?vr(M,d.fontSize,d.fontWidthToHeightRatio):br(M,d.fontFamily,d.fontSize);if(R=Math.max(Z,R),n&&u+k>n&&S!==g.length-1){T.charAt(T.length-1)===js&&(T=T.substr(0,g[S].length-1)),Z<t?g[S]=M:g[S]=`${g[S].substr(0,g[S].length-2)}…`,g=g.slice(0,S+1);break}}c.push(Object.assign(Object.assign({},d),{_lines:g,_estimatedHeight:u-(p?._estimatedHeight||0),_maxWidth:Math.max(R,(h=p?._maxWidth)!==null&&h!==void 0?h:0)}))}),c}function xb(e,t=0,n){return e.map((r,i)=>{const a=i>0?e[i-1]:void 0,o=a?a.marginBottom/a.fontSize:0,s=r.marginTop/r.fontSize,l=Math.max(o,s),u={fontSize:r.fontSize,fontFamily:r.fontFamily,fontWeight:r.fontWeight,fill:r.color,y:i===0&&n};return`<tspan xmlns="http://www.w3.org/2000/svg" ${Object.entries(u).filter(([d,f])=>f).map(([d,f])=>`${db(d)}="${fb(f.toString())}"`).join(" ")}>${r._lines.map((d,f)=>{let h;return i===0&&f===0?h=.8+l:f===0?h=l+r.lineHeight:h=r.lineHeight,`<tspan x="${t}" dy="${h}em">${d.length?d:" "}</tspan>`}).join("")}</tspan>`})}function _b(e){return Fh(e,t=>t._estimatedHeight)}const kb=["text","tspan","textPath","altGlyph","altGlyphDef","altGlyphItem","glyphRef","textRef","textArea"];function wb(e,t,n,r){var i,a;const o=yb(t,n.width,void 0,n.fastMode,n.separator,n.wordBreak),s=(i=n.x)!==null&&i!==void 0?i:+e.getAttribute("x"),l=(a=n.y)!==null&&a!==void 0?a:+e.getAttribute("y"),u=s??0;let c=l??0;if(n.textAlign&&e.setAttribute("text-anchor",lb(n.textAlign)),n.verticalAlign&&n.verticalAlign!==Dt.Top){const d=_b(o),f=n.verticalAlign===Dt.Middle?-d/2:n.verticalAlign===Dt.Bottom?-d:0;c+=f}n.textRotationAngle?e.setAttribute("transform",`rotate(${n.textRotationAngle===0||n.textRotationAngle?n.textRotationAngle:0} ${u} ${c})`):e.removeAttribute("transform");{const d=new DOMParser;e.textContent="",o.forEach(f=>{const h=xb([f],u,c).join(""),g=sb(h,kb),p=d.parseFromString(g,"image/svg+xml").firstChild;e.appendChild(p)})}}const Sb=Object.assign(Object.assign({},ni),{position:void 0,type:void 0,label:void 0,labelFontSize:null,labelTextFitMode:ut.Wrap,labelTextTrimType:Ct.Middle,gridLine:!0,tickLine:!0,domainLine:!0,numTicks:void 0,minMaxTicksOnly:!1,minMaxTicksOnlyWhenWidthIsLess:250,minMaxTicksOnlyShowGridLines:!1,tickTextWidth:void 0,tickTextSeparator:void 0,tickTextForceWordBreak:!1,tickTextTrimType:Ct.Middle,tickTextFitMode:ut.Wrap,tickTextFontSize:null,tickTextAlign:void 0,tickTextColor:null,tickTextAngle:void 0,labelMargin:8,labelColor:null,tickFormat:void 0,tickValues:void 0,fullSize:!0,tickPadding:8,tickTextHideOverlapping:void 0});function Cb(e,t){const n="--vis-",r=Object.entries(e);return Object.fromEntries(r.map(([i])=>[cb(i.replace(n,"")),i]))}function Tb(e,t){In({":root":e,[`body.theme-dark .${t}`]:Object.keys(e).filter(n=>n.includes("--vis-dark")).map(n=>({[n.replace("--vis-dark","--vis")]:`var(${n})`}))})}const zl=ve`
  label: axis-component;
`,Ca={"--vis-axis-tick-color":"#e8e9ef","--vis-axis-grid-color":"#e8e9ef","--vis-axis-grid-line-width":"1px","--vis-axis-grid-line-dasharray":"none","--vis-axis-label-font-size":"14px","--vis-axis-label-color":"#6c778c","--vis-axis-label-weight":"500","--vis-axis-tick-label-color":"#6c778c","--vis-axis-tick-label-font-size":"12px","--vis-axis-tick-label-weight":"500","--vis-axis-tick-label-cursor":"default","--vis-axis-tick-label-text-decoration":"none","--vis-axis-tick-line-width":"1px","--vis-axis-tick-label-hide-transition":"opacity 400ms ease-in-out","--vis-dark-axis-tick-color":"#6c778c","--vis-dark-axis-tick-label-color":"#e8e9ef","--vis-dark-axis-grid-color":"#6c778c","--vis-dark-axis-label-color":"#fefefe"},Ab=Cb(Ca);Tb(Ca,zl);const Ta=ve`
  label: hide-tick-line;
`,Aa=ve`
  label: hide-domain;
`,Il=ve`
  label: axis;

  user-select: none;

  .domain {
    stroke: var(--vis-axis-domain-color, var(--vis-axis-tick-color));
    stroke-width: var(--vis-axis-domain-line-width, var(--vis-axis-grid-line-width));
    stroke-dasharray: var(--vis-axis-domain-line-dasharray, var(--vis-axis-grid-line-dasharray));
  }

  &${`.${Ta}`} {
    .tick > line {
      opacity: 0;
    }
  }

  &${`.${Aa}`} {
    .domain {
      opacity: 0;
    }
  }
`,Ol=ve`
  label: grid;

  .domain {
    opacity: 0;
  }

  line {
    stroke: var(--vis-axis-grid-color);
    stroke-width: var(--vis-axis-grid-line-width);
    stroke-dasharray: var(--vis-axis-grid-line-dasharray);
  }
`,Ul=ve`
  label: tick;

  stroke: none;
  font-size: var(--vis-axis-tick-label-font-size);
  font-weight: var(--vis-axis-tick-label-weight);

  line {
    stroke: var(--vis-axis-tick-color);
    stroke-width: var(--vis-axis-tick-line-width);
  }

  text {
    fill: var(--vis-axis-tick-label-color);
    cursor: var(--vis-axis-tick-label-cursor);
    font-family: var(--vis-axis-font-family, var(--vis-font-family));
    text-decoration: var(--vis-axis-tick-label-text-decoration);
    stroke: none;
  }
`,Ui=ve`
  label: tick-text-exiting;
`,Wi=ve`
  label: label;
  fill: var(--vis-axis-label-color);
  font-size: var(--vis-axis-label-font-size);
  font-weight: var(--vis-axis-label-weight);
  font-family: var(--vis-axis-font-family, var(--vis-font-family));
  text-anchor: middle;
`,Wl=ve`
  label: tick-label;
`,Hl=ve`
  label: tick-label-hideable;
  opacity: 0;
  transition: var(--vis-axis-tick-label-hide-transition);
`,$b=Object.freeze(Object.defineProperty({__proto__:null,axis:Il,cssVarDefaults:Ca,grid:Ol,hideDomain:Aa,hideTickLine:Ta,label:Wi,root:zl,tick:Ul,tickLabel:Wl,tickLabelHideable:Hl,tickTextExiting:Ui,variables:Ab},Symbol.toStringTag,{value:"Module"}));class Gl extends wa{constructor(t){super(),this._defaultConfig=Sb,this.config=this._defaultConfig,this._defaultNumTicks=3,this.events={},t&&this.setConfig(t),this.axisGroup=this.g.append("g"),this.gridGroup=this.g.append("g").attr("class",Ol)}preRender(){const{config:t}=this,n=this.g.append("g").attr("opacity",0);this._renderAxis(n,0),this._axisRawBBox=n.node().getBBox(),t.tickTextAlign&&this._alignTickLabels(),this._renderAxisLabel(n),this._axisSizeBBox=this._getAxisSize(n),this._requiredMargin=this._getRequiredMargin(this._axisSizeBBox),n.remove()}getPosition(){const{config:{type:t,position:n}}=this;return n??(t===le.X?U.Bottom:U.Left)}_getAxisSize(t){return t.node().getBBox()}_getRequiredMargin(t=this._axisSizeBBox){const{config:{type:n,position:r}}=this;switch(n){case le.X:{const a=this._axisSizeBBox.x+this._axisSizeBBox.width,o=this._axisSizeBBox.x<0?Math.abs(this._axisSizeBBox.x):0,s=a-this._width>1?a-this._width:0;switch(r){case U.Top:return{top:t.height,left:o,right:s};case U.Bottom:default:return{bottom:t.height,left:o,right:s}}}case le.Y:{const i=t.height>this._height?(t.height-this._height)/2:0,a=i,o=i;switch(r){case U.Right:return{right:t.width,top:a,bottom:o};case U.Left:default:return{left:t.width,top:a,bottom:o}}}}}getRequiredMargin(){return this._requiredMargin}getOffset(t){const{config:{type:n,position:r}}=this;switch(n){case le.X:switch(r){case U.Top:return{top:t.top,left:t.left};case U.Bottom:default:return{top:t.top+this._height,left:t.left}}case le.Y:switch(r){case U.Right:return{top:t.top,left:t.left+this._width};case U.Left:default:return{top:t.top,left:t.left}}}}_render(t=this.config.duration,n=this.axisGroup){const{config:r}=this;if(this._renderAxis(n,t),this._renderAxisLabel(n),r.gridLine){const i=this._buildGrid();this.gridGroup.selectAll("*").interrupt(),Ye(this.gridGroup,t).call(i).style("opacity",1)}else Ye(this.gridGroup,t).style("opacity",0);r.tickTextAlign&&this._alignTickLabels(),this._resolveTickLabelOverlap(n)}_buildAxis(){const{config:{type:t,position:n,tickPadding:r}}=this,i=this._getNumTicks();switch(t){case le.X:switch(n){case U.Top:return Yo(this.xScale).ticks(i).tickPadding(r);case U.Bottom:default:return jo(this.xScale).ticks(i).tickPadding(r)}case le.Y:switch(n){case U.Right:return qo(this.yScale).ticks(i).tickPadding(r);case U.Left:default:return Xo(this.yScale).ticks(i).tickPadding(r)}}}_buildGrid(){const{config:t}=this;let n;switch(t.type){case le.X:switch(t.position){case U.Top:{n=Yo(this.xScale);break}case U.Bottom:default:{n=jo(this.xScale);break}}n.tickSize(-this._height);break;case le.Y:switch(t.position){case U.Right:{n=qo(this.yScale);break}case U.Left:default:{n=Xo(this.yScale);break}}n.tickSize(-this._width)}n.tickSizeOuter(0).tickFormat(()=>"");const r=this._getNumTicks()*2,i=n.scale(),a=i.domain(),o=()=>{if(!t.minMaxTicksOnlyShowGridLines)return a;const l=i.ticks(r);if(l.length<2)return a;const u=+l[1]-+l[0],c=a[1];return+c-+l[l.length-1]>u/2?[...l,c]:l},s=t.tickValues?this._getConfiguredTickValues():this._shouldRenderMinMaxTicksOnly()?o():i.ticks(r);return n.tickValues(s),n}_renderAxis(t=this.axisGroup,n=this.config.duration){const{config:r}=this,i=this._buildAxis(),a=i.scale(),o=r.tickValues?this._getConfiguredTickValues():this._shouldRenderMinMaxTicksOnly()?a.domain():a.ticks(this._getNumTicks()),s=o.length;i.tickValues(o),t.selectAll("*").interrupt(),Ye(t,n).call(i).on("end",()=>{this._resolveTickLabelOverlap(t)}),t.selectAll("g.tick").classed(Ul,!0).style("font-size",r.tickTextFontSize);const c=t.selectAll("g.tick > text").filter(d=>o.some(f=>Pt(d,f))).classed(Wl,!0).classed(Hl,!!r.tickTextHideOverlapping).style("fill",r.tickTextColor);if(t.selectAll("g.tick > text").filter(d=>!o.some(f=>Pt(d,f))).classed(Ui,!0),c.nodes().forEach(d=>aa(d)),c.each((d,f,h)=>{var g,p;let b=(p=(g=r.tickFormat)===null||g===void 0?void 0:g.call(r,d,f,o))!==null&&p!==void 0?p:`${d}`;const m=h[f],x=r.tickTextWidth||(r.type===le.X?this._containerWidth/(s+1):this._containerWidth/5),k=getComputedStyle(m),R=Number.parseFloat(k.fontSize),S=k.fontFamily,T={verticalAlign:r.type===le.X?Dt.Top:Dt.Middle,width:x,textRotationAngle:r.tickTextAngle,separator:r.tickTextSeparator,wordBreak:r.tickTextForceWordBreak};if(r.tickTextFitMode===ut.Trim){const Z=gt(m).text(b);Zo(Z,x,r.tickTextTrimType,!0,R,.58),b=gt(m).text()}wb(m,{text:b,fontFamily:S,fontSize:R},T)}),t.classed(Il,!0).classed(Ta,!r.tickLine).classed(Aa,!r.domainLine),r.fullSize){const d=this._getFullDomainPath(0);Ye(t.select(".domain"),n).attr("d",d)}}_resolveTickLabelOverlap(t=this.axisGroup){const{config:n}=this,r=t.selectAll(`g.tick > text:not(.${Ui})`);if(!n.tickTextHideOverlapping){r.style("opacity",null);return}cancelAnimationFrame(this._collideTickLabelsAnimFrameId),this._collideTickLabelsAnimFrameId=requestAnimationFrame(()=>{this._collideTickLabels(r)})}_collideTickLabels(t){t.each((r,i,a)=>{const o=a[i];o._visible=!0});const n=3;for(let r=0;r<n;r+=1)t.each((i,a,o)=>{const s=o[a];if(!s._visible)return;const u=s.getBoundingClientRect();for(let c=a+1;c<o.length;c+=1){if(a===c)continue;const d=o[c];if(d._visible){const h=d.getBoundingClientRect();if(ep(u,h,-5)){d._visible=!1;break}}}});t.each((r,i,a)=>{const o=a[i];gt(o).style("opacity",o._visible?1:0)})}_getNumTicks(){const{config:{type:t,numTicks:n}}=this;if(n)return n;if(t===le.X){const r=this.xScale.range(),i=r[1]-r[0];return Math.floor(i/175)}if(t===le.Y){const r=this.yScale.range(),i=Math.abs(r[0]-r[1]);return Math.pow(i,.85)/25}return this._defaultNumTicks}_getConfiguredTickValues(){const{config:t}=this,n=t.type===le.X?this.xScale:this.yScale,r=n?.domain();return t.tickValues?t.tickValues.filter(i=>i>=r[0]&&i<=r[1]):null}_shouldRenderMinMaxTicksOnly(){const{config:t}=this;return t.minMaxTicksOnly||t.type===le.X&&this._width<t.minMaxTicksOnlyWhenWidthIsLess}_getFullDomainPath(t=0){const{config:{type:n}}=this;switch(n){case le.X:return`M0.5, ${t} V0.5 H${this._width+.5} V${t}`;case le.Y:return`M${-t}, ${this._height+.5} H0.5 V0.5 H${-t}`}}_renderAxisLabel(t=this.axisGroup){var n;const{type:r,label:i,labelMargin:a,labelFontSize:o,labelTextFitMode:s}=this.config;if(t.selectAll(`.${Wi}`).remove(),!i)return;const l=this.getPosition(),{width:u,height:c}=(n=this._axisRawBBox)!==null&&n!==void 0?n:t.node().getBBox(),d=r===le.Y?-90:0,f=t.append("text").attr("class",Wi).attr("dy",`${this._getLabelDY()}em`).style("font-size",o).style("fill",this.config.labelColor);f.text(i);let h=!1;if(s===ut.Wrap){const R=r===le.Y?this._height:this._width;f.node().getComputedTextLength()>R&&(vb(f,R),h=!0)}let g=u,p=c;if(s===ut.Wrap){const R=f.node().getBBox();g=R.width,p=R.height}else{const R=r===le.X?g:p,S=getComputedStyle(f.node()),T=Number.parseFloat(S.fontSize);Zo(f,R,this.config.labelTextTrimType,!0,T);const M=f.node().getBBox();g=M.width,p=M.height}const b=r===le.X?this._width/2:r===le.Y&&s===ut.Wrap&&h?l===U.Left?-u-p/2-10:u:Math.pow(-1,+(l===U.Left))*u,m=r===le.Y?this._height/2:r===le.X&&s===ut.Wrap?l===U.Top?-c-p/2:c:Math.pow(-1,+(l===U.Top))*c,x=r===le.X?0:Math.pow(-1,+(l===U.Left))*a,k=r===le.X?Math.pow(-1,+(l===U.Top))*a:0;f.attr("transform",`translate(${b+x},${m+k}) rotate(${d})`)}_getLabelDY(){const{type:t,position:n}=this.config;switch(t){case le.X:switch(n){case U.Top:return 0;case U.Bottom:default:return .75}case le.Y:switch(n){case U.Right:return .75;case U.Left:default:return-.25}}}_alignTickLabels(){const{config:{type:t,tickTextAlign:n,tickTextAngle:r,position:i}}=this,a=this.g.selectAll("g.tick > text"),o=ub(n),s=t===le.X?0:this._getYTickTextTranslate(n,i),l=r?`translate(${s},0) rotate(${r})`:`translate(${s},0)`;a.attr("transform",l).attr("text-anchor",o)}_getYTickTextTranslate(t,n=U.Left){var r,i,a,o;const s=this.config.tickPadding+1,l=((o=(i=(r=this._axisRawBBox)===null||r===void 0?void 0:r.width)!==null&&i!==void 0?i:(a=this.axisGroup.node())===null||a===void 0?void 0:a.getBBox().width)!==null&&o!==void 0?o:0)-s;switch(t){case Ze.Left:return n===U.Left?l*-1:0;case Ze.Right:return n===U.Left?0:l;case Ze.Center:return n===U.Left?l*-.5:l*.5;default:return 0}}}Gl.selectors=$b;const Nb=Object.assign(Object.assign({},ni),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(e,t,n,r)=>"",hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0,onCrosshairMove:void 0,forceShowAt:void 0}),Mb=In`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,Eb=ve`
  label: crosshair-component;
`,Yl=ve`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,ql=ve`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`,Lb=Object.freeze(Object.defineProperty({__proto__:null,circle:ql,globalStyles:Mb,line:Yl,root:Eb},Symbol.toStringTag,{value:"Module"}));class jl extends wa{constructor(t){super(),this.clippable=!0,this._defaultConfig=Nb,this.config=this._defaultConfig,this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},t&&this.setConfig(t),this.g.style("opacity",0),this.line=this.g.append("line").attr("class",Yl)}set accessors(t){this._accessors=t}get accessors(){var t;const{config:n}=this,r=!!(n.x||n.y||n.yStacked),i=r?n.x:this._accessors.x,a=r?n.y:this._accessors.y,o=a?un(a)?a:[a]:void 0,s=r?n.yStacked:this._accessors.yStacked,l=(t=n.baseline)!==null&&t!==void 0?t:this._accessors.baseline;return{x:i,y:o,yStacked:s,baseline:l}}_isContainerInViewport(){var t;if(!(!((t=this.container)===null||t===void 0)&&t.node()))return!1;const n=this.container.node().getBoundingClientRect(),r=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,a=Math.max(0,Math.min(n.right,r)-Math.max(n.left,0)),o=Math.max(0,Math.min(n.bottom,i)-Math.max(n.top,0)),s=n.width*n.height,l=a*o;return s>0&&l/s>=.35}setContainer(t){this.container!==t&&(this.container=t,this.container.on("mousemove.crosshair",this._onMouseMove.bind(this)),this.container.on("mouseout.crosshair",this._onMouseOut.bind(this)),this.container.on("wheel.crosshair",this._onWheel.bind(this)))}_render(t){var n,r,i,a,o;const{config:s,datamodel:l}=this,u=St(t)?t:s.duration,c=s.forceShowAt!==void 0,d=c?this.xScale(s.forceShowAt):this._xPx,f=this.xScale.invert(d),h=!((n=l.data)===null||n===void 0)&&n.length&&this.accessors.x?l.data.indexOf(Cr(l.data,f,this.accessors.x,ct.Left)):void 0;let g,p;s.snapToData&&(!this.accessors.y&&!this.accessors.yStacked&&(!((r=l.data)===null||r===void 0)&&r.length)&&console.warn("Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object"),!(!((i=l.data)===null||i===void 0)&&i.length)&&this._mouseEvent&&console.warn("Unovis | Crosshair: No data to snap to. Make sure the data has been passed to the container or to the crosshair itself"),g=Cr(l.data,f,this.accessors.x),p=l.data.indexOf(g));const b=this.xScale.range(),m=this.yScale.range(),x=s.snapToData&&g?dt(Math.round(this.xScale(ye(g,this.accessors.x,p))),0,this._width):dt(d,b[0],b[1]),k=d>=b[0]&&d<=b[1],R=this._yPx>=m[1]&&this._yPx<=m[0];let S=this._xPx?k&&R:k;s.hideWhenFarFromPointer&&Math.abs(x-+d)>=s.hideWhenFarFromPointerDistance&&(S=!1);const T=(a=s.tooltip)!==null&&a!==void 0?a:this.tooltip;if(S&&T&&this._isContainerInViewport()){const $=T.getContainer()||this.container.node(),_=T.isContainerBody();if(c){const y=this.container.node().getBoundingClientRect(),w=(_?d+y.left:d)+this._containerMargin.left,W=this._height/2+(_?y.top:0),j=[w,W];this._showTooltip(g,f,j,h)}else if(this._mouseEvent){const y=_?[this._mouseEvent.clientX,this._mouseEvent.clientY]:xr(this._mouseEvent,$);this._showTooltip(g,f,y,h)}}else this._hideTooltip();if(this._mouseEvent&&((o=s.onCrosshairMove)===null||o===void 0||o.call(s,S?this.xScale.invert(this._xPx):void 0,g,p,this._mouseEvent),this._mouseEvent=void 0),Ye(this.g,u).style("opacity",S?1:0),!isFinite(d))return;this.line.attr("y1",0).attr("y2",this._height),Ye(this.line,u,vo).attr("x1",x).attr("x2",x);const M=Ki(s.getCircles)?s.getCircles(f,l.data,this.yScale,h):this.getCircleData(g,p),Z=this.g.selectAll("circle").data(M,($,_)=>{var y;return(y=$.id)!==null&&y!==void 0?y:_}),K=Z.enter().append("circle").attr("class",ql).attr("r",0).attr("cx",x).attr("cy",$=>$.y).style("fill",$=>$.color).style("stroke",$=>$.strokeColor).style("stroke-width",$=>$.strokeWidth);Ye(K.merge(Z),u,vo).attr("cx",x).attr("cy",$=>$.y).attr("r",4).style("opacity",$=>$.opacity).style("fill",$=>$.color).style("stroke",$=>$.strokeColor).style("stroke-width",$=>$.strokeWidth),Z.exit().remove()}hide(t){window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{var n,r;this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,(r=(n=this.config).onCrosshairMove)===null||r===void 0||r.call(n,void 0,void 0,void 0,t),this._render()})}_onMouseMove(t){var n;const{datamodel:r,element:i}=this;!this.accessors.x&&(!((n=r.data)===null||n===void 0)&&n.length)&&console.warn("Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object");const[a,o]=xr(t,i);this._xPx=a,this._yPx=o,this._mouseEvent=t,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()})}_onMouseOut(t){var n;(!t||!(!((n=this.container)===null||n===void 0)&&n.node().contains(t.relatedTarget)))&&this.hide(t)}_onWheel(t){this.hide(t)}_showTooltip(t,n,r,i){var a;const{config:o,datamodel:s}=this,l=(a=o.tooltip)!==null&&a!==void 0?a:this.tooltip;if(!l||!r)return;const[u,c]=r,d=o.template(t,n,s.data,i);if(l.config.followCursor=!0,!l.config.horizontalPlacement||l.config.horizontalPlacement===U.Auto){const f=l.isContainerBody()?u-this.container.node().getBoundingClientRect().left:u;l.overrideHorizontalPlacement(f>this._containerWidth/2?U.Left:U.Right)}d&&l.show(d,{x:u,y:c})}_hideTooltip(){var t;const{config:n}=this,r=(t=n.tooltip)!==null&&t!==void 0?t:this.tooltip;r?.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(t,n){var r,i;const{config:a}=this;if(a.snapToData&&t){const o=(r=this.accessors.y)!==null&&r!==void 0?r:[],s=(i=this.accessors.yStacked)!==null&&i!==void 0?i:[],l=ye(t,this.accessors.baseline,n)||0,u=zh(t,n,...s).map((d,f)=>({y:this.yScale(d+l),opacity:St(ye(t,s[f],f))?1:0,color:qt(t,a.color,f),strokeColor:a.strokeColor?qt(t,a.strokeColor,f):void 0,strokeWidth:a.strokeWidth?ye(t,a.strokeWidth,f):void 0})),c=o.map((d,f)=>{const h=ye(t,d,n);return{y:this.yScale(h),opacity:St(h)?1:0,color:qt(t,a.color,u.length+f),strokeColor:a.strokeColor?qt(t,a.strokeColor,f):void 0,strokeWidth:a.strokeWidth?ye(t,a.strokeWidth,f):void 0}});return u.concat(c)}return[]}}jl.selectors=Lb;const Xl=Symbol("componentAccessorKey"),Kl=Symbol("tooltipAccessorKey"),Zl=Symbol("crosshairAccessorKey"),Ql=Symbol("axisAccessorKey"),Rb=Symbol("annotationsAccessorKey");function ai(e,t){return Pt(e,t)}function Hn(e){const t=ku(),n=t.attrs;return D(()=>{const r={},i=t?.vnode.props??{};return Object.keys(i).forEach(a=>{r[Ea(a)]=e[Ea(a)]}),{...r,...n}})}const Fb=De({__name:"index",props:{components:{},xScale:{type:[Object,Function]},xDomain:{},xDomainMinConstraint:{},xDomainMaxConstraint:{},xRange:{},yScale:{type:[Object,Function]},yDomain:{},yDomainMinConstraint:{},yDomainMaxConstraint:{},yRange:{},yDirection:{},xAxis:{},yAxis:{},autoMargin:{type:Boolean},tooltip:{},crosshair:{},preventEmptyDomain:{type:[Boolean,null]},scaleByDomain:{type:Boolean},annotations:{},clipPathExtend:{},duration:{},margin:{},padding:{},sizing:{},width:{},height:{},svgDefs:{},ariaLabel:{},data:{}},setup(e,{expose:t}){const n=e,{data:r}=Jo(n),i=Hn(n),a=q(),o=wu({components:[],annotations:void 0,crosshair:void 0,tooltip:void 0,xAxis:void 0,yAxis:void 0}),s=q();return me(r,()=>{a.value&&a.value.setData(r.value,!0)}),Su(()=>{var l;o.components.map(u=>u.config),(l=a.value)==null||l.updateContainer({...oi(i.value),...oi(o)})}),Nt(()=>{s.value&&(a.value=new O0(s.value,{...oi(o)},r.value))}),on(()=>{var l;return(l=a.value)==null?void 0:l.destroy()}),fn(Xl,{data:r,update:l=>o.components=[...o.components,l],destroy:()=>{var l;return o.components=(l=o.components)==null?void 0:l.filter(u=>!u.isDestroyed())}}),fn(Ql,{data:r,update:l=>o[`${l.config.type}Axis`]=l,destroy:l=>{o[`${l}Axis`]=void 0}}),fn(Zl,{data:r,update:l=>o.crosshair=l,destroy:()=>{o.crosshair=void 0}}),fn(Kl,{data:r,update:l=>o.tooltip=l,destroy:()=>{o.tooltip=void 0}}),fn(Rb,{data:r,update:l=>o.annotations=l,destroy:()=>{o.annotations=void 0}}),t({component:a}),(l,u)=>(C(),V("div",{"data-vis-xy-container":"",ref_key:"elRef",ref:s,class:"unovis-xy-container"},[Ne(l.$slots,"default")],512))}}),Db={"data-vis-axis":""},Qo=De({__name:"index",props:{position:{},type:{},fullSize:{type:Boolean},label:{},labelFontSize:{},labelMargin:{},labelTextFitMode:{},labelTextTrimType:{},labelColor:{},gridLine:{type:Boolean},tickLine:{type:Boolean},domainLine:{type:Boolean},minMaxTicksOnly:{type:Boolean},minMaxTicksOnlyShowGridLines:{type:Boolean},minMaxTicksOnlyWhenWidthIsLess:{},tickFormat:{type:Function},tickValues:{},numTicks:{},tickTextFitMode:{},tickTextWidth:{},tickTextSeparator:{},tickTextForceWordBreak:{type:Boolean},tickTextTrimType:{},tickTextFontSize:{},tickTextAlign:{},tickTextColor:{},tickTextAngle:{},tickTextHideOverlapping:{type:Boolean},tickPadding:{},x:{},y:{},id:{type:Function},color:{},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(e,{expose:t}){const n=Or(Ql),r=e,i=D(()=>n.data.value??r.data),a=Hn(r),o=q();return Nt(()=>{Ur(()=>{var s;o.value=new Gl(a.value),(s=o.value)==null||s.setData(i.value),n.update(o.value)})}),on(()=>{var s;(s=o.value)==null||s.destroy(),n.destroy(r.type)}),me(a,(s,l)=>{var u;ai(s,l)||(u=o.value)==null||u.setConfig(a.value)}),me(i,()=>{var s;(s=o.value)==null||s.setData(i.value)}),t({component:o}),(s,l)=>(C(),V("div",Db))}}),Bb={"data-vis-crosshair":""},Pb=De({__name:"index",props:{data:{}},setup(e,{expose:t}){const n=Or(Zl),r=e,i=D(()=>n.data.value??r.data),a=Hn(r),o=q();return Nt(()=>{Ur(()=>{var s;o.value=new jl(a.value),(s=o.value)==null||s.setData(i.value),n.update(o.value)})}),on(()=>{var s;(s=o.value)==null||s.destroy(),n.destroy()}),me(a,(s,l)=>{var u;ai(s,l)||(u=o.value)==null||u.setConfig(a.value)}),me(i,()=>{var s;(s=o.value)==null||s.setData(i.value)}),t({component:o}),(s,l)=>(C(),V("div",Bb))}}),Vb={"data-vis-component":""},zb=De({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(e,{expose:t}){const n=Or(Xl),r=e,i=D(()=>n.data.value??r.data),a=Hn(r),o=q();return Nt(()=>{Ur(()=>{var s;o.value=new Sa(a.value),(s=o.value)==null||s.setData(i.value),n.update(o.value)})}),on(()=>{var s;(s=o.value)==null||s.destroy(),n.destroy()}),me(a,(s,l)=>{var u;ai(s,l)||(u=o.value)==null||u.setConfig(a.value)}),me(i,()=>{var s;(s=o.value)==null||s.setData(i.value)}),t({component:o}),(s,l)=>(C(),V("div",Vb))}}),Ib={"data-vis-tooltip":""},Ob=De({__name:"index",props:{components:{},container:{},followCursor:{type:Boolean},allowHover:{type:Boolean},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},className:{},hideDelay:{},showDelay:{},data:{}},setup(e,{expose:t}){const n=Or(Kl),r=Hn(e),i=q();return Nt(()=>{Ur(()=>{i.value=new Dl(r.value),n.update(i.value)})}),on(()=>{var a;(a=i.value)==null||a.destroy(),n.destroy()}),me(r,(a,o)=>{var s;ai(a,o)||(s=i.value)==null||s.setConfig(r.value)}),t({component:i}),(a,o)=>(C(),V("div",Ib))}});(function(){try{if(typeof document<"u"){var e=document.createElement("style");e.appendChild(document.createTextNode(".unovis-xy-container,.unovis-single-container{display:block;position:relative;width:100%}[data-vis-leaflet-map],[data-vis-leaflet-flow-map]{display:block;position:relative}[data-vis-bullet-legend],[data-vis-rolling-pin-legend]{display:block}")),document.head.appendChild(e)}}catch(t){console.error("vite-plugin-css-injected-by-js",t)}})();const Ub={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},Wb=De({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(e){const t=e,n=["100%","200%","400%","800%"],r=q(0),i=D(()=>n[r.value]),a=q([]),o=yt();function s(_){return _.sort((y,w)=>w.sample_plot_count-y.sample_plot_count)}function l(_,y,w){if(w<=0)return[];const W=(y[0]-_[0])/(w-1||1),j=(y[1]-_[1])/(w-1||1),Q=(y[2]-_[2])/(w-1||1),O=[];for(let te=0;te<w;te++){const ie=Math.round(_[0]+W*te),pe=Math.round(_[1]+j*te),se=Math.round(_[2]+Q*te);O.push(`rgb(${ie}, ${pe}, ${se})`)}return O}function u(_){const y=[];for(let j=0;j<_;j++){const Q=45+300/(_-1||1)*j;y.push(`hsl(${Q%360}, 70%, 50%)`)}return y}async function c(){const _=[o.geography,o.forestType,o.standAge,o.vegetationType];if(_.some(w=>!w)){a.value=[];return}if(!Gi(..._)){a.value=[];return}const y=`edna-${o.geography}-${o.forestType}-${o.standAge}-${o.vegetationType}.json`;try{const w=await fetch(`/edna/${y}`);if(!w.ok){if(w.status===404){a.value=[];return}throw new Error(`Failed to fetch ${y}`)}let W=await w.json();W=s(W);const j=W.length,Q=Math.floor(j*.1),O=j-Q,te=l([82,82,82],[212,212,212],Q),ie=u(O),pe=[...te,...ie];a.value=W.map((se,re)=>({...se,fillColor:pe[re]||"var(--ui-primary)"}))}catch(w){console.error("Error fetching chart data:",w),a.value=[]}}Nt(c),me(()=>[o.geography,o.forestType,o.standAge,o.vegetationType],c,{immediate:!0});const d=(_,y)=>y,f=_=>_.sample_plot_count,h=(_,y)=>{const w=x.value[y];if(!w)return"";const W=t.searchTerm.trim().toLowerCase(),j=String(w.Commonname||"").toLowerCase(),Q=String(w.Scientificname||"").toLowerCase(),O=W?j.includes(W)||Q.includes(W):!0,te=t.statusFilter.length>0,ie=t.matsvampFilter||t.giftsvampFilter,pe=t.gruppFilter.length>0;if(!te&&!ie&&!pe&&t.searchTerm.trim()!=="")return O?g(w.Commonname):"";const se=te&&t.statusFilter.includes("Signalart")&&w.SIGNAL_art==="S",re=t.statusFilter.filter(z=>z!=="Signalart"),xe=te&&t.statusFilter.includes("Ej bedömd")&&(w.RL2020kat===null||w.RL2020kat===0||w.RL2020kat==="0"||String(w.RL2020kat).toUpperCase()==="NE"),Le=te&&t.statusFilter.includes("Ej tillämplig")&&String(w.RL2020kat).toUpperCase()==="NA",Be=te?se||re.includes(w.RL2020kat):!1,Pe=t.matsvampFilter?w.matsvamp==1:!1,He=t.giftsvampFilter?(w.Giftsvamp||"").toLowerCase()==="x":!1,je=pe?t.gruppFilter.includes(w[t.groupKey]):!1;return te?!ie&&!pe?O&&(se||Be||xe||Le)?g(w.Commonname):"":O&&(se||Be||xe||Le)&&(ie?Pe||He:!0)&&(pe?je:!0)?g(w.Commonname):"":ie||pe?ie&&!pe?O&&(Pe||He)?g(w.Commonname):"":!ie&&pe?O&&je?g(w.Commonname):"":O&&(Pe||He)&&je?g(w.Commonname):"":""};function g(_){return _?_.charAt(0).toUpperCase()+_.slice(1):""}const p=q(null);function b(_){if(!_)return p.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';p.value=_;const y=_.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",w=_.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",W={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},j=W[_.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${W[_.RL2020kat]}</div>`:"",Q=_.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${_["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${g(_.Commonname)}</strong> <em>${g(_.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${_.sample_plot_count} av ${_.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${y} ${w} ${j} ${Q}
      </div>
    </div>
  `}const m={[Sa.selectors.bar]:b},x=D(()=>{const _="#d4d4d4";return a.value.map(y=>{if(Z.value&&y.Scientificname===M.selectedSpecies?.Scientificname)return{...y,barColor:"#b1835e"};const w=t.searchTerm.trim().toLowerCase(),W=String(y.Commonname||"").toLowerCase(),j=String(y.Scientificname||"").toLowerCase(),Q=w?W.includes(w)||j.includes(w):!0,O=t.statusFilter.length>0,te=t.matsvampFilter||t.giftsvampFilter,ie=t.gruppFilter.length>0;if(!O&&!te&&!ie&&t.searchTerm.trim()!=="")return{...y,barColor:Q?"#8b5cf6":_};const pe=O&&t.statusFilter.includes("Signalart")&&y.SIGNAL_art==="S",se=t.statusFilter.filter(je=>je!=="Signalart"),re=O&&t.statusFilter.includes("Ej bedömd")&&(y.RL2020kat===null||y.RL2020kat===0||y.RL2020kat==="0"||String(y.RL2020kat).toUpperCase()==="NE"),xe=O&&t.statusFilter.includes("Ej tillämplig")&&String(y.RL2020kat).toUpperCase()==="NA",Le=O?pe||se.includes(y.RL2020kat):!1,Be=t.matsvampFilter?y.matsvamp==1:!1,Pe=t.giftsvampFilter?(y.Giftsvamp||"").toLowerCase()==="x":!1,He=ie?t.gruppFilter.includes(y[t.groupKey]):!1;if(O){if(!te&&!ie)return Q&&pe?{...y,barColor:"#14b8a6"}:Q&&(pe||Le||re||xe)?pe?{...y,barColor:"#14b8a6"}:y.RL2020kat==="LC"?{...y,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(y.RL2020kat)?{...y,barColor:"#ef4444"}:re||xe?{...y,barColor:"#737373"}:{...y,barColor:"#1f2937"}:{...y,barColor:_};if(Q&&(pe||Le||re||xe)&&(te?Be||Pe:!0)&&(ie?He:!0)){if(pe)return{...y,barColor:"#14b8a6"};if(se.length>0)return y.RL2020kat==="LC"?{...y,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(y.RL2020kat)?{...y,barColor:"#ef4444"}:re||xe?{...y,barColor:"#737373"}:{...y,barColor:"#1f2937"};if(t.matsvampFilter&&Be)return{...y,barColor:"#eab308"};if(t.giftsvampFilter&&Pe)return{...y,barColor:"#84cc16"};if(ie&&He)return{...y,barColor:"#000000"}}return{...y,barColor:_}}if(te||ie){if(te&&!ie)return Q&&Be?{...y,barColor:"#eab308"}:Q&&Pe?{...y,barColor:"#84cc16"}:{...y,barColor:_};if(!te&&ie)return Q&&He?{...y,barColor:"#000000"}:{...y,barColor:_};if(Q&&(Be||Pe)&&He){if(Be)return{...y,barColor:"#eab308"};if(Pe)return{...y,barColor:"#84cc16"}}return{...y,barColor:_}}return{...y,barColor:y.fillColor||"var(--ui-primary)"}})}),k=_=>_.barColor,R=D(()=>x.value.length>0);me(x,_=>{_.length||(p.value=null)});function S(){r.value<n.length-1&&r.value++}function T(){r.value>0&&r.value--}const M=Wr(),Z=D(()=>M.selectedSpecies!==null),K=Ot("(max-width: 767px)");function $(_){p.value?M.selectSpecies(p.value,"edna"):console.log("No datum available from tooltip.")}return(_,y)=>{const w=Ve;return C(),V("div",null,[B(K)?G("",!0):(C(),V("div",Ub,[L(w,{onClick:T,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),L(w,{onClick:S,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),B(K)?G("",!0):(C(),V("div",{key:1,class:Ce(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":r.value===0}]),onClick:$},[L(B(Fb),{data:x.value,width:i.value,height:"200"},{default:H(()=>[L(B(zb),{data:x.value,x:d,y:f,color:k,barPadding:.1},null,8,["data"]),L(B(Qo),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:x.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":h},null,8,["numTicks"]),L(B(Qo),{type:"y",label:"Antal skogar",gridLine:!1}),R.value?(C(),X(B(Ob),{key:0,triggers:m,followCursor:!0})):G("",!0),R.value?(C(),X(B(Pb),{key:1,color:k,template:b})):G("",!0)]),_:1},8,["data","width"])],2))])}}}),Hb=Object.assign(Qe(Wb,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),Gb={class:"md:flex justify-between"},Yb={class:"md:flex gap-4"},qb={class:"md:mt-0 mt-1 mb-1 md:mb-2"},jb={class:"flex gap-2"},Xb={class:"text-md text-neutral-500"},Kb={class:"flex gap-2"},Zb={class:"justify-between hidden"},Qb={class:"flex gap-3 items-start"},Jb={key:0,class:""},ey={key:1,class:""},ty=De({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(e,{emit:t}){const n=q(!1),r=q(!1),i=q([]),a=q([]),o=q(""),s=q(!0),l=t,u=Gr(),c=D({get:()=>K.value?"spatialForest":u.getActiveTab("EdnaComponent"),set:y=>{K.value||u.setActiveTab("EdnaComponent",y)}}),d=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],f=yt(),{geography:h,forestType:g,standAge:p,vegetationType:b}=Cu(f),m=D(()=>h.value),x=D(()=>g.value),k=D(()=>p.value),R=D(()=>b.value),S=q([]),T=D(()=>S.value.length),M=D(()=>S.value.length>0&&S.value[0].sample_env_count||0),Z=q("100%"),K=Ot("(max-width: 767px)"),$=D(()=>({mark:!1,...K.value?{images:!1}:{}}));async function _(y,w,W,j){if(!y||!w||!W||!j){S.value=[];return}if(!Gi(y,w,W,j)){S.value=[];return}const Q=`edna-${y}-${w}-${W}-${j}.json`;try{const O=await fetch(`/edna/${Q}`);if(!O.ok){if(O.status===404){S.value=[];return}throw new Error(`Failed to fetch ${Q}`)}const te=await O.json();te.sort((ie,pe)=>pe.sample_plot_count-ie.sample_plot_count),S.value=te}catch(O){console.error("Error fetching data:",O),S.value=[]}}return me(()=>[h.value,g.value,p.value,b.value],([y,w,W,j])=>{y&&w&&W&&j&&_(y,w,W,j)},{immediate:!0}),(y,w)=>{const W=It,j=as,Q=Ve,O=Hb,te=Hr,ie=Tu,pe=Bn,se=sn;return C(),V("div",null,[L(se,{class:"md:mt-2 rounded-none sm:rounded-lg",variant:"ghost"},{default:H(()=>[N("div",Gb,[N("div",Yb,[N("div",qb,[w[16]||(w[16]=N("h1",{class:"text-3xl hidden md:block font-medium"},"Alla mykorrhizasvampar",-1)),w[17]||(w[17]=N("h1",{class:"text-3xl md:hidden font-semibold"},"Alla mykorrhizasvampar",-1)),N("div",jb,[N("h1",Xb,oe(T.value)+" arter baserat på "+oe(M.value)+" skogar",1),M.value<10?(C(),X(W,{key:0,icon:M.value<10?"i-cuida-warning-outline":void 0,size:"md",color:M.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:H(()=>[fe(oe(M.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):G("",!0)])]),N("div",Kb,[L(ie,{fullscreen:"",title:"Diagram",ui:{body:"pt-0"}},{body:H(()=>[L(j,{initialMobileCollapsed:!0}),L(Q,{variant:"ghost",size:"md",onClick:w[0]||(w[0]=re=>s.value=!s.value),label:s.value?"Dölj diagram":"Visa diagram",class:"mb-2 hidden md:block"},null,8,["label"]),s.value?(C(),X(O,{key:0,class:"mb-2",chartData:S.value,chartWidth:Z.value,geography:m.value,forestType:x.value,standAge:k.value,vegetationType:R.value,matsvampFilter:n.value,giftsvampFilter:r.value,gruppFilter:i.value,statusFilter:a.value,"search-term":o.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):G("",!0),L(te,{class:"mt-2",onEnlarge:w[1]||(w[1]=re=>l("enlarge")),"onUpdate:matsvampFilter":w[2]||(w[2]=re=>n.value=re),"onUpdate:giftsvampFilter":w[3]||(w[3]=re=>r.value=re),"onUpdate:gruppFilter":w[4]||(w[4]=re=>i.value=re),"onUpdate:statusFilter":w[5]||(w[5]=re=>a.value=re),"onUpdate:searchTerm":w[6]||(w[6]=re=>o.value=re),isNormalView:y.isNormalView,"column-visibility-overrides":$.value,"search-term":o.value},null,8,["isNormalView","column-visibility-overrides","search-term"])]),_:1})]),N("div",Zb,[L(pe,{modelValue:c.value,"onUpdate:modelValue":w[7]||(w[7]=re=>c.value=re),items:d,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),N("div",Qb,[L(Q,{class:"hidden md:flex h-fit",color:"neutral",variant:"outline",size:"md",onClick:w[8]||(w[8]=re=>s.value=!s.value),label:s.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),L(Bt,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:H(()=>[c.value==="spatialForest"?(C(),V("div",Jb,[L(te,{onEnlarge:w[9]||(w[9]=re=>l("enlarge")),isNormalView:y.isNormalView,"column-visibility-overrides":$.value},null,8,["isNormalView","column-visibility-overrides"])])):c.value==="columnChart"?(C(),V("div",ey,[s.value?(C(),X(O,{key:0,class:"mb-6",chartData:S.value,chartWidth:Z.value,geography:m.value,forestType:x.value,standAge:k.value,vegetationType:R.value,matsvampFilter:n.value,giftsvampFilter:r.value,gruppFilter:i.value,statusFilter:a.value,"search-term":o.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):G("",!0),L(te,{onEnlarge:w[10]||(w[10]=re=>l("enlarge")),"onUpdate:matsvampFilter":w[11]||(w[11]=re=>n.value=re),"onUpdate:giftsvampFilter":w[12]||(w[12]=re=>r.value=re),"onUpdate:gruppFilter":w[13]||(w[13]=re=>i.value=re),"onUpdate:statusFilter":w[14]||(w[14]=re=>a.value=re),"onUpdate:searchTerm":w[15]||(w[15]=re=>o.value=re),isNormalView:y.isNormalView,"column-visibility-overrides":$.value,"search-term":o.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):G("",!0)]),_:1})]),_:1})])}}}),Jl=Object.assign(Qe(ty,[["__scopeId","data-v-14c46e86"]]),{__name:"EdnaComponent"}),ny={class:"grid grid-cols-12"},ry={class:"col-span-12"},iy={key:0,class:"col-span-12"},ay={key:0,class:"col-span-12"},oy={class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},sy={class:"col-span-4 flex flex-col h-full"},ly={class:"col-span-4 flex flex-col"},uy={class:"col-span-4 flex flex-col"},cy={class:"flex justify-between items-center"},dy={key:1,class:"text-neutral-500"},fy={class:"flex justify-between items-center"},hy={key:1,class:"text-neutral-500"},gy={class:"flex justify-between items-center"},py={key:1,class:"text-neutral-500"},my={__name:"NormalView",props:{geography:String,forestType:String,standAge:String,vegetationType:String,isNormalView:Boolean},emits:["enlarge"],setup(e,{emit:t}){const n=yt(),r=ts(),i=q(null),a=q(null),o=q(null);console.log("isNormalView in parent:",e.isNormalView);const l=t,u=b=>{l("enlarge",b)};q(!1),q(!1);const c=q("knowledge"),d=[{label:"Samlad kunskap",value:"knowledge",icon:"lineicons:mushroom-1"},{label:"DNA från markinventeringens provytor",value:"dna",icon:"solar:dna-linear"}],f=q(0),h=()=>{f.value=window.innerWidth};Nt(()=>{h(),window.addEventListener("resize",h)}),on(()=>{window.removeEventListener("resize",h)});const g=D(()=>f.value>=768?"md":"lg");async function p(b,m,x,k=null){if([n.geography,n.forestType,n.standAge,n.vegetationType].some(T=>!T)){x.value=0;return}const S=`${m}-${n.geography}-${n.forestType}-${n.standAge}-${n.vegetationType}.json`;try{const T=await fetch(`/${b}/${S}`);if(!T.ok)throw new Error("Network response was not ok");const M=await T.json();k?x.value=M.filter(Z=>Z[k]==="x").length:x.value=M.length}catch(T){console.error("Failed to fetch count for",m,T),x.value=0}}return me(()=>[n.geography,n.forestType,n.standAge,n.vegetationType],()=>{p("redlisted","redlisted",i),p("edible","edibledata",a,"Nyasvamp-boken"),p("edible","edibledata",o,"Giftsvamp")},{immediate:!0}),D(()=>c.value==="dna"?{indicator:"bg-violet-100 dark:bg-violet-400/9 border border-violet-300/80 dark:border-violet-300/30",trigger:"data-[state=active]:text-violet-500 dark:data-[state=active]:text-violet-400/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"}:{indicator:"bg-orange-100 dark:bg-orange-400/9 border border-orange-300/80 dark:border-orange-300/30",trigger:"data-[state=active]:text-orange-500 dark:data-[state=active]:text-orange-400/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-primary"}),(b,m)=>{const x=Bn,k=us,R=ls,S=cs,T=is,M=Ve,Z=sn,K=ns;return C(),V("div",ny,[N("div",ry,[L(x,{ui:{trigger:"hover:bg-neutral-50 ring ring-muted mx-1 my-1 focus-visible:ring-0",list:"border-muted/50"},modelValue:c.value,"onUpdate:modelValue":m[0]||(m[0]=$=>c.value=$),items:d,content:!1,class:"md:mx-0",size:g.value,color:"primary",variant:"link"},null,8,["modelValue","size"]),c.value==="dna"?(C(),V("div",iy,[N("div",null,[L(Jl,{isNormalView:!1,onEnlarge:m[1]||(m[1]=$=>u("FullScreenEdna"))})])])):G("",!0)]),c.value==="knowledge"?(C(),V("div",ay,[N("div",oy,[N("div",sy,[(C(),X(k,{geography:e.geography,forestType:e.forestType,standAge:e.standAge,vegetationType:e.vegetationType,isNormalView:!0,onEnlarge:m[2]||(m[2]=$=>u("FullScreenEdible")),key:B(r).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),N("div",ly,[(C(),X(R,{geography:e.geography,forestType:e.forestType,standAge:e.standAge,vegetationType:e.vegetationType,isNormalView:!0,onEnlarge:m[3]||(m[3]=$=>u("FullScreenPoison")),key:B(r).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),N("div",uy,[L(S,{isNormalView:!0,onEnlarge:m[4]||(m[4]=$=>u("RedlistedComponent"))})])]),L(K,{class:"md:hidden space-y-3 mt-3"},{default:H(()=>[L(Z,{onClick:m[5]||(m[5]=$=>u("FullScreenEdible"))},{default:H(()=>[N("div",cy,[N("div",null,[m[8]||(m[8]=N("h1",{class:"text-2xl font-semibold text-warning-500"},"Matsvampar",-1)),a.value===null?(C(),X(T,{key:0,class:"h-4 w-12 mt-2"})):(C(),V("h1",dy,oe(a.value)+" arter",1))]),L(M,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"outline",color:"neutral",size:"xl"})])]),_:1}),L(Z,{onClick:m[6]||(m[6]=$=>u("FullScreenPoison"))},{default:H(()=>[N("div",fy,[N("div",null,[m[9]||(m[9]=N("h1",{class:"text-2xl font-semibold text-poison-500"},"Giftsvampar",-1)),a.value===null?(C(),X(T,{key:0,class:"h-4 w-12 mt-2"})):(C(),V("h1",hy,oe(o.value)+" arter",1))]),L(M,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"outline",color:"neutral",size:"xl"})])]),_:1}),L(Z,{onClick:m[7]||(m[7]=$=>u("RedlistedComponent"))},{default:H(()=>[N("div",gy,[N("div",null,[m[10]||(m[10]=N("h1",{class:"text-2xl font-semibold text-signal-500"},"Naturvårdsarter",-1)),i.value===null?(C(),X(T,{key:0,class:"h-4 w-12 mt-2"})):(C(),V("h1",py,oe(i.value)+" arter",1))]),L(M,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"outline",color:"neutral",size:"xl"})])]),_:1})]),_:1})])):G("",!0)])}}},vy=Qe(my,[["__scopeId","data-v-1a680c96"]]),by={class:"bg-muted"},yy={class:"flex flex-col min-h-screen"},xy={__name:"DashboardC",setup(e){Ot("(max-width: 767px)");const t=ts(),n=q(!1),r=q(!0),i=Wr(),a=yt();me(()=>i.selectedSpecies,g=>{g&&(n.value=!0)}),me(n,g=>{g||i.clearSelection()});const o=q(null),s=D(()=>a.geography&&a.forestType&&a.standAge&&a.vegetationType),l=D(()=>{switch(o.value){case"FullScreenEdna":return Jl;case"FullScreenEdible":return us;case"FullScreenPoison":return ls;case"RedlistedComponent":return cs;default:return vy}}),u=g=>{o.value=g},c=()=>{o.value=null},d=g=>{g.key==="Escape"&&i.selectedSpecies&&i.clearSelection()};function f(g){return Array.isArray(g)?g[0]??null:typeof g=="string"&&g.length>0?g:null}function h(g){const p={geography:f(g.geography),forestType:f(g.forestType),standAge:f(g.standAge),vegetationType:f(g.vegetationType)};p.geography&&p.forestType&&p.standAge&&p.vegetationType&&a.setParams(p)}return Nt(()=>{window.addEventListener("keydown",d),h(t.params)}),es(()=>{window.removeEventListener("keydown",d)}),me(()=>t.params,g=>{h(g)},{immediate:!0}),me(()=>[a.geography,a.forestType,a.standAge,a.vegetationType],()=>{a.geography&&a.forestType&&a.standAge&&a.vegetationType&&`${encodeURIComponent(a.geography)}${encodeURIComponent(a.forestType)}${encodeURIComponent(a.standAge)}${encodeURIComponent(a.vegetationType)}`},{deep:!0}),me(l,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(g,p)=>{const b=Lc,m=Pc,x=as,k=ns;return C(),V("div",by,[L(m,{modelValue:n.value,"onUpdate:modelValue":p[0]||(p[0]=R=>n.value=R),pinned:r.value,"onUpdate:pinned":p[1]||(p[1]=R=>r.value=R)},{default:H(()=>[L(b,{species:B(i).selectedSpecies,source:B(i).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),L(k,null,{default:H(()=>[L(Bt,{name:"fade"},{default:H(()=>[s.value?(C(),X(x,{key:0})):G("",!0)]),_:1})]),_:1}),N("div",yy,[L(k,{class:"w-full px-0"},{default:H(()=>[L(Bt,{name:"fade",mode:"out-in"},{default:H(()=>[(C(),X(Au(l.value),{onClose:c,onEnlarge:u,class:"block border border-muted/50 bg-white rounded shadow"},null,32))]),_:1})]),_:1})])])}}},_y=Qe(xy,[["__scopeId","data-v-976ef623"]]),ky={};function wy(e,t){const n=_y;return C(),X(n)}const Py=Qe(ky,[["render",wy]]);export{Py as default};
