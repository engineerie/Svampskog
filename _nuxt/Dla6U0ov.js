import{_ as Ue,a as Me}from"./BrRXGKCQ.js";import{_ as Ve}from"./CrWnOoLk.js";import{B as ze,aN as Ie,r as m,o as Fe,aR as Z,K as U,aD as ee,aI as Ae,W as h,d as b,f as p,P as w,g as l,N as d,w as n,T as te,n as M,aH as je,aE as ae,aF as le,e as r,F as oe,ag as ne,h as s,aC as Be,aB as De,t as y,aL as Oe,af as Pe,av as Ee,L as He,_ as Ye}from"#entry";import{M as qe}from"./CSTWAKIg.js";import{_ as Ke}from"./CuNoz-Zp.js";import{_ as Re}from"./CzyB4YZu.js";import{_ as We}from"./DChgQddm.js";import{_ as Xe}from"./BpGmDohq.js";import{u as Qe,_ as Ge,a as Je,b as Ze}from"./BNZk6acK.js";import{_ as et}from"./Bc9nj8bA.js";import"./BkTfL4Si.js";import"./Cpj98o6Y.js";import"./DN1NsGKB.js";import"./iik6CYzq.js";import"./BNt3Jpbo.js";import"./CudAv0bZ.js";import"./Cj-a184O.js";const tt={key:0,class:"fixed top-18 inset-x-3 z-50 pointer-events-auto origin-top"},at=["onClick"],lt={class:"text-lg p-2 px-3 font-medium text-nowrap"},ot={key:1,class:"p-4"},nt=["onClick"],st={class:"text-lg p-2 px-3 font-medium text-nowrap"},it={class:"w-full rounded-xl relative overflow-hidden"},rt={class:"grid gap-3 sm:gap-6 lg:grid-cols-3"},ut={class:"flex flex-col gap-6 min-w-0 max-w-full"},ct={class:"text-4xl font-medium"},dt={key:0,class:"flex flex-col gap-4 min-w-0 max-w-full"},mt={class:"w-full max-w-full min-w-0 overflow-x-auto overflow-y-visible"},pt={class:"flex flex-nowrap whitespace-nowrap gap-2 w-full my-1"},ft={class:"space-y-2"},vt={class:"text-xl font-semibold text-neutral-900"},_t={class:"text-sm text-muted"},gt={class:"text-sm"},ht={class:"flex flex-col gap-1 min-w-0 max-w-full"},wt={class:"grid sm:grid-cols-1"},se="modal-no-scrollbar",kt=ze({__name:"index",async setup(xt){let f,V;const C=Ie("(max-width: 767px)"),z=m(!1);let S=null;const D=()=>{if(typeof window>"u")return;if(!C.value){z.value=!1;return}const e=window.innerHeight*.5;z.value=window.scrollY>e};Fe(()=>{typeof window>"u"||(D(),S=()=>D(),window.addEventListener("scroll",S,{passive:!0}))}),Z(()=>{S&&typeof window<"u"&&window.removeEventListener("scroll",S),S=null}),U(C,()=>{C.value?D():z.value=!1});const T=m(!1),q=e=>{const t=document.documentElement;e?t.classList.add(se):t.classList.remove(se)};U(T,e=>q(e)),Z(()=>q(!1));const I=Qe(),{data:k}=([f,V]=ee(()=>ae("skogsskotsel",()=>le("skogsskotsel").first())),f=await f,V(),f);if(!k.value)throw Ae({statusCode:404,statusMessage:"Page not found",fatal:!0});const x=h(()=>k.value?.methods??[]),K=h(()=>x.value.map((e,t)=>({label:e.title,value:t}))),O={id:"",title:"",image:"",shortdescription:"",description:"",descriptionsvamp:""},c=m(null),R=m(!1);U(c,async(e,t)=>{e&&!t&&!R.value&&(R.value=!0,await He(),window.scrollTo({top:0}))});const o=h(()=>{const e=x.value;return!e.length||!c.value?O:e.find(t=>t.id===c.value)??O}),F=h({get(){if(!c.value)return null;const e=x.value.findIndex(t=>t.id===c.value);return e>=0?e:null},set(e){typeof e=="number"&&x.value[e]&&(c.value=x.value[e].id)}}),W=e=>{const t=e?.toLowerCase?.()??"";return t==="intekalavverkad"?"naturskog":t==="produktionsskog"?"produktionsskog_":e},X=e=>(e?.toLowerCase?.()??"")==="ingenatgard"?"naturskydd":e,P=e=>{const t=String(e).trim().toLowerCase();return t.includes("efter")?"efter":t.includes("innan")||t.includes("före")||t.includes("fore")?"fore":t.replace(/[^0-9]/g,"")||t},ie=(e,t,u)=>{const i=j=>j.trim().normalize("NFD").replace(/å/gi,"a").replace(/ä/gi,"a").replace(/ö/gi,"o").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");return`/images/thumbnails/${`${i(e)}_${P(String(t))}_visa_visa_${i(u)}.webp`}`},{data:re}=([f,V]=ee(()=>ae("forestry-timeline-skogsskotsel",()=>le("forestryTimelines").first())),f=await f,V(),f),A=[{label:"Inte kalavverkad",value:"naturskog"},{label:"Kalavverkad",value:"produktionsskog_"}],E=A.map(e=>({label:e.label,value:e.value,icon:e.value==="naturskog"?"i-material-symbols-light-forest-rounded":"i-ph-farm"})),v=m(E[I.selectedStartskog??0]?.value||E[0].value);U(()=>I.selectedStartskog,e=>{const t=A[e??0];t&&t.value!==v.value&&(v.value=t.value)},{immediate:!0});function ue(e){v.value=e;const t=A.findIndex(u=>u.value===e);t!==-1&&(I.selectedStartskog=t)}h(()=>A.find(e=>e.value===v.value)?.label??"");const _=h(()=>{const e=re.value?.entries??[],t=o.value.id,u=X(t);return e.map(i=>({...i,startskog:W(i.startskog),atgard:X(i.atgard)})).filter(i=>i.startskog===W(v.value)&&i.atgard===u).map(i=>({tid:i.tid,skog:i.skog,svamp:i.svamp,thumb:ie(i.atgard,i.tid,i.startskog)}))}),$=m(null),g=m(0);function ce(){$.value?.emblaApi?.scrollPrev?.()}function de(){$.value?.emblaApi?.scrollNext?.()}function me(e){g.value=e}function pe(e){g.value=e,$.value?.emblaApi?.scrollTo?.(e)}U(_,e=>{g.value=0,e.length&&requestAnimationFrame(()=>{$.value?.emblaApi?.scrollTo?.(0)})});const fe=e=>{if(!e)return;const t=P(e);if(!t)return;if(t==="fore")return"före";if(t==="efter")return"efter";const u=Number(t);if(!Number.isNaN(u))return String(u)},ve=h(()=>fe(_.value[g.value]?.tid));function _e(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function ge(e){if(!e)return"";const t=P(e);if(t==="fore")return"Innan avverkning";if(t==="efter")return"Efter avverkning";const u=Number(t);return Number.isNaN(u)?e.charAt(0).toUpperCase()+e.slice(1):`${u} år efter avverkning`}m([{label:"Intro",icon:"i-heroicons-book-open",slot:"text"},{label:"Diagram",icon:"i-heroicons-presentation-chart-line",slot:"diagram"},{label:"Tidslinje",icon:"i-heroicons-list-bullet",slot:"timeline"}]),m("description");const he=h(()=>[{label:`Om ${(o.value.title||"").toLowerCase()}`,icon:"i-hugeicons-tree-06",value:"description",content:o.value.description||""},{label:"Påverkan på mykorrhizasvampar",icon:"i-hugeicons-mushroom",value:"svamp",content:o.value.descriptionsvamp||""}]),we={naturskydd:0,trakthygge:1,luckhuggning:2,skarmtrad:3,skärmträd:3,bladning:4,blädning:4},ke=e=>(e||"").trim().normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase();function xe(){const e=ke(o.value.id),t=we[e];typeof t=="number"&&(I.selectedFramework=t),T.value=!0}return(e,t)=>{const u=Ue,i=Ve,N=je,j=Be,B=De,H=qe,Q=Ke,be=Re,ye=We,Y=Me,Ce=Xe,Se=Pe,Te=Ge,$e=Je,G=Ee,J=et,Ne=Oe,Le=Ze;return w(k)?(r(),b("div",{key:0,class:M(["flex-1 transition-all",o.value.id?"bg-neutral-50":""])},[l(te,{name:"fold-down"},{default:n(()=>[w(C)&&z.value?(r(),b("div",tt,[l(u,{size:"xl",items:K.value,modelValue:F.value,"onUpdate:modelValue":t[0]||(t[0]=a=>F.value=a),placeholder:o.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-full",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):p("",!0)]),_:1}),l(te,{name:"fade"},{default:n(()=>[o.value.id?p("",!0):(r(),d(N,{key:0,class:"w-full px-0"},{default:n(()=>[l(i,{ui:{container:"py-20 pb-16 lg:py-24",title:"sm:text-7xl",headline:"text-neutral"},title:w(k).hero.title,description:w(k).hero.description,orientation:w(k).hero.orientation,class:""},null,8,["title","description","orientation"])]),_:1}))]),_:1}),w(C)?o.value.id?(r(),b("div",ot,[l(u,{size:"xl",items:K.value,modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=a=>F.value=a),placeholder:o.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-full",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):(r(),d(H,{key:2,class:"relative",initial:{transform:"translateX(10px)",opacity:0,filter:"blur(5px)"},animate:{transform:"translateX(0px)",opacity:1,filter:"blur(0px)"},transition:{duration:.5,delay:.2}},{default:n(()=>[l(Q,{items:x.value,loop:"",speed:4,ui:{item:"basis-3/5 md:basis-1/3 p-2"}},{default:n(({item:a})=>[s("div",{onClick:L=>c.value=a.id,class:M(["shrink-0 bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow hover:shadow-md relative cursor-pointer",c.value?c.value===a.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[a.type&&!o.value.id?(r(),d(j,{key:0,class:"absolute top-2 left-2",label:a.type,color:"neutral",variant:"subtle"},null,8,["label"])):p("",!0),o.value.id?p("",!0):(r(),d(B,{key:1,src:a.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"])),s("h1",st,y(a.title),1)],10,nt)]),_:1},8,["items"])]),_:1})):(r(),d(N,{key:0,class:M(["w-full flex flex-col sm:flex-row justify-between py-4 gap-3 sm:gap-6 overflow-x-auto transition-all overflow-visible",[o.value.id?"mt-0 flex-row":"mt-8 flex-col"]])},{default:n(()=>[(r(!0),b(oe,null,ne(x.value,a=>(r(),d(H,{key:a.id,class:"relative",initial:{scale:1,transform:"translateY(10px)",opacity:0},animate:{scale:1,transform:"translateY(0px)",opacity:1},transition:{duration:.3,delay:.7+.05*(a.index??0)}},{default:n(()=>[s("div",{onClick:L=>c.value=a.id,class:M(["shrink-0 lg:shrink sm:w-58 lg:w-full bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow-lg hover:shadow-md relative cursor-pointer",c.value?c.value===a.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[a.type&&!o.value.id?(r(),d(j,{key:0,class:"absolute top-2 left-2",label:a.type,color:"neutral",variant:"subtle"},null,8,["label"])):p("",!0),o.value.id?p("",!0):(r(),d(B,{key:1,src:a.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"])),s("h1",lt,y(a.title),1)],10,at)]),_:2},1032,["transition"]))),128))]),_:1},8,["class"])),o.value.id?(r(),d(N,{key:3,class:"w-full pt-2 px-1 sm:px-6"},{default:n(()=>[l(H,{class:"flex justify-center w-full",initial:{opacity:0,transform:"translateY(10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.5}},{default:n(()=>[s("div",it,[l(Ne,{class:"p-3 pt-0 sm:pt-3"},{default:n(()=>[s("div",rt,[s("div",ut,[s("h1",ct,y(o.value.title),1),l(B,{src:o.value.image,width:"420",height:"250",class:"rounded-lg ring ring-muted/50"},null,8,["src"]),l(Y,{class:"ring-muted/50",variant:"outline",ui:{body:"py-1 sm:py-1"}},{default:n(()=>[l(ye,{items:he.value,"unmount-on-hide":!1,"default-value":["description"],ui:{trigger:"text-base font-medium",body:"text-md/7 text-neutral-800"}},{body:n(({item:a})=>[l(be,{value:a.content,unwrap:"p"},null,8,["value"])]),_:1},8,["items"])]),_:1})]),_.value.length?(r(),b("div",dt,[t[5]||(t[5]=s("div",{class:"flex"},[s("span",{class:"text-xs text-muted"},"Har skogen varit kalavverkad tidigare?")],-1)),l(Ce,{items:w(E),modelValue:v.value,"onUpdate:modelValue":t[2]||(t[2]=a=>v.value=a),onChange:ue,variant:"pill",size:"lg",class:"w-full -my-3",ui:{list:"grid grid-cols-2 gap-1 p-1",trigger:" data-[state=active]:text-neutral-900 px-4 py-2 text-sm font-medium",indicator:"bg-white"}},null,8,["items","modelValue"]),l(Q,{ref_key:"timelineCarousel",ref:$,items:_.value,prev:{onClick:ce},next:{onClick:de},class:"w-full bg-neutral-950 overflow-hidden rounded-lg ring-muted/50",fade:"",onSelect:me},{default:n(({item:a})=>[l(B,{src:a.thumb,alt:`Foto ${a.tid}`,width:"960",height:"540",class:"w-full aspect-video object-cover"},null,8,["src","alt"])]),_:1},8,["items","prev","next"]),s("div",mt,[s("div",pt,[(r(!0),b(oe,null,ne(_.value,(a,L)=>(r(),d(Se,{key:`timeline-thumb-${L}`,color:"neutral",class:M(["ring-muted/50 flex-none shrink-0 justify-center whitespace-nowrap",L===g.value?"border-neutral-900 bg-neutral-900 hover:bg-neutral-900 text-white opacity-100 ring-0 shadow":"border-transparent opacity-60 hover:opacity-100"]),variant:"outline",type:"button",onClick:bt=>pe(L),label:_e(a.tid)},null,8,["class","onClick","label"]))),128))])]),l(Y,{class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 ring-muted/50"},{default:n(()=>[s("div",ft,[s("h3",vt,y(ge(_.value[g.value]?.tid)),1),s("p",_t,y(_.value[g.value]?.skog),1),s("p",gt,y(_.value[g.value]?.svamp),1)])]),_:1})])):p("",!0),s("div",ht,[l(Y,{ui:{body:"p-1 sm:p-1 sm:pb-3"},class:"ring-muted/50 h-fit"},{default:n(()=>[l(Te,{parentSelectedFrameworks:[o.value.id],currentStartskog:v.value,currentTimeValue:ve.value},null,8,["parentSelectedFrameworks","currentStartskog","currentTimeValue"])]),_:1}),l(G,{open:T.value,"onUpdate:open":t[4]||(t[4]=a=>T.value=a),fullscreen:""},{content:n(()=>[l($e,{onClose:t[3]||(t[3]=a=>T.value=!1)})]),_:1},8,["open"]),s("div",wt,[t[6]||(t[6]=s("div",null,null,-1)),l(J,{title:"Öppna modell i helskärm",description:"I helskärm går det att jämföra olika metoder och visa fler lager med mer information. ",icon:"i-material-symbols:interactive-space",class:"mt-6 cursor-pointer",color:"neutral",variant:"subtle",orientation:"vertical",onClick:xe})])])])]),_:1})])]),_:1})]),_:1})):p("",!0),l(N,null,{default:n(()=>[l(G,null,{content:n(()=>[l(Le,{section:w(k).carousel},null,8,["section"])]),default:n(()=>[l(J,{title:"test",description:"tejhtekht eklrjl",class:"w-fit"})]),_:1})]),_:1})],2)):p("",!0)}}}),Ot=Ye(kt,[["__scopeId","data-v-47e5701d"]]);export{Ot as default};
