import{a as ia,_ as Ie,b as Ft}from"./B1-lneLQ.js";import{A as be,Z as Ve,M as W,e as d,w as M,N as ve,ah as ee,Y as $e,O as $,P as Pe,B as ua,C as ca,I as da,V as S,ar as ga,as as va,t as Z,aI as vt,r as G,d as A,o as je,K as pt,c as tt,J as oe,_ as Se,h as b,g as m,aO as mt,f as U,am as Ge,aB as at,n as re,aP as pa,U as ma,ae as me,T as Fe,a4 as fa,a6 as ha,y as ba,a7 as ka,a8 as ya,aa as wt,F as he,af as Ce,aM as Re,aY as Rt,ac as _a,b6 as H,b7 as xa,bu as Sa,aL as zt,bh as wa,bv as Ca,b5 as Mt,ay as Na,aG as Dt}from"#entry";import{_ as $a}from"./BVCUXQw6.js";import{_ as Ta,g as La,c as Aa,b as Ut,e as Ea}from"./DKxvfsE3.js";import{u as ot,_ as Va}from"./B_ujPsLJ.js";import{_ as st}from"./CcrBh-zU.js";import{_ as It}from"./DWPacyX4.js";import{u as Te}from"./Dm3SEL7P.js";import{H as ae,c as _e,i as ft,I as Ct,s as ut,x as Pa,X as jt,O as Gt,a as Ot,d as Kt,g as xe,m as ct,k as Ba,b as Ke,y as Fa,f as Nt,j as Ee,e as Ue,o as Ra,n as za,u as dt,A as Ma,t as Da,J as $t,K as Ua,L as Ia,M as ja,N as Ga,E as ht,F as bt,C as Oa,Q as Ka,S as Wa,G as Tt}from"./cp034Dgk.js";import"./DY-6pm3l.js";import"./DtaPNFOl.js";import"./Cpx5czNZ.js";import"./B7LwE6fO.js";import"./Cpj98o6Y.js";var qa=be({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r;return Ve(),(e,n)=>(d(),W($(Pe),$e(t,{"data-type":"ellipsis"}),{default:M(()=>[ve(e.$slots,"default",{},()=>[n[0]||(n[0]=ee("…"))])]),_:3},16))}}),Ha=qa;const[Oe,Ya]=ua("PaginationRoot");var Xa=be({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(r,{emit:t}){const e=r,n=t,{siblingCount:a,disabled:o,showEdges:c}=ca(e);Ve();const u=da(e,"page",n,{defaultValue:e.defaultPage,passive:e.page===void 0}),l=S(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return Ya({page:u,onPageChange(p){u.value=p},pageCount:l,siblingCount:a,disabled:o,showEdges:c}),(p,N)=>(d(),W($(Pe),{as:p.as,"as-child":p.asChild},{default:M(()=>[ve(p.$slots,"default",{page:$(u),pageCount:l.value})]),_:3},8,["as","as-child"]))}}),Za=Xa,Ja=be({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r,e=Oe();Ve();const n=S(()=>e.page.value===1||e.disabled.value);return(a,o)=>(d(),W($(Pe),$e(t,{"aria-label":"First Page",type:a.as==="button"?"button":void 0,disabled:n.value,onClick:o[0]||(o[0]=c=>!n.value&&$(e).onPageChange(1))}),{default:M(()=>[ve(a.$slots,"default",{},()=>[o[1]||(o[1]=ee("First page"))])]),_:3},16,["type","disabled"]))}}),Qa=Ja,eo=be({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r,e=Oe();Ve();const n=S(()=>e.page.value===e.pageCount.value||e.disabled.value);return(a,o)=>(d(),W($(Pe),$e(t,{"aria-label":"Last Page",type:a.as==="button"?"button":void 0,disabled:n.value,onClick:o[0]||(o[0]=c=>!n.value&&$(e).onPageChange($(e).pageCount.value))}),{default:M(()=>[ve(a.$slots,"default",{},()=>[o[1]||(o[1]=ee("Last page"))])]),_:3},16,["type","disabled"]))}}),to=eo;function Ae(r,t){const e=t-r+1;return Array.from({length:e},(n,a)=>a+r)}function ao(r){return r.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const Xe="ellipsis";function oo(r,t,e,n){const o=t,c=Math.max(r-e,1),u=Math.min(r+e,o);if(n){const p=Math.min(2*e+5,t)-2,N=c>3&&Math.abs(o-p-1+1)>2&&Math.abs(c-1)>2,C=u<o-2&&Math.abs(o-p)>2&&Math.abs(o-u)>2;if(!N&&C)return[...Ae(1,p),Xe,o];if(N&&!C){const _=Ae(o-p+1,o);return[1,Xe,..._]}if(N&&C){const _=Ae(c,u);return[1,Xe,..._,Xe,o]}return Ae(1,o)}else{const l=e*2+1;return t<l?Ae(1,o):r<=e+1?Ae(1,l):t-r<=e?Ae(t-l+1,o):Ae(c,u)}}var so=be({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(r){const t=r;Ve();const e=Oe(),n=S(()=>ao(oo(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(a,o)=>(d(),W($(Pe),ga(va(t)),{default:M(()=>[ve(a.$slots,"default",{items:n.value})]),_:3},16))}}),no=so,ro=be({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;Ve();const e=Oe(),n=S(()=>e.page.value===t.value),a=S(()=>e.disabled.value);return(o,c)=>(d(),W($(Pe),$e(t,{"data-type":"page","aria-label":`Page ${o.value}`,"aria-current":n.value?"page":void 0,"data-selected":n.value?"true":void 0,disabled:a.value,type:o.as==="button"?"button":void 0,onClick:c[0]||(c[0]=u=>!a.value&&$(e).onPageChange(o.value))}),{default:M(()=>[ve(o.$slots,"default",{},()=>[ee(Z(o.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),lo=ro,io=be({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;Ve();const e=Oe(),n=S(()=>e.page.value===e.pageCount.value||e.disabled.value);return(a,o)=>(d(),W($(Pe),$e(t,{"aria-label":"Next Page",type:a.as==="button"?"button":void 0,disabled:n.value,onClick:o[0]||(o[0]=c=>!n.value&&$(e).onPageChange($(e).page.value+1))}),{default:M(()=>[ve(a.$slots,"default",{},()=>[o[1]||(o[1]=ee("Next page"))])]),_:3},16,["type","disabled"]))}}),uo=io,co=be({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(r){const t=r;Ve();const e=Oe(),n=S(()=>e.page.value===1||e.disabled.value);return(a,o)=>(d(),W($(Pe),$e(t,{"aria-label":"Previous Page",type:a.as==="button"?"button":void 0,disabled:n.value,onClick:o[0]||(o[0]=c=>!n.value&&$(e).onPageChange($(e).page.value-1))}),{default:M(()=>[ve(a.$slots,"default",{},()=>[o[1]||(o[1]=ee("Prev page"))])]),_:3},16,["type","disabled"]))}}),go=co;function vo(r){let t;for(;t=r.sourceEvent;)r=t;return r}function et(r,t){if(r=vo(r),t===void 0&&(t=r.currentTarget),t){var e=t.ownerSVGElement||t;if(e.createSVGPoint){var n=e.createSVGPoint();return n.x=r.clientX,n.y=r.clientY,n=n.matrixTransform(t.getScreenCTM().inverse()),[n.x,n.y]}if(t.getBoundingClientRect){var a=t.getBoundingClientRect();return[r.clientX-a.left-t.clientLeft,r.clientY-a.top-t.clientTop]}}return[r.pageX,r.pageY]}const Lt=r=>+r,po={components:[],container:void 0,followCursor:!0,allowHover:!1,horizontalPlacement:ae.Auto,horizontalShift:0,verticalPlacement:ae.Top,verticalShift:0,attributes:{},triggers:{},className:void 0,showDelay:void 0,hideDelay:void 0},nt=_e`
  label: tooltip;
  display: inline-block;
  left: 0;
  bottom: 0;
  min-width: max-content;
  position: absolute;
  opacity: 0;
  transition: opacity;
  transition-duration: var(--vis-tooltip-transition-duration);
  z-index: 999999;
  padding: var(--vis-tooltip-padding);
  color: var(--vis-tooltip-text-color);
  border-radius: var(--vis-tooltip-border-radius);
  box-shadow: var(--vis-tooltip-box-shadow);
  border: solid 1px var(--vis-tooltip-border-color);
  background-color: var(--vis-tooltip-background-color);
  backdrop-filter: var(--vis-tooltip-backdrop-filter);
`,mo=nt,fo=ft`
  :root {
    --vis-tooltip-background-color: rgba(255, 255, 255, 0.95);
    --vis-tooltip-border-color: #e5e9f7;
    --vis-tooltip-text-color: #000;
    --vis-tooltip-shadow-color: rgba(172, 179, 184, 0.35);
    --vis-tooltip-backdrop-filter: none;
    --vis-tooltip-padding: 10px 15px;
    --vis-tooltip-border-radius: 5px;
    --vis-tooltip-transition-duration: 300ms;
    --vis-tooltip-box-shadow: none;

    --vis-dark-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-dark-tooltip-text-color: #e5e9f7;
    --vis-dark-tooltip-border-color: var(--vis-color-grey);
    --vis-dark-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }

  body.theme-dark ${`.${nt}`} {
    --vis-tooltip-background-color: var(--vis-dark-tooltip-background-color);
    --vis-tooltip-text-color: var(--vis-dark-tooltip-text-color);
    --vis-tooltip-border-color: var(--vis-dark-tooltip-border-color);
    --vis-tooltip-shadow-color: var(--vis-dark-tooltip-shadow-color);
  }

  body.theme-dark {
    --vis-tooltip-background-color: rgba(30,30,30, 0.95);
    --vis-tooltip-text-color: #e5e9f7;
    --vis-tooltip-border-color: var(--vis-color-grey);
    --vis-tooltip-shadow-color: rgba(0,0,0, 0.95);
  }
`,Wt=_e`
  bottom: unset;
  position: fixed;
`,Ze=_e`
  opacity: 1;
`,Je=_e`
  display: none;
`,qt=_e`
  label: non-interactive;
  pointer-events: none;
  user-select: none;
`,ho=Object.freeze(Object.defineProperty({__proto__:null,hidden:Je,nonInteractive:qt,positionFixed:Wt,root:nt,show:Ze,tooltip:mo,variables:fo},Symbol.toStringTag,{value:"Module"}));class Ht{constructor(t={}){this._defaultConfig=po,this.config=this._defaultConfig,this._setUpEventsThrottled=Ct(this._setUpEvents,500),this._setContainerPositionThrottled=Ct(this._setContainerPosition,500),this._isShown=!1,this.element=document.createElement("div"),this.div=ut(this.element).attr("class",nt).classed(Ze,!1).classed(Je,!0),this.setConfig(t),this.components=this.config.components,this._mutationObserver=new MutationObserver(()=>{this._isShown&&(!this.config.followCursor&&this._hoveredElement?this.placeByElement(this._hoveredElement):this._position&&this.place({x:this._position[0],y:this._position[1]}))}),this._mutationObserver.observe(this.div.node(),{childList:!0,subtree:!0})}setConfig(t){var e;this.prevConfig=this.config,this.config=Pa(this._defaultConfig,t),this.prevConfig.horizontalPlacement!==this.config.horizontalPlacement&&this.overrideHorizontalPlacement(void 0),this.config.container&&this.config.container!==((e=this.prevConfig)===null||e===void 0?void 0:e.container)&&this.setContainer(this.config.container),this._setUpAttributes()}setContainer(t){var e;(e=this.element.parentNode)===null||e===void 0||e.removeChild(this.element),this._container=t,this._container.appendChild(this.element),this._setContainerPositionThrottled()}getContainer(){return this._container}hasContainer(){return!!this._container&&this._container.isConnected}setComponents(t){this.components=t}update(){this._container&&this._setUpEventsThrottled()}show(t,e){this.render(t),this.place(e)}_hide(){this.div.classed(Ze,!1).on("transitionend",()=>{this.div.classed(Je,!this._isShown)}),this._isShown=!1}hide(){window.clearTimeout(this._showDelayTimeoutId),this.config.hideDelay?(window.clearTimeout(this._hideDelayTimeoutId),this._hideDelayTimeoutId=setTimeout(()=>this._hide(),this.config.hideDelay)):this._hide()}_display(){window.clearTimeout(this._hideDelayTimeoutId),this.div.classed(Je,!1).classed(Ze,!0),this._isShown=!0}display(){this._isShown||(this.config.showDelay?(window.clearTimeout(this._showDelayTimeoutId),this._showDelayTimeoutId=setTimeout(()=>{this._display(),this.place({x:this._position[0],y:this._position[1]})},this.config.showDelay)):this._display())}place(t){if(this._position=[t.x,t.y],!this.hasContainer()){console.warn("Unovis | Tooltip: Container was not set or is not initialized yet");return}const{config:e}=this,n=this.element.offsetWidth,a=this.element.offsetHeight,o=this._overriddenHorizontalPlacement||(e.horizontalPlacement===ae.Auto?ae.Center:e.horizontalPlacement),c=e.verticalPlacement===ae.Auto?t.y-a<0?ae.Bottom:ae.Top:e.verticalPlacement,u=5,l=o===ae.Left?-n-u-e.horizontalShift:o===ae.Center?-n/2:u+e.horizontalShift,p=c===ae.Bottom?u+e.verticalShift:c===ae.Center?-a/2:-u-e.verticalShift-a,[N,C]=this._constraintPosToContainer(t.x+l,t.y+p,n,a);this._applyPosition(N,C,a)}placeByElement(t){const{config:e}=this;this._hoveredElement=t;const n=5,a=this.element.offsetWidth,o=this.element.offsetHeight,c=this.isContainerBody(),u=c?window.innerWidth:this._container.scrollWidth,l=t.getBoundingClientRect(),p=c?[l.x,l.y]:et({clientX:l.x,clientY:l.y,pageX:l.x,pageY:l.y},this._container),N=this._overriddenHorizontalPlacement||(e.horizontalPlacement===ae.Auto?p[0]-a<0?ae.Right:p[0]+a>u?ae.Left:ae.Center:e.horizontalPlacement);let C=0;switch(N){case ae.Left:C=-a-n-e.horizontalShift;break;case ae.Right:C=l.width+n+e.horizontalShift;break;case ae.Center:default:C=(-a+l.width)/2;break}const y=e.verticalPlacement===ae.Auto?N!==ae.Center?ae.Center:p[1]-o<0?ae.Bottom:ae.Top:e.verticalPlacement;let _=-o;switch(y){case ae.Center:_+=(o+l.height)/2;break;case ae.Bottom:_+=o+l.height+n+e.verticalShift;break;case ae.Top:default:_+=-n-e.verticalShift;break}const[k,x]=this._constraintPosToContainer(p[0]+C,p[1]+_,a,o);this._applyPosition(k,x,o)}isContainerBody(){return this._container===document.body}overrideHorizontalPlacement(t){this._overriddenHorizontalPlacement=t}render(t){var e;const{config:n,prevConfig:a}=this;t instanceof HTMLElement?this.div.select(":first-child").node()!==t&&this.div.html("").append(()=>t):t&&this.div.html(t),this.div.classed((e=n.className)!==null&&e!==void 0?e:"",!!n.className).classed(qt,!n.allowHover),a?.className&&a.className!==n.className&&this.div.classed(a.className,!1),this.display()}_applyPosition(t,e,n){const a=this.isContainerBody(),o=a?window.innerHeight:this._container.scrollHeight;this.div.classed(Wt,a).style("top",a?`${e}px`:"unset").style("bottom",a?"unset":`${o-e-n}px`).style("left",`${t}px`)}_constraintPosToContainer(t,e,n,a){const o=this.isContainerBody(),c=o?window.innerHeight:this._container.scrollHeight,u=o?window.innerWidth:this._container.scrollWidth,l=10,p=t>u-n-l,N=t<l,C=p?u-n-l:N?l:t,y=10,_=e>c-a-y,k=e<y,x=_?c-a-y:k?y:e;return[u<n?0:C,c<a?0:x]}_setContainerPosition(){var t;this._container!==document.body&&((t=getComputedStyle(this._container))===null||t===void 0?void 0:t.position)==="static"&&(this._container.style.position="relative")}_setUpEvents(){const{config:t}=this;this.components.forEach(e=>{const n=ut(e.element);n.on("mousemove.tooltip",a=>{const{config:o}=this,c=a.composedPath&&a.composedPath()||a.path||[a.target];for(const u of Object.keys(o.triggers)){const l=o.triggers[u];if(!l)continue;const p=n.selectAll(`.${u}`).nodes();for(const N of c){if(N===n.node())break;if(N.classList.contains(u)){const C=p.indexOf(N),y=ut(N).datum(),_=l(y,C,p),[k,x]=this.isContainerBody()?[a.clientX,a.clientY]:et(a,this._container);_===null?this.hide():(this.render(_),o.followCursor?this.place({x:k,y:x}):this.placeByElement(N)),a.stopPropagation();return}}}this._isShown&&this.hide()}).on("mouseleave.tooltip",a=>{a.stopPropagation(),this.hide()})}),t.allowHover?this.div.on("mouseenter.tooltip",this._display.bind(this)).on("mouseleave.tooltip",this.hide.bind(this)):this.div.on("mouseenter.tooltip",null).on("mouseleave.tooltip",null)}_setUpAttributes(){const t=this.config.attributes;t&&Object.keys(t).forEach(e=>{this.div.attr(e,t[e])})}destroy(){var t;this._mutationObserver.disconnect(),window.clearTimeout(this._hideDelayTimeoutId),window.clearTimeout(this._showDelayTimeoutId),(t=this.div)===null||t===void 0||t.remove()}}Ht.selectors=ho;const bo=Object.assign(Object.assign({},jt),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:Gt.Vertical}),Yt=_e`
  label: stacked-bar-component;
`,ko=ft`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${Yt}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,Qe=_e`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,gt=_e`
  label: barGroup;
`,Xt=_e`
  label: barGroupExit;
`,yo=Object.freeze(Object.defineProperty({__proto__:null,bar:Qe,barGroup:gt,barGroupExit:Xt,globalStyles:ko,root:Yt},Symbol.toStringTag,{value:"Module"}));class kt extends Ot{constructor(t){super(),this._defaultConfig=bo,this.config=this._defaultConfig,this.getAccessors=()=>Kt(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],t&&this.setConfig(t)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const t=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],e=this.dataScale.domain(),n=this._getBarWidth()/2,a=this._barData.map((_,k)=>xe(_,this.config.x,k)),o=ct(a),c=Ba(a),u=this.dataScale(o),l=this.dataScale(c),p=this.dataScale.invert(u+(t?n:-n)),N=this.dataScale.invert(l+(t?-n:n)),C=p<=e[0]?this.dataScale(e[0])-this.dataScale(p):0,y=N>e[1]?this.dataScale(N)-this.dataScale(e[1]):0;return{top:this.isVertical()?0:t?-y:C,bottom:this.isVertical()?0:t?-C:y,left:this.isVertical()?C:0,right:this.isVertical()?y:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===Gt.Vertical}_render(t){const{config:e}=this,n=Ke(t)?t:e.duration,a=this.getAccessors(),o=Fa(this._barData,0,a,this._prevNegative);this._prevNegative=o.map(k=>!!k.isMostlyNegative);const c=this.g.selectAll(`.${gt}`).data(this._barData,(k,x)=>{var E;return`${(E=Nt(k,e.id,x))!==null&&E!==void 0?E:x}`}),u=(k,x)=>{const E=this.dataScale(xe(k,e.x,x)),f=this.isVertical()?E:0,F=this.isVertical()?0:E;return`translate(${f},${F})`},p=c.enter().append("g").attr("class",gt).attr("transform",u).style("opacity",1).merge(c);Ee(p,n).attr("transform",u).style("opacity",1);const N=c.exit().attr("class",Xt);Ee(N,n).style("opacity",0).remove(),Ee(N.selectAll(`.${Qe}`),n).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const C=p.selectAll(`.${Qe}`).data((k,x)=>o.map((E,f)=>Object.assign(Object.assign({},k),{_index:x,_stacked:E[x],_ending:f===o.length-1||f<=o.length-1&&o[f+1][x][0]!==E[x][1]}))),_=C.enter().append("path").attr("class",Qe).attr("d",(k,x)=>this._getBarPath(k,x,!0)).style("fill",(k,x)=>Ue(k,e.color,x)).merge(C);Ee(_,n).attr("d",(k,x)=>this._getBarPath(k,x)).style("fill",(k,x)=>Ue(k,e.color,x)).style("cursor",(k,x)=>Nt(k,e.cursor,x)),Ee(C.exit(),n).style("opacity",0).remove()}_getBarWidth(){const{config:t,datamodel:{data:e}}=this;if(Ra(e))return 0;if(t.barWidth)return ct([t.barWidth,t.barMaxWidth]);const n=this.dataScale.bandwidth,a=this.dataScale.domain?this.dataScale.domain():[];let c=1+(n?a.length:a[1]-a[0])/t.dataStep||!n&&e.filter((p,N)=>{const C=xe(p,t.x,N);return C>=a[0]&&C<=a[1]}).length||e.length;!n&&c>=2&&(c+=1);const l=(c<2?1:1-t.barPadding)*(this.isVertical()?this._width:this._height)/c;return ct([l,t.barMaxWidth])}_getVisibleData(){const{config:t,datamodel:{data:e}}=this,n=this._getBarWidth(),a=e.length<2?0:n/2,o=this.dataScale,c=Math.abs(o.invert(a)-o.invert(0));return e?.filter((l,p)=>{const N=xe(l,t.x,p),C=o.domain(),y=+C[0],_=+C[1];return N>=y-c&&N<=_+c})}_getBarPath(t,e,n=!1){const{config:a}=this,o=this.getAccessors(),c=this._getBarWidth(),u=t._stacked[1]<0,l=t._ending,p=xe(t,o[e],t._index),N=n?0:Math.abs(this.valueScale(t._stacked[0])-this.valueScale(t._stacked[1])),C=!n&&a.barMinHeight1Px&&N<1&&isFinite(p)&&p!==a.barMinHeightZeroValue?1:N,y=n?this.valueScale(0):this.valueScale(u?t._stacked[0]:t._stacked[1])-(N<1&&a.barMinHeight1Px?1:0),_=-c/2,k=c,x=a.roundedCorners?Ke(a.roundedCorners)?+a.roundedCorners:k/2:0,E=dt(x,0,Math.min(N,k)/2),f=this.yScale.range()[0]>this.yScale.range()[1];return za({x:this.isVertical()?_:y-C,y:this.isVertical()?y+(f?0:-C):_,w:this.isVertical()?k:C,h:this.isVertical()?C:k,tl:l&&(this.isVertical()?!u&&f||u&&!f:u),tr:l&&(this.isVertical()?!u&&f||u&&!f:!u),br:l&&(this.isVertical()?u&&f||!u&&!f:!u),bl:l&&(this.isVertical()?u&&f||!u&&!f:u),r:E})}getValueScaleExtent(t){const{datamodel:e}=this,n=this.getAccessors(),a=t?this._getVisibleData():e.data;return Ma(a,...n)}getDataScaleExtent(){const{config:t,datamodel:e}=this;return Da(e.data,t.x)}getYDataExtent(t){return this.isVertical()?this.getValueScaleExtent(t):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}kt.selectors=yo;const _o=Object.assign(Object.assign({},jt),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(r,t,e,n)=>"",hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0,onCrosshairMove:void 0,forceShowAt:void 0}),xo=ft`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,So=_e`
  label: crosshair-component;
`,Zt=_e`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,Jt=_e`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`,wo=Object.freeze(Object.defineProperty({__proto__:null,circle:Jt,globalStyles:xo,line:Zt,root:So},Symbol.toStringTag,{value:"Module"}));class Qt extends Ot{constructor(t){super(),this.clippable=!0,this._defaultConfig=_o,this.config=this._defaultConfig,this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},t&&this.setConfig(t),this.g.style("opacity",0),this.line=this.g.append("line").attr("class",Zt)}set accessors(t){this._accessors=t}get accessors(){var t;const{config:e}=this,n=!!(e.x||e.y||e.yStacked),a=n?e.x:this._accessors.x,o=n?e.y:this._accessors.y,c=o?Kt(o)?o:[o]:void 0,u=n?e.yStacked:this._accessors.yStacked,l=(t=e.baseline)!==null&&t!==void 0?t:this._accessors.baseline;return{x:a,y:c,yStacked:u,baseline:l}}_isContainerInViewport(){var t;if(!(!((t=this.container)===null||t===void 0)&&t.node()))return!1;const e=this.container.node().getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,a=window.innerHeight||document.documentElement.clientHeight,o=Math.max(0,Math.min(e.right,n)-Math.max(e.left,0)),c=Math.max(0,Math.min(e.bottom,a)-Math.max(e.top,0)),u=e.width*e.height,l=o*c;return u>0&&l/u>=.35}setContainer(t){this.container!==t&&(this.container=t,this.container.on("mousemove.crosshair",this._onMouseMove.bind(this)),this.container.on("mouseout.crosshair",this._onMouseOut.bind(this)),this.container.on("wheel.crosshair",this._onWheel.bind(this)))}_render(t){var e,n,a,o,c;const{config:u,datamodel:l}=this,p=Ke(t)?t:u.duration,N=u.forceShowAt!==void 0,C=N?this.xScale(u.forceShowAt):this._xPx,y=this.xScale.invert(C),_=!((e=l.data)===null||e===void 0)&&e.length&&this.accessors.x?l.data.indexOf($t(l.data,y,this.accessors.x,Ua.Left)):void 0;let k,x;u.snapToData&&(!this.accessors.y&&!this.accessors.yStacked&&(!((n=l.data)===null||n===void 0)&&n.length)&&console.warn("Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object"),!(!((a=l.data)===null||a===void 0)&&a.length)&&this._mouseEvent&&console.warn("Unovis | Crosshair: No data to snap to. Make sure the data has been passed to the container or to the crosshair itself"),k=$t(l.data,y,this.accessors.x),x=l.data.indexOf(k));const E=this.xScale.range(),f=this.yScale.range(),F=u.snapToData&&k?dt(Math.round(this.xScale(xe(k,this.accessors.x,x))),0,this._width):dt(C,E[0],E[1]),z=C>=E[0]&&C<=E[1],Y=this._yPx>=f[1]&&this._yPx<=f[0];let O=this._xPx?z&&Y:z;u.hideWhenFarFromPointer&&Math.abs(F-+C)>=u.hideWhenFarFromPointerDistance&&(O=!1);const J=(o=u.tooltip)!==null&&o!==void 0?o:this.tooltip;if(O&&J&&this._isContainerInViewport()){const w=J.getContainer()||this.container.node(),v=J.isContainerBody();if(N){const i=this.container.node().getBoundingClientRect(),h=(v?C+i.left:C)+this._containerMargin.left,j=this._height/2+(v?i.top:0),R=[h,j];this._showTooltip(k,y,R,_)}else if(this._mouseEvent){const i=v?[this._mouseEvent.clientX,this._mouseEvent.clientY]:et(this._mouseEvent,w);this._showTooltip(k,y,i,_)}}else this._hideTooltip();if(this._mouseEvent&&((c=u.onCrosshairMove)===null||c===void 0||c.call(u,O?this.xScale.invert(this._xPx):void 0,k,x,this._mouseEvent),this._mouseEvent=void 0),Ee(this.g,p).style("opacity",O?1:0),!isFinite(C))return;this.line.attr("y1",0).attr("y2",this._height),Ee(this.line,p,Lt).attr("x1",F).attr("x2",F);const le=Ia(u.getCircles)?u.getCircles(y,l.data,this.yScale,_):this.getCircleData(k,x),de=this.g.selectAll("circle").data(le,(w,v)=>{var i;return(i=w.id)!==null&&i!==void 0?i:v}),ie=de.enter().append("circle").attr("class",Jt).attr("r",0).attr("cx",F).attr("cy",w=>w.y).style("fill",w=>w.color).style("stroke",w=>w.strokeColor).style("stroke-width",w=>w.strokeWidth);Ee(ie.merge(de),p,Lt).attr("cx",F).attr("cy",w=>w.y).attr("r",4).style("opacity",w=>w.opacity).style("fill",w=>w.color).style("stroke",w=>w.strokeColor).style("stroke-width",w=>w.strokeWidth),de.exit().remove()}hide(t){window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{var e,n;this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,(n=(e=this.config).onCrosshairMove)===null||n===void 0||n.call(e,void 0,void 0,void 0,t),this._render()})}_onMouseMove(t){var e;const{datamodel:n,element:a}=this;!this.accessors.x&&(!((e=n.data)===null||e===void 0)&&e.length)&&console.warn("Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object");const[o,c]=et(t,a);this._xPx=o,this._yPx=c,this._mouseEvent=t,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()})}_onMouseOut(t){var e;(!t||!(!((e=this.container)===null||e===void 0)&&e.node().contains(t.relatedTarget)))&&this.hide(t)}_onWheel(t){this.hide(t)}_showTooltip(t,e,n,a){var o;const{config:c,datamodel:u}=this,l=(o=c.tooltip)!==null&&o!==void 0?o:this.tooltip;if(!l||!n)return;const[p,N]=n,C=c.template(t,e,u.data,a);if(l.config.followCursor=!0,!l.config.horizontalPlacement||l.config.horizontalPlacement===ae.Auto){const y=l.isContainerBody()?p-this.container.node().getBoundingClientRect().left:p;l.overrideHorizontalPlacement(y>this._containerWidth/2?ae.Left:ae.Right)}C&&l.show(C,{x:p,y:N})}_hideTooltip(){var t;const{config:e}=this,n=(t=e.tooltip)!==null&&t!==void 0?t:this.tooltip;n?.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(t,e){var n,a;const{config:o}=this;if(o.snapToData&&t){const c=(n=this.accessors.y)!==null&&n!==void 0?n:[],u=(a=this.accessors.yStacked)!==null&&a!==void 0?a:[],l=xe(t,this.accessors.baseline,e)||0,p=ja(t,e,...u).map((C,y)=>({y:this.yScale(C+l),opacity:Ke(xe(t,u[y],y))?1:0,color:Ue(t,o.color,y),strokeColor:o.strokeColor?Ue(t,o.strokeColor,y):void 0,strokeWidth:o.strokeWidth?xe(t,o.strokeWidth,y):void 0})),N=c.map((C,y)=>{const _=xe(t,C,e);return{y:this.yScale(_),opacity:Ke(_)?1:0,color:Ue(t,o.color,p.length+y),strokeColor:o.strokeColor?Ue(t,o.strokeColor,y):void 0,strokeWidth:o.strokeWidth?xe(t,o.strokeWidth,y):void 0}});return p.concat(N)}return[]}}Qt.selectors=wo;const Co={"data-vis-crosshair":""},No=be({__name:"index",props:{data:{}},setup(r,{expose:t}){const e=vt(Ga),n=r,a=S(()=>e.data.value??n.data),o=ht(n),c=G();return je(()=>{pt(()=>{var u;c.value=new Qt(o.value),(u=c.value)==null||u.setData(a.value),e.update(c.value)})}),tt(()=>{var u;(u=c.value)==null||u.destroy(),e.destroy()}),oe(o,(u,l)=>{var p;bt(u,l)||(p=c.value)==null||p.setConfig(o.value)}),oe(a,()=>{var u;(u=c.value)==null||u.setData(a.value)}),t({component:c}),(u,l)=>(d(),A("div",Co))}}),$o={"data-vis-component":""},To=be({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(r,{expose:t}){const e=vt(Oa),n=r,a=S(()=>e.data.value??n.data),o=ht(n),c=G();return je(()=>{pt(()=>{var u;c.value=new kt(o.value),(u=c.value)==null||u.setData(a.value),e.update(c.value)})}),tt(()=>{var u;(u=c.value)==null||u.destroy(),e.destroy()}),oe(o,(u,l)=>{var p;bt(u,l)||(p=c.value)==null||p.setConfig(o.value)}),oe(a,()=>{var u;(u=c.value)==null||u.setData(a.value)}),t({component:c}),(u,l)=>(d(),A("div",$o))}}),Lo={"data-vis-tooltip":""},Ao=be({__name:"index",props:{components:{},container:{},followCursor:{type:Boolean},allowHover:{type:Boolean},horizontalPlacement:{},horizontalShift:{},verticalPlacement:{},verticalShift:{},triggers:{},attributes:{},className:{},hideDelay:{},showDelay:{},data:{}},setup(r,{expose:t}){const e=vt(Ka),n=ht(r),a=G();return je(()=>{pt(()=>{a.value=new Ht(n.value),e.update(a.value)})}),tt(()=>{var o;(o=a.value)==null||o.destroy(),e.destroy()}),oe(n,(o,c)=>{var u;bt(o,c)||(u=a.value)==null||u.setConfig(n.value)}),t({component:a}),(o,c)=>(d(),A("div",Lo))}}),Eo={},Vo={class:"relative overflow-hidden rounded-(--ui-radius) border border-dashed border-(--ui-border-accented) opacity-75 px-4 flex items-center justify-center aspect-video"};function Po(r,t){const e=$a;return d(),W(e,{variant:"subtle"},{default:M(()=>[b("div",Vo,[t[0]||(t[0]=b("svg",{class:"absolute inset-0 h-full w-full stroke-(--ui-border-inverted)/10",fill:"none"},[b("defs",null,[b("pattern",{id:"pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[b("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),b("rect",{stroke:"none",fill:"url(#pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e)",width:"100%",height:"100%"})],-1)),ve(r.$slots,"default")])]),_:3})}const Bo=Object.assign(Se(Eo,[["render",Po]]),{__name:"ImagePlaceholder"}),Fo={class:"w-full relative overflow-visible"},Ro={key:0,class:"group overflow-hidden"},zo=["src"],Mo={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},Do={class:"flex"},Uo={key:1,class:"overflow-hidden relative group"},Io=["src"],jo={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},Go={class:"flex"},Oo={class:"px-5 pb-3 mt-4"},Ko={class:"text-2xl font-medium"},Wo={class:"text-neutral-500"},qo={class:"my-1"},Ho={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},Yo={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},Xo={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},Zo={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},Jo={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},Qo={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},es={class:"mt-3 text-lg"},ts={class:"-mx-1 mt-4"},as={key:0,class:"inline-flex m-1 h-fit align-bottom"},os=["src"],ss={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},ns={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},rs={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},ls={class:"text-lg font-semibold mb-2 flex"},is={key:0,class:"flex items-center space-x-2"},us={size:"md",weight:"light"},cs={size:"md",weight:"light"},At=50,ds={__name:"SpeciesInfo",props:{species:Object},setup(r){const t=G(0),e=r,n=S(()=>e.species.images||[]);oe(n,()=>{t.value=0});const a=G(!1),o=G(!0),c=()=>{a.value=!a.value},u=S(()=>e.species.Kriteriedokumentation?a.value?e.species.Kriteriedokumentation:e.species.Kriteriedokumentation.slice(0,At)+"...":""),l=S(()=>e.species.ekologi?o.value?e.species.ekologi:e.species.ekologi.slice(0,At)+"...":""),p=E=>E?E.charAt(0).toUpperCase()+E.slice(1).toLowerCase():"",N=E=>E?E.replace("/detaljer","").replace("/artinformation",""):"",C=E=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[E]||"NE",y=E=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[E]||"bg-neutral-300",_=E=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[E]||"Ej bedömd",k=(E,f)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[E==="0"&&f?f:E]||"default-icon.webp"}`,x=S(()=>e.species["Svamp-grupp"]==="0"&&e.species["Svamp-grupp-släkte"]?e.species["Svamp-grupp-släkte"]:e.species["Svamp-grupp"]);return(E,f)=>{const F=ia,z=mt,Y=Bo,O=Ge,J=at,le=Ie,de=pa;return d(),A("div",Fo,[n.value.length>1?(d(),A("div",Ro,[m(F,{onSelect:f[0]||(f[0]=ie=>t.value=ie),items:n.value,ui:{item:"basis-full"}},{default:M(({item:ie})=>[(d(),A("div",{class:"w-full relative",key:ie},[b("img",{src:ie,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,zo)]))]),_:1},8,["items"]),b("div",Mo,[b("div",Do,[m(z,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),f[1]||(f[1]=b("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),b("h1",null,Z(t.value+1)+" av "+Z(n.value.length),1)])])):n.value.length===1?(d(),A("div",Uo,[b("img",{src:n.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,Io),b("div",jo,[b("div",Go,[m(z,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),f[2]||(f[2]=b("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),b("h1",null,Z(t.value+1)+" av "+Z(n.value.length),1)])])):(d(),W(Y,{key:2,class:"rounded-none"})),b("div",Oo,[b("h1",Ko,Z(p(r.species.Commonname)),1),b("h1",Wo,Z(r.species.Scientificname),1),b("div",qo,[r.species["Rank matsvamp"]===3?(d(),A("div",Ho,[m(O,{name:"codicon:circle-large-filled",class:"size-3"}),f[3]||(f[3]=ee(" Sällsynt matsvamp ",-1))])):U("",!0),r.species["Rank matsvamp"]===2?(d(),A("div",Yo,[m(O,{name:"codicon:color-mode",class:"size-3"}),f[4]||(f[4]=ee(" Ovanlig matsvamp ",-1))])):U("",!0),r.species["Rank giftsvamp"]===3?(d(),A("div",Xo,[m(O,{name:"codicon:circle-large-filled",class:"size-3"}),f[5]||(f[5]=ee(" Sällsynt giftsvamp ",-1))])):U("",!0),r.species["Rank giftsvamp"]===2?(d(),A("div",Zo,[m(O,{name:"codicon:color-mode",class:"size-3"}),f[6]||(f[6]=ee(" Ovanlig giftsvamp ",-1))])):U("",!0),r.species.RankRed===3?(d(),A("div",Jo,[m(O,{name:"codicon:circle-large-filled",class:"size-3"}),f[7]||(f[7]=ee(" Sällsynt naturvårdsart ",-1))])):U("",!0),r.species.RankRed===2?(d(),A("div",Qo,[m(O,{name:"codicon:color-mode",class:"size-3"}),f[8]||(f[8]=ee(" Ovanlig naturvårdsart ",-1))])):U("",!0)]),b("h1",es,Z(l.value),1),b("div",ts,[r.species["Svamp-grupp"]?(d(),A("div",as,[m(J,{color:"neutral",variant:"subtle",size:"xl"},{default:M(()=>[b("img",{src:k(r.species["Svamp-grupp"],r.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,os),ee(" "+Z(p(x.value)),1)]),_:1})])):U("",!0),r.species["Nyasvamp-boken"]==="x"?(d(),A("div",ss,[m(J,{color:"warning",size:"xl",variant:"subtle",class:""},{default:M(()=>[m(z,{name:"icon-park-solid:knife-fork"}),f[9]||(f[9]=ee("Matsvamp ",-1))]),_:1})])):U("",!0),r.species.Giftsvamp==="x"?(d(),A("div",ns,[m(J,{color:"poison",size:"xl",variant:"subtle",class:""},{default:M(()=>[m(z,{name:"hugeicons:danger"}),f[10]||(f[10]=ee("Giftsvamp ",-1))]),_:1})])):U("",!0),r.species.SIGNAL_art==="S"?(d(),A("div",rs,[m(J,{color:"signal",size:"xl",variant:"subtle",class:""},{default:M(()=>[...f[11]||(f[11]=[ee("Signalart",-1)])]),_:1})])):U("",!0),r.species.KALKmark?(d(),W(J,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:M(()=>[...f[12]||(f[12]=[ee(" Kalkmark ",-1)])]),_:1})):U("",!0),r.species.ANNANmark?(d(),W(J,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:M(()=>[...f[13]||(f[13]=[ee(" Vanlig skogsmark ",-1)])]),_:1})):U("",!0)]),r.species.Kriteriedokumentation?(d(),W(le,{key:0,class:"my-4"},{default:M(()=>[b("div",{class:"flex justify-between cursor-pointer",onClick:c},[b("h1",ls,[r.species.RL2020kat?(d(),A("div",is,[b("div",{class:re([y(r.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},Z(C(r.species.RL2020kat)),3),b("h1",us,Z(_(r.species.RL2020kat)),1)])):U("",!0)]),m(z,{name:"mdi:chevron-down",class:re(["h-6 w-6 transition-transform duration-300 ease-in-out",a.value?"rotate-180":"rotate-0"])},null,8,["class"])]),r.species.Kriteriedokumentation?(d(),A("div",{key:0,class:re(["relative overflow-hidden transition-transform duration-300 ease-in-out",[a.value?"max-h-auto":"max-h-20"]]),onClick:c},[b("h1",cs,Z(u.value),1)],2)):U("",!0)]),_:1})):U("",!0),f[16]||(f[16]=b("h1",{class:"text-lg font-medium mt-4"},"Läs mer på",-1)),r.species.Artfakta!="Information saknas"?(d(),W(de,{key:1,to:N(r.species.Artfakta),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:M(()=>[...f[14]||(f[14]=[ee(" Artfakta.se ",-1)])]),_:1},8,["to"])):U("",!0),f[17]||(f[17]=b("br",null,null,-1)),r.species.Svampguiden&&r.species.Svampguiden!=="0"?(d(),W(de,{key:2,to:N(r.species.Svampguiden),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:M(()=>[...f[15]||(f[15]=[ee(" Svampguiden.com ",-1)])]),_:1},8,["to"])):U("",!0)])])}}},gs={key:0,class:"fixed inset-0 z-50 flex pointer-events-none group"},vs={class:"absolute top-3 left-3 items-end w-full gap-2 z-10 flex"},ps={class:"h-full relative overflow-auto pb-16 no-scrollbar"},ms={__name:"MySlideover",props:{modelValue:{type:Boolean,default:!1},pinned:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:modelValue","update:pinned"],setup(r,{emit:t}){const e=r,n=t,a=G(e.pinned);oe(()=>e.pinned,c=>{a.value=c});function o(){a.value=!a.value,n("update:pinned",a.value)}return(c,u)=>{const l=me;return d(),W(Fe,{name:"slide-in-right"},{default:M(()=>[r.modelValue?(d(),A("div",gs,[a.value?U("",!0):(d(),A("div",{key:0,class:"fixed inset-0 pointer-events-auto",onClick:u[0]||(u[0]=p=>n("update:modelValue",!1))})),b("div",{ref:"panelRef",class:re(["ml-auto bg-white shadow-lg z-50 relative pointer-events-auto ring-1 ring-neutral-200 transition-all overflow-hidden",[a.value?"":"sm:ml-auto sm:m-2 sm:rounded",r.expanded?"w-[744px]":"w-screen sm:w-96"]]),onClick:u[2]||(u[2]=ma(()=>{},["stop"]))},[b("div",vs,[m(l,{class:"shadow hover:bg-white rounded-full mt-2 ml-1 md:m-0",color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},icon:"heroicons:x-mark",size:"lg",onClick:u[1]||(u[1]=p=>n("update:modelValue",!1))}),m(l,{class:re(["shadow hover:bg-white hidden md:flex rounded-full",a.value?"text-primary-500":"text-neutral-700"]),color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},onClick:o,icon:"codicon:pinned",size:"lg"},null,8,["class"])]),b("div",ps,[ve(c.$slots,"default",{},void 0,!0)])],2)])):U("",!0)]),_:3})}}},fs=Se(ms,[["__scopeId","data-v-fb1058c4"]]),hs={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},ea={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(r,{emit:t}){const e=r,n=t,a=fa(),{dir:o}=ha(),c=ba(),u=ka(ya(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),n),l=S(()=>e.firstIcon||(o.value==="rtl"?c.ui.icons.chevronDoubleRight:c.ui.icons.chevronDoubleLeft)),p=S(()=>e.prevIcon||(o.value==="rtl"?c.ui.icons.chevronRight:c.ui.icons.chevronLeft)),N=S(()=>e.nextIcon||(o.value==="rtl"?c.ui.icons.chevronLeft:c.ui.icons.chevronRight)),C=S(()=>e.lastIcon||(o.value==="rtl"?c.ui.icons.chevronDoubleLeft:c.ui.icons.chevronDoubleRight)),y=S(()=>wt({extend:wt(hs),...c.ui?.pagination||{}})());return(_,k)=>(d(),W($(Za),$e($(u),{class:y.value.root({class:[e.ui?.root,e.class]})}),{default:M(({page:x,pageCount:E})=>[m($(no),{class:re(y.value.list({class:e.ui?.list}))},{default:M(({items:f})=>[r.showControls||a.first?(d(),W($(Qa),{key:0,"as-child":"",class:re(y.value.first({class:e.ui?.first}))},{default:M(()=>[ve(_.$slots,"first",{},()=>[m(me,{color:r.color,variant:r.variant,size:r.size,icon:l.value,to:r.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):U("",!0),r.showControls||a.prev?(d(),W($(go),{key:1,"as-child":"",class:re(y.value.prev({class:e.ui?.prev}))},{default:M(()=>[ve(_.$slots,"prev",{},()=>[m(me,{color:r.color,variant:r.variant,size:r.size,icon:p.value,to:x>1?r.to?.(x-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):U("",!0),(d(!0),A(he,null,Ce(f,(F,z)=>(d(),A(he,{key:z},[F.type==="page"?(d(),W($(lo),{key:0,"as-child":"",value:F.value,class:re(y.value.item({class:e.ui?.item}))},{default:M(()=>[ve(_.$slots,"item",$e({ref_for:!0},{item:F,index:z,page:x,pageCount:E}),()=>[m(me,{color:x===F.value?r.activeColor:r.color,variant:x===F.value?r.activeVariant:r.variant,size:r.size,label:String(F.value),ui:{label:y.value.label()},to:r.to?.(F.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(d(),W($(Ha),{key:1,"as-child":"",class:re(y.value.ellipsis({class:e.ui?.ellipsis}))},{default:M(()=>[ve(_.$slots,"ellipsis",{},()=>[m(me,{as:"div",color:r.color,variant:r.variant,size:r.size,icon:r.ellipsisIcon||$(c).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["class"]))],64))),128)),r.showControls||a.next?(d(),W($(uo),{key:2,"as-child":"",class:re(y.value.next({class:e.ui?.next}))},{default:M(()=>[ve(_.$slots,"next",{},()=>[m(me,{color:r.color,variant:r.variant,size:r.size,icon:N.value,to:x<E?r.to?.(x+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):U("",!0),r.showControls||a.last?(d(),W($(to),{key:3,"as-child":"",class:re(y.value.last({class:e.ui?.last}))},{default:M(()=>[ve(_.$slots,"last",{},()=>[m(me,{color:r.color,variant:r.variant,size:r.size,icon:C.value,to:r.to?.(E)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):U("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},bs=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function rt(r,t,e,n){return!r||!t||!e||!n?!1:bs.some(a=>a.geo===r&&a.forest===t&&a.age===e&&a.veg===n)}const ks={class:""},ys={class:""},_s={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},xs={class:"flex gap-2 items-end justify-between w-full mb-2"},Ss={class:"flex gap-2"},ws={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},Cs={key:1,class:"hidden md:flex"},Ns={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},$s={key:0,class:"flex gap-2 w-full mb-2"},Ts={class:""},Ls={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},As={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},Es={class:"flex"},Vs={class:"hidden md:flex"},Ps={key:0},Bs={class:"flex justify-center"},Fs={key:2},Rs={class:"max-w-sm space-y-2 mt-2"},zs={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(r,{emit:t}){const e=Re("(max-width: 767px)"),n=S(()=>e.value||l.isNormalView&&l.dataTypeFolder!=="edna"),a=t,o=G("");let c=null;function u(s){o.value=s,c&&clearTimeout(c),c=setTimeout(()=>{a("update:searchTerm",o.value)},300)}Rt(()=>{c&&clearTimeout(c)});const l=r,p=_a("table"),N=n.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[l.grupp]:!1,mark:!1,[l.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[l.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};l.dataType==="edna"&&(N.mark=!1);const C=G({...N,...l.columnVisibilityOverrides}),y=G([]),_=S(()=>{const s={};De.value.forEach(B=>{B.KALKmark&&(s.KALKmark=(s.KALKmark||0)+1),B.ANNANmark&&(s.ANNANmark=(s.ANNANmark||0)+1)});const g=p.value?.tableApi?.getFilteredRowModel()?.rows||[],T={};return g.forEach(B=>{const I=B.original;I.KALKmark&&(T.KALKmark=(T.KALKmark||0)+1),I.ANNANmark&&(T.ANNANmark=(T.ANNANmark||0)+1)}),[{label:`Kalkmark (${T.KALKmark||0}/${s.KALKmark||0})`,value:"KALKmark"},{label:`Vanlig skogsmark (${T.ANNANmark||0}/${s.ANNANmark||0})`,value:"ANNANmark"}]}),k=S(()=>_.value.map(s=>({label:s.label,type:"checkbox",checked:y.value.includes(s.value),onUpdateChecked(g){g?y.value.includes(s.value)||y.value.push(s.value):y.value=y.value.filter(T=>T!==s.value)},onSelect(g){g.preventDefault()}}))),x=S(()=>{const s=["Matsvamp","Giftsvamp"],g={};De.value.forEach(I=>{const q=I[l.mat];l.mat==="Nyasvamp-boken"?q&&String(q).toLowerCase()==="x"&&(g.Matsvamp=(g.Matsvamp||0)+1):q==1&&(g.Matsvamp=(g.Matsvamp||0)+1),(I.Giftsvamp||"").toLowerCase()==="x"&&(g.Giftsvamp=(g.Giftsvamp||0)+1)});const T=p.value?.tableApi?.getFilteredRowModel()?.rows||[],B={};return T.forEach(I=>{const q=I.original,te=q[l.mat];(l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te==1)&&(B.Matsvamp=(B.Matsvamp||0)+1),(q.Giftsvamp||"").toLowerCase()==="x"&&(B.Giftsvamp=(B.Giftsvamp||0)+1)}),s.map(I=>{const q=g[I]||0,te=B[I]||0;return{label:`${I} (${te}/${q})`,value:I}})}),E=G(l.isNormalView?500:10),f=G([]),F=G([]),z=G([]),Y=S(()=>ie.value.map(s=>({label:s.label,type:"checkbox",checked:z.value.includes(s.value),onUpdateChecked(g){g?z.value.includes(s.value)||z.value.push(s.value):z.value=z.value.filter(T=>T!==s.value)},onSelect(g){g.preventDefault()}}))),O=S(()=>x.value.map(s=>({label:s.label,type:"checkbox",checked:f.value.includes(s.value),onUpdateChecked(g){g?f.value.includes(s.value)||f.value.push(s.value):f.value=f.value.filter(T=>T!==s.value)},onSelect(g){g.preventDefault()}}))),J=S(()=>w.value.map(s=>({label:s.label,type:"checkbox",checked:F.value.includes(s.value),onUpdateChecked(g){g?F.value.includes(s.value)||F.value.push(s.value):F.value=F.value.filter(T=>T!==s.value)},onSelect(g){g.preventDefault()}}))),le=S(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(s){s.preventDefault(),p.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(s){s.preventDefault(),p.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(s){s.preventDefault(),p.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(s){s.preventDefault(),p.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:l.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(s){s.preventDefault(),p.value?.tableApi?.setSorting([{id:l.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(s){s.preventDefault(),p.value?.tableApi?.setSorting([{id:l.obs,desc:!0}])}}]}]),de=S(()=>[{label:"Grupp",children:Y.value},{label:"Matsvamp",children:O.value},{label:"Status",children:J.value},{label:"Mark",children:k.value}]),ie=S(()=>{const s={};De.value.forEach(B=>{const I=B[l.grupp];I&&(s[I]=(s[I]||0)+1)});const g=p.value?.tableApi?.getFilteredRowModel()?.rows||[],T={};return g.forEach(B=>{const q=B.original[l.grupp];q&&(T[q]=(T[q]||0)+1)}),Object.keys(s).map(B=>{const I=s[B]||0,q=T[B]||0;return{label:`${j(B)} (${q}/${I})`,value:B}})}),w=S(()=>{const s=["LC","NT","EN","VU","CR","RE","DD"],g={};De.value.forEach(I=>{const q=I.RL2020kat;s.includes(q)?g[q]=(g[q]||0)+1:q===null||q==="0"||q===0||String(q).toUpperCase()==="NE"?g["Ej bedömd"]=(g["Ej bedömd"]||0)+1:String(q).toUpperCase()==="NA"&&(g["Ej tillämplig"]=(g["Ej tillämplig"]||0)+1),I.SIGNAL_art==="S"&&(g.Signalart=(g.Signalart||0)+1)});const T=p.value?.tableApi?.getFilteredRowModel()?.rows||[],B={};return T.forEach(I=>{const q=I.original,te=q.RL2020kat;s.includes(te)?B[te]=(B[te]||0)+1:te===null||te==="0"||te===0||String(te).toUpperCase()==="NE"?B["Ej bedömd"]=(B["Ej bedömd"]||0)+1:String(te).toUpperCase()==="NA"&&(B["Ej tillämplig"]=(B["Ej tillämplig"]||0)+1),q.SIGNAL_art==="S"&&(B.Signalart=(B.Signalart||0)+1)}),[...s.map(I=>{const q=g[I]||0,te=B[I]||0;return{label:`${K(I)} (${te}/${q})`,value:I}}),(()=>{const I=g["Ej bedömd"]||0;return{label:`Ej bedömd (${B["Ej bedömd"]||0}/${I})`,value:"Ej bedömd"}})(),(()=>{const I=g["Ej tillämplig"]||0;return{label:`Ej tillämplig (${B["Ej tillämplig"]||0}/${I})`,value:"Ej tillämplig"}})(),(()=>{const I=g.Signalart||0;return{label:`Signalart (${B.Signalart||0}/${I})`,value:"Signalart"}})()]}),v=G({pageIndex:0,pageSize:10}),i=ot();function h(s,g){i.selectSpecies(s.original,"edna")}const j=s=>s?s.charAt(0).toUpperCase()+s.slice(1).toLowerCase():"",R=S(()=>Le.value.length>0?Le.value[0].sample_env_count:0),V=s=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[s]||"default-icon.webp"}`,P=s=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[s]||"neutral",K=s=>{const g={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return s===null||s===0||String(s).toUpperCase()==="NE"?"Ej bedömd":String(s).toUpperCase()==="NA"?"Ej tillämplig":g[s]||"Ej bedömd"},Q=l.obs.startsWith("Rank"),X=G(Q?[{id:l.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:l.obs,desc:!0}]),D=at,pe=xa,se=me,ne=Ta,ke=mt,ye=[{accessorKey:"images",header:"Bild",sortable:!1,cell:({row:s})=>{const g=s.getValue("images")||[];return g.length?H("img",{src:g[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:s.original?.Commonname?`${s.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:s})=>{const g=s.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:"Namn",icon:g?g==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>s.toggleSorting(g==="asc")})},cell:({row:s})=>H("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},j(s.getValue("Commonname"))),filterFn:(s,g,T)=>{if(!T)return!0;const B=String(T).toLowerCase(),I=String(s.getValue("Commonname")||"").toLowerCase(),q=String(s.getValue("Scientificname")||"").toLowerCase();return I.includes(B)||q.includes(B)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:s})=>{const g=s.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:"Latinskt namn",icon:g?g==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>s.toggleSorting(g==="asc")})},cell:({row:s})=>H("div",{class:"truncate  text-[16px]"},s.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:l.grupp,header:()=>H(ne,{items:Y.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Grupp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(s,g,T)=>!T||T.length===0?!0:T.includes(s.getValue(g)),cell:({row:s})=>{const g=s.getValue(l.grupp);return g!=="Saknas"?H("img",{src:V(g),alt:`${g||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):H(ke,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:l.dataType!=="edna",header:()=>H(ne,{items:k.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Mark",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(s,g,T)=>{if(!T||T.length===0)return!0;let B=!1;return T.includes("KALKmark")&&s.original.KALKmark&&(B=!0),T.includes("ANNANmark")&&s.original.ANNANmark&&(B=!0),B},cell:({row:s})=>H("div",{class:"flex items-center space-x-1"},[s.original.KALKmark&&H(D,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),s.original.ANNANmark&&H(D,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:l.mat,header:()=>H(ne,{items:O.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Matsvamp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(s,g,T)=>{if(!T||T.length===0)return!0;let B=!1;return T.includes("Matsvamp")&&(l.mat==="Nyasvamp-boken"?B=B||s.getValue(g)?.toLowerCase()==="x":B=B||s.getValue(g)===1),T.includes("Giftsvamp")&&(B=B||(s.original.Giftsvamp||"").toLowerCase()==="x"),B},cell:({row:s})=>H("div",{class:"flex gap-1"},[(l.mat==="Nyasvamp-boken"?s.getValue(l.mat)?.toLowerCase()==="x":s.getValue(l.mat)===1)&&H(D,{color:"warning",variant:"subtle"},()=>"Matsvamp"),s.original.Giftsvamp?.toLowerCase()==="x"&&H(D,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>H(ne,{items:J.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Status",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(s,g,T)=>{if(!T||T.length===0)return!0;const B=s.getValue(g);return T.some(I=>I==="Ej bedömd"?B===null||B===0||B==="0"||String(B).toUpperCase()==="NE":I==="Ej tillämplig"?String(B).toUpperCase()==="NA":I==="Signalart"?s.original.SIGNAL_art==="S":I===B)},cell:({row:s})=>{const g=s.getValue("RL2020kat"),T=H(D,{color:P(g),variant:"subtle"},()=>K(g)),B=s.original.SIGNAL_art==="S"?H(D,{color:"signal",variant:"subtle"},"Signalart"):null;return H("div",{class:"flex gap-1"},[T,B].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:l.obs,header:({column:s})=>{const g=s.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:l.obsLabel,icon:g?g==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>s.toggleSorting(g==="asc")})},cell:({row:s})=>{const g=s.getValue(l.obs);return l.obs.startsWith("Rank")?g===3?H("span",{class:"text-red-700"},"Sällsynt"):g===2?H("span",{class:"text-yellow-600"},"Ovanlig"):null:H(D,{variant:"subtle",color:"secondary"},()=>`${g} skogar`)},meta:{headerText:l.obsLabel}}],we=[{header:"Namn",cell:({row:s})=>{const g=s.original.images||[];let T=null;const B=l.filterPoison?s.original["Rank giftsvamp"]:l.filterEdible?s.original["Rank matsvamp"]:s.original.RankRed;B===3?T=H(ke,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):B===2&&(T=H(ke,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const I=g.length?H("img",{src:g[0],alt:s.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):H("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[H("img",{src:V(s.original[l.grupp]),alt:`${s.original[l.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),q=H("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[H("div",{class:"flex-1 min-w-0"},[H("div",{class:"text-lg font-semibold whitespace-normal break-words"},[j(s.original.Commonname),T]),H("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},s.original.Scientificname)])]),te=s.original[l.mat];(l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te===1)&&H(D,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const L=H("div",{class:"flex flex-wrap gap-2 mt-2 "},[s.original.RL2020kat!=="LC"&&s.original.RL2020kat!=="NA"&&s.original.RL2020kat!=="NE"&&s.original.RL2020kat!=="0"?H(D,{color:P(s.original.RL2020kat),variant:"subtle",size:"md"},()=>K(s.original.RL2020kat)):null,s.original.SIGNAL_art==="S"?H(D,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,l.dataType==="edna"?H(pe,{modelValue:s.getValue(l.obs),max:R.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return H("div",{class:"flex space-x-4 items-start"},[I,H("div",{class:"flex flex-col flex-1"},[q,L])])},meta:{headerText:"Namn"}},...ye.map(s=>s.accessorKey==="mark"?{...s,enableHiding:l.dataType!=="edna"}:s)],Ne=S(()=>n.value?we:ye),ze=S(()=>({thead:n.value?"hidden":"hidden md:table-header-group bg-neutral-50 dark:bg-neutral-800/40",tbody:n.value?"divide-none":"divide-none md:divide-dotted",td:n.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),Me=G(0),We=G(0),Le=G([]),Be=G(!0),_t=G([]),ta=(s,g,T)=>{const B=(g[0]-s[0])/(T-1),I=(g[1]-s[1])/(T-1),q=(g[2]-s[2])/(T-1),te=[];for(let ue=0;ue<T;ue++){const L=Math.round(s[0]+B*ue),fe=Math.round(s[1]+I*ue),ce=Math.round(s[2]+q*ue);te.push(`rgb(${L}, ${fe}, ${ce})`)}return te},qe=()=>{Le.value=[],Me.value=0,We.value=0,_t.value=[]},aa=async()=>{if([ge.geography,ge.forestType,ge.standAge,ge.vegetationType].some(T=>!T)){qe(),Be.value=!1;return}if(l.dataTypeFolder==="edna"&&!rt(ge.geography,ge.forestType,ge.standAge,ge.vegetationType)){qe(),Be.value=!1;return}const g=`${l.dataType}-${ge.geography}-${ge.forestType}-${ge.standAge}-${ge.vegetationType}.json`;try{const T=await fetch(`/${l.dataTypeFolder}/${g}`);if(!T.ok){if(T.status===404){qe(),Be.value=!1;return}throw new Error(`Failed to fetch data from ${g}`)}Le.value=await T.json(),Be.value=!1,Le.value.forEach((te,ue)=>{te.colorIndex=ue});const B=Le.value.length;Me.value=Math.floor(B*.1),We.value=B-Me.value;const I=ta([82,82,82],[212,212,212],Me.value),q=oa(We.value);_t.value=[...I,...q]}catch(T){console.error("Error fetching data:",T),qe(),Be.value=!1}};function oa(s){const g=[];for(let I=0;I<s;I++){const q=45+300/(s-1||1)*I;g.push(`hsl(${q%360}, 70%, 50%)`)}return g}const ge=Te();oe(()=>[ge.geography,ge.forestType,ge.standAge,ge.vegetationType],()=>{Be.value=!0,aa()},{immediate:!0});const xt=G(""),De=S(()=>{let s=Le.value;return xt.value&&(s=s.filter(g=>Object.values(g).some(T=>String(T).toLowerCase().includes(xt.value.toLowerCase())))),l.filterEdible?s=s.filter(g=>{const T=g[l.mat];return T&&String(T).toLowerCase()==="x"}):l.filterPoison&&(s=s.filter(g=>{const T=g[l.mat];return!(T&&String(T).toLowerCase()==="x")})),s}),sa=S(()=>De.value);oe(E,s=>{let g=s==="Alla"?Ye.value||Le.value.length:Number(s);v.value.pageSize=g,v.value.pageIndex=0,p.value?.tableApi&&(p.value.tableApi.setPageSize(g),p.value.tableApi.setPageIndex(0))});const na=S(()=>p.value?.tableApi?.getPaginationRowModel().rows||[]),He=S(()=>p.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),ra=S(()=>He.value.pageIndex*He.value.pageSize+1),la=S(()=>{const s=He.value.pageIndex*He.value.pageSize+na.value.length;return s>Ye.value?Ye.value:s}),Ye=S(()=>p.value?.tableApi?.getFilteredRowModel()?.rows.length||0),St=S(()=>{const s=l.searchTerm?[{id:"Commonname",value:l.searchTerm}]:[];return f.value&&f.value.length>0&&s.push({id:l.mat,value:f.value}),F.value&&F.value.length>0&&s.push({id:"RL2020kat",value:F.value}),z.value&&z.value.length>0&&s.push({id:l.grupp,value:z.value}),y.value&&y.value.length>0&&s.push({id:"mark",value:y.value}),s});return oe(St,s=>{p.value?.tableApi&&p.value.tableApi.setColumnFilters(s)}),oe(St,s=>{const T=s.find(ue=>ue.id===l.mat)?.value??[];a("update:matsvampFilter",T.includes("Matsvamp")),a("update:giftsvampFilter",T.includes("Giftsvamp"));const I=s.find(ue=>ue.id===l.grupp)?.value??[];a("update:gruppFilter",I);const te=s.find(ue=>ue.id==="RL2020kat")?.value??[];a("update:statusFilter",te)},{deep:!0,immediate:!0}),(s,g)=>{const T=It,B=Ft,I=zt,q=Aa,te=ea,ue=Ut;return d(),A("div",ks,[b("div",ys,[n.value?U("",!0):(d(),A("div",_s,[b("div",xs,[m(T,{"model-value":$(p)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":g[0]||(g[0]=L=>{$(p)?.tableApi?.getColumn("Commonname")?.setFilterValue(L),u(L)}),variant:"ghost"},null,8,["model-value"]),b("div",Ss,[b("div",ws,[y.value.length?(d(!0),A(he,{key:0},Ce(y.value,L=>(d(),A("span",{key:"mark-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:L==="KALKmark"?"kalkmark":L==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>y.value=y.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(L==="KALKmark"?"Kalkmark":L==="ANNANmark"?"Vanlig skogsmark":j(L)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),f.value.length?(d(!0),A(he,{key:1},Ce(f.value,L=>(d(),A("span",{key:"svamp-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:L==="Matsvamp"?"warning":L==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>f.value=f.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(j(L)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),z.value.length?(d(!0),A(he,{key:2},Ce(z.value,L=>(d(),A("span",{key:"grupp-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>z.value=z.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(j(L)),1)]),_:2},1032,["onClick"])]))),128)):U("",!0),F.value.length?(d(!0),A(he,{key:3},Ce(F.value,L=>(d(),A("span",{key:"status-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:L==="Signalart"?"signal":P(L),class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>F.value=F.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(L==="Signalart"?"Signalart":K(L)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0)]),n.value?U("",!0):(d(),W($(ne),{key:0,class:"flex",items:$(p)?.tableApi?.getAllColumns()?.filter(L=>L.getCanHide())?.map(L=>({label:L.columnDef.meta?.headerText||$(Sa)(L.id),type:"checkbox",checked:L.getIsVisible(),onUpdateChecked(fe){$(p)?.tableApi?.getColumn(L.id)?.toggleVisibility(!!fe)},onSelect(fe){fe?.preventDefault()}})),content:{align:"end"}},{default:M(()=>[m($(se),{label:"Kolumner",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),r.isNormalView?U("",!0):(d(),A("div",Cs,[m(B,{modelValue:E.value,"onUpdate:modelValue":g[1]||(g[1]=L=>E.value=L),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"ghost"},null,8,["modelValue"])]))])])])),n.value?(d(),A("div",Ns,[y.value.length?(d(!0),A(he,{key:0},Ce(y.value,L=>(d(),A("span",{key:"mark-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:L==="KALKmark"?"kalkmark":L==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>y.value=y.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(L==="KALKmark"?"Kalkmark":L==="ANNANmark"?"Vanlig skogsmark":j(L)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),f.value.length?(d(!0),A(he,{key:1},Ce(f.value,L=>(d(),A("span",{key:"svamp-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:L==="Matsvamp"?"warning":L==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>f.value=f.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(j(L)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),z.value.length?(d(!0),A(he,{key:2},Ce(z.value,L=>(d(),A("span",{key:"grupp-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>z.value=z.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(j(L)),1)]),_:2},1032,["onClick"])]))),128)):U("",!0),F.value.length?(d(!0),A(he,{key:3},Ce(F.value,L=>(d(),A("span",{key:"status-"+L},[m($(D),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:L==="Signalart"?"signal":P(L),class:"cursor-pointer mb-2 md:mb-0",onClick:fe=>F.value=F.value.filter(ce=>ce!==L)},{default:M(()=>[ee(Z(L==="Signalart"?"Signalart":K(L)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0)])):U("",!0)]),n.value?(d(),A("div",$s,[m($(ne),{size:$(e)?"xl":"md",items:le.value,content:{align:"start"}},{default:M(()=>[m($(se),{variant:$(e)?"soft":"ghost",icon:"i-lucide-arrow-up-down",size:$(e)?"xl":"md",label:($(e),null),color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),m($(ne),{size:$(e)?"xl":"md",items:de.value,content:{align:"start"}},{default:M(()=>[m($(se),{variant:$(e)?"soft":"ghost",icon:"i-lucide-list-filter",size:$(e)?"xl":"md",label:($(e),null),color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),m(T,{variant:$(e)?"soft":"ghost","model-value":$(p)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:$(e)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":g[2]||(g[2]=L=>{$(p)?.tableApi?.getColumn("Commonname")?.setFilterValue(L),u(L)})},null,8,["variant","model-value","size"])])):U("",!0),m(I,{ui:{border:"border-muted/50"},class:"mb-2"}),De.value?(d(),A("div",{key:1,class:re([(r.isNormalView,"")])},[b("div",Ts,[m(q,{ref_key:"table",ref:p,"column-visibility":C.value,"onUpdate:columnVisibility":g[3]||(g[3]=L=>C.value=L),pagination:v.value,"onUpdate:pagination":g[4]||(g[4]=L=>v.value=L),data:sa.value,columns:Ne.value,sticky:"",loading:Be.value,sorting:X.value,"onUpdate:sorting":g[5]||(g[5]=L=>X.value=L),onSelect:h,autoResetAll:!0,"pagination-options":$(e)&&!r.isNormalView?!1:r.isNormalView?void 0:{getPaginationRowModel:$(La)()},class:re([{"":r.isNormalView},"rounded-sm"]),ui:ze.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),n.value?U("",!0):(d(),A("div",Ls,[b("div",As,[b("h1",Es,[g[8]||(g[8]=ee(" Visar ",-1)),b("span",Vs,"  "+Z(ra.value)+" till  ",1),ee(" "+Z(la.value)+" av "+Z(Ye.value)+" arter ",1)]),r.isNormalView?(d(),W($(se),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:g[6]||(g[6]=L=>a("enlarge"))})):U("",!0)]),b("div",null,[!r.isNormalView&&E.value!=="Alla"&&!$(e)?(d(),A("div",Ps,[b("div",Bs,[m(te,{"active-variant":"ghost",variant:"ghost","default-page":($(p)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":$(p)?.tableApi?.getState().pagination.pageSize,total:$(p)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":g[7]||(g[7]=L=>$(p)?.tableApi?.setPageIndex(L-1))},null,8,["default-page","items-per-page","total"])])])):U("",!0)])]))])],2)):(d(),A("div",Fs,[b("div",Rs,[m(ue,{class:"h-4 w-full rounded"}),m(ue,{class:"h-4 w-[85%] rounded"})])]))])}}},lt=Se(zs,[["__scopeId","data-v-740b2533"]]),Ms={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},Ds=be({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(r){const t=r,e=["100%","200%","400%","800%"],n=G(0),a=S(()=>e[n.value]),o=G([]),c=Te();function u(v){return v.sort((i,h)=>h.sample_plot_count-i.sample_plot_count)}function l(v,i,h){if(h<=0)return[];const j=(i[0]-v[0])/(h-1||1),R=(i[1]-v[1])/(h-1||1),V=(i[2]-v[2])/(h-1||1),P=[];for(let K=0;K<h;K++){const Q=Math.round(v[0]+j*K),X=Math.round(v[1]+R*K),D=Math.round(v[2]+V*K);P.push(`rgb(${Q}, ${X}, ${D})`)}return P}function p(v){const i=[];for(let R=0;R<v;R++){const V=45+300/(v-1||1)*R;i.push(`hsl(${V%360}, 70%, 50%)`)}return i}async function N(){const v=[c.geography,c.forestType,c.standAge,c.vegetationType];if(v.some(h=>!h)){o.value=[];return}if(!rt(...v)){o.value=[];return}const i=`edna-${c.geography}-${c.forestType}-${c.standAge}-${c.vegetationType}.json`;try{const h=await fetch(`/edna/${i}`);if(!h.ok){if(h.status===404){o.value=[];return}throw new Error(`Failed to fetch ${i}`)}let j=await h.json();j=u(j);const R=j.length,V=Math.floor(R*.1),P=R-V,K=l([82,82,82],[212,212,212],V),Q=p(P),X=[...K,...Q];o.value=j.map((D,pe)=>({...D,fillColor:X[pe]||"var(--ui-primary)"}))}catch(h){console.error("Error fetching chart data:",h),o.value=[]}}je(N),oe(()=>[c.geography,c.forestType,c.standAge,c.vegetationType],N,{immediate:!0});const C=(v,i)=>i,y=v=>v.sample_plot_count,_=(v,i)=>{const h=F.value[i];if(!h)return"";const j=t.searchTerm.trim().toLowerCase(),R=String(h.Commonname||"").toLowerCase(),V=String(h.Scientificname||"").toLowerCase(),P=j?R.includes(j)||V.includes(j):!0,K=t.statusFilter.length>0,Q=t.matsvampFilter||t.giftsvampFilter,X=t.gruppFilter.length>0;if(!K&&!Q&&!X&&t.searchTerm.trim()!=="")return P?k(h.Commonname):"";const D=K&&t.statusFilter.includes("Signalart")&&h.SIGNAL_art==="S",pe=t.statusFilter.filter(ze=>ze!=="Signalart"),se=K&&t.statusFilter.includes("Ej bedömd")&&(h.RL2020kat===null||h.RL2020kat===0||h.RL2020kat==="0"||String(h.RL2020kat).toUpperCase()==="NE"),ne=K&&t.statusFilter.includes("Ej tillämplig")&&String(h.RL2020kat).toUpperCase()==="NA",ke=K?D||pe.includes(h.RL2020kat):!1,ye=t.matsvampFilter?h.matsvamp==1:!1,we=t.giftsvampFilter?(h.Giftsvamp||"").toLowerCase()==="x":!1,Ne=X?t.gruppFilter.includes(h[t.groupKey]):!1;return K?!Q&&!X?P&&(D||ke||se||ne)?k(h.Commonname):"":P&&(D||ke||se||ne)&&(Q?ye||we:!0)&&(X?Ne:!0)?k(h.Commonname):"":Q||X?Q&&!X?P&&(ye||we)?k(h.Commonname):"":!Q&&X?P&&Ne?k(h.Commonname):"":P&&(ye||we)&&Ne?k(h.Commonname):"":""};function k(v){return v?v.charAt(0).toUpperCase()+v.slice(1):""}const x=G(null);function E(v){if(!v)return x.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';x.value=v;const i=v.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",h=v.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",j={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},R=j[v.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${j[v.RL2020kat]}</div>`:"",V=v.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${v["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${k(v.Commonname)}</strong> <em>${k(v.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${v.sample_plot_count} av ${v.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${i} ${h} ${R} ${V}
      </div>
    </div>
  `}const f={[kt.selectors.bar]:E},F=S(()=>{const v="#d4d4d4";return o.value.map(i=>{if(de.value&&i.Scientificname===le.selectedSpecies?.Scientificname)return{...i,barColor:"#b1835e"};const h=t.searchTerm.trim().toLowerCase(),j=String(i.Commonname||"").toLowerCase(),R=String(i.Scientificname||"").toLowerCase(),V=h?j.includes(h)||R.includes(h):!0,P=t.statusFilter.length>0,K=t.matsvampFilter||t.giftsvampFilter,Q=t.gruppFilter.length>0;if(!P&&!K&&!Q&&t.searchTerm.trim()!=="")return{...i,barColor:V?"#8b5cf6":v};const X=P&&t.statusFilter.includes("Signalart")&&i.SIGNAL_art==="S",D=t.statusFilter.filter(Ne=>Ne!=="Signalart"),pe=P&&t.statusFilter.includes("Ej bedömd")&&(i.RL2020kat===null||i.RL2020kat===0||i.RL2020kat==="0"||String(i.RL2020kat).toUpperCase()==="NE"),se=P&&t.statusFilter.includes("Ej tillämplig")&&String(i.RL2020kat).toUpperCase()==="NA",ne=P?X||D.includes(i.RL2020kat):!1,ke=t.matsvampFilter?i.matsvamp==1:!1,ye=t.giftsvampFilter?(i.Giftsvamp||"").toLowerCase()==="x":!1,we=Q?t.gruppFilter.includes(i[t.groupKey]):!1;if(P){if(!K&&!Q)return V&&X?{...i,barColor:"#14b8a6"}:V&&(X||ne||pe||se)?X?{...i,barColor:"#14b8a6"}:i.RL2020kat==="LC"?{...i,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(i.RL2020kat)?{...i,barColor:"#ef4444"}:pe||se?{...i,barColor:"#737373"}:{...i,barColor:"#1f2937"}:{...i,barColor:v};if(V&&(X||ne||pe||se)&&(K?ke||ye:!0)&&(Q?we:!0)){if(X)return{...i,barColor:"#14b8a6"};if(D.length>0)return i.RL2020kat==="LC"?{...i,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(i.RL2020kat)?{...i,barColor:"#ef4444"}:pe||se?{...i,barColor:"#737373"}:{...i,barColor:"#1f2937"};if(t.matsvampFilter&&ke)return{...i,barColor:"#eab308"};if(t.giftsvampFilter&&ye)return{...i,barColor:"#84cc16"};if(Q&&we)return{...i,barColor:"#000000"}}return{...i,barColor:v}}if(K||Q){if(K&&!Q)return V&&ke?{...i,barColor:"#eab308"}:V&&ye?{...i,barColor:"#84cc16"}:{...i,barColor:v};if(!K&&Q)return V&&we?{...i,barColor:"#000000"}:{...i,barColor:v};if(V&&(ke||ye)&&we){if(ke)return{...i,barColor:"#eab308"};if(ye)return{...i,barColor:"#84cc16"}}return{...i,barColor:v}}return{...i,barColor:i.fillColor||"var(--ui-primary)"}})}),z=v=>v.barColor,Y=S(()=>F.value.length>0);oe(F,v=>{v.length||(x.value=null)});function O(){n.value<e.length-1&&n.value++}function J(){n.value>0&&n.value--}const le=ot(),de=S(()=>le.selectedSpecies!==null),ie=Re("(max-width: 767px)");function w(v){x.value?le.selectSpecies(x.value,"edna"):console.log("No datum available from tooltip.")}return(v,i)=>{const h=me;return d(),A("div",null,[$(ie)?U("",!0):(d(),A("div",Ms,[m(h,{onClick:J,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),m(h,{onClick:O,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),$(ie)?U("",!0):(d(),A("div",{key:1,class:re(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":n.value===0}]),onClick:w},[m($(Wa),{data:F.value,width:a.value,height:"200"},{default:M(()=>[m($(To),{data:F.value,x:C,y,color:z,barPadding:.1},null,8,["data"]),m($(Tt),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:F.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":_},null,8,["numTicks"]),m($(Tt),{type:"y",label:"Antal skogar",gridLine:!1}),Y.value?(d(),W($(Ao),{key:0,triggers:f,followCursor:!0})):U("",!0),Y.value?(d(),W($(No),{key:1,color:z,template:E})):U("",!0)]),_:1},8,["data","width"])],2))])}}}),Us=Object.assign(Se(Ds,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),it=wa("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:r=>t=>r.componentTabs[t]||"grid"},actions:{setActiveTab(r,t){this.componentTabs[r]=t}}}),Is={class:"md:flex justify-between relative"},js={class:"md:flex gap-4"},Gs={class:"md:mt-0 mt-1 mb-1 md:mb-2"},Os={class:"text-3xl font-medium flex items-center text-secondary-500"},Ks={class:"flex gap-2"},Ws={class:"text-md text-neutral-500"},qs={class:"justify-between hidden"},Hs={class:"flex gap-3 items-start"},Ys={key:0,class:""},Xs={key:1,class:""},Zs=be({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(r,{emit:t}){const e=G(!1),n=G(!1),a=G([]),o=G([]),c=G(""),u=G(!0),l=t,p=it(),N=S({get:()=>ie.value?"spatialForest":p.getActiveTab("EdnaComponent"),set:i=>{ie.value||p.setActiveTab("EdnaComponent",i)}}),C=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],y=Te(),{geography:_,forestType:k,standAge:x,vegetationType:E}=Ca(y),f=S(()=>_.value),F=S(()=>k.value),z=S(()=>x.value),Y=S(()=>E.value),O=G([]),J=S(()=>O.value.length),le=S(()=>O.value.length>0&&O.value[0].sample_env_count||0),de=G("100%"),ie=Re("(max-width: 767px)"),w=S(()=>({mark:!1,...ie.value?{images:!1}:{}}));async function v(i,h,j,R){if(!i||!h||!j||!R){O.value=[];return}if(!rt(i,h,j,R)){O.value=[];return}const V=`edna-${i}-${h}-${j}-${R}.json`;try{const P=await fetch(`/edna/${V}`);if(!P.ok){if(P.status===404){O.value=[];return}throw new Error(`Failed to fetch ${V}`)}const K=await P.json();K.sort((Q,X)=>X.sample_plot_count-Q.sample_plot_count),O.value=K}catch(P){console.error("Error fetching data:",P),O.value=[]}}return oe(()=>[_.value,k.value,x.value,E.value],([i,h,j,R])=>{i&&h&&j&&R&&v(i,h,j,R)},{immediate:!0}),(i,h)=>{const j=me,R=Ge,V=at,P=st,K=lt,Q=Us,X=Ie;return d(),A("div",null,[m(X,{class:"rounded-none sm:rounded-lg",variant:"ghost"},{default:M(()=>[b("div",Is,[m(j,{color:"neutral",variant:"soft",size:"xl",onClick:h[0]||(h[0]=D=>i.$emit("enlarge")),class:re([i.isNormalView?"hidden":"md:hidden","rounded-full absolute top-0 right-0"]),icon:i.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"]),b("div",js,[b("div",Gs,[b("div",Os,[m(R,{name:"solar:dna-linear",class:"mr-2"}),h[10]||(h[10]=b("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),b("div",Ks,[b("h1",Ws,Z(J.value)+" arter baserat på "+Z(le.value)+" skogar",1),le.value<10?(d(),W(V,{key:0,icon:le.value<10?"i-cuida-warning-outline":void 0,size:"md",color:le.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:M(()=>[ee(Z(le.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):U("",!0)])]),b("div",qs,[m(P,{modelValue:N.value,"onUpdate:modelValue":h[1]||(h[1]=D=>N.value=D),items:C,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),b("div",Hs,[m(j,{class:"hidden md:flex h-fit ring-muted/60",color:"neutral",variant:"outline",size:"sm",onClick:h[2]||(h[2]=D=>u.value=!u.value),label:u.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),m(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:M(()=>[N.value==="spatialForest"?(d(),A("div",Ys,[m(K,{onEnlarge:h[3]||(h[3]=D=>l("enlarge")),isNormalView:i.isNormalView,"column-visibility-overrides":w.value},null,8,["isNormalView","column-visibility-overrides"])])):N.value==="columnChart"?(d(),A("div",Xs,[u.value?(d(),W(Q,{key:0,class:"mb-6",chartData:O.value,chartWidth:de.value,geography:f.value,forestType:F.value,standAge:z.value,vegetationType:Y.value,matsvampFilter:e.value,giftsvampFilter:n.value,gruppFilter:a.value,statusFilter:o.value,"search-term":c.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):U("",!0),m(K,{onEnlarge:h[4]||(h[4]=D=>l("enlarge")),"onUpdate:matsvampFilter":h[5]||(h[5]=D=>e.value=D),"onUpdate:giftsvampFilter":h[6]||(h[6]=D=>n.value=D),"onUpdate:gruppFilter":h[7]||(h[7]=D=>a.value=D),"onUpdate:statusFilter":h[8]||(h[8]=D=>o.value=D),"onUpdate:searchTerm":h[9]||(h[9]=D=>c.value=D),isNormalView:i.isNormalView,"column-visibility-overrides":w.value,"search-term":c.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):U("",!0)]),_:1})]),_:1})])}}}),Et=Object.assign(Se(Zs,[["__scopeId","data-v-d27777d3"]]),{__name:"EdnaComponent"}),Js={class:"p-2 flex gap-2"},Qs={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},en=["onClick"],tn={class:"w-full h-24 relative"},an=["src"],on={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},sn={class:"absolute bottom-1 left-1 flex gap-1"},nn={class:"p-2 pt-1"},rn={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},ln={class:"flex justify-between items-center px-5 py-2"},yt={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(r){const t=G([]),e=G([]),n=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],a=r,o=Te(),c=ot(),u=G([]),l=G(!0);async function p(){const{geography:w,forestType:v,standAge:i,vegetationType:h}=o,j=`${a.dataType}-${w}-${v}-${i}-${h}.json`;try{const R=await fetch(`/${a.dataTypeFolder}/${j}`);if(!R.ok)throw new Error(`Failed to fetch data from ${j}`);u.value=await R.json(),l.value=!1}catch(R){console.error("Error fetching species data:",R)}}oe(()=>[o.geography,o.forestType,o.standAge,o.vegetationType],()=>{l.value=!0,p()},{immediate:!0});const N=G({column:"",direction:"asc"}),C=S(()=>{let w=u.value.slice();if(N.value?.column){const{column:v,direction:i}=N.value;w.sort((h,j)=>{const R=h[v],V=j[v];if(R==null&&V!=null)return 1;if(R!=null&&V==null)return-1;if(R==null&&V==null)return 0;const P=String(R).localeCompare(String(V),"sv",{numeric:!0,sensitivity:"base"});return i==="asc"?P:-P})}else w.sort((v,i)=>{const h=v.RankRed??99999,j=i.RankRed??99999;if(h!==j)return h-j;const R=v.Commonname?.toString().toLowerCase()||"",V=i.Commonname?.toString().toLowerCase()||"";return R.localeCompare(V,"sv",{numeric:!0,sensitivity:"base"})});return w}),y=G(""),_=S(()=>{let w=C.value;if(y.value.trim()!==""){const v=y.value.trim().toLowerCase();w=w.filter(i=>i.Commonname&&i.Commonname.toLowerCase().includes(v)||i.Scientificname&&i.Scientificname.toLowerCase().includes(v))}return a.filterEdible?w=w.filter(v=>{const i=v["Nyasvamp-boken"];return i&&String(i).toLowerCase()==="x"}):a.filterPoison&&(w=w.filter(v=>{const i=v["Nyasvamp-boken"];return!(i&&String(i).toLowerCase()==="x")})),w}),k=S(()=>n.map(w=>{let v=0;return w.value==="Ej bedömd"?v=_.value.filter(i=>{const h=String(i.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(h)}).length:w.value==="Signalart"?v=_.value.filter(i=>i.SIGNAL_art==="S").length:v=_.value.filter(i=>String(i.RL2020kat).trim()===w.value).length,{...w,label:`${w.label} (${v})`}})),x=S(()=>{const w={};return _.value.forEach(v=>{const i=v[a.grupp];if(i!=null){const h=String(i).trim();h&&h.toLowerCase()!=="undefined"&&(w[h]=(w[h]||0)+1)}}),Object.keys(w).map(v=>({value:v,label:`${le(v)} (${w[v]})`}))}),E=S(()=>{let w=C.value;if(y.value.trim()!==""){const v=y.value.trim().toLowerCase();w=w.filter(i=>i.Commonname&&i.Commonname.toLowerCase().includes(v)||i.Scientificname&&i.Scientificname.toLowerCase().includes(v)),console.log("After search filtering, count:",w.length)}return t.value.length>0&&(console.log("Status filter values:",t.value),w=w.filter(v=>{const i=String(v.RL2020kat).trim(),h=t.value.some(j=>{const R=j&&j.value?j.value:j;return R==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(i):R==="Signalart"?v.SIGNAL_art==="S":i===R});return console.log(`Row "${v.Commonname}" with RL2020kat "${i}" matches:`,h),h}),console.log("After status filtering, count:",w.length)),e.value.length>0&&(w=w.filter(v=>{const i=v[a.grupp],h=i!=null?String(i).trim():"";return e.value.includes(h)})),a.filterEdible?(w=w.filter(v=>{const i=v["Nyasvamp-boken"];return i&&String(i).toLowerCase()==="x"}),console.log("After edible filtering, count:",w.length)):a.filterPoison&&(w=w.filter(v=>{const i=v["Nyasvamp-boken"];return!(i&&String(i).toLowerCase()==="x")}),console.log("After poison filtering, count:",w.length)),console.log("Final filteredData count:",w.length),w}),f=S(()=>a.isNormalView?24:32),F=G(1),z=S(()=>{const w=(F.value-1)*f.value;return E.value.slice(w,w+f.value)}),Y=S(()=>E.value.length>0?(F.value-1)*f.value+1:0),O=S(()=>Math.min(F.value*f.value,E.value.length)),J=S(()=>E.value.length);S(()=>Math.ceil(J.value/f.value));function le(w){return w?w.charAt(0).toUpperCase()+w.slice(1).toLowerCase():""}function de(w){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[w]||"Ej bedömd"}function ie(w){c.selectSpecies(w,a.dataTypeFolder)}return(w,v)=>{const i=It,h=Ft,j=mt,R=at,V=ea;return d(),A(he,null,[b("div",Js,[m(i,{icon:"i-heroicons-magnifying-glass",modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=P=>y.value=P),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),m(h,{modelValue:t.value,"onUpdate:modelValue":v[1]||(v[1]=P=>t.value=P),items:k.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),m(h,{modelValue:e.value,"onUpdate:modelValue":v[2]||(v[2]=P=>e.value=P),items:x.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),b("div",Qs,[(d(!0),A(he,null,Ce(z.value,(P,K)=>(d(),A("div",{key:P.Commonname+P.Scientificname+K,class:"bg-white dark:bg-neutral-800 rounded border overflow-hidden border-muted/50 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:Q=>ie(P)},[b("div",tn,[P.images&&P.images.length?(d(),A("img",{key:0,src:P.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,an)):(d(),A("div",on,[m(j,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),b("div",sn,[P.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(P.RL2020kat)?(d(),W(R,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:P.RL2020kat!=="Saknas"?de(P.RL2020kat):"Ej bedömd"},null,8,["label"])):U("",!0),P.SIGNAL_art==="S"?(d(),W(R,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):U("",!0)])]),b("div",nn,[b("div",rn,Z(le(P.Commonname)),1)])],8,en))),128))]),b("div",ln,[b("div",null,[b("p",null," Visar "+Z(Y.value)+" till "+Z(O.value)+" av "+Z(J.value)+" arter ",1)]),b("div",null,[m(V,{"items-per-page":f.value,page:F.value,"onUpdate:page":v[3]||(v[3]=P=>F.value=P),total:J.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},un={class:"md:flex justify-between items-start"},cn={class:"w-full flex justify-between items-start"},dn={class:"text-md text-neutral-500 md:mb-2"},gn={class:"md:flex gap-1 items-center hidden"},vn={key:0},pn={key:1},mn={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Te(),n=G(0);async function a(_,k,x,E=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(z=>!z)){x.value=0;return}const F=`${k}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const z=await fetch(`/${_}/${F}`);if(!z.ok)throw new Error("Network response was not ok");const Y=await z.json();x.value=E?Y.filter(O=>O[E]==="x").length:Y.length}catch(z){console.error("Failed to fetch edible count",z),x.value=0}}oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>a("edible","edibledata",n,"Nyasvamp-boken"),{immediate:!0});const o=t,c=[{label:"Galleri",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"Tabell",icon:"material-symbols:table-outline",value:"table"}],u=it(),l=r,p=Re("(max-width: 767px)"),N=S(()=>p.value||l.isNormalView),C=S({get:()=>N.value?"table":u.getActiveTab("FullscreenEdible"),set:_=>{N.value||u.setActiveTab("FullscreenEdible",_)}}),y=S(()=>C.value==="table");return(_,k)=>{const x=Ge,E=me,f=st,F=lt,z=yt,Y=Ie;return d(),A("div",null,[m(Y,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:M(()=>[b("div",un,[b("div",cn,[b("div",null,[b("div",{onClick:k[0]||(k[0]=O=>_.$emit("enlarge")),class:"group cursor-pointer dark:text-neutral-300 text-warning-500 text-4xl md:text-3xl font-medium flex items-center"},[m(x,{name:"icon-park-solid:knife-fork",class:"mr-2"}),k[4]||(k[4]=b("h1",null," Matsvampar ",-1)),m(x,{name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})]),b("h2",dn,Z(n.value)+" arter",1)]),m(E,{color:"neutral",variant:"soft",size:"xl",onClick:k[1]||(k[1]=O=>_.$emit("enlarge")),class:re([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])]),b("div",gn,[N.value?U("",!0):(d(),W(f,{key:0,class:"flex mt-2",modelValue:C.value,"onUpdate:modelValue":k[2]||(k[2]=O=>C.value=O),items:c,variant:"pill",color:"neutral",size:"md",ui:{list:"bg-transparent",indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),m(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:M(()=>[y.value?(d(),A("div",vn,[m(F,{onEnlarge:k[3]||(k[3]=O=>o("enlarge")),"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(d(),A("div",pn,[m(z,{"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},Vt=Se(mn,[["__scopeId","data-v-372515fe"]]),fn={class:"md:flex justify-between items-start"},hn={class:"md:flex gap-4"},bn={class:"w-full flex justify-between items-start"},kn={class:"text-md text-neutral-500 md:mb-2"},yn={class:"md:flex gap-4 items-center hidden"},_n={key:0},xn={key:1},Sn={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Te(),n=G(0);async function a(k,x,E,f=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(Y=>!Y)){E.value=0;return}const z=`${x}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const Y=await fetch(`/${k}/${z}`);if(!Y.ok)throw new Error("Network response was not ok");const O=await Y.json();E.value=f?O.filter(J=>J[f]==="x").length:O.length}catch{E.value=0}}oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>a("edible","edibledata",n,"Giftsvamp"),{immediate:!0});const o=t,c=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],u=it(),l=r,p=Re("(max-width: 767px)"),N=S(()=>p.value||l.isNormalView),C=()=>{l.isNormalView&&o("enlarge")},y=S({get:()=>N.value?"table":u.getActiveTab("FullscreenEdible"),set:k=>{N.value||u.setActiveTab("FullscreenEdible",k)}}),_=S(()=>y.value==="table");return(k,x)=>{const E=Ge,f=me,F=st,z=lt,Y=yt,O=Ie;return d(),W(O,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:M(()=>[b("div",fn,[b("div",hn,[b("div",bn,[b("div",null,[b("div",{onClick:C,class:re(["flex items-center text-poison-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",r.isNormalView?"group cursor-pointer":"cursor-default"])},[m(E,{name:"i-hugeicons-danger",class:"mr-2"}),x[3]||(x[3]=b("h1",null," Giftsvampar ",-1)),r.isNormalView?(d(),W(E,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):U("",!0)],2),b("h2",kn,Z(n.value)+" arter",1)]),m(f,{color:"neutral",variant:"soft",size:"xl",onClick:x[0]||(x[0]=J=>k.$emit("enlarge")),class:re([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),b("div",yn,[N.value?U("",!0):(d(),W(F,{key:0,class:"flex mt-2",modelValue:y.value,"onUpdate:modelValue":x[1]||(x[1]=J=>y.value=J),items:c,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),m(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:M(()=>[_.value?(d(),A("div",_n,[m(z,{onEnlarge:x[2]||(x[2]=J=>o("enlarge")),"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(d(),A("div",xn,[m(Y,{"is-normal-view":r.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Pt=Se(Sn,[["__scopeId","data-v-e06edb37"]]),wn={class:"md:flex justify-between items-start"},Cn={class:"md:flex gap-4"},Nn={class:"w-full flex justify-between items-start"},$n={class:"text-md text-neutral-500 md:mb-2"},Tn={class:"md:flex gap-4 items-center hidden"},Ln={key:0},An={key:1},En={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(r,{emit:t}){const e=Te(),n=G(0);async function a(k,x,E,f=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(Y=>!Y)){E.value=0;return}const z=`${x}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const Y=await fetch(`/${k}/${z}`);if(!Y.ok)throw new Error("Network response was not ok");const O=await Y.json();E.value=f?O.filter(J=>J[f]==="x").length:O.length}catch(Y){console.error("Failed to fetch count for",x,Y),E.value=0}}oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>a("redlisted","redlisted",n),{immediate:!0});const o=t,c=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],u=r,l=Re("(max-width: 767px)"),p=S(()=>l.value||u.isNormalView),N=it(),C=S({get:()=>p.value?"table":N.getActiveTab("FullscreenEdible"),set:k=>{p.value||N.setActiveTab("FullscreenEdible",k)}}),y=()=>{u.isNormalView&&o("enlarge")},_=S(()=>C.value==="table");return(k,x)=>{const E=Ge,f=me,F=st,z=lt,Y=yt,O=Ie;return d(),W(O,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:M(()=>[b("div",wn,[b("div",Cn,[b("div",Nn,[b("div",null,[b("div",{onClick:y,class:re(["flex items-center text-signal-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",r.isNormalView?"group cursor-pointer":"cursor-default"])},[m(E,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),x[3]||(x[3]=b("h1",{class:"truncate"}," Naturvårdsarter ",-1)),r.isNormalView?(d(),W(E,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):U("",!0)],2),b("h2",$n,Z(n.value)+" arter",1)]),m(f,{color:"neutral",variant:"soft",size:"xl",onClick:x[0]||(x[0]=J=>k.$emit("enlarge")),class:re([r.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),b("div",Tn,[p.value?U("",!0):(d(),W(F,{key:0,class:"flex mt-2",modelValue:C.value,"onUpdate:modelValue":x[1]||(x[1]=J=>C.value=J),items:c,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),m(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:M(()=>[_.value?(d(),A("div",Ln,[m(z,{onEnlarge:x[2]||(x[2]=J=>o("enlarge")),"is-normal-view":r.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(d(),A("div",An,[m(Y,{"is-normal-view":r.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},Bt=Se(En,[["__scopeId","data-v-0d234cbe"]]),Vn={class:"grid grid-cols-12"},Pn={class:"col-span-12"},Bn={key:0,class:"flex p-3 border-b border-muted/50 gap-3"},Fn={key:1,class:"col-span-12 sm:pt-2"},Rn={key:0,class:"col-span-12 sm:pt-2"},zn={key:0,class:"space-y-4"},Mn={class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},Dn={class:"col-span-4 flex flex-col h-full"},Un={class:"col-span-4 flex flex-col"},In={class:"col-span-4 flex flex-col"},jn={class:"flex justify-between items-center text-warning-500"},Gn={class:"text-2xl font-semibold flex items-center"},On={key:1,class:"text-neutral-500"},Kn={class:"flex justify-between items-center text-poison-500"},Wn={class:"text-2xl font-semibold flex items-center"},qn={key:1,class:"text-neutral-500"},Hn={class:"flex justify-between items-center text-signal-500"},Yn={class:"text-2xl font-semibold flex items-center"},Xn={key:1,class:"text-neutral-500"},Zn={class:"flex justify-between items-center text-secondary-500"},Jn={class:"truncate"},Qn={class:"text-2xl font-semibold flex items-center"},er={key:1,class:"text-neutral-500"},tr={__name:"NormalView",props:{activeView:{type:String,default:null}},emits:["enlarge","closeView"],setup(r,{emit:t}){const e=Te(),n=Mt(),a=G(null),o=G(null),c=G(null),u=G(null),l=r,p=t,N={FullScreenEdible:"knowledge",FullScreenPoison:"knowledge",RedlistedComponent:"knowledge",FullScreenEdna:"dna"},C={FullScreenEdible:Vt,FullScreenPoison:Pt,RedlistedComponent:Bt,FullScreenEdna:Et},y=R=>{N[R]&&(_.value=N[R]),p("enlarge",R)},_=G("dna"),k=G(0),x=()=>{k.value=window.innerWidth};je(()=>{x(),window.addEventListener("resize",x)}),tt(()=>{window.removeEventListener("resize",x)}),S(()=>(k.value>=768,"md"));const E=S(()=>k.value<768),f=S(()=>e.geography),F=S(()=>e.forestType),z=S(()=>e.standAge),Y=S(()=>e.vegetationType),O=S(()=>C[l.activeView??""]??null),J=S(()=>l.activeView?l.activeView==="FullScreenEdible"||l.activeView==="FullScreenPoison"?{isNormalView:!1,geography:f.value,forestType:F.value,standAge:z.value,vegetationType:Y.value}:{isNormalView:!1}:{isNormalView:!1}),le=S(()=>l.activeView?`${l.activeView}-${n.fullPath}`:void 0),de={FullScreenEdible:"Matsvampar",FullScreenPoison:"Giftsvampar",RedlistedComponent:"Naturvårdsarter",FullScreenEdna:"Alla mykorrhizasvampar"},ie=S(()=>l.activeView==="FullScreenEdna"),w=S(()=>de[l.activeView??""]??"");function v(){_.value="dna",p("closeView")}S(()=>O.value?[{label:"Enligt samlad kunskap",onClick:v,class:"cursor-pointer p-1 px-2 rounded hover:bg-muted"},{label:w.value,class:"cursor-default text-neutral"}]:[]);const i=()=>{ie.value?(_.value="knowledge",p("closeView")):y("FullScreenEdna")};oe(()=>l.activeView,R=>{R&&N[R]&&(_.value=N[R])}),oe(_,R=>{l.activeView&&N[l.activeView]!==R&&p("closeView")});async function h(R,V,P,K=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(D=>!D)){P.value=0;return}const X=`${V}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const D=await fetch(`/${R}/${X}`);if(!D.ok)throw new Error("Network response was not ok");const pe=await D.json();K?P.value=pe.filter(se=>se[K]==="x").length:P.value=pe.length}catch(D){console.error("Failed to fetch count for",V,D),P.value=0}}async function j(){const R=e.geography,V=e.forestType,P=e.standAge,K=e.vegetationType;if(!R||!V||!P||!K){u.value=0;return}if(!rt(R,V,P,K)){u.value=0;return}u.value=null;const Q=`edna-${R}-${V}-${P}-${K}.json`;try{const X=await fetch(`/edna/${Q}`);if(!X.ok){u.value=0;return}const D=await X.json();u.value=Array.isArray(D)?D.length:0}catch(X){console.error("Failed to fetch DNA count",X),u.value=0}}return oe(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>{h("redlisted","redlisted",a),h("edible","edibledata",o,"Nyasvamp-boken"),h("edible","edibledata",c,"Giftsvamp"),j()},{immediate:!0}),(R,V)=>{const P=Va,K=me,Q=Ge,X=Ut,D=Ie,pe=zt,se=Dt;return d(),A("div",Vn,[b("div",Pn,[E.value?U("",!0):(d(),A("div",Bn,[m(K,{onClick:V[0]||(V[0]=ne=>_.value="dna"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:_.value==="dna"?"subtle":"outline",color:"neutral"},{default:M(()=>[m(P,{title:"Enligt DNA",description:"Från markinventeringens jordprover"})]),_:1},8,["variant"]),m(K,{onClick:V[1]||(V[1]=ne=>_.value="knowledge"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:_.value==="knowledge"?"subtle":"outline",color:"neutral"},{default:M(()=>[m(P,{title:"Enligt fruktkroppar",description:"Utifrån var fruktkroppar förekommer"})]),_:1},8,["variant"])])),_.value==="dna"?(d(),A("div",Fn,[b("div",null,[m(Et,{isNormalView:!ie.value,onEnlarge:i},null,8,["isNormalView"])])])):U("",!0)]),_.value==="knowledge"?(d(),A("div",Rn,[O.value?(d(),A("div",zn,[(d(),W(Na(O.value),$e(J.value,{key:le.value,onEnlarge:v,class:"w-full"}),null,16))])):(d(),A(he,{key:1},[b("div",Mn,[b("div",Dn,[(d(),W(Vt,{geography:f.value,forestType:F.value,standAge:z.value,vegetationType:Y.value,isNormalView:!0,onEnlarge:V[2]||(V[2]=ne=>y("FullScreenEdible")),key:$(n).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),b("div",Un,[(d(),W(Pt,{geography:f.value,forestType:F.value,standAge:z.value,vegetationType:Y.value,isNormalView:!0,onEnlarge:V[3]||(V[3]=ne=>y("FullScreenPoison")),key:$(n).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),b("div",In,[m(Bt,{isNormalView:!0,onEnlarge:V[4]||(V[4]=ne=>y("RedlistedComponent"))})])]),m(se,{class:"md:hidden space-y-3 pt-3 bg-muted/50"},{default:M(()=>[m(P,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"}),m(D,{onClick:V[5]||(V[5]=ne=>y("FullScreenEdible")),class:"ring-muted/50"},{default:M(()=>[b("div",jn,[b("div",null,[b("h1",Gn,[m(Q,{name:"icon-park-solid:knife-fork",class:"mr-2"}),V[9]||(V[9]=ee("Matsvampar ",-1))]),o.value===null?(d(),W(X,{key:0,class:"h-4 w-12 mt-2"})):(d(),A("h1",On,Z(o.value)+" arter",1))]),m(K,{icon:"i-heroicons-chevron-right",class:"rounded-full ring-muted/50",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),m(D,{onClick:V[6]||(V[6]=ne=>y("FullScreenPoison")),class:"ring-muted/50"},{default:M(()=>[b("div",Kn,[b("div",null,[b("h1",Wn,[m(Q,{name:"i-hugeicons-danger",class:"mr-2"}),V[10]||(V[10]=ee("Giftsvampar ",-1))]),o.value===null?(d(),W(X,{key:0,class:"h-4 w-12 mt-2"})):(d(),A("h1",qn,Z(c.value)+" arter",1))]),m(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),m(D,{onClick:V[7]||(V[7]=ne=>y("RedlistedComponent")),class:"ring-muted/50"},{default:M(()=>[b("div",Hn,[b("div",null,[b("h1",Yn,[m(Q,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),V[11]||(V[11]=ee(" Naturvårdsarter ",-1))]),a.value===null?(d(),W(X,{key:0,class:"h-4 w-12 mt-2"})):(d(),A("h1",Xn,Z(a.value)+" arter",1))]),m(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),m(pe),m(P,{title:"Enligt DNA",description:"Från markinventeringens jordprover"}),m(D,{onClick:V[8]||(V[8]=ne=>y("FullScreenEdna")),class:"ring-muted/50"},{default:M(()=>[b("div",Zn,[b("div",Jn,[b("div",Qn,[m(Q,{name:"solar:dna-linear",class:"mr-2"}),V[12]||(V[12]=b("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),u.value===null?(d(),W(X,{key:0,class:"h-4 w-12 mt-2"})):(d(),A("h1",er,Z(u.value)+" arter",1))]),m(K,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1})],64))])):U("",!0)])}}},ar=Se(tr,[["__scopeId","data-v-ac745c1e"]]),or={class:"bg-muted"},sr={class:"flex flex-col min-h-screen"},nr={__name:"DashboardC",setup(r){Re("(max-width: 767px)");const t=Mt(),e=G(!1),n=G(!0),a=ot(),o=Te();oe(()=>a.selectedSpecies,_=>{_&&(e.value=!0)}),oe(e,_=>{_||a.clearSelection()});const c=G(null),u=S(()=>o.geography&&o.forestType&&o.standAge&&o.vegetationType),l=_=>{c.value=_},p=()=>{c.value=null},N=_=>{_.key==="Escape"&&a.selectedSpecies&&a.clearSelection()};function C(_){return Array.isArray(_)?_[0]??null:typeof _=="string"&&_.length>0?_:null}function y(_){const k={geography:C(_.geography),forestType:C(_.forestType),standAge:C(_.standAge),vegetationType:C(_.vegetationType)};k.geography&&k.forestType&&k.standAge&&k.vegetationType&&o.setParams(k)}return je(()=>{window.addEventListener("keydown",N),y(t.params)}),Rt(()=>{window.removeEventListener("keydown",N)}),oe(()=>t.params,_=>{y(_)},{immediate:!0}),oe(()=>[o.geography,o.forestType,o.standAge,o.vegetationType],()=>{o.geography&&o.forestType&&o.standAge&&o.vegetationType&&`${encodeURIComponent(o.geography)}${encodeURIComponent(o.forestType)}${encodeURIComponent(o.standAge)}${encodeURIComponent(o.vegetationType)}`},{deep:!0}),oe(c,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(_,k)=>{const x=ds,E=fs,f=Ea,F=Dt;return d(),A("div",or,[m(E,{modelValue:e.value,"onUpdate:modelValue":k[0]||(k[0]=z=>e.value=z),pinned:n.value,"onUpdate:pinned":k[1]||(k[1]=z=>n.value=z)},{default:M(()=>[m(x,{species:$(a).selectedSpecies,source:$(a).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),m(F,null,{default:M(()=>[m(Fe,{name:"fade"},{default:M(()=>[u.value?(d(),W(f,{key:0})):U("",!0)]),_:1})]),_:1}),b("div",sr,[m(F,{class:"w-full px-0"},{default:M(()=>[m(Fe,{name:"fade",mode:"out-in"},{default:M(()=>[m(ar,{class:"block sm:border border-muted/50 bg-white sm:rounded sm:shadow","active-view":c.value,onEnlarge:l,onCloseView:p},null,8,["active-view"])]),_:1})]),_:1})])])}}},rr=Se(nr,[["__scopeId","data-v-a485cf62"]]),lr={};function ir(r,t){const e=rr;return d(),W(e)}const Sr=Se(lr,[["render",ir]]);export{Sr as default};
