import{_ as Ve,a as Fe}from"./Bn-ugG-r.js";import{_ as Ae}from"./CrWnOoLk.js";import{B as Be,r as p,aN as De,o as je,aR as ee,K as L,aD as te,aI as Pe,W as k,d as y,f as v,P as d,g as o,N as m,w as l,T as ae,n as M,aH as Oe,aE as oe,aF as le,e as r,F as ne,ag as se,aS as Ee,h as s,aC as Ye,aB as He,t as C,aL as qe,af as Ke,av as Qe,aQ as Re,ai as We,L as Xe,_ as Ge}from"#entry";import{M as Je,_ as Ze}from"./B7XT6MsD.js";import{_ as et}from"./DEqKqFR3.js";import{_ as tt}from"./DChgQddm.js";import{_ as at}from"./CVNAysO6.js";import{u as ot,_ as lt,a as nt}from"./BvUdJZ5w.js";import{_ as st}from"./CEr_apoJ.js";import{_ as it,a as rt,b as ut}from"./CVTHDCdE.js";import"./DQT6uneS.js";import"./B-dc7byI.js";import"./iik6CYzq.js";import"./Cpj98o6Y.js";import"./mqP3ZwGE.js";import"./CudAv0bZ.js";import"./CADCHXif.js";const ct={key:0,class:"fixed top-18 inset-x-3 z-50 pointer-events-auto origin-top"},dt=["onClick"],mt={class:"text-lg p-2 px-3 font-medium text-nowrap"},pt={key:2,class:"p-4"},ft=["onClick"],vt={class:"text-lg p-2 px-3 font-medium text-nowrap"},_t={class:"w-full rounded-xl relative overflow-hidden"},gt={class:"grid gap-3 sm:gap-6 lg:grid-cols-3"},ht={class:"flex flex-col gap-6 min-w-0 max-w-full"},wt={class:"text-4xl font-medium"},kt={key:0,class:"flex flex-col gap-4 min-w-0 max-w-full"},xt={class:"w-full max-w-full min-w-0 overflow-x-auto overflow-y-visible"},bt={class:"flex flex-nowrap whitespace-nowrap gap-2 w-full my-1"},yt={class:"space-y-2"},Ct={class:"text-xl font-semibold text-neutral-900"},Tt={class:"text-sm text-muted"},St={class:"text-sm"},$t={class:"flex flex-col gap-1 min-w-0 max-w-full"},Ut={class:"grid sm:grid-cols-1"},Nt={class:"mb-4 flex flex-col sm:flex-row gap-1.5 p-1 rounded-lg ring ring-muted/50 sm:w-fit bg-muted/30"},ie="modal-no-scrollbar",Lt=Be({__name:"index",async setup(Mt){let _,z;p(!1);const x=De("(max-width: 767px)"),I=p(!1);let T=null;const P=()=>{if(typeof window>"u")return;if(!x.value){I.value=!1;return}const e=window.innerHeight*.5;I.value=window.scrollY>e};je(()=>{typeof window>"u"||(P(),T=()=>P(),window.addEventListener("scroll",T,{passive:!0}))}),ee(()=>{T&&typeof window<"u"&&window.removeEventListener("scroll",T),T=null}),L(x,()=>{x.value?P():I.value=!1});const S=p(!1),K=e=>{const t=document.documentElement;e?t.classList.add(ie):t.classList.remove(ie)};L(S,e=>K(e)),ee(()=>K(!1));const V=ot(),{data:f}=([_,z]=te(()=>oe("skogsskotsel",()=>le("skogsskotsel").first())),_=await _,z(),_);if(!f.value)throw Pe({statusCode:404,statusMessage:"Page not found",fatal:!0});const b=k(()=>f.value?.methods??[]),Q=k(()=>b.value.map((e,t)=>({label:e.title,value:t}))),O={id:"",title:"",image:"",shortdescription:"",description:"",descriptionsvamp:""},c=p(null),R=p(!1);L(c,async(e,t)=>{e&&!t&&!R.value&&(R.value=!0,await Xe(),window.scrollTo({top:0}))});const n=k(()=>{const e=b.value;return!e.length||!c.value?O:e.find(t=>t.id===c.value)??O}),F=k({get(){if(!c.value)return null;const e=b.value.findIndex(t=>t.id===c.value);return e>=0?e:null},set(e){typeof e=="number"&&b.value[e]&&(c.value=b.value[e].id)}}),W=e=>{const t=e?.toLowerCase?.()??"";return t==="intekalavverkad"?"naturskog":t==="produktionsskog"?"produktionsskog_":e},X=e=>(e?.toLowerCase?.()??"")==="ingenatgard"?"naturskydd":e,E=e=>{const t=String(e).trim().toLowerCase();return t.includes("efter")?"efter":t.includes("innan")||t.includes("före")||t.includes("fore")?"fore":t.replace(/[^0-9]/g,"")||t},re=(e,t,u)=>{const i=B=>B.trim().normalize("NFD").replace(/å/gi,"a").replace(/ä/gi,"a").replace(/ö/gi,"o").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");return`/images/thumbnails/${`${i(e)}_${E(String(t))}_visa_visa_${i(u)}.webp`}`},{data:ue}=([_,z]=te(()=>oe("forestry-timeline-skogsskotsel",()=>le("forestryTimelines").first())),_=await _,z(),_),A=[{label:"Inte kalavverkad",value:"naturskog"},{label:"Kalavverkad",value:"produktionsskog_"}],Y=A.map(e=>({label:e.label,value:e.value,icon:e.value==="naturskog"?"i-material-symbols-light-forest-rounded":"i-ph-farm"})),g=p(Y[V.selectedStartskog??0]?.value||Y[0].value);L(()=>V.selectedStartskog,e=>{const t=A[e??0];t&&t.value!==g.value&&(g.value=t.value)},{immediate:!0});function ce(e){g.value=e;const t=A.findIndex(u=>u.value===e);t!==-1&&(V.selectedStartskog=t)}k(()=>A.find(e=>e.value===g.value)?.label??"");const h=k(()=>{const e=ue.value?.entries??[],t=n.value.id,u=X(t);return e.map(i=>({...i,startskog:W(i.startskog),atgard:X(i.atgard)})).filter(i=>i.startskog===W(g.value)&&i.atgard===u).map(i=>({tid:i.tid,skog:i.skog,svamp:i.svamp,thumb:re(i.atgard,i.tid,i.startskog)}))}),$=p(null),w=p(0);function de(){$.value?.emblaApi?.scrollPrev?.()}function me(){$.value?.emblaApi?.scrollNext?.()}function pe(e){w.value=e}function fe(e){w.value=e,$.value?.emblaApi?.scrollTo?.(e)}L(h,e=>{w.value=0,e.length&&requestAnimationFrame(()=>{$.value?.emblaApi?.scrollTo?.(0)})});const ve=e=>{if(!e)return;const t=E(e);if(!t)return;if(t==="fore")return"före";if(t==="efter")return"efter";const u=Number(t);if(!Number.isNaN(u))return String(u)},_e=k(()=>ve(h.value[w.value]?.tid));function ge(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function he(e){if(!e)return"";const t=E(e);if(t==="fore")return"Innan avverkning";if(t==="efter")return"Efter avverkning";const u=Number(t);return Number.isNaN(u)?e.charAt(0).toUpperCase()+e.slice(1):`${u} år efter avverkning`}p([{label:"Intro",icon:"i-heroicons-book-open",slot:"text"},{label:"Diagram",icon:"i-heroicons-presentation-chart-line",slot:"diagram"},{label:"Tidslinje",icon:"i-heroicons-list-bullet",slot:"timeline"}]),p("description");const we=k(()=>[{label:`Om ${(n.value.title||"").toLowerCase()}`,icon:"i-hugeicons-tree-06",value:"description",content:n.value.description||""},{label:"Påverkan på mykorrhizasvampar",icon:"i-hugeicons-mushroom",value:"svamp",content:n.value.descriptionsvamp||""}]),ke={naturskydd:0,trakthygge:1,luckhuggning:2,skarmtrad:3,skärmträd:3,bladning:4,blädning:4},xe=e=>(e||"").trim().normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase();function be(){const e=xe(n.value.id),t=ke[e];typeof t=="number"&&(V.selectedFramework=t),S.value=!0}return(e,t)=>{const u=Ve,i=Ae,U=Oe,B=Ye,D=He,ye=Ee,j=Je,G=et,J=Ze,Ce=tt,H=Fe,Te=at,Se=Ke,$e=lt,Ue=nt,q=Qe,Ne=st,Le=qe,Z=it,Me=rt,ze=ut,Ie=Re;return d(f)?(r(),y("div",{key:0,class:M(["flex-1 transition-all",n.value.id?"bg-neutral-50":""])},[o(ae,{name:"fold-down"},{default:l(()=>[d(x)&&I.value?(r(),y("div",ct,[o(u,{size:"xl",items:Q.value,modelValue:F.value,"onUpdate:modelValue":t[0]||(t[0]=a=>F.value=a),placeholder:n.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-lg",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):v("",!0)]),_:1}),n.value.id?v("",!0):(r(),m(U,{key:0,class:"w-full px-0"},{default:l(()=>[o(i,{ui:{container:"py-20 pb-16 lg:py-24",title:"sm:text-7xl",headline:"text-neutral"},title:d(f).hero.title,description:d(f).hero.description,orientation:d(f).hero.orientation,class:""},null,8,["title","description","orientation"])]),_:1})),d(x)?n.value.id?(r(),y("div",pt,[o(u,{size:"xl",items:Q.value,modelValue:F.value,"onUpdate:modelValue":t[1]||(t[1]=a=>F.value=a),placeholder:n.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-lg",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):(r(),m(j,{key:3,class:"relative",initial:{transform:"translateX(10px)",opacity:0,filter:"blur(5px)"},animate:{transform:"translateX(0px)",opacity:1,filter:"blur(0px)"},transition:{duration:.5,delay:.2}},{default:l(()=>[o(G,{items:b.value,loop:"",speed:4,ui:{item:"basis-3/5 md:basis-1/3 p-2"}},{default:l(({item:a})=>[s("div",{onClick:N=>c.value=a.id,class:M(["shrink-0 bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow hover:shadow-md relative cursor-pointer mb-4",c.value?c.value===a.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[a.type&&!n.value.id?(r(),m(B,{key:0,class:"absolute top-2 left-2",label:a.type,color:"neutral",variant:"subtle"},null,8,["label"])):v("",!0),n.value.id?v("",!0):(r(),m(D,{key:1,preload:"",src:a.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"])),s("h1",vt,C(a.title),1)],10,ft)]),_:1},8,["items"])]),_:1})):(r(),m(U,{key:1,class:M(["w-full flex flex-col sm:flex-row justify-between py-4 gap-3 sm:gap-6 overflow-x-auto transition-all overflow-visible",[n.value.id?"mt-0 flex-row":"mt-8 flex-col"]])},{default:l(()=>[(r(!0),y(ne,null,se(b.value,a=>(r(),m(j,{key:a.id,class:"relative",initial:{scale:1,transform:"translateY(10px)",opacity:0},animate:{scale:1,transform:"translateY(0px)",opacity:1},transition:{duration:.3,delay:.5+.05*(a.index??0)}},{default:l(()=>[o(ye,{text:a.descriptionshort},{default:l(()=>[s("div",{onClick:N=>c.value=a.id,class:M(["shrink-0 lg:shrink sm:w-58 lg:w-full bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow-lg hover:shadow-md relative cursor-pointer",c.value?c.value===a.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[a.type&&!n.value.id?(r(),m(B,{key:0,class:"absolute top-2 left-2",label:a.type,color:"neutral",variant:"subtle"},null,8,["label"])):v("",!0),n.value.id?v("",!0):(r(),m(D,{key:1,src:a.image,width:"300",height:"160",quality:"80",class:"w-full h-full"},null,8,["src"])),s("h1",mt,C(a.title),1)],10,dt)]),_:2},1032,["text"])]),_:2},1032,["transition"]))),128))]),_:1},8,["class"])),n.value.id?(r(),m(U,{key:4,class:"w-full pt-2 px-1 sm:px-6"},{default:l(()=>[o(j,{class:"flex justify-center w-full",initial:{opacity:0,transform:"translateY(10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.2}},{default:l(()=>[s("div",_t,[o(Le,{class:"p-3 pt-0 sm:pt-3"},{default:l(()=>[s("div",gt,[s("div",ht,[s("h1",wt,C(n.value.title),1),o(ae,{name:"fade",mode:"out-in"},{default:l(()=>[(r(),m(D,{src:n.value.image,key:n.value.image,width:"420",height:"250",class:"rounded-lg ring ring-muted/50",quality:"80"},null,8,["src"]))]),_:1}),o(H,{class:"ring-muted/50",variant:"outline",ui:{body:"py-1 sm:py-1"}},{default:l(()=>[o(Ce,{items:we.value,"unmount-on-hide":!1,"default-value":["description"],ui:{trigger:"text-base font-medium",body:"text-md/7 text-neutral-800"}},{body:l(({item:a})=>[o(J,{value:a.content,unwrap:"p"},null,8,["value"])]),_:1},8,["items"])]),_:1})]),h.value.length?(r(),y("div",kt,[t[5]||(t[5]=s("div",{class:"flex"},[s("span",{class:"text-xs text-muted"},"Har skogen varit kalavverkad tidigare?")],-1)),o(Te,{items:d(Y),modelValue:g.value,"onUpdate:modelValue":t[2]||(t[2]=a=>g.value=a),onChange:ce,variant:"pill",size:"lg",class:"w-full -my-3",ui:{list:"grid grid-cols-2 gap-1 p-1",trigger:" data-[state=active]:text-neutral-900 px-4 py-2 text-sm font-medium",indicator:"bg-white"}},null,8,["items","modelValue"]),o(G,{ref_key:"timelineCarousel",ref:$,items:h.value,prev:{onClick:de},next:{onClick:me},class:"w-full bg-neutral-950 overflow-hidden rounded-lg ring-muted/50",fade:"",onSelect:pe},{default:l(({item:a})=>[o(D,{src:a.thumb,alt:`Foto ${a.tid}`,width:"960",height:"540",class:"w-full aspect-video object-cover"},null,8,["src","alt"])]),_:1},8,["items","prev","next"]),s("div",xt,[s("div",bt,[(r(!0),y(ne,null,se(h.value,(a,N)=>(r(),m(Se,{key:`timeline-thumb-${N}`,color:"neutral",class:M(["ring-muted/50 flex-none shrink-0 justify-center whitespace-nowrap",N===w.value?"border-neutral-900 bg-neutral-900 hover:bg-neutral-900 text-white opacity-100 ring-0 shadow":"border-transparent opacity-60 hover:opacity-100"]),variant:"outline",type:"button",onClick:zt=>fe(N),label:ge(a.tid)},null,8,["class","onClick","label"]))),128))])]),o(H,{class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 ring-muted/50"},{default:l(()=>[s("div",yt,[s("h3",Ct,C(he(h.value[w.value]?.tid)),1),s("p",Tt,C(h.value[w.value]?.skog),1),s("p",St,C(h.value[w.value]?.svamp),1)])]),_:1})])):v("",!0),s("div",$t,[o(H,{ui:{body:"p-1 sm:p-1 sm:pb-3"},class:"ring-muted/50 h-fit"},{default:l(()=>[o($e,{parentSelectedFrameworks:[n.value.id],currentStartskog:g.value,currentTimeValue:_e.value},null,8,["parentSelectedFrameworks","currentStartskog","currentTimeValue"])]),_:1}),o(q,{open:S.value,"onUpdate:open":t[4]||(t[4]=a=>S.value=a),fullscreen:""},{content:l(()=>[o(Ue,{onClose:t[3]||(t[3]=a=>S.value=!1)})]),_:1},8,["open"]),s("div",Ut,[t[6]||(t[6]=s("div",null,null,-1)),o(Ne,{title:"Öppna modell i helskärm",description:"I helskärm går det att jämföra olika metoder och visa fler lager med mer information. ",icon:"i-material-symbols:interactive-space",class:"mt-6 cursor-pointer ring-muted/50",color:"neutral",variant:"outline",orientation:"vertical",onClick:be})])])])]),_:1})])]),_:1})]),_:1})):v("",!0),o(j,{initial:{opacity:0,transform:"translatex(-10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.8}},{default:l(()=>[o(U,null,{default:l(()=>[s("div",Nt,[o(q,{fullscreen:!!d(x),title:"Mykorrhiza & skogsbruk i korthet"},{body:l(()=>[o(Me,{section:d(f).carousel},null,8,["section"])]),default:l(()=>[o(Z,{icon:"i-heroicons-newspaper",color:"neutral",variant:"outline",title:"Mykorrhiza & skogsbruk i korthet",class:"sm:w-fit shadow ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen"]),o(q,{fullscreen:!!d(x),title:"Underlag för skogsskötsel och svampar",description:d(f).underlagdescription},{body:l(()=>[o(ze),o(J,{value:d(f).underlag},null,8,["value"]),o(Ie,{to:"/info",class:"text-primary underline"},{default:l(()=>[...t[7]||(t[7]=[We("Läs mer i dokumentationen",-1)])]),_:1})]),default:l(()=>[o(Z,{icon:"i-heroicons-document-magnifying-glass",color:"neutral",variant:"outline",title:"Underlag för skogsskötsel och svampar",class:"sm:w-fit shadow ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","description"])])]),_:1})]),_:1})],2)):v("",!0)}}}),Xt=Ge(Lt,[["__scopeId","data-v-ce5ce14a"]]);export{Xt as default};
