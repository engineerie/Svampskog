import{_ as Ie,a as Ve}from"./CFzgJ_Qc.js";import{_ as Fe}from"./CrWnOoLk.js";import{B as Ae,r as f,aN as je,o as Be,aS as ee,K as L,aD as te,aI as De,W as y,d as v,f as g,P as u,g as l,N as p,w as o,T as ae,n as z,aH as Ee,aE as le,aF as oe,e as s,F as E,ag as ne,h as n,aC as Oe,aB as Pe,t as b,aL as qe,af as Ye,av as He,aM as Ke,L as We,_ as Xe}from"#entry";import{M as Qe,_ as Re}from"./eV839XxS.js";import{_ as Ge}from"./BryEemLf.js";import{_ as Je}from"./DChgQddm.js";import{_ as Ze}from"./ChamUCqd.js";import{u as et,_ as tt,a as at}from"./BgjpgnCb.js";import{_ as lt}from"./umnyVEvQ.js";import{_ as ot,a as nt,b as st}from"./BsoQWs1w.js";import"./DQT6uneS.js";import"./hkhKXcQc.js";import"./iik6CYzq.js";import"./Cpj98o6Y.js";import"./CWMBI_4e.js";import"./CudAv0bZ.js";import"./C34hH_Fk.js";const it={key:0,class:"fixed top-18 inset-x-3 z-50 pointer-events-auto origin-top"},rt=["onClick"],ut={class:"text-lg p-2 px-3 font-medium text-nowrap"},ct={key:1,class:"flex items-center gap-3 p-1 pr-3"},dt={class:"text-lg font-medium text-nowrap"},mt={key:2,class:"p-4"},pt=["onClick"],ft={class:"text-lg p-2 px-3 font-medium text-nowrap"},vt={key:1,class:"flex items-center gap-3 p-3"},gt={class:"text-lg font-medium text-nowrap"},_t={class:"w-full rounded-xl relative overflow-hidden"},ht={class:"grid gap-3 sm:gap-6 lg:grid-cols-3"},wt={class:"flex flex-col gap-6 min-w-0 max-w-full"},kt={class:"text-4xl font-medium"},xt={key:0,class:"flex flex-col gap-4 min-w-0 max-w-full"},yt={class:"w-full max-w-full min-w-0 overflow-x-auto overflow-y-visible"},bt={class:"flex flex-nowrap whitespace-nowrap gap-2 w-full my-1"},Ct={class:"space-y-2"},St={class:"text-xl font-semibold text-neutral-900"},Tt={class:"text-sm text-muted"},$t={class:"text-sm"},Ut={class:"flex flex-col gap-1 min-w-0 max-w-full"},Mt={class:"grid sm:grid-cols-1"},Nt={class:"mb-4 flex flex-col sm:flex-row gap-1.5 p-1 rounded-lg ring ring-muted/50 sm:w-fit bg-muted/30"},se="modal-no-scrollbar",Lt=Ae({__name:"index",async setup(zt){let _,I;f(!1);const h=je("(max-width: 767px)"),V=f(!1);let T=null;const O=()=>{if(typeof window>"u")return;if(!h.value){V.value=!1;return}const e=window.innerHeight*.5;V.value=window.scrollY>e};Be(()=>{typeof window>"u"||(O(),T=()=>O(),window.addEventListener("scroll",T,{passive:!0}))}),ee(()=>{T&&typeof window<"u"&&window.removeEventListener("scroll",T),T=null}),L(h,()=>{h.value?O():V.value=!1});const $=f(!1),W=e=>{const t=document.documentElement;e?t.classList.add(se):t.classList.remove(se)};L($,e=>W(e)),ee(()=>W(!1));const F=et(),{data:d}=([_,I]=te(()=>le("skogsskotsel",()=>oe("skogsskotsel").first())),_=await _,I(),_);if(!d.value)throw De({statusCode:404,statusMessage:"Page not found",fatal:!0});const C=y(()=>d.value?.methods??[]),X=y(()=>C.value.map((e,t)=>({label:e.title,value:t}))),P={id:"",title:"",image:"",shortdescription:"",description:"",descriptionsvamp:""},m=f(null),Q=f(!1);L(m,async(e,t)=>{e&&!t&&!Q.value&&(Q.value=!0,await We(),window.scrollTo({top:0}))});const i=y(()=>{const e=C.value;return!e.length||!m.value?P:e.find(t=>t.id===m.value)??P}),A=y({get(){if(!m.value)return null;const e=C.value.findIndex(t=>t.id===m.value);return e>=0?e:null},set(e){typeof e=="number"&&C.value[e]&&(m.value=C.value[e].id)}}),R=e=>{const t=e?.toLowerCase?.()??"";return t==="intekalavverkad"?"naturskog":t==="produktionsskog"?"produktionsskog_":e},G=e=>(e?.toLowerCase?.()??"")==="ingenatgard"?"naturskydd":e,q=e=>{const t=String(e).trim().toLowerCase();return t.includes("efter")?"efter":t.includes("innan")||t.includes("före")||t.includes("fore")?"fore":t.replace(/[^0-9]/g,"")||t},ie=(e,t,c)=>{const r=B=>B.trim().normalize("NFD").replace(/å/gi,"a").replace(/ä/gi,"a").replace(/ö/gi,"o").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase().replace(/[^a-z0-9]+/g,"_").replace(/_+/g,"_").replace(/^_+|_+$/g,"");return`/images/thumbnails/${`${r(e)}_${q(String(t))}_visa_visa_${r(c)}.webp`}`},{data:re}=([_,I]=te(()=>le("forestry-timeline-skogsskotsel",()=>oe("forestryTimelines").first())),_=await _,I(),_),j=[{label:"Inte kalavverkad",value:"naturskog"},{label:"Kalavverkad",value:"produktionsskog_"}],Y=j.map(e=>({label:e.label,value:e.value,icon:e.value==="naturskog"?"i-material-symbols-light-forest-rounded":"i-ph-farm"})),w=f(Y[F.selectedStartskog??0]?.value||Y[0].value);L(()=>F.selectedStartskog,e=>{const t=j[e??0];t&&t.value!==w.value&&(w.value=t.value)},{immediate:!0});function ue(e){w.value=e;const t=j.findIndex(c=>c.value===e);t!==-1&&(F.selectedStartskog=t)}y(()=>j.find(e=>e.value===w.value)?.label??"");const k=y(()=>{const e=re.value?.entries??[],t=i.value.id,c=G(t);return e.map(r=>({...r,startskog:R(r.startskog),atgard:G(r.atgard)})).filter(r=>r.startskog===R(w.value)&&r.atgard===c).map(r=>({tid:r.tid,skog:r.skog,svamp:r.svamp,thumb:ie(r.atgard,r.tid,r.startskog)}))}),U=f(null),x=f(0);function ce(){U.value?.emblaApi?.scrollPrev?.()}function de(){U.value?.emblaApi?.scrollNext?.()}function me(e){x.value=e}function pe(e){x.value=e,U.value?.emblaApi?.scrollTo?.(e)}L(k,e=>{x.value=0,e.length&&requestAnimationFrame(()=>{U.value?.emblaApi?.scrollTo?.(0)})});const fe=e=>{if(!e)return;const t=q(e);if(!t)return;if(t==="fore")return"före";if(t==="efter")return"efter";const c=Number(t);if(!Number.isNaN(c))return String(c)},ve=y(()=>fe(k.value[x.value]?.tid));function ge(e){return e?e.charAt(0).toUpperCase()+e.slice(1):""}function _e(e){if(!e)return"";const t=q(e);if(t==="fore")return"Innan avverkning";if(t==="efter")return"Efter avverkning";const c=Number(t);return Number.isNaN(c)?e.charAt(0).toUpperCase()+e.slice(1):`${c} år efter avverkning`}f([{label:"Intro",icon:"i-heroicons-book-open",slot:"text"},{label:"Diagram",icon:"i-heroicons-presentation-chart-line",slot:"diagram"},{label:"Tidslinje",icon:"i-heroicons-list-bullet",slot:"timeline"}]),f("description");const he=y(()=>[{label:`Om ${(i.value.title||"").toLowerCase()}`,icon:"i-hugeicons-tree-06",value:"description",content:i.value.description||""},{label:"Påverkan på mykorrhizasvampar",icon:"i-hugeicons-mushroom",value:"svamp",content:i.value.descriptionsvamp||""}]),we={naturskydd:0,trakthygge:1,luckhuggning:2,skarmtrad:3,skärmträd:3,bladning:4,blädning:4},ke=e=>(e||"").trim().normalize("NFD").replace(new RegExp("\\p{Diacritic}+","gu"),"").toLowerCase();function xe(){const e=ke(i.value.id),t=we[e];typeof t=="number"&&(F.selectedFramework=t),$.value=!0}return(e,t)=>{const c=Ie,r=Fe,M=Ee,B=Oe,S=Pe,D=Qe,J=Ge,ye=Re,be=Je,H=Ve,Ce=Ze,Se=Ye,Te=tt,$e=at,K=He,Ue=lt,Me=qe,Ne=Ke,Z=ot,Le=nt,ze=st;return u(d)?(s(),v("div",{key:0,class:z(["flex-1 transition-all",i.value.id?"bg-neutral-50":""])},[l(ae,{name:"fold-down"},{default:o(()=>[u(h)&&V.value?(s(),v("div",it,[l(c,{size:"xl",items:X.value,modelValue:A.value,"onUpdate:modelValue":t[0]||(t[0]=a=>A.value=a),placeholder:i.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-lg",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):g("",!0)]),_:1}),i.value.id?g("",!0):(s(),p(M,{key:0,class:"w-full px-0"},{default:o(()=>[l(r,{ui:{container:"py-20 pb-16 lg:py-24",title:"sm:text-7xl",headline:"text-neutral"},title:u(d).hero.title,description:u(d).hero.description,orientation:u(d).hero.orientation,class:""},null,8,["title","description","orientation"])]),_:1})),u(h)?i.value.id?(s(),v("div",mt,[l(c,{size:"xl",items:X.value,modelValue:A.value,"onUpdate:modelValue":t[1]||(t[1]=a=>A.value=a),placeholder:i.value.title||"Välj metod","append-to-body":"",variant:"outline",class:"ring-muted w-full shadow rounded-lg",ui:{content:"min-w-fit rounded-lg z-50",viewport:"text-center"}},null,8,["items","modelValue","placeholder"])])):(s(),p(D,{key:3,class:"relative",initial:{transform:"translateX(10px)",opacity:0,filter:"blur(5px)"},animate:{transform:"translateX(0px)",opacity:1,filter:"blur(0px)"},transition:{duration:.5,delay:.2}},{default:o(()=>[l(J,{items:C.value,loop:"",speed:4,ui:{item:"basis-3/5 md:basis-1/3 p-2"}},{default:o(({item:a})=>[n("div",{onClick:N=>m.value=a.id,class:z(["shrink-0 bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow hover:shadow-md relative cursor-pointer mb-4",m.value?m.value===a.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[i.value.id?(s(),v("div",vt,[m.value===a.id?(s(),p(S,{key:0,src:a.image,width:"64",height:"64",quality:"80",class:"w-16 h-16 rounded-md object-cover ring-1 ring-muted/50"},null,8,["src"])):g("",!0),n("h1",gt,b(a.title),1)])):(s(),v(E,{key:0},[a.type?(s(),p(B,{key:0,class:"absolute top-2 left-2",label:a.type,color:"neutral",variant:"subtle"},null,8,["label"])):g("",!0),l(S,{preload:"",src:a.image,width:"300",height:"160",class:"w-full h-full"},null,8,["src"]),n("h1",ft,b(a.title),1)],64))],10,pt)]),_:1},8,["items"])]),_:1})):(s(),p(M,{key:1,class:z(["w-full flex flex-col sm:flex-row justify-between py-4 gap-3 sm:gap-6 overflow-x-auto transition-all overflow-visible",[i.value.id?"mt-0 flex-row":"mt-8 flex-col"]])},{default:o(()=>[(s(!0),v(E,null,ne(C.value,a=>(s(),p(D,{key:a.id,class:"relative",initial:{scale:1,transform:"translateY(10px)",opacity:0},animate:{scale:1,transform:"translateY(0px)",opacity:1},transition:{duration:.3,delay:.5+.05*(a.index??0)}},{default:o(()=>[n("div",{onClick:N=>m.value=a.id,class:z(["shrink-0 lg:shrink sm:w-58 lg:w-full bg-white transition-all hover:opacity-100 border border-muted/50 overflow-hidden rounded-lg h-fit shadow-lg hover:shadow-md relative cursor-pointer",m.value?m.value===a.id?"opacity-100 ring-primary/40 shadow-lg":"opacity-50":"opacity-100"])},[i.value.id?(s(),v("div",ct,[l(S,{src:a.image,width:"64",height:"64",quality:"80",class:"size-12 rounded-md object-cover ring-1 ring-muted/50"},null,8,["src"]),n("h1",dt,b(a.title),1)])):(s(),v(E,{key:0},[a.type?(s(),p(B,{key:0,class:"absolute top-2 left-2",label:a.type,color:"neutral",variant:"subtle"},null,8,["label"])):g("",!0),l(S,{src:a.image,width:"300",height:"160",quality:"80",class:"w-full h-full"},null,8,["src"]),n("h1",ut,b(a.title),1)],64))],10,rt)]),_:2},1032,["transition"]))),128))]),_:1},8,["class"])),i.value.id?(s(),p(M,{key:4,class:"w-full pt-2 px-1 sm:px-6"},{default:o(()=>[l(D,{class:"flex justify-center w-full",initial:{opacity:0,transform:"translateY(10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.2}},{default:o(()=>[n("div",_t,[l(Me,{class:"p-3 pt-0 sm:pt-3"},{default:o(()=>[n("div",ht,[n("div",wt,[n("h1",kt,b(i.value.title),1),l(ae,{name:"fade",mode:"out-in"},{default:o(()=>[(s(),p(S,{src:i.value.image,key:i.value.image,width:"420",height:"250",class:"rounded-lg ring ring-muted/50",quality:"80"},null,8,["src"]))]),_:1}),l(H,{class:"ring-muted/50",variant:"outline",ui:{body:"py-1 sm:py-1"}},{default:o(()=>[l(be,{items:he.value,"unmount-on-hide":!1,"default-value":["description"],ui:{trigger:"text-base font-medium",body:"text-md/7 text-neutral-800"}},{body:o(({item:a})=>[l(ye,{value:a.content,unwrap:"p"},null,8,["value"])]),_:1},8,["items"])]),_:1})]),k.value.length?(s(),v("div",xt,[t[5]||(t[5]=n("div",{class:"flex"},[n("span",{class:"text-xs text-muted"},"Har skogen varit kalavverkad tidigare?")],-1)),l(Ce,{items:u(Y),modelValue:w.value,"onUpdate:modelValue":t[2]||(t[2]=a=>w.value=a),onChange:ue,variant:"pill",size:"lg",class:"w-full -my-3",ui:{list:"grid grid-cols-2 gap-1 p-1",trigger:" data-[state=active]:text-neutral-900 px-4 py-2 text-sm font-medium",indicator:"bg-white"}},null,8,["items","modelValue"]),l(J,{ref_key:"timelineCarousel",ref:U,items:k.value,prev:{onClick:ce},next:{onClick:de},class:"w-full bg-neutral-950 overflow-hidden rounded-lg ring-muted/50",fade:"",onSelect:me},{default:o(({item:a})=>[l(S,{src:a.thumb,alt:`Foto ${a.tid}`,width:"960",height:"540",class:"w-full aspect-video object-cover"},null,8,["src","alt"])]),_:1},8,["items","prev","next"]),n("div",yt,[n("div",bt,[(s(!0),v(E,null,ne(k.value,(a,N)=>(s(),p(Se,{key:`timeline-thumb-${N}`,color:"neutral",class:z(["ring-muted/50 flex-none shrink-0 justify-center whitespace-nowrap",N===x.value?"border-neutral-900 bg-neutral-900 hover:bg-neutral-900 text-white opacity-100 ring-0 shadow":"border-transparent opacity-60 hover:opacity-100"]),variant:"outline",type:"button",onClick:It=>pe(N),label:ge(a.tid)},null,8,["class","onClick","label"]))),128))])]),l(H,{class:"flex flex-col sm:flex-row sm:items-end sm:justify-between gap-2 ring-muted/50"},{default:o(()=>[n("div",Ct,[n("h3",St,b(_e(k.value[x.value]?.tid)),1),n("p",Tt,b(k.value[x.value]?.skog),1),n("p",$t,b(k.value[x.value]?.svamp),1)])]),_:1})])):g("",!0),n("div",Ut,[l(H,{ui:{body:"p-1 sm:p-1 sm:pb-3"},class:"ring-muted/50 h-fit"},{default:o(()=>[l(Te,{parentSelectedFrameworks:[i.value.id],currentStartskog:w.value,currentTimeValue:ve.value},null,8,["parentSelectedFrameworks","currentStartskog","currentTimeValue"])]),_:1}),l(K,{open:$.value,"onUpdate:open":t[4]||(t[4]=a=>$.value=a),fullscreen:""},{content:o(()=>[l($e,{onClose:t[3]||(t[3]=a=>$.value=!1)})]),_:1},8,["open"]),n("div",Mt,[t[6]||(t[6]=n("div",null,null,-1)),l(Ue,{title:"Öppna modell i helskärm",description:"I helskärm går det att jämföra olika metoder och visa fler lager med mer information. ",icon:"i-material-symbols:interactive-space",class:"mt-6 cursor-pointer ring-muted/50",color:"neutral",variant:"subtle",orientation:"vertical",onClick:xe})])])])]),_:1})])]),_:1})]),_:1})):g("",!0),l(D,{initial:{opacity:0,transform:"translatex(-10px)"},animate:{opacity:1,transform:"translateY(0px)"},transition:{duration:.5,delay:.8}},{default:o(()=>[l(M,null,{default:o(()=>[u(h)?(s(),p(Ne,{key:0,class:"my-6"})):g("",!0),n("div",Nt,[l(K,{fullscreen:!!u(h),title:u(d).ecologyintro?.title??"",description:u(d).ecologyintro?.description??"",ui:{header:"shrink-0"}},{body:o(()=>[l(Le,{section:u(d).ecologyintro},null,8,["section"])]),default:o(()=>[l(Z,{icon:"i-heroicons-newspaper",color:"neutral",variant:"outline",title:"Mykorrhiza & skogsbruk i korthet",class:"sm:w-fit shadow ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","title","description"]),l(K,{fullscreen:!!u(h),title:"Underlag för skogsskötsel och svampar",description:u(d).underlagdescription,ui:{header:"shrink-0"}},{body:o(()=>[l(ze,{underlag:u(d).underlag,underlagbild:u(d).underlagbild,sections:u(d).underlagSections},null,8,["underlag","underlagbild","sections"])]),default:o(()=>[l(Z,{icon:"i-heroicons-document-magnifying-glass",color:"neutral",variant:"outline",title:"Underlag för skogsskötsel och svampar",class:"sm:w-fit shadow ring-muted/50 hover:opacity-85 hover:cursor-pointer"})]),_:1},8,["fullscreen","description"])])]),_:1})]),_:1})],2)):g("",!0)}}}),Gt=Xe(Lt,[["__scopeId","data-v-a9f270e6"]]);export{Gt as default};
