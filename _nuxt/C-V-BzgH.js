import{a as ea,b as Ue,_ as Ct}from"./DMQLQ62E.js";import{A as ke,Z as Ae,M as q,e as u,w as j,N as ge,ah as ee,Y as Ce,O as C,P as Ve,B as ta,C as aa,I as sa,V as x,ar as oa,as as ra,t as Z,aI as Nt,r as G,d as T,o as Ke,K as $t,c as nt,J as ae,_ as _e,h,g as p,aO as it,f as U,am as De,aB as Ze,n as re,aP as la,U as na,ae as pe,T as Fe,a4 as ia,a6 as ua,y as ca,a7 as da,a8 as ga,aa as pt,F as fe,af as Se,aM as Be,aS as Lt,ac as va,bj as H,bo as pa,bp as ma,aL as Tt,aX as fa,bq as ha,br as At,ay as ba,aG as Vt}from"#entry";import{a as ka,u as Je,_ as ya}from"./HbBKeLno.js";import{d as _a,g as xa,e as Sa,f as Et,c as wa}from"./9fBF2Nfb.js";import{_ as Qe}from"./D6cKXRgt.js";import{_ as Ft}from"./zj7A1MM0.js";import{u as Ne}from"./B8K5hXO2.js";import{X as Bt,O as Pt,c as Pe,i as Rt,a as Mt,b as jt,g as ye,m as st,d as Ca,e as Ge,x as Na,h as mt,s as Te,j as ze,l as $a,k as La,q as rt,z as Ta,p as Aa,H as ft,I as Va,J as ht,K as Ea,L as ot,M as Fa,N as Ba,C as zt,E as Ut,B as Pa,S as Ra,G as bt,F as Ma}from"./OSQk7Lzx.js";import"./BWuJ0jvd.js";import"./B0VoygWj.js";import"./o2I9E7u7.js";import"./CTQwvuzN.js";import"./747IVAhr.js";import"./Cpj98o6Y.js";var ja=ke({__name:"PaginationEllipsis",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o;return Ae(),(e,n)=>(u(),q(C(Ve),Ce(t,{"data-type":"ellipsis"}),{default:j(()=>[ge(e.$slots,"default",{},()=>[n[0]||(n[0]=ee("…"))])]),_:3},16))}}),za=ja;const[Ie,Ua]=ta("PaginationRoot");var Da=ke({__name:"PaginationRoot",props:{page:{type:Number,required:!1},defaultPage:{type:Number,required:!1,default:1},itemsPerPage:{type:Number,required:!0},total:{type:Number,required:!1,default:0},siblingCount:{type:Number,required:!1,default:2},disabled:{type:Boolean,required:!1},showEdges:{type:Boolean,required:!1,default:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"nav"}},emits:["update:page"],setup(o,{emit:t}){const e=o,n=t,{siblingCount:i,disabled:s,showEdges:g}=aa(e);Ae();const d=sa(e,"page",n,{defaultValue:e.defaultPage,passive:e.page===void 0}),l=x(()=>Math.max(1,Math.ceil(e.total/(e.itemsPerPage||1))));return Ua({page:d,onPageChange(b){d.value=b},pageCount:l,siblingCount:i,disabled:s,showEdges:g}),(b,P)=>(u(),q(C(Ve),{as:b.as,"as-child":b.asChild},{default:j(()=>[ge(b.$slots,"default",{page:C(d),pageCount:l.value})]),_:3},8,["as","as-child"]))}}),Ia=Da,Ga=ke({__name:"PaginationFirst",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o,e=Ie();Ae();const n=x(()=>e.page.value===1||e.disabled.value);return(i,s)=>(u(),q(C(Ve),Ce(t,{"aria-label":"First Page",type:i.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=g=>!n.value&&C(e).onPageChange(1))}),{default:j(()=>[ge(i.$slots,"default",{},()=>[s[1]||(s[1]=ee("First page"))])]),_:3},16,["type","disabled"]))}}),Ka=Ga,Oa=ke({__name:"PaginationLast",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o,e=Ie();Ae();const n=x(()=>e.page.value===e.pageCount.value||e.disabled.value);return(i,s)=>(u(),q(C(Ve),Ce(t,{"aria-label":"Last Page",type:i.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=g=>!n.value&&C(e).onPageChange(C(e).pageCount.value))}),{default:j(()=>[ge(i.$slots,"default",{},()=>[s[1]||(s[1]=ee("Last page"))])]),_:3},16,["type","disabled"]))}}),qa=Oa;function Le(o,t){const e=t-o+1;return Array.from({length:e},(n,i)=>i+o)}function Wa(o){return o.map(t=>typeof t=="number"?{type:"page",value:t}:{type:"ellipsis"})}const Xe="ellipsis";function Ha(o,t,e,n){const s=t,g=Math.max(o-e,1),d=Math.min(o+e,s);if(n){const b=Math.min(2*e+5,t)-2,P=g>3&&Math.abs(s-b-1+1)>2&&Math.abs(g-1)>2,V=d<s-2&&Math.abs(s-b)>2&&Math.abs(s-d)>2;if(!P&&V)return[...Le(1,b),Xe,s];if(P&&!V){const _=Le(s-b+1,s);return[1,Xe,..._]}if(P&&V){const _=Le(g,d);return[1,Xe,..._,Xe,s]}return Le(1,s)}else{const l=e*2+1;return t<l?Le(1,s):o<=e+1?Le(1,l):t-o<=e?Le(t-l+1,s):Le(g,d)}}var Xa=ke({__name:"PaginationList",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1}},setup(o){const t=o;Ae();const e=Ie(),n=x(()=>Wa(Ha(e.page.value,e.pageCount.value,e.siblingCount.value,e.showEdges.value)));return(i,s)=>(u(),q(C(Ve),oa(ra(t)),{default:j(()=>[ge(i.$slots,"default",{items:n.value})]),_:3},16))}}),Ya=Xa,Za=ke({__name:"PaginationListItem",props:{value:{type:Number,required:!0},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o;Ae();const e=Ie(),n=x(()=>e.page.value===t.value),i=x(()=>e.disabled.value);return(s,g)=>(u(),q(C(Ve),Ce(t,{"data-type":"page","aria-label":`Page ${s.value}`,"aria-current":n.value?"page":void 0,"data-selected":n.value?"true":void 0,disabled:i.value,type:s.as==="button"?"button":void 0,onClick:g[0]||(g[0]=d=>!i.value&&C(e).onPageChange(s.value))}),{default:j(()=>[ge(s.$slots,"default",{},()=>[ee(Z(s.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),Ja=Za,Qa=ke({__name:"PaginationNext",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o;Ae();const e=Ie(),n=x(()=>e.page.value===e.pageCount.value||e.disabled.value);return(i,s)=>(u(),q(C(Ve),Ce(t,{"aria-label":"Next Page",type:i.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=g=>!n.value&&C(e).onPageChange(C(e).page.value+1))}),{default:j(()=>[ge(i.$slots,"default",{},()=>[s[1]||(s[1]=ee("Next page"))])]),_:3},16,["type","disabled"]))}}),es=Qa,ts=ke({__name:"PaginationPrev",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"button"}},setup(o){const t=o;Ae();const e=Ie(),n=x(()=>e.page.value===1||e.disabled.value);return(i,s)=>(u(),q(C(Ve),Ce(t,{"aria-label":"Previous Page",type:i.as==="button"?"button":void 0,disabled:n.value,onClick:s[0]||(s[0]=g=>!n.value&&C(e).onPageChange(C(e).page.value-1))}),{default:j(()=>[ge(i.$slots,"default",{},()=>[s[1]||(s[1]=ee("Prev page"))])]),_:3},16,["type","disabled"]))}}),as=ts;const kt=o=>+o,ss=Object.assign(Object.assign({},Bt),{color:void 0,barMaxWidth:void 0,barWidth:void 0,dataStep:void 0,barPadding:0,roundedCorners:2,cursor:null,barMinHeight1Px:!1,barMinHeightZeroValue:null,orientation:Pt.Vertical}),Dt=Pe`
  label: stacked-bar-component;
`,os=Rt`
  :root {
    --vis-stacked-bar-cursor: default;
    --vis-stacked-bar-fill-color: var(--vis-color-main);
    --vis-stacked-bar-stroke-color: none;
    --vis-stacked-bar-stroke-width: 0px;
    --vis-stacked-bar-hover-stroke-width: none;
    --vis-stacked-bar-hover-stroke-color: none;

    /* Dark Theme */
    --vis-dark-stacked-bar-stroke-color: none;
  }

  body.theme-dark ${`.${Dt}`} {
    --vis-stacked-bar-stroke-color: var(--vis-dark-stacked-bar-stroke-color);
  }
`,Ye=Pe`
  label: bar;
  fill: var(--vis-stacked-bar-fill-color);
  stroke: var(--vis-stacked-bar-stroke-color);
  stroke-width: var(--vis-stacked-bar-stroke-width);
  cursor: var(--vis-stacked-bar-cursor);

  &:hover {
    stroke-width: var(--vis-stacked-bar-hover-stroke-width);
    stroke: var(--vis-stacked-bar-hover-stroke-color);
  }
`,lt=Pe`
  label: barGroup;
`,It=Pe`
  label: barGroupExit;
`,rs=Object.freeze(Object.defineProperty({__proto__:null,bar:Ye,barGroup:lt,barGroupExit:It,globalStyles:os,root:Dt},Symbol.toStringTag,{value:"Module"}));class ut extends Mt{constructor(t){super(),this._defaultConfig=ss,this.config=this._defaultConfig,this.getAccessors=()=>jt(this.config.y)?this.config.y:[this.config.y],this.stacked=!0,this.events={},this._barData=[],t&&this.setConfig(t)}get bleed(){if(this._barData=this._getVisibleData(),this._barData.length===0)return{top:0,bottom:0,left:0,right:0};const t=!this.isVertical()&&this.dataScale.range()[0]>this.dataScale.range()[1],e=this.dataScale.domain(),n=this._getBarWidth()/2,i=this._barData.map((_,k)=>ye(_,this.config.x,k)),s=st(i),g=Ca(i),d=this.dataScale(s),l=this.dataScale(g),b=this.dataScale.invert(d+(t?n:-n)),P=this.dataScale.invert(l+(t?-n:n)),V=b<=e[0]?this.dataScale(e[0])-this.dataScale(b):0,y=P>e[1]?this.dataScale(P)-this.dataScale(e[1]):0;return{top:this.isVertical()?0:t?-y:V,bottom:this.isVertical()?0:t?-V:y,left:this.isVertical()?V:0,right:this.isVertical()?y:0}}get dataScale(){return this.isVertical()?this.xScale:this.yScale}get valueScale(){return this.isVertical()?this.yScale:this.xScale}isVertical(){return this.config.orientation===Pt.Vertical}_render(t){const{config:e}=this,n=Ge(t)?t:e.duration,i=this.getAccessors(),s=Na(this._barData,0,i,this._prevNegative);this._prevNegative=s.map(k=>!!k.isMostlyNegative);const g=this.g.selectAll(`.${lt}`).data(this._barData,(k,S)=>{var L;return`${(L=mt(k,e.id,S))!==null&&L!==void 0?L:S}`}),d=(k,S)=>{const L=this.dataScale(ye(k,e.x,S)),m=this.isVertical()?L:0,B=this.isVertical()?0:L;return`translate(${m},${B})`},b=g.enter().append("g").attr("class",lt).attr("transform",d).style("opacity",1).merge(g);Te(b,n).attr("transform",d).style("opacity",1);const P=g.exit().attr("class",It);Te(P,n).style("opacity",0).remove(),Te(P.selectAll(`.${Ye}`),n).attr("transform",this.isVertical()?`translate(0,${this._height/3})`:`translate(${this._width/6},0)`);const V=b.selectAll(`.${Ye}`).data((k,S)=>s.map((L,m)=>Object.assign(Object.assign({},k),{_index:S,_stacked:L[S],_ending:m===s.length-1||m<=s.length-1&&s[m+1][S][0]!==L[S][1]}))),_=V.enter().append("path").attr("class",Ye).attr("d",(k,S)=>this._getBarPath(k,S,!0)).style("fill",(k,S)=>ze(k,e.color,S)).merge(V);Te(_,n).attr("d",(k,S)=>this._getBarPath(k,S)).style("fill",(k,S)=>ze(k,e.color,S)).style("cursor",(k,S)=>mt(k,e.cursor,S)),Te(V.exit(),n).style("opacity",0).remove()}_getBarWidth(){const{config:t,datamodel:{data:e}}=this;if($a(e))return 0;if(t.barWidth)return st([t.barWidth,t.barMaxWidth]);const n=this.dataScale.bandwidth,i=this.dataScale.domain?this.dataScale.domain():[];let g=1+(n?i.length:i[1]-i[0])/t.dataStep||!n&&e.filter((b,P)=>{const V=ye(b,t.x,P);return V>=i[0]&&V<=i[1]}).length||e.length;!n&&g>=2&&(g+=1);const l=(g<2?1:1-t.barPadding)*(this.isVertical()?this._width:this._height)/g;return st([l,t.barMaxWidth])}_getVisibleData(){const{config:t,datamodel:{data:e}}=this,n=this._getBarWidth(),i=e.length<2?0:n/2,s=this.dataScale,g=Math.abs(s.invert(i)-s.invert(0));return e?.filter((l,b)=>{const P=ye(l,t.x,b),V=s.domain(),y=+V[0],_=+V[1];return P>=y-g&&P<=_+g})}_getBarPath(t,e,n=!1){const{config:i}=this,s=this.getAccessors(),g=this._getBarWidth(),d=t._stacked[1]<0,l=t._ending,b=ye(t,s[e],t._index),P=n?0:Math.abs(this.valueScale(t._stacked[0])-this.valueScale(t._stacked[1])),V=!n&&i.barMinHeight1Px&&P<1&&isFinite(b)&&b!==i.barMinHeightZeroValue?1:P,y=n?this.valueScale(0):this.valueScale(d?t._stacked[0]:t._stacked[1])-(P<1&&i.barMinHeight1Px?1:0),_=-g/2,k=g,S=i.roundedCorners?Ge(i.roundedCorners)?+i.roundedCorners:k/2:0,L=rt(S,0,Math.min(P,k)/2),m=this.yScale.range()[0]>this.yScale.range()[1];return La({x:this.isVertical()?_:y-V,y:this.isVertical()?y+(m?0:-V):_,w:this.isVertical()?k:V,h:this.isVertical()?V:k,tl:l&&(this.isVertical()?!d&&m||d&&!m:d),tr:l&&(this.isVertical()?!d&&m||d&&!m:!d),br:l&&(this.isVertical()?d&&m||!d&&!m:!d),bl:l&&(this.isVertical()?d&&m||!d&&!m:d),r:L})}getValueScaleExtent(t){const{datamodel:e}=this,n=this.getAccessors(),i=t?this._getVisibleData():e.data;return Ta(i,...n)}getDataScaleExtent(){const{config:t,datamodel:e}=this;return Aa(e.data,t.x)}getYDataExtent(t){return this.isVertical()?this.getValueScaleExtent(t):this.getDataScaleExtent()}getXDataExtent(){return this.isVertical()?this.getDataScaleExtent():this.getValueScaleExtent(!1)}}ut.selectors=rs;const ls=Object.assign(Object.assign({},Bt),{yStacked:void 0,baseline:null,duration:100,tooltip:void 0,template:(o,t,e,n)=>"",hideWhenFarFromPointer:!0,hideWhenFarFromPointerDistance:100,snapToData:!0,getCircles:void 0,color:void 0,strokeColor:void 0,strokeWidth:void 0,onCrosshairMove:void 0,forceShowAt:void 0}),ns=Rt`
  :root {
    --vis-crosshair-line-stroke-color: #888;
    --vis-crosshair-line-stroke-width: 1px;
    --vis-crosshair-line-stroke-opacity: 1;
    --vis-crosshair-circle-stroke-color: #fff;
    --vis-crosshair-circle-stroke-width: 1px;
    --vis-crosshair-circle-stroke-opacity: 0.75;
  }
`,is=Pe`
  label: crosshair-component;
`,Gt=Pe`
  stroke: var(--vis-crosshair-line-stroke-color);
  stroke-width: var(--vis-crosshair-line-stroke-width);
  stroke-opacity: var(--vis-crosshair-line-stroke-opacity);
  pointer-events: none;
`,Kt=Pe`
  stroke: var(--vis-crosshair-circle-stroke-color);
  stroke-width: var(--vis-crosshair-circle-stroke-width);
  stroke-opacity: var(--vis-crosshair-circle-stroke-opacity);
  pointer-events: none;
`,us=Object.freeze(Object.defineProperty({__proto__:null,circle:Kt,globalStyles:ns,line:Gt,root:is},Symbol.toStringTag,{value:"Module"}));class Ot extends Mt{constructor(t){super(),this.clippable=!0,this._defaultConfig=ls,this.config=this._defaultConfig,this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,this._animFrameId=null,this._accessors={x:void 0,y:void 0,yStacked:void 0,baseline:void 0},t&&this.setConfig(t),this.g.style("opacity",0),this.line=this.g.append("line").attr("class",Gt)}set accessors(t){this._accessors=t}get accessors(){var t;const{config:e}=this,n=!!(e.x||e.y||e.yStacked),i=n?e.x:this._accessors.x,s=n?e.y:this._accessors.y,g=s?jt(s)?s:[s]:void 0,d=n?e.yStacked:this._accessors.yStacked,l=(t=e.baseline)!==null&&t!==void 0?t:this._accessors.baseline;return{x:i,y:g,yStacked:d,baseline:l}}_isContainerInViewport(){var t;if(!(!((t=this.container)===null||t===void 0)&&t.node()))return!1;const e=this.container.node().getBoundingClientRect(),n=window.innerWidth||document.documentElement.clientWidth,i=window.innerHeight||document.documentElement.clientHeight,s=Math.max(0,Math.min(e.right,n)-Math.max(e.left,0)),g=Math.max(0,Math.min(e.bottom,i)-Math.max(e.top,0)),d=e.width*e.height,l=s*g;return d>0&&l/d>=.35}setContainer(t){this.container!==t&&(this.container=t,this.container.on("mousemove.crosshair",this._onMouseMove.bind(this)),this.container.on("mouseout.crosshair",this._onMouseOut.bind(this)),this.container.on("wheel.crosshair",this._onWheel.bind(this)))}_render(t){var e,n,i,s,g;const{config:d,datamodel:l}=this,b=Ge(t)?t:d.duration,P=d.forceShowAt!==void 0,V=P?this.xScale(d.forceShowAt):this._xPx,y=this.xScale.invert(V),_=!((e=l.data)===null||e===void 0)&&e.length&&this.accessors.x?l.data.indexOf(ft(l.data,y,this.accessors.x,Va.Left)):void 0;let k,S;d.snapToData&&(!this.accessors.y&&!this.accessors.yStacked&&(!((n=l.data)===null||n===void 0)&&n.length)&&console.warn("Unovis | Crosshair: Y accessors have not been configured. Please check if they're present in the configuration object"),!(!((i=l.data)===null||i===void 0)&&i.length)&&this._mouseEvent&&console.warn("Unovis | Crosshair: No data to snap to. Make sure the data has been passed to the container or to the crosshair itself"),k=ft(l.data,y,this.accessors.x),S=l.data.indexOf(k));const L=this.xScale.range(),m=this.yScale.range(),B=d.snapToData&&k?rt(Math.round(this.xScale(ye(k,this.accessors.x,S))),0,this._width):rt(V,L[0],L[1]),M=V>=L[0]&&V<=L[1],X=this._yPx>=m[1]&&this._yPx<=m[0];let K=this._xPx?M&&X:M;d.hideWhenFarFromPointer&&Math.abs(B-+V)>=d.hideWhenFarFromPointerDistance&&(K=!1);const J=(s=d.tooltip)!==null&&s!==void 0?s:this.tooltip;if(K&&J&&this._isContainerInViewport()){const w=J.getContainer()||this.container.node(),v=J.isContainerBody();if(P){const r=this.container.node().getBoundingClientRect(),f=(v?V+r.left:V)+this._containerMargin.left,I=this._height/2+(v?r.top:0),R=[f,I];this._showTooltip(k,y,R,_)}else if(this._mouseEvent){const r=v?[this._mouseEvent.clientX,this._mouseEvent.clientY]:ht(this._mouseEvent,w);this._showTooltip(k,y,r,_)}}else this._hideTooltip();if(this._mouseEvent&&((g=d.onCrosshairMove)===null||g===void 0||g.call(d,K?this.xScale.invert(this._xPx):void 0,k,S,this._mouseEvent),this._mouseEvent=void 0),Te(this.g,b).style("opacity",K?1:0),!isFinite(V))return;this.line.attr("y1",0).attr("y2",this._height),Te(this.line,b,kt).attr("x1",B).attr("x2",B);const le=Ea(d.getCircles)?d.getCircles(y,l.data,this.yScale,_):this.getCircleData(k,S),ce=this.g.selectAll("circle").data(le,(w,v)=>{var r;return(r=w.id)!==null&&r!==void 0?r:v}),ne=ce.enter().append("circle").attr("class",Kt).attr("r",0).attr("cx",B).attr("cy",w=>w.y).style("fill",w=>w.color).style("stroke",w=>w.strokeColor).style("stroke-width",w=>w.strokeWidth);Te(ne.merge(ce),b,kt).attr("cx",B).attr("cy",w=>w.y).attr("r",4).style("opacity",w=>w.opacity).style("fill",w=>w.color).style("stroke",w=>w.strokeColor).style("stroke-width",w=>w.strokeWidth),ce.exit().remove()}hide(t){window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{var e,n;this._xPx=void 0,this._yPx=void 0,this._mouseEvent=void 0,(n=(e=this.config).onCrosshairMove)===null||n===void 0||n.call(e,void 0,void 0,void 0,t),this._render()})}_onMouseMove(t){var e;const{datamodel:n,element:i}=this;!this.accessors.x&&(!((e=n.data)===null||e===void 0)&&e.length)&&console.warn("Unovis | Crosshair: X accessor function has not been configured. Please check if it's present in the configuration object");const[s,g]=ht(t,i);this._xPx=s,this._yPx=g,this._mouseEvent=t,window.cancelAnimationFrame(this._animFrameId),this._animFrameId=window.requestAnimationFrame(()=>{this._render()})}_onMouseOut(t){var e;(!t||!(!((e=this.container)===null||e===void 0)&&e.node().contains(t.relatedTarget)))&&this.hide(t)}_onWheel(t){this.hide(t)}_showTooltip(t,e,n,i){var s;const{config:g,datamodel:d}=this,l=(s=g.tooltip)!==null&&s!==void 0?s:this.tooltip;if(!l||!n)return;const[b,P]=n,V=g.template(t,e,d.data,i);if(l.config.followCursor=!0,!l.config.horizontalPlacement||l.config.horizontalPlacement===ot.Auto){const y=l.isContainerBody()?b-this.container.node().getBoundingClientRect().left:b;l.overrideHorizontalPlacement(y>this._containerWidth/2?ot.Left:ot.Right)}V&&l.show(V,{x:b,y:P})}_hideTooltip(){var t;const{config:e}=this,n=(t=e.tooltip)!==null&&t!==void 0?t:this.tooltip;n?.hide()}getYDataExtent(){return[void 0,void 0]}getCircleData(t,e){var n,i;const{config:s}=this;if(s.snapToData&&t){const g=(n=this.accessors.y)!==null&&n!==void 0?n:[],d=(i=this.accessors.yStacked)!==null&&i!==void 0?i:[],l=ye(t,this.accessors.baseline,e)||0,b=Fa(t,e,...d).map((V,y)=>({y:this.yScale(V+l),opacity:Ge(ye(t,d[y],y))?1:0,color:ze(t,s.color,y),strokeColor:s.strokeColor?ze(t,s.strokeColor,y):void 0,strokeWidth:s.strokeWidth?ye(t,s.strokeWidth,y):void 0})),P=g.map((V,y)=>{const _=ye(t,V,e);return{y:this.yScale(_),opacity:Ge(_)?1:0,color:ze(t,s.color,b.length+y),strokeColor:s.strokeColor?ze(t,s.strokeColor,y):void 0,strokeWidth:s.strokeWidth?ye(t,s.strokeWidth,y):void 0}});return b.concat(P)}return[]}}Ot.selectors=us;const cs={"data-vis-crosshair":""},ds=ke({__name:"index",props:{data:{}},setup(o,{expose:t}){const e=Nt(Ba),n=o,i=x(()=>e.data.value??n.data),s=zt(n),g=G();return Ke(()=>{$t(()=>{var d;g.value=new Ot(s.value),(d=g.value)==null||d.setData(i.value),e.update(g.value)})}),nt(()=>{var d;(d=g.value)==null||d.destroy(),e.destroy()}),ae(s,(d,l)=>{var b;Ut(d,l)||(b=g.value)==null||b.setConfig(s.value)}),ae(i,()=>{var d;(d=g.value)==null||d.setData(i.value)}),t({component:g}),(d,l)=>(u(),T("div",cs))}}),gs={"data-vis-component":""},vs=ke({__name:"index",props:{color:{},barWidth:{},barMaxWidth:{},dataStep:{},barPadding:{},roundedCorners:{type:[Number,Boolean]},cursor:{},barMinHeight1Px:{type:Boolean},barMinHeightZeroValue:{},orientation:{},x:{},y:{},id:{type:Function},xScale:{type:[Object,Function]},yScale:{type:[Object,Function]},excludeFromDomainCalculation:{type:Boolean},duration:{},events:{},attributes:{},data:{}},setup(o,{expose:t}){const e=Nt(Pa),n=o,i=x(()=>e.data.value??n.data),s=zt(n),g=G();return Ke(()=>{$t(()=>{var d;g.value=new ut(s.value),(d=g.value)==null||d.setData(i.value),e.update(g.value)})}),nt(()=>{var d;(d=g.value)==null||d.destroy(),e.destroy()}),ae(s,(d,l)=>{var b;Ut(d,l)||(b=g.value)==null||b.setConfig(s.value)}),ae(i,()=>{var d;(d=g.value)==null||d.setData(i.value)}),t({component:g}),(d,l)=>(u(),T("div",gs))}}),ps={},ms={class:"relative overflow-hidden rounded-(--ui-radius) border border-dashed border-(--ui-border-accented) opacity-75 px-4 flex items-center justify-center aspect-video"};function fs(o,t){const e=ka;return u(),q(e,{variant:"subtle"},{default:j(()=>[h("div",ms,[t[0]||(t[0]=h("svg",{class:"absolute inset-0 h-full w-full stroke-(--ui-border-inverted)/10",fill:"none"},[h("defs",null,[h("pattern",{id:"pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e",x:"0",y:"0",width:"10",height:"10",patternUnits:"userSpaceOnUse"},[h("path",{d:"M-3 13 15-5M-5 5l18-18M-1 21 17 3"})])]),h("rect",{stroke:"none",fill:"url(#pattern-5c1e4f0e-62d5-498b-8ff0-cf77bb448c8e)",width:"100%",height:"100%"})],-1)),ge(o.$slots,"default")])]),_:3})}const hs=Object.assign(_e(ps,[["render",fs]]),{__name:"ImagePlaceholder"}),bs={class:"w-full relative overflow-visible"},ks={key:0,class:"group overflow-hidden"},ys=["src"],_s={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},xs={class:"flex"},Ss={key:1,class:"overflow-hidden relative group"},ws=["src"],Cs={class:"flex w-full bg-neutral-50 p-1 px-3 justify-between"},Ns={class:"flex"},$s={class:"px-5 pb-3 mt-4"},Ls={class:"text-2xl font-medium"},Ts={class:"text-neutral-500"},As={class:"my-1"},Vs={key:0,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},Es={key:1,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},Fs={key:2,class:"text-sm shrink-0 text-red-700 flex gap-1 items-center"},Bs={key:3,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},Ps={key:4,class:"text-sm text-red-700 shrink-0 flex gap-1 items-center"},Rs={key:5,class:"text-sm text-yellow-600 shrink-0 flex gap-1 items-center"},Ms={class:"mt-3 text-lg"},js={class:"-mx-1 mt-4"},zs={key:0,class:"inline-flex m-1 h-fit align-bottom"},Us=["src"],Ds={key:1,class:"shrink-0 inline-flex m-1 align-bottom"},Is={key:2,class:"shrink-0 inline-flex m-1 align-bottom"},Gs={key:3,class:"shrink-0 inline-flex m-1 align-bottom"},Ks={class:"text-lg font-semibold mb-2 flex"},Os={key:0,class:"flex items-center space-x-2"},qs={size:"md",weight:"light"},Ws={size:"md",weight:"light"},yt=50,Hs={__name:"SpeciesInfo",props:{species:Object},setup(o){const t=G(0),e=o,n=x(()=>e.species.images||[]);ae(n,()=>{t.value=0});const i=G(!1),s=G(!0),g=()=>{i.value=!i.value},d=x(()=>e.species.Kriteriedokumentation?i.value?e.species.Kriteriedokumentation:e.species.Kriteriedokumentation.slice(0,yt)+"...":""),l=x(()=>e.species.ekologi?s.value?e.species.ekologi:e.species.ekologi.slice(0,yt)+"...":""),b=L=>L?L.charAt(0).toUpperCase()+L.slice(1).toLowerCase():"",P=L=>L?L.replace("/detaljer","").replace("/artinformation",""):"",V=L=>({LC:"LC",NT:"NT",EN:"EN",VU:"VU",CR:"CR",RE:"RE",DD:"DD"})[L]||"NE",y=L=>({LC:"bg-green-500",NT:"bg-[#D7838E]",EN:"bg-[#C4004F]",VU:"bg-[#D7838E]",CR:"bg-[#C4004F]",RE:"bg-[#421A31]",DD:"bg-[#E8E9E7]"})[L]||"bg-neutral-300",_=L=>({LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"})[L]||"Ej bedömd",k=(L,m)=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[L==="0"&&m?m:L]||"default-icon.webp"}`,S=x(()=>e.species["Svamp-grupp"]==="0"&&e.species["Svamp-grupp-släkte"]?e.species["Svamp-grupp-släkte"]:e.species["Svamp-grupp"]);return(L,m)=>{const B=ea,M=it,X=hs,K=De,J=Ze,le=Ue,ce=la;return u(),T("div",bs,[n.value.length>1?(u(),T("div",ks,[p(B,{onSelect:m[0]||(m[0]=ne=>t.value=ne),items:n.value,ui:{item:"basis-full"}},{default:j(({item:ne})=>[(u(),T("div",{class:"w-full relative",key:ne},[h("img",{src:ne,class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,ys)]))]),_:1},8,["items"]),h("div",_s,[h("div",xs,[p(M,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),m[1]||(m[1]=h("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),h("h1",null,Z(t.value+1)+" av "+Z(n.value.length),1)])])):n.value.length===1?(u(),T("div",Ss,[h("img",{src:n.value[0],class:"w-full",draggable:"false",height:"300",width:"450",loading:"lazy",decoding:"async",alt:"Artbild"},null,8,ws),h("div",Cs,[h("div",Ns,[p(M,{name:"i-mingcute-copyright-line",class:"h-4 w-4 my-1 mr-1"}),m[2]||(m[2]=h("h1",{weight:"light",class:""}," Michael Krikorev ",-1))]),h("h1",null,Z(t.value+1)+" av "+Z(n.value.length),1)])])):(u(),q(X,{key:2,class:"rounded-none"})),h("div",$s,[h("h1",Ls,Z(b(o.species.Commonname)),1),h("h1",Ts,Z(o.species.Scientificname),1),h("div",As,[o.species["Rank matsvamp"]===3?(u(),T("div",Vs,[p(K,{name:"codicon:circle-large-filled",class:"size-3"}),m[3]||(m[3]=ee(" Sällsynt matsvamp ",-1))])):U("",!0),o.species["Rank matsvamp"]===2?(u(),T("div",Es,[p(K,{name:"codicon:color-mode",class:"size-3"}),m[4]||(m[4]=ee(" Ovanlig matsvamp ",-1))])):U("",!0),o.species["Rank giftsvamp"]===3?(u(),T("div",Fs,[p(K,{name:"codicon:circle-large-filled",class:"size-3"}),m[5]||(m[5]=ee(" Sällsynt giftsvamp ",-1))])):U("",!0),o.species["Rank giftsvamp"]===2?(u(),T("div",Bs,[p(K,{name:"codicon:color-mode",class:"size-3"}),m[6]||(m[6]=ee(" Ovanlig giftsvamp ",-1))])):U("",!0),o.species.RankRed===3?(u(),T("div",Ps,[p(K,{name:"codicon:circle-large-filled",class:"size-3"}),m[7]||(m[7]=ee(" Sällsynt naturvårdsart ",-1))])):U("",!0),o.species.RankRed===2?(u(),T("div",Rs,[p(K,{name:"codicon:color-mode",class:"size-3"}),m[8]||(m[8]=ee(" Ovanlig naturvårdsart ",-1))])):U("",!0)]),h("h1",Ms,Z(l.value),1),h("div",js,[o.species["Svamp-grupp"]?(u(),T("div",zs,[p(J,{color:"neutral",variant:"subtle",size:"xl"},{default:j(()=>[h("img",{src:k(o.species["Svamp-grupp"],o.species["Svamp-grupp-släkte"]),class:"w-4.5",alt:"Svamp ikon",loading:"lazy",decoding:"async"},null,8,Us),ee(" "+Z(b(S.value)),1)]),_:1})])):U("",!0),o.species["Nyasvamp-boken"]==="x"?(u(),T("div",Ds,[p(J,{color:"warning",size:"xl",variant:"subtle",class:""},{default:j(()=>[p(M,{name:"icon-park-solid:knife-fork"}),m[9]||(m[9]=ee("Matsvamp ",-1))]),_:1})])):U("",!0),o.species.Giftsvamp==="x"?(u(),T("div",Is,[p(J,{color:"poison",size:"xl",variant:"subtle",class:""},{default:j(()=>[p(M,{name:"hugeicons:danger"}),m[10]||(m[10]=ee("Giftsvamp ",-1))]),_:1})])):U("",!0),o.species.SIGNAL_art==="S"?(u(),T("div",Gs,[p(J,{color:"signal",size:"xl",variant:"subtle",class:""},{default:j(()=>[...m[11]||(m[11]=[ee("Signalart",-1)])]),_:1})])):U("",!0),o.species.KALKmark?(u(),q(J,{key:4,size:"xl",color:"kalkmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:j(()=>[...m[12]||(m[12]=[ee(" Kalkmark ",-1)])]),_:1})):U("",!0),o.species.ANNANmark?(u(),q(J,{key:5,size:"xl",color:"vanligmark",variant:"subtle",class:"shrink-0 inline-flex m-1 align-bottom"},{default:j(()=>[...m[13]||(m[13]=[ee(" Vanlig skogsmark ",-1)])]),_:1})):U("",!0)]),o.species.Kriteriedokumentation?(u(),q(le,{key:0,class:"my-4"},{default:j(()=>[h("div",{class:"flex justify-between cursor-pointer",onClick:g},[h("h1",Ks,[o.species.RL2020kat?(u(),T("div",Os,[h("div",{class:re([y(o.species.RL2020kat),"h-8 w-8 rounded-full flex items-center justify-center text-white"])},Z(V(o.species.RL2020kat)),3),h("h1",qs,Z(_(o.species.RL2020kat)),1)])):U("",!0)]),p(M,{name:"mdi:chevron-down",class:re(["h-6 w-6 transition-transform duration-300 ease-in-out",i.value?"rotate-180":"rotate-0"])},null,8,["class"])]),o.species.Kriteriedokumentation?(u(),T("div",{key:0,class:re(["relative overflow-hidden transition-transform duration-300 ease-in-out",[i.value?"max-h-auto":"max-h-20"]]),onClick:g},[h("h1",Ws,Z(d.value),1)],2)):U("",!0)]),_:1})):U("",!0),m[16]||(m[16]=h("h1",{class:"text-lg font-medium mt-4"},"Läs mer på",-1)),o.species.Artfakta!="Information saknas"?(u(),q(ce,{key:1,to:P(o.species.Artfakta),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:j(()=>[...m[14]||(m[14]=[ee(" Artfakta.se ",-1)])]),_:1},8,["to"])):U("",!0),m[17]||(m[17]=h("br",null,null,-1)),o.species.Svampguiden&&o.species.Svampguiden!=="0"?(u(),q(ce,{key:2,to:P(o.species.Svampguiden),target:"_blank",class:"text-lg mb-3 underline text-primary-500"},{default:j(()=>[...m[15]||(m[15]=[ee(" Svampguiden.com ",-1)])]),_:1},8,["to"])):U("",!0)])])}}},Xs={key:0,class:"fixed inset-0 z-50 flex pointer-events-none group"},Ys={class:"absolute top-3 left-3 items-end w-full gap-2 z-10 flex"},Zs={class:"h-full relative overflow-auto pb-16 no-scrollbar"},Js={__name:"MySlideover",props:{modelValue:{type:Boolean,default:!1},pinned:{type:Boolean,default:!0},expanded:{type:Boolean,default:!1}},emits:["update:modelValue","update:pinned"],setup(o,{emit:t}){const e=o,n=t,i=G(e.pinned);ae(()=>e.pinned,g=>{i.value=g});function s(){i.value=!i.value,n("update:pinned",i.value)}return(g,d)=>{const l=pe;return u(),q(Fe,{name:"slide-in-right"},{default:j(()=>[o.modelValue?(u(),T("div",Xs,[i.value?U("",!0):(u(),T("div",{key:0,class:"fixed inset-0 pointer-events-auto",onClick:d[0]||(d[0]=b=>n("update:modelValue",!1))})),h("div",{ref:"panelRef",class:re(["ml-auto bg-white shadow-lg z-50 relative pointer-events-auto ring-1 ring-neutral-200 transition-all overflow-hidden",[i.value?"":"sm:ml-auto sm:m-2 sm:rounded",o.expanded?"w-[744px]":"w-screen sm:w-96"]]),onClick:d[2]||(d[2]=na(()=>{},["stop"]))},[h("div",Ys,[p(l,{class:"shadow hover:bg-white rounded-full mt-2 ml-1 md:m-0",color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},icon:"heroicons:x-mark",size:"lg",onClick:d[1]||(d[1]=b=>n("update:modelValue",!1))}),p(l,{class:re(["shadow hover:bg-white hidden md:flex rounded-full",i.value?"text-primary-500":"text-neutral-700"]),color:"neutral",variant:"soft",ui:{rounded:"rounded-full"},onClick:s,icon:"codicon:pinned",size:"lg"},null,8,["class"])]),h("div",Zs,[ge(g.$slots,"default",{},void 0,!0)])],2)])):U("",!0)]),_:3})}}},Qs=_e(Js,[["__scopeId","data-v-fb1058c4"]]),eo={slots:{root:"",list:"flex items-center gap-1",ellipsis:"pointer-events-none",label:"min-w-5 text-center",first:"",prev:"",item:"",next:"",last:""}},qt={__name:"UPagination",props:{as:{type:null,required:!1},firstIcon:{type:[String,Object],required:!1},prevIcon:{type:[String,Object],required:!1},nextIcon:{type:[String,Object],required:!1},lastIcon:{type:[String,Object],required:!1},ellipsisIcon:{type:[String,Object],required:!1},color:{type:null,required:!1,default:"neutral"},variant:{type:null,required:!1,default:"outline"},activeColor:{type:null,required:!1,default:"primary"},activeVariant:{type:null,required:!1,default:"solid"},showControls:{type:Boolean,required:!1,default:!0},size:{type:null,required:!1},to:{type:Function,required:!1},class:{type:null,required:!1},ui:{type:null,required:!1},defaultPage:{type:Number,required:!1},disabled:{type:Boolean,required:!1},itemsPerPage:{type:Number,required:!1,default:10},page:{type:Number,required:!1},showEdges:{type:Boolean,required:!1,default:!1},siblingCount:{type:Number,required:!1,default:2},total:{type:Number,required:!1,default:0}},emits:["update:page"],setup(o,{emit:t}){const e=o,n=t,i=ia(),{dir:s}=ua(),g=ca(),d=da(ga(e,"as","defaultPage","disabled","itemsPerPage","page","showEdges","siblingCount","total"),n),l=x(()=>e.firstIcon||(s.value==="rtl"?g.ui.icons.chevronDoubleRight:g.ui.icons.chevronDoubleLeft)),b=x(()=>e.prevIcon||(s.value==="rtl"?g.ui.icons.chevronRight:g.ui.icons.chevronLeft)),P=x(()=>e.nextIcon||(s.value==="rtl"?g.ui.icons.chevronLeft:g.ui.icons.chevronRight)),V=x(()=>e.lastIcon||(s.value==="rtl"?g.ui.icons.chevronDoubleLeft:g.ui.icons.chevronDoubleRight)),y=x(()=>pt({extend:pt(eo),...g.ui?.pagination||{}})());return(_,k)=>(u(),q(C(Ia),Ce(C(d),{class:y.value.root({class:[e.ui?.root,e.class]})}),{default:j(({page:S,pageCount:L})=>[p(C(Ya),{class:re(y.value.list({class:e.ui?.list}))},{default:j(({items:m})=>[o.showControls||i.first?(u(),q(C(Ka),{key:0,"as-child":"",class:re(y.value.first({class:e.ui?.first}))},{default:j(()=>[ge(_.$slots,"first",{},()=>[p(pe,{color:o.color,variant:o.variant,size:o.size,icon:l.value,to:o.to?.(1)},null,8,["color","variant","size","icon","to"])])]),_:3},8,["class"])):U("",!0),o.showControls||i.prev?(u(),q(C(as),{key:1,"as-child":"",class:re(y.value.prev({class:e.ui?.prev}))},{default:j(()=>[ge(_.$slots,"prev",{},()=>[p(pe,{color:o.color,variant:o.variant,size:o.size,icon:b.value,to:S>1?o.to?.(S-1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):U("",!0),(u(!0),T(fe,null,Se(m,(B,M)=>(u(),T(fe,{key:M},[B.type==="page"?(u(),q(C(Ja),{key:0,"as-child":"",value:B.value,class:re(y.value.item({class:e.ui?.item}))},{default:j(()=>[ge(_.$slots,"item",Ce({ref_for:!0},{item:B,index:M,page:S,pageCount:L}),()=>[p(pe,{color:S===B.value?o.activeColor:o.color,variant:S===B.value?o.activeVariant:o.variant,size:o.size,label:String(B.value),ui:{label:y.value.label()},to:o.to?.(B.value),square:""},null,8,["color","variant","size","label","ui","to"])])]),_:2},1032,["value","class"])):(u(),q(C(za),{key:1,"as-child":"",class:re(y.value.ellipsis({class:e.ui?.ellipsis}))},{default:j(()=>[ge(_.$slots,"ellipsis",{},()=>[p(pe,{as:"div",color:o.color,variant:o.variant,size:o.size,icon:o.ellipsisIcon||C(g).ui.icons.ellipsis},null,8,["color","variant","size","icon"])])]),_:3},8,["class"]))],64))),128)),o.showControls||i.next?(u(),q(C(es),{key:2,"as-child":"",class:re(y.value.next({class:e.ui?.next}))},{default:j(()=>[ge(_.$slots,"next",{},()=>[p(pe,{color:o.color,variant:o.variant,size:o.size,icon:P.value,to:S<L?o.to?.(S+1):void 0},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):U("",!0),o.showControls||i.last?(u(),q(C(qa),{key:3,"as-child":"",class:re(y.value.last({class:e.ui?.last}))},{default:j(()=>[ge(_.$slots,"last",{},()=>[p(pe,{color:o.color,variant:o.variant,size:o.size,icon:V.value,to:o.to?.(L)},null,8,["color","variant","size","icon","to"])])]),_:2},1032,["class"])):U("",!0)]),_:2},1032,["class"])]),_:3},16,["class"]))}},to=JSON.parse('[{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Norr","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Norr","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Norr","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Norr","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Granskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Granskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Tallskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"41-90"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"91"},{"geo":"Söder","forest":"Barrblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Lövblandskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövblandskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Lövskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Lövskog","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"1-40"},{"geo":"Söder","forest":"Lövskog","veg":"Lingon_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"Naturbete","veg":"Blåbär_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Örter_grupp","age":"allaåldrar"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"1-40"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"41-90"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"91"},{"geo":"Söder","forest":"EkBokskog","veg":"Blåbär_grupp","age":"allaåldrar"}]');function et(o,t,e,n){return!o||!t||!e||!n?!1:to.some(i=>i.geo===o&&i.forest===t&&i.age===e&&i.veg===n)}const ao={class:""},so={class:""},oo={key:0,class:"flex md:gap-2 mt-2 justify-between z-30"},ro={class:"flex gap-2 items-end justify-between w-full mb-2"},lo={class:"flex gap-2"},no={class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},io={key:1,class:"hidden md:flex"},uo={key:1,class:"flex my-1 gap-2 overflow-scroll",id:"scrollbar"},co={key:0,class:"flex gap-2 w-full mb-2"},go={class:""},vo={key:0,class:"md:flex justify-between items-center pb-2 md:pt-5 md:p-5 md:border-t-[1px] border-neutral-200 dark:border-neutral-700"},po={class:"flex h-fit shrink-0 gap-1 items-center justify-between"},mo={class:"flex"},fo={class:"hidden md:flex"},ho={key:0},bo={class:"flex justify-center"},ko={key:2},yo={class:"max-w-sm space-y-2 mt-2"},_o={__name:"SpeciesTable",props:{isNormalView:{type:Boolean,default:!1},dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"edna"},grupp:{type:String,default:"Svamp-grupp-släkte"},mat:{type:String,default:"matsvamp"},obs:{type:String,default:"sample_plot_count"},obsLabel:{type:String,default:"Förekomst"},columnVisibilityOverrides:{type:Object,default:()=>({})},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},searchTerm:{type:String,default:""}},emits:["enlarge","update:matsvampFilter","update:giftsvampFilter","update:gruppFilter","update:statusFilter","update:searchTerm"],setup(o,{emit:t}){const e=Be("(max-width: 767px)"),n=x(()=>e.value||l.isNormalView&&l.dataTypeFolder!=="edna"),i=t,s=G("");let g=null;function d(a){s.value=a,g&&clearTimeout(g),g=setTimeout(()=>{i("update:searchTerm",s.value)},300)}Lt(()=>{g&&clearTimeout(g)});const l=o,b=va("table"),P=n.value?{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1,[l.grupp]:!1,mark:!1,[l.mat]:!1,RL2020kat:!1,Commonname:!1,Scientificname:!1,images:!1,[l.obs]:!1}:{RankRed:!1,"Rank matsvamp":!1,"Rank giftsvamp":!1};l.dataType==="edna"&&(P.mark=!1);const V=G({...P,...l.columnVisibilityOverrides}),y=G([]),_=x(()=>{const a={};je.value.forEach(F=>{F.KALKmark&&(a.KALKmark=(a.KALKmark||0)+1),F.ANNANmark&&(a.ANNANmark=(a.ANNANmark||0)+1)});const c=b.value?.tableApi?.getFilteredRowModel()?.rows||[],N={};return c.forEach(F=>{const D=F.original;D.KALKmark&&(N.KALKmark=(N.KALKmark||0)+1),D.ANNANmark&&(N.ANNANmark=(N.ANNANmark||0)+1)}),[{label:`Kalkmark (${N.KALKmark||0}/${a.KALKmark||0})`,value:"KALKmark"},{label:`Vanlig skogsmark (${N.ANNANmark||0}/${a.ANNANmark||0})`,value:"ANNANmark"}]}),k=x(()=>_.value.map(a=>({label:a.label,type:"checkbox",checked:y.value.includes(a.value),onUpdateChecked(c){c?y.value.includes(a.value)||y.value.push(a.value):y.value=y.value.filter(N=>N!==a.value)},onSelect(c){c.preventDefault()}}))),S=x(()=>{const a=["Matsvamp","Giftsvamp"],c={};je.value.forEach(D=>{const W=D[l.mat];l.mat==="Nyasvamp-boken"?W&&String(W).toLowerCase()==="x"&&(c.Matsvamp=(c.Matsvamp||0)+1):W==1&&(c.Matsvamp=(c.Matsvamp||0)+1),(D.Giftsvamp||"").toLowerCase()==="x"&&(c.Giftsvamp=(c.Giftsvamp||0)+1)});const N=b.value?.tableApi?.getFilteredRowModel()?.rows||[],F={};return N.forEach(D=>{const W=D.original,te=W[l.mat];(l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te==1)&&(F.Matsvamp=(F.Matsvamp||0)+1),(W.Giftsvamp||"").toLowerCase()==="x"&&(F.Giftsvamp=(F.Giftsvamp||0)+1)}),a.map(D=>{const W=c[D]||0,te=F[D]||0;return{label:`${D} (${te}/${W})`,value:D}})}),L=G(l.isNormalView?500:10),m=G([]),B=G([]),M=G([]),X=x(()=>ne.value.map(a=>({label:a.label,type:"checkbox",checked:M.value.includes(a.value),onUpdateChecked(c){c?M.value.includes(a.value)||M.value.push(a.value):M.value=M.value.filter(N=>N!==a.value)},onSelect(c){c.preventDefault()}}))),K=x(()=>S.value.map(a=>({label:a.label,type:"checkbox",checked:m.value.includes(a.value),onUpdateChecked(c){c?m.value.includes(a.value)||m.value.push(a.value):m.value=m.value.filter(N=>N!==a.value)},onSelect(c){c.preventDefault()}}))),J=x(()=>w.value.map(a=>({label:a.label,type:"checkbox",checked:B.value.includes(a.value),onUpdateChecked(c){c?B.value.includes(a.value)||B.value.push(a.value):B.value=B.value.filter(N=>N!==a.value)},onSelect(c){c.preventDefault()}}))),le=x(()=>[{label:"Namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Commonname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Commonname",desc:!0}])}}]},{label:"Vetenskapligt namn",children:[{label:"A → Ö",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Scientificname",desc:!1}])}},{label:"Ö → A",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:"Scientificname",desc:!0}])}}]},{label:l.obsLabel||"Förekomst",children:[{label:"Högst → Lägst",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:l.obs,desc:!1}])}},{label:"Lägst → Högst",onSelect(a){a.preventDefault(),b.value?.tableApi?.setSorting([{id:l.obs,desc:!0}])}}]}]),ce=x(()=>[{label:"Grupp",children:X.value},{label:"Matsvamp",children:K.value},{label:"Status",children:J.value},{label:"Mark",children:k.value}]),ne=x(()=>{const a={};je.value.forEach(F=>{const D=F[l.grupp];D&&(a[D]=(a[D]||0)+1)});const c=b.value?.tableApi?.getFilteredRowModel()?.rows||[],N={};return c.forEach(F=>{const W=F.original[l.grupp];W&&(N[W]=(N[W]||0)+1)}),Object.keys(a).map(F=>{const D=a[F]||0,W=N[F]||0;return{label:`${I(F)} (${W}/${D})`,value:F}})}),w=x(()=>{const a=["LC","NT","EN","VU","CR","RE","DD"],c={};je.value.forEach(D=>{const W=D.RL2020kat;a.includes(W)?c[W]=(c[W]||0)+1:W===null||W==="0"||W===0||String(W).toUpperCase()==="NE"?c["Ej bedömd"]=(c["Ej bedömd"]||0)+1:String(W).toUpperCase()==="NA"&&(c["Ej tillämplig"]=(c["Ej tillämplig"]||0)+1),D.SIGNAL_art==="S"&&(c.Signalart=(c.Signalart||0)+1)});const N=b.value?.tableApi?.getFilteredRowModel()?.rows||[],F={};return N.forEach(D=>{const W=D.original,te=W.RL2020kat;a.includes(te)?F[te]=(F[te]||0)+1:te===null||te==="0"||te===0||String(te).toUpperCase()==="NE"?F["Ej bedömd"]=(F["Ej bedömd"]||0)+1:String(te).toUpperCase()==="NA"&&(F["Ej tillämplig"]=(F["Ej tillämplig"]||0)+1),W.SIGNAL_art==="S"&&(F.Signalart=(F.Signalart||0)+1)}),[...a.map(D=>{const W=c[D]||0,te=F[D]||0;return{label:`${O(D)} (${te}/${W})`,value:D}}),(()=>{const D=c["Ej bedömd"]||0;return{label:`Ej bedömd (${F["Ej bedömd"]||0}/${D})`,value:"Ej bedömd"}})(),(()=>{const D=c["Ej tillämplig"]||0;return{label:`Ej tillämplig (${F["Ej tillämplig"]||0}/${D})`,value:"Ej tillämplig"}})(),(()=>{const D=c.Signalart||0;return{label:`Signalart (${F.Signalart||0}/${D})`,value:"Signalart"}})()]}),v=G({pageIndex:0,pageSize:10}),r=Je();function f(a,c){r.selectSpecies(a.original,"edna")}const I=a=>a?a.charAt(0).toUpperCase()+a.slice(1).toLowerCase():"",R=x(()=>$e.value.length>0?$e.value[0].sample_env_count:0),A=a=>`/images/svampgrupp/${{övrigt:"ovrigt.webp",hattsvamp:"hattsvamp.png",kantarell:"kantarell.webp",sopp:"sopp.png",taggsvamp:"taggsvamp.png",fingersvamp:"fingersvamp.webp",tryffel:"tryffel.webp",skinnsvamp:"skinnsvamp.webp",skålsvamp:"skalsvamp.webp"}[a]||"default-icon.webp"}`,E=a=>({LC:"success",NT:"error",EN:"error",VU:"error",CR:"error",RE:"error",DD:"neutral"})[a]||"neutral",O=a=>{const c={LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"};return a===null||a===0||String(a).toUpperCase()==="NE"?"Ej bedömd":String(a).toUpperCase()==="NA"?"Ej tillämplig":c[a]||"Ej bedömd"},Q=l.obs.startsWith("Rank"),Y=G(Q?[{id:l.obs,desc:!1},{id:"Commonname",desc:!1}]:[{id:l.obs,desc:!0}]),z=Ze,ve=pa,se=pe,oe=_a,he=it,be=[{accessorKey:"images",header:"Bild",sortable:!1,cell:({row:a})=>{const c=a.getValue("images")||[];return c.length?H("img",{src:c[0],class:"h-14 w-20 object-cover -my-3 rounded-md border border-neutral-100 dark:border-neutral-800",alt:a.original?.Commonname?`${a.original.Commonname} bild`:"Species image",loading:"lazy",decoding:"async",height:300,width:450}):null},meta:{headerText:"Bild"}},{accessorKey:"Commonname",header:({column:a})=>{const c=a.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:"Namn",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>H("div",{class:"text-neutral-700 dark:text-neutral-200 font-semibold truncate text-[16px]"},I(a.getValue("Commonname"))),filterFn:(a,c,N)=>{if(!N)return!0;const F=String(N).toLowerCase(),D=String(a.getValue("Commonname")||"").toLowerCase(),W=String(a.getValue("Scientificname")||"").toLowerCase();return D.includes(F)||W.includes(F)},meta:{headerText:"Namn"}},{accessorKey:"Scientificname",header:({column:a})=>{const c=a.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:"Latinskt namn",icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>H("div",{class:"truncate  text-[16px]"},a.getValue("Scientificname")),meta:{headerText:"Latinskt namn"}},{accessorKey:l.grupp,header:()=>H(oe,{items:X.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Grupp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,N)=>!N||N.length===0?!0:N.includes(a.getValue(c)),cell:({row:a})=>{const c=a.getValue(l.grupp);return c!=="Saknas"?H("img",{src:A(c),alt:`${c||"Svamp"} ikon`,class:"w-6",loading:"lazy",decoding:"async"}):H(he,{name:"heroicons:x-mark-20-solid",class:"size-7"})},meta:{headerText:"Grupp"}},{accessorKey:"mark",enableHiding:l.dataType!=="edna",header:()=>H(oe,{items:k.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Mark",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,N)=>{if(!N||N.length===0)return!0;let F=!1;return N.includes("KALKmark")&&a.original.KALKmark&&(F=!0),N.includes("ANNANmark")&&a.original.ANNANmark&&(F=!0),F},cell:({row:a})=>H("div",{class:"flex items-center space-x-1"},[a.original.KALKmark&&H(z,{color:"kalkmark",variant:"subtle"},()=>"Kalkmark"),a.original.ANNANmark&&H(z,{color:"vanligmark",variant:"subtle"},()=>"Vanlig skogsmark")].filter(Boolean)),meta:{headerText:"Mark"}},{accessorKey:l.mat,header:()=>H(oe,{items:K.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Matsvamp",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,N)=>{if(!N||N.length===0)return!0;let F=!1;return N.includes("Matsvamp")&&(l.mat==="Nyasvamp-boken"?F=F||a.getValue(c)?.toLowerCase()==="x":F=F||a.getValue(c)===1),N.includes("Giftsvamp")&&(F=F||(a.original.Giftsvamp||"").toLowerCase()==="x"),F},cell:({row:a})=>H("div",{class:"flex gap-1"},[(l.mat==="Nyasvamp-boken"?a.getValue(l.mat)?.toLowerCase()==="x":a.getValue(l.mat)===1)&&H(z,{color:"warning",variant:"subtle"},()=>"Matsvamp"),a.original.Giftsvamp?.toLowerCase()==="x"&&H(z,{color:"poison",variant:"subtle"},()=>"Giftsvamp")].filter(Boolean)),meta:{headerText:"Matsvamp"}},{accessorKey:"RL2020kat",header:()=>H(oe,{items:J.value,content:{align:"start"},ui:{content:"w-48"}},{default:()=>H(se,{label:"Status",variant:"ghost",color:"neutral",icon:"i-lucide-list-filter"})}),filterFn:(a,c,N)=>{if(!N||N.length===0)return!0;const F=a.getValue(c);return N.some(D=>D==="Ej bedömd"?F===null||F===0||F==="0"||String(F).toUpperCase()==="NE":D==="Ej tillämplig"?String(F).toUpperCase()==="NA":D==="Signalart"?a.original.SIGNAL_art==="S":D===F)},cell:({row:a})=>{const c=a.getValue("RL2020kat"),N=H(z,{color:E(c),variant:"subtle"},()=>O(c)),F=a.original.SIGNAL_art==="S"?H(z,{color:"signal",variant:"subtle"},"Signalart"):null;return H("div",{class:"flex gap-1"},[N,F].filter(Boolean))},meta:{headerText:"Status"}},{accessorKey:l.obs,header:({column:a})=>{const c=a.getIsSorted();return H(se,{color:"neutral",variant:"ghost",label:l.obsLabel,icon:c?c==="asc"?"i-lucide-arrow-up-narrow-wide":"i-lucide-arrow-down-wide-narrow":"i-lucide-arrow-up-down",class:"-mx-2.5",onClick:()=>a.toggleSorting(c==="asc")})},cell:({row:a})=>{const c=a.getValue(l.obs);return l.obs.startsWith("Rank")?c===3?H("span",{class:"text-red-700"},"Sällsynt"):c===2?H("span",{class:"text-yellow-600"},"Ovanlig"):null:H(z,{variant:"subtle",color:"secondary"},()=>`${c} skogar`)},meta:{headerText:l.obsLabel}}],xe=[{header:"Namn",cell:({row:a})=>{const c=a.original.images||[];let N=null;const F=l.filterPoison?a.original["Rank giftsvamp"]:l.filterEdible?a.original["Rank matsvamp"]:a.original.RankRed;F===3?N=H(he,{name:"codicon:circle-large-filled",class:"text-red-700 ml-1 size-3.5"}):F===2&&(N=H(he,{name:"codicon:color-mode",class:"text-yellow-600 ml-1 size-3.5"}));const D=c.length?H("img",{src:c[0],alt:a.original.Commonname||"Svampbild",class:"h-20 w-26 object-cover rounded border-[0.5px] border-neutral-200 dark:border-neutral-800 md:ml-2",loading:"lazy",decoding:"async",height:300,width:450}):H("div",{class:"h-20 w-26 rounded-sm flex items-center justify-center bg-neutral-100 dark:bg-neutral-800 md:ml-2"},[H("img",{src:A(a.original[l.grupp]),alt:`${a.original[l.grupp]||"Svamp"} icon`,class:"w-6 h-6",loading:"lazy",decoding:"async"})]),W=H("div",{class:"flex items-center text-neutral-700 dark:text-neutral-200"},[H("div",{class:"flex-1 min-w-0"},[H("div",{class:"text-lg font-semibold whitespace-normal break-words"},[I(a.original.Commonname),N]),H("small",{class:"text-xs text-neutral-500 dark:text-neutral-400 italic block truncate max-w-48"},a.original.Scientificname)])]),te=a.original[l.mat];(l.mat==="Nyasvamp-boken"?te&&String(te).toLowerCase()==="x":te===1)&&H(z,{color:"warning",variant:"subtle",size:"sm"},()=>"Matsvamp");const $=H("div",{class:"flex flex-wrap gap-2 mt-2 "},[a.original.RL2020kat!=="LC"&&a.original.RL2020kat!=="NA"&&a.original.RL2020kat!=="NE"&&a.original.RL2020kat!=="0"?H(z,{color:E(a.original.RL2020kat),variant:"subtle",size:"md"},()=>O(a.original.RL2020kat)):null,a.original.SIGNAL_art==="S"?H(z,{color:"signal",variant:"subtle",size:"md"},()=>"Signalart"):null,l.dataType==="edna"?H(ve,{modelValue:a.getValue(l.obs),max:R.value,color:"secondary",size:"sm",status,indeterminate:!1,"onUpdate:modelValue":()=>{}}):null].filter(Boolean));return H("div",{class:"flex space-x-4 items-start"},[D,H("div",{class:"flex flex-col flex-1"},[W,$])])},meta:{headerText:"Namn"}},...be.map(a=>a.accessorKey==="mark"?{...a,enableHiding:l.dataType!=="edna"}:a)],we=x(()=>n.value?xe:be),Re=x(()=>({thead:n.value?"hidden":"hidden md:table-header-group bg-neutral-50 dark:bg-neutral-800/40",tbody:n.value?"divide-none":"divide-none md:divide-dotted",td:n.value?"px-0 pt-2 pb-3 cursor-pointer":"px-0 md:px-4 md:pt-4 md:pb-4 pt-2 pb-3"})),Me=G(0),Oe=G(0),$e=G([]),Ee=G(!0),dt=G([]),Wt=(a,c,N)=>{const F=(c[0]-a[0])/(N-1),D=(c[1]-a[1])/(N-1),W=(c[2]-a[2])/(N-1),te=[];for(let ie=0;ie<N;ie++){const $=Math.round(a[0]+F*ie),me=Math.round(a[1]+D*ie),ue=Math.round(a[2]+W*ie);te.push(`rgb(${$}, ${me}, ${ue})`)}return te},qe=()=>{$e.value=[],Me.value=0,Oe.value=0,dt.value=[]},Ht=async()=>{if([de.geography,de.forestType,de.standAge,de.vegetationType].some(N=>!N)){qe(),Ee.value=!1;return}if(l.dataTypeFolder==="edna"&&!et(de.geography,de.forestType,de.standAge,de.vegetationType)){qe(),Ee.value=!1;return}const c=`${l.dataType}-${de.geography}-${de.forestType}-${de.standAge}-${de.vegetationType}.json`;try{const N=await fetch(`/${l.dataTypeFolder}/${c}`);if(!N.ok){if(N.status===404){qe(),Ee.value=!1;return}throw new Error(`Failed to fetch data from ${c}`)}$e.value=await N.json(),Ee.value=!1,$e.value.forEach((te,ie)=>{te.colorIndex=ie});const F=$e.value.length;Me.value=Math.floor(F*.1),Oe.value=F-Me.value;const D=Wt([82,82,82],[212,212,212],Me.value),W=Xt(Oe.value);dt.value=[...D,...W]}catch(N){console.error("Error fetching data:",N),qe(),Ee.value=!1}};function Xt(a){const c=[];for(let D=0;D<a;D++){const W=45+300/(a-1||1)*D;c.push(`hsl(${W%360}, 70%, 50%)`)}return c}const de=Ne();ae(()=>[de.geography,de.forestType,de.standAge,de.vegetationType],()=>{Ee.value=!0,Ht()},{immediate:!0});const gt=G(""),je=x(()=>{let a=$e.value;return gt.value&&(a=a.filter(c=>Object.values(c).some(N=>String(N).toLowerCase().includes(gt.value.toLowerCase())))),l.filterEdible?a=a.filter(c=>{const N=c[l.mat];return N&&String(N).toLowerCase()==="x"}):l.filterPoison&&(a=a.filter(c=>{const N=c[l.mat];return!(N&&String(N).toLowerCase()==="x")})),a}),Yt=x(()=>je.value);ae(L,a=>{let c=a==="Alla"?He.value||$e.value.length:Number(a);v.value.pageSize=c,v.value.pageIndex=0,b.value?.tableApi&&(b.value.tableApi.setPageSize(c),b.value.tableApi.setPageIndex(0))});const Zt=x(()=>b.value?.tableApi?.getPaginationRowModel().rows||[]),We=x(()=>b.value?.tableApi?.getState().pagination||{pageIndex:0,pageSize:10}),Jt=x(()=>We.value.pageIndex*We.value.pageSize+1),Qt=x(()=>{const a=We.value.pageIndex*We.value.pageSize+Zt.value.length;return a>He.value?He.value:a}),He=x(()=>b.value?.tableApi?.getFilteredRowModel()?.rows.length||0),vt=x(()=>{const a=l.searchTerm?[{id:"Commonname",value:l.searchTerm}]:[];return m.value&&m.value.length>0&&a.push({id:l.mat,value:m.value}),B.value&&B.value.length>0&&a.push({id:"RL2020kat",value:B.value}),M.value&&M.value.length>0&&a.push({id:l.grupp,value:M.value}),y.value&&y.value.length>0&&a.push({id:"mark",value:y.value}),a});return ae(vt,a=>{b.value?.tableApi&&b.value.tableApi.setColumnFilters(a)}),ae(vt,a=>{const N=a.find(ie=>ie.id===l.mat)?.value??[];i("update:matsvampFilter",N.includes("Matsvamp")),i("update:giftsvampFilter",N.includes("Giftsvamp"));const D=a.find(ie=>ie.id===l.grupp)?.value??[];i("update:gruppFilter",D);const te=a.find(ie=>ie.id==="RL2020kat")?.value??[];i("update:statusFilter",te)},{deep:!0,immediate:!0}),(a,c)=>{const N=Ft,F=Ct,D=Tt,W=Sa,te=qt,ie=Et;return u(),T("div",ao,[h("div",so,[n.value?U("",!0):(u(),T("div",oo,[h("div",ro,[p(N,{"model-value":C(b)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"max-w-sm min-w-[12ch] hidden md:block",placeholder:"Sök på namn",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":c[0]||(c[0]=$=>{C(b)?.tableApi?.getColumn("Commonname")?.setFilterValue($),d($)}),variant:"ghost"},null,8,["model-value"]),h("div",lo,[h("div",no,[y.value.length?(u(!0),T(fe,{key:0},Se(y.value,$=>(u(),T("span",{key:"mark-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="KALKmark"?"kalkmark":$==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>y.value=y.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z($==="KALKmark"?"Kalkmark":$==="ANNANmark"?"Vanlig skogsmark":I($)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),m.value.length?(u(!0),T(fe,{key:1},Se(m.value,$=>(u(),T("span",{key:"svamp-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Matsvamp"?"warning":$==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>m.value=m.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z(I($)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),M.value.length?(u(!0),T(fe,{key:2},Se(M.value,$=>(u(),T("span",{key:"grupp-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>M.value=M.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z(I($)),1)]),_:2},1032,["onClick"])]))),128)):U("",!0),B.value.length?(u(!0),T(fe,{key:3},Se(B.value,$=>(u(),T("span",{key:"status-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Signalart"?"signal":E($),class:"cursor-pointer mb-2 md:mb-0",onClick:me=>B.value=B.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z($==="Signalart"?"Signalart":O($)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0)]),n.value?U("",!0):(u(),q(C(oe),{key:0,class:"flex",items:C(b)?.tableApi?.getAllColumns()?.filter($=>$.getCanHide())?.map($=>({label:$.columnDef.meta?.headerText||C(ma)($.id),type:"checkbox",checked:$.getIsVisible(),onUpdateChecked(me){C(b)?.tableApi?.getColumn($.id)?.toggleVisibility(!!me)},onSelect(me){me?.preventDefault()}})),content:{align:"end"}},{default:j(()=>[p(C(se),{label:"Kolumner",color:"neutral",variant:"ghost","trailing-icon":"i-lucide-chevron-down"})]),_:1},8,["items"])),o.isNormalView?U("",!0):(u(),T("div",io,[p(F,{modelValue:L.value,"onUpdate:modelValue":c[1]||(c[1]=$=>L.value=$),items:[{value:10,label:"10 rader"},{value:20,label:"20 rader"},{value:30,label:"30 rader"},{value:40,label:"40 rader"},{value:50,label:"50 rader"},{value:"Alla",label:"Alla"}],"item-value":"value","item-label":"label",placeholder:"Rader per sida",variant:"ghost"},null,8,["modelValue"])]))])])])),n.value?(u(),T("div",uo,[y.value.length?(u(!0),T(fe,{key:0},Se(y.value,$=>(u(),T("span",{key:"mark-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="KALKmark"?"kalkmark":$==="ANNANmark"?"vanligmark":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>y.value=y.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z($==="KALKmark"?"Kalkmark":$==="ANNANmark"?"Vanlig skogsmark":I($)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),m.value.length?(u(!0),T(fe,{key:1},Se(m.value,$=>(u(),T("span",{key:"svamp-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Matsvamp"?"warning":$==="Giftsvamp"?"poison":"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>m.value=m.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z(I($)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0),M.value.length?(u(!0),T(fe,{key:2},Se(M.value,$=>(u(),T("span",{key:"grupp-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:"neutral",class:"cursor-pointer mb-2 md:mb-0",onClick:me=>M.value=M.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z(I($)),1)]),_:2},1032,["onClick"])]))),128)):U("",!0),B.value.length?(u(!0),T(fe,{key:3},Se(B.value,$=>(u(),T("span",{key:"status-"+$},[p(C(z),{"trailing-icon":"i-heroicons-x-mark-solid",variant:"subtle",color:$==="Signalart"?"signal":E($),class:"cursor-pointer mb-2 md:mb-0",onClick:me=>B.value=B.value.filter(ue=>ue!==$)},{default:j(()=>[ee(Z($==="Signalart"?"Signalart":O($)),1)]),_:2},1032,["color","onClick"])]))),128)):U("",!0)])):U("",!0)]),n.value?(u(),T("div",co,[p(C(oe),{size:C(e)?"xl":"md",items:le.value,content:{align:"start"}},{default:j(()=>[p(C(se),{variant:C(e)?"soft":"ghost",icon:"i-lucide-arrow-up-down",size:C(e)?"xl":"md",label:(C(e),null),color:"neutral",trailing:""},null,8,["variant","size","label"])]),_:1},8,["size","items"]),p(C(oe),{size:C(e)?"xl":"md",items:ce.value,content:{align:"start"}},{default:j(()=>[p(C(se),{variant:C(e)?"soft":"ghost",icon:"i-lucide-list-filter",size:C(e)?"xl":"md",label:(C(e),null),color:"neutral"},null,8,["variant","size","label"])]),_:1},8,["size","items"]),p(N,{variant:C(e)?"soft":"ghost","model-value":C(b)?.tableApi?.getColumn("Commonname")?.getFilterValue()||"",class:"w-full min-w-[12ch]",placeholder:"Sök på namn",size:C(e)?"xl":"md",icon:"i-heroicons-magnifying-glass","onUpdate:modelValue":c[2]||(c[2]=$=>{C(b)?.tableApi?.getColumn("Commonname")?.setFilterValue($),d($)})},null,8,["variant","model-value","size"])])):U("",!0),p(D,{ui:{border:"border-muted/50"},class:"mb-2"}),je.value?(u(),T("div",{key:1,class:re([(o.isNormalView,"")])},[h("div",go,[p(W,{ref_key:"table",ref:b,"column-visibility":V.value,"onUpdate:columnVisibility":c[3]||(c[3]=$=>V.value=$),pagination:v.value,"onUpdate:pagination":c[4]||(c[4]=$=>v.value=$),data:Yt.value,columns:we.value,sticky:"",loading:Ee.value,sorting:Y.value,"onUpdate:sorting":c[5]||(c[5]=$=>Y.value=$),onSelect:f,autoResetAll:!0,"pagination-options":C(e)&&!o.isNormalView?!1:o.isNormalView?void 0:{getPaginationRowModel:C(xa)()},class:re([{"":o.isNormalView},"rounded-sm"]),ui:Re.value},null,8,["column-visibility","pagination","data","columns","loading","sorting","pagination-options","class","ui"]),n.value?U("",!0):(u(),T("div",vo,[h("div",po,[h("h1",mo,[c[8]||(c[8]=ee(" Visar ",-1)),h("span",fo,"  "+Z(Jt.value)+" till  ",1),ee(" "+Z(Qt.value)+" av "+Z(He.value)+" arter ",1)]),o.isNormalView?(u(),q(C(se),{key:0,class:"md:hidden",color:"neutral",variant:"soft",label:"Visa alla",size:"md",onClick:c[6]||(c[6]=$=>i("enlarge"))})):U("",!0)]),h("div",null,[!o.isNormalView&&L.value!=="Alla"&&!C(e)?(u(),T("div",ho,[h("div",bo,[p(te,{"active-variant":"ghost",variant:"ghost","default-page":(C(b)?.tableApi?.getState().pagination.pageIndex||0)+1,"items-per-page":C(b)?.tableApi?.getState().pagination.pageSize,total:C(b)?.tableApi?.getFilteredRowModel().rows.length,"onUpdate:page":c[7]||(c[7]=$=>C(b)?.tableApi?.setPageIndex($-1))},null,8,["default-page","items-per-page","total"])])])):U("",!0)])]))])],2)):(u(),T("div",ko,[h("div",yo,[p(ie,{class:"h-4 w-full rounded"}),p(ie,{class:"h-4 w-[85%] rounded"})])]))])}}},tt=_e(_o,[["__scopeId","data-v-740b2533"]]),xo={key:0,class:"flex justify-end gap-2 mb-2 mx-2"},So=ke({__name:"barChart",props:{searchTerm:{type:String,default:""},matsvampFilter:{type:Boolean,default:!1},giftsvampFilter:{type:Boolean,default:!1},gruppFilter:{type:Array,default:()=>[]},groupKey:{type:String,default:"Svamp-grupp-släkte"},statusFilter:{type:Array,default:()=>[]}},setup(o){const t=o,e=["100%","200%","400%","800%"],n=G(0),i=x(()=>e[n.value]),s=G([]),g=Ne();function d(v){return v.sort((r,f)=>f.sample_plot_count-r.sample_plot_count)}function l(v,r,f){if(f<=0)return[];const I=(r[0]-v[0])/(f-1||1),R=(r[1]-v[1])/(f-1||1),A=(r[2]-v[2])/(f-1||1),E=[];for(let O=0;O<f;O++){const Q=Math.round(v[0]+I*O),Y=Math.round(v[1]+R*O),z=Math.round(v[2]+A*O);E.push(`rgb(${Q}, ${Y}, ${z})`)}return E}function b(v){const r=[];for(let R=0;R<v;R++){const A=45+300/(v-1||1)*R;r.push(`hsl(${A%360}, 70%, 50%)`)}return r}async function P(){const v=[g.geography,g.forestType,g.standAge,g.vegetationType];if(v.some(f=>!f)){s.value=[];return}if(!et(...v)){s.value=[];return}const r=`edna-${g.geography}-${g.forestType}-${g.standAge}-${g.vegetationType}.json`;try{const f=await fetch(`/edna/${r}`);if(!f.ok){if(f.status===404){s.value=[];return}throw new Error(`Failed to fetch ${r}`)}let I=await f.json();I=d(I);const R=I.length,A=Math.floor(R*.1),E=R-A,O=l([82,82,82],[212,212,212],A),Q=b(E),Y=[...O,...Q];s.value=I.map((z,ve)=>({...z,fillColor:Y[ve]||"var(--ui-primary)"}))}catch(f){console.error("Error fetching chart data:",f),s.value=[]}}Ke(P),ae(()=>[g.geography,g.forestType,g.standAge,g.vegetationType],P,{immediate:!0});const V=(v,r)=>r,y=v=>v.sample_plot_count,_=(v,r)=>{const f=B.value[r];if(!f)return"";const I=t.searchTerm.trim().toLowerCase(),R=String(f.Commonname||"").toLowerCase(),A=String(f.Scientificname||"").toLowerCase(),E=I?R.includes(I)||A.includes(I):!0,O=t.statusFilter.length>0,Q=t.matsvampFilter||t.giftsvampFilter,Y=t.gruppFilter.length>0;if(!O&&!Q&&!Y&&t.searchTerm.trim()!=="")return E?k(f.Commonname):"";const z=O&&t.statusFilter.includes("Signalart")&&f.SIGNAL_art==="S",ve=t.statusFilter.filter(Re=>Re!=="Signalart"),se=O&&t.statusFilter.includes("Ej bedömd")&&(f.RL2020kat===null||f.RL2020kat===0||f.RL2020kat==="0"||String(f.RL2020kat).toUpperCase()==="NE"),oe=O&&t.statusFilter.includes("Ej tillämplig")&&String(f.RL2020kat).toUpperCase()==="NA",he=O?z||ve.includes(f.RL2020kat):!1,be=t.matsvampFilter?f.matsvamp==1:!1,xe=t.giftsvampFilter?(f.Giftsvamp||"").toLowerCase()==="x":!1,we=Y?t.gruppFilter.includes(f[t.groupKey]):!1;return O?!Q&&!Y?E&&(z||he||se||oe)?k(f.Commonname):"":E&&(z||he||se||oe)&&(Q?be||xe:!0)&&(Y?we:!0)?k(f.Commonname):"":Q||Y?Q&&!Y?E&&(be||xe)?k(f.Commonname):"":!Q&&Y?E&&we?k(f.Commonname):"":E&&(be||xe)&&we?k(f.Commonname):"":""};function k(v){return v?v.charAt(0).toUpperCase()+v.slice(1):""}const S=G(null);function L(v){if(!v)return S.value=null,'<div class="p-2 text-sm text-neutral-500">Ingen data</div>';S.value=v;const r=v.matsvamp==1?'<div class="font-md bg-yellow-50 border border-yellow-200 text-yellow-500 text-xs rounded-md py-0.5 px-1">Matsvamp</div>':"",f=v.Giftsvamp==="x"?'<div class="font-md bg-lime-50 border border-lime-200 text-lime-500 text-xs rounded-md py-0.5 px-1">Giftsvamp</div>':"",I={NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",DD:"Kunskapsbrist",RE:"Nationellt utdöd"},R=I[v.RL2020kat]?`<div class="font-md bg-rose-50 border border-rose-200 text-rose-500 text-xs rounded-md py-0.5 px-1">${I[v.RL2020kat]}</div>`:"",A=v.SIGNAL_art==="S"?'<div class="font-md bg-teal-50 border border-teal-200 text-teal-500 text-xs rounded-md py-0.5 px-1">Signalarter</div>':"";return`
    <div class="p-2">
      <img src="/images/svampgrupp/${v["Svamp-grupp-släkte"]}.png" class="h-5 mb-1" />
      <div class="text-sm flex gap-1">
        <strong>${k(v.Commonname)}</strong> <em>${k(v.Scientificname)}</em>
      </div>
      <div class="text-sm text-neutral-500">
        Påträffad i ${v.sample_plot_count} av ${v.sample_env_count} skogar
      </div>
      <div class="flex gap-1 mt-1">
        ${r} ${f} ${R} ${A}
      </div>
    </div>
  `}const m={[ut.selectors.bar]:L},B=x(()=>{const v="#d4d4d4";return s.value.map(r=>{if(ce.value&&r.Scientificname===le.selectedSpecies?.Scientificname)return{...r,barColor:"#b1835e"};const f=t.searchTerm.trim().toLowerCase(),I=String(r.Commonname||"").toLowerCase(),R=String(r.Scientificname||"").toLowerCase(),A=f?I.includes(f)||R.includes(f):!0,E=t.statusFilter.length>0,O=t.matsvampFilter||t.giftsvampFilter,Q=t.gruppFilter.length>0;if(!E&&!O&&!Q&&t.searchTerm.trim()!=="")return{...r,barColor:A?"#8b5cf6":v};const Y=E&&t.statusFilter.includes("Signalart")&&r.SIGNAL_art==="S",z=t.statusFilter.filter(we=>we!=="Signalart"),ve=E&&t.statusFilter.includes("Ej bedömd")&&(r.RL2020kat===null||r.RL2020kat===0||r.RL2020kat==="0"||String(r.RL2020kat).toUpperCase()==="NE"),se=E&&t.statusFilter.includes("Ej tillämplig")&&String(r.RL2020kat).toUpperCase()==="NA",oe=E?Y||z.includes(r.RL2020kat):!1,he=t.matsvampFilter?r.matsvamp==1:!1,be=t.giftsvampFilter?(r.Giftsvamp||"").toLowerCase()==="x":!1,xe=Q?t.gruppFilter.includes(r[t.groupKey]):!1;if(E){if(!O&&!Q)return A&&Y?{...r,barColor:"#14b8a6"}:A&&(Y||oe||ve||se)?Y?{...r,barColor:"#14b8a6"}:r.RL2020kat==="LC"?{...r,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(r.RL2020kat)?{...r,barColor:"#ef4444"}:ve||se?{...r,barColor:"#737373"}:{...r,barColor:"#1f2937"}:{...r,barColor:v};if(A&&(Y||oe||ve||se)&&(O?he||be:!0)&&(Q?xe:!0)){if(Y)return{...r,barColor:"#14b8a6"};if(z.length>0)return r.RL2020kat==="LC"?{...r,barColor:"#22c55e"}:["NT","EN","VU","CR"].includes(r.RL2020kat)?{...r,barColor:"#ef4444"}:ve||se?{...r,barColor:"#737373"}:{...r,barColor:"#1f2937"};if(t.matsvampFilter&&he)return{...r,barColor:"#eab308"};if(t.giftsvampFilter&&be)return{...r,barColor:"#84cc16"};if(Q&&xe)return{...r,barColor:"#000000"}}return{...r,barColor:v}}if(O||Q){if(O&&!Q)return A&&he?{...r,barColor:"#eab308"}:A&&be?{...r,barColor:"#84cc16"}:{...r,barColor:v};if(!O&&Q)return A&&xe?{...r,barColor:"#000000"}:{...r,barColor:v};if(A&&(he||be)&&xe){if(he)return{...r,barColor:"#eab308"};if(be)return{...r,barColor:"#84cc16"}}return{...r,barColor:v}}return{...r,barColor:r.fillColor||"var(--ui-primary)"}})}),M=v=>v.barColor,X=x(()=>B.value.length>0);ae(B,v=>{v.length||(S.value=null)});function K(){n.value<e.length-1&&n.value++}function J(){n.value>0&&n.value--}const le=Je(),ce=x(()=>le.selectedSpecies!==null),ne=Be("(max-width: 767px)");function w(v){S.value?le.selectSpecies(S.value,"edna"):console.log("No datum available from tooltip.")}return(v,r)=>{const f=pe;return u(),T("div",null,[C(ne)?U("",!0):(u(),T("div",xo,[p(f,{onClick:J,icon:"i-heroicons-magnifying-glass-minus",color:"neutral",variant:"ghost"}),p(f,{onClick:K,icon:"i-heroicons-magnifying-glass-plus",color:"neutral",variant:"ghost"})])),C(ne)?U("",!0):(u(),T("div",{key:1,class:re(["w-full overflow-y-auto overflow-x-scroll",{"bar-chart-container":n.value===0}]),onClick:w},[p(C(Ra),{data:B.value,width:i.value,height:"200"},{default:j(()=>[p(C(vs),{data:B.value,x:V,y,color:M,barPadding:.1},null,8,["data"]),p(C(bt),{gridLine:!1,type:"x",tickTextAnchor:"start",tickTextAngle:"30",numTicks:B.value.length,tickTextFitMode:"trim",tickTextWidth:150,tickTextAlign:"left","tick-format":_},null,8,["numTicks"]),p(C(bt),{type:"y",label:"Antal skogar",gridLine:!1}),X.value?(u(),q(C(Ma),{key:0,triggers:m,followCursor:!0})):U("",!0),X.value?(u(),q(C(ds),{key:1,color:M,template:L})):U("",!0)]),_:1},8,["data","width"])],2))])}}}),wo=Object.assign(_e(So,[["__scopeId","data-v-d920ae28"]]),{__name:"BarChart"}),at=fa("tabs",{state:()=>({componentTabs:{EdnaComponent:"columnChart",RedlistedComponent:"grid",FullscreenEdible:"grid",FullscreenPoison:"grid"}}),getters:{getActiveTab:o=>t=>o.componentTabs[t]||"grid"},actions:{setActiveTab(o,t){this.componentTabs[o]=t}}}),Co={class:"md:flex justify-between relative"},No={class:"md:flex gap-4"},$o={class:"md:mt-0 mt-1 mb-1 md:mb-2"},Lo={class:"text-3xl font-medium flex items-center text-secondary-500"},To={class:"flex gap-2"},Ao={class:"text-md text-neutral-500"},Vo={class:"justify-between hidden"},Eo={class:"flex gap-3 items-start"},Fo={key:0,class:""},Bo={key:1,class:""},Po=ke({__name:"EdnaComponent",props:{isNormalView:{type:Boolean}},emits:["enlarge"],setup(o,{emit:t}){const e=G(!1),n=G(!1),i=G([]),s=G([]),g=G(""),d=G(!0),l=t,b=at(),P=x({get:()=>ne.value?"spatialForest":b.getActiveTab("EdnaComponent"),set:r=>{ne.value||b.setActiveTab("EdnaComponent",r)}}),V=[{label:"Diagram",icon:"material-symbols:bar-chart",value:"columnChart"},{label:"Tabell",icon:"material-symbols:table-outline",value:"spatialForest"}],y=Ne(),{geography:_,forestType:k,standAge:S,vegetationType:L}=ha(y),m=x(()=>_.value),B=x(()=>k.value),M=x(()=>S.value),X=x(()=>L.value),K=G([]),J=x(()=>K.value.length),le=x(()=>K.value.length>0&&K.value[0].sample_env_count||0),ce=G("100%"),ne=Be("(max-width: 767px)"),w=x(()=>({mark:!1,...ne.value?{images:!1}:{}}));async function v(r,f,I,R){if(!r||!f||!I||!R){K.value=[];return}if(!et(r,f,I,R)){K.value=[];return}const A=`edna-${r}-${f}-${I}-${R}.json`;try{const E=await fetch(`/edna/${A}`);if(!E.ok){if(E.status===404){K.value=[];return}throw new Error(`Failed to fetch ${A}`)}const O=await E.json();O.sort((Q,Y)=>Y.sample_plot_count-Q.sample_plot_count),K.value=O}catch(E){console.error("Error fetching data:",E),K.value=[]}}return ae(()=>[_.value,k.value,S.value,L.value],([r,f,I,R])=>{r&&f&&I&&R&&v(r,f,I,R)},{immediate:!0}),(r,f)=>{const I=pe,R=De,A=Ze,E=Qe,O=tt,Q=wo,Y=Ue;return u(),T("div",null,[p(Y,{class:"rounded-none sm:rounded-lg",variant:"ghost"},{default:j(()=>[h("div",Co,[p(I,{color:"neutral",variant:"soft",size:"xl",onClick:f[0]||(f[0]=z=>r.$emit("enlarge")),class:re([r.isNormalView?"hidden":"md:hidden","rounded-full absolute top-0 right-0"]),icon:r.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"]),h("div",No,[h("div",$o,[h("div",Lo,[p(R,{name:"solar:dna-linear",class:"mr-2"}),f[10]||(f[10]=h("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),h("div",To,[h("h1",Ao,Z(J.value)+" arter baserat på "+Z(le.value)+" skogar",1),le.value<10?(u(),q(A,{key:0,icon:le.value<10?"i-cuida-warning-outline":void 0,size:"md",color:le.value<10?"warning":"secondary",variant:"subtle",class:"h-fit flex"},{default:j(()=>[ee(Z(le.value<10?"Få prov":null),1)]),_:1},8,["icon","color"])):U("",!0)])]),h("div",Vo,[p(E,{modelValue:P.value,"onUpdate:modelValue":f[1]||(f[1]=z=>P.value=z),items:V,class:"w-full",color:"neutral",variant:"link","unmount-on-hide":!1},null,8,["modelValue"])])]),h("div",Eo,[p(I,{class:"hidden md:flex h-fit ring-muted/60",color:"neutral",variant:"outline",size:"sm",onClick:f[2]||(f[2]=z=>d.value=!d.value),label:d.value?"Dölj diagram":"Visa diagram"},null,8,["label"])])]),p(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[550px] min-h-full"},{default:j(()=>[P.value==="spatialForest"?(u(),T("div",Fo,[p(O,{onEnlarge:f[3]||(f[3]=z=>l("enlarge")),isNormalView:r.isNormalView,"column-visibility-overrides":w.value},null,8,["isNormalView","column-visibility-overrides"])])):P.value==="columnChart"?(u(),T("div",Bo,[d.value?(u(),q(Q,{key:0,class:"mb-6",chartData:K.value,chartWidth:ce.value,geography:m.value,forestType:B.value,standAge:M.value,vegetationType:X.value,matsvampFilter:e.value,giftsvampFilter:n.value,gruppFilter:i.value,statusFilter:s.value,"search-term":g.value},null,8,["chartData","chartWidth","geography","forestType","standAge","vegetationType","matsvampFilter","giftsvampFilter","gruppFilter","statusFilter","search-term"])):U("",!0),p(O,{onEnlarge:f[4]||(f[4]=z=>l("enlarge")),"onUpdate:matsvampFilter":f[5]||(f[5]=z=>e.value=z),"onUpdate:giftsvampFilter":f[6]||(f[6]=z=>n.value=z),"onUpdate:gruppFilter":f[7]||(f[7]=z=>i.value=z),"onUpdate:statusFilter":f[8]||(f[8]=z=>s.value=z),"onUpdate:searchTerm":f[9]||(f[9]=z=>g.value=z),isNormalView:r.isNormalView,"column-visibility-overrides":w.value,"search-term":g.value},null,8,["isNormalView","column-visibility-overrides","search-term"])])):U("",!0)]),_:1})]),_:1})])}}}),_t=Object.assign(_e(Po,[["__scopeId","data-v-d27777d3"]]),{__name:"EdnaComponent"}),Ro={class:"p-2 flex gap-2"},Mo={class:"grid grid-cols-2 sm:grid-cols-2 md:grid-cols-8 gap-4 p-2"},jo=["onClick"],zo={class:"w-full h-24 relative"},Uo=["src"],Do={key:1,class:"w-full h-full flex items-center justify-center bg-neutral-200 dark:bg-neutral-700"},Io={class:"absolute bottom-1 left-1 flex gap-1"},Go={class:"p-2 pt-1"},Ko={class:"text-sm font-medium text-neutral-500 dark:text-neutral-300 truncate"},Oo={class:"flex justify-between items-center px-5 py-2"},ct={__name:"SpeciesGrid",props:{isNormalView:Boolean,dataTypeFolder:{type:String,default:"edna"},dataType:{type:String,default:"data"},filterEdible:{type:Boolean,default:!1},filterPoison:{type:Boolean,default:!1},grupp:{type:String,default:"Svamp-grupp"}},setup(o){const t=G([]),e=G([]),n=[{value:"LC",label:"Livskraftig"},{value:"NT",label:"Nära hotad"},{value:"EN",label:"Starkt hotad"},{value:"VU",label:"Sårbar"},{value:"CR",label:"Akut hotad"},{value:"RE",label:"Nationellt utdöd"},{value:"DD",label:"Kunskapsbrist"},{value:"Ej bedömd",label:"Ej bedömd"},{value:"Signalart",label:"Signalart"}],i=o,s=Ne(),g=Je(),d=G([]),l=G(!0);async function b(){const{geography:w,forestType:v,standAge:r,vegetationType:f}=s,I=`${i.dataType}-${w}-${v}-${r}-${f}.json`;try{const R=await fetch(`/${i.dataTypeFolder}/${I}`);if(!R.ok)throw new Error(`Failed to fetch data from ${I}`);d.value=await R.json(),l.value=!1}catch(R){console.error("Error fetching species data:",R)}}ae(()=>[s.geography,s.forestType,s.standAge,s.vegetationType],()=>{l.value=!0,b()},{immediate:!0});const P=G({column:"",direction:"asc"}),V=x(()=>{let w=d.value.slice();if(P.value?.column){const{column:v,direction:r}=P.value;w.sort((f,I)=>{const R=f[v],A=I[v];if(R==null&&A!=null)return 1;if(R!=null&&A==null)return-1;if(R==null&&A==null)return 0;const E=String(R).localeCompare(String(A),"sv",{numeric:!0,sensitivity:"base"});return r==="asc"?E:-E})}else w.sort((v,r)=>{const f=v.RankRed??99999,I=r.RankRed??99999;if(f!==I)return f-I;const R=v.Commonname?.toString().toLowerCase()||"",A=r.Commonname?.toString().toLowerCase()||"";return R.localeCompare(A,"sv",{numeric:!0,sensitivity:"base"})});return w}),y=G(""),_=x(()=>{let w=V.value;if(y.value.trim()!==""){const v=y.value.trim().toLowerCase();w=w.filter(r=>r.Commonname&&r.Commonname.toLowerCase().includes(v)||r.Scientificname&&r.Scientificname.toLowerCase().includes(v))}return i.filterEdible?w=w.filter(v=>{const r=v["Nyasvamp-boken"];return r&&String(r).toLowerCase()==="x"}):i.filterPoison&&(w=w.filter(v=>{const r=v["Nyasvamp-boken"];return!(r&&String(r).toLowerCase()==="x")})),w}),k=x(()=>n.map(w=>{let v=0;return w.value==="Ej bedömd"?v=_.value.filter(r=>{const f=String(r.RL2020kat).trim();return["0","NA","NE","Saknas","null"].includes(f)}).length:w.value==="Signalart"?v=_.value.filter(r=>r.SIGNAL_art==="S").length:v=_.value.filter(r=>String(r.RL2020kat).trim()===w.value).length,{...w,label:`${w.label} (${v})`}})),S=x(()=>{const w={};return _.value.forEach(v=>{const r=v[i.grupp];if(r!=null){const f=String(r).trim();f&&f.toLowerCase()!=="undefined"&&(w[f]=(w[f]||0)+1)}}),Object.keys(w).map(v=>({value:v,label:`${le(v)} (${w[v]})`}))}),L=x(()=>{let w=V.value;if(y.value.trim()!==""){const v=y.value.trim().toLowerCase();w=w.filter(r=>r.Commonname&&r.Commonname.toLowerCase().includes(v)||r.Scientificname&&r.Scientificname.toLowerCase().includes(v)),console.log("After search filtering, count:",w.length)}return t.value.length>0&&(console.log("Status filter values:",t.value),w=w.filter(v=>{const r=String(v.RL2020kat).trim(),f=t.value.some(I=>{const R=I&&I.value?I.value:I;return R==="Ej bedömd"?["0","NA","NE","Saknas","null"].includes(r):R==="Signalart"?v.SIGNAL_art==="S":r===R});return console.log(`Row "${v.Commonname}" with RL2020kat "${r}" matches:`,f),f}),console.log("After status filtering, count:",w.length)),e.value.length>0&&(w=w.filter(v=>{const r=v[i.grupp],f=r!=null?String(r).trim():"";return e.value.includes(f)})),i.filterEdible?(w=w.filter(v=>{const r=v["Nyasvamp-boken"];return r&&String(r).toLowerCase()==="x"}),console.log("After edible filtering, count:",w.length)):i.filterPoison&&(w=w.filter(v=>{const r=v["Nyasvamp-boken"];return!(r&&String(r).toLowerCase()==="x")}),console.log("After poison filtering, count:",w.length)),console.log("Final filteredData count:",w.length),w}),m=x(()=>i.isNormalView?24:32),B=G(1),M=x(()=>{const w=(B.value-1)*m.value;return L.value.slice(w,w+m.value)}),X=x(()=>L.value.length>0?(B.value-1)*m.value+1:0),K=x(()=>Math.min(B.value*m.value,L.value.length)),J=x(()=>L.value.length);x(()=>Math.ceil(J.value/m.value));function le(w){return w?w.charAt(0).toUpperCase()+w.slice(1).toLowerCase():""}function ce(w){return{LC:"Livskraftig",NT:"Nära hotad",EN:"Starkt hotad",VU:"Sårbar",CR:"Akut hotad",RE:"Nationellt utdöd",DD:"Kunskapsbrist"}[w]||"Ej bedömd"}function ne(w){g.selectSpecies(w,i.dataTypeFolder)}return(w,v)=>{const r=Ft,f=Ct,I=it,R=Ze,A=qt;return u(),T(fe,null,[h("div",Ro,[p(r,{icon:"i-heroicons-magnifying-glass",modelValue:y.value,"onUpdate:modelValue":v[0]||(v[0]=E=>y.value=E),placeholder:"Sök på namn",variant:"soft"},null,8,["modelValue"]),p(f,{modelValue:t.value,"onUpdate:modelValue":v[1]||(v[1]=E=>t.value=E),items:k.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på status",multiple:"",variant:"soft"},null,8,["modelValue","items"]),p(f,{modelValue:e.value,"onUpdate:modelValue":v[2]||(v[2]=E=>e.value=E),items:S.value,"item-value":"value","item-label":"label",placeholder:"Filtrera på grupp",multiple:"",variant:"soft"},null,8,["modelValue","items"])]),h("div",Mo,[(u(!0),T(fe,null,Se(M.value,(E,O)=>(u(),T("div",{key:E.Commonname+E.Scientificname+O,class:"bg-white dark:bg-neutral-800 rounded border overflow-hidden border-muted/50 dark:border-neutral-700/40 hover:shadow-md transition-shadow cursor-pointer h-[126px]",onClick:Q=>ne(E)},[h("div",zo,[E.images&&E.images.length?(u(),T("img",{key:0,src:E.images[0],class:"w-full h-full object-cover",alt:"Species image",height:"300",width:"450",loading:"lazy",decoding:"async"},null,8,Uo)):(u(),T("div",Do,[p(I,{name:"material-symbols:photo",class:"w-8 h-8 text-neutral-500"})])),h("div",Io,[E.SIGNAL_art!=="S"&&!["LC","0","NA","NE","Saknas",null].includes(E.RL2020kat)?(u(),q(R,{key:0,class:"bg-error-50 dark:bg-error-950/80",color:"error",variant:"subtle",size:"sm",label:E.RL2020kat!=="Saknas"?ce(E.RL2020kat):"Ej bedömd"},null,8,["label"])):U("",!0),E.SIGNAL_art==="S"?(u(),q(R,{key:1,color:"signal",variant:"subtle",label:"Signalart",size:"sm"})):U("",!0)])]),h("div",Go,[h("div",Ko,Z(le(E.Commonname)),1)])],8,jo))),128))]),h("div",Oo,[h("div",null,[h("p",null," Visar "+Z(X.value)+" till "+Z(K.value)+" av "+Z(J.value)+" arter ",1)]),h("div",null,[p(A,{"items-per-page":m.value,page:B.value,"onUpdate:page":v[3]||(v[3]=E=>B.value=E),total:J.value,"active-variant":"ghost",variant:"ghost"},null,8,["items-per-page","page","total"])])])],64)}}},qo={class:"md:flex justify-between items-start"},Wo={class:"w-full flex justify-between items-start"},Ho={class:"text-md text-neutral-500 md:mb-2"},Xo={class:"md:flex gap-1 items-center hidden"},Yo={key:0},Zo={key:1},Jo={__name:"FullScreenEdible",props:{isNormalView:Boolean},emits:["enlarge"],setup(o,{emit:t}){const e=Ne(),n=G(0);async function i(_,k,S,L=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(M=>!M)){S.value=0;return}const B=`${k}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const M=await fetch(`/${_}/${B}`);if(!M.ok)throw new Error("Network response was not ok");const X=await M.json();S.value=L?X.filter(K=>K[L]==="x").length:X.length}catch(M){console.error("Failed to fetch edible count",M),S.value=0}}ae(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>i("edible","edibledata",n,"Nyasvamp-boken"),{immediate:!0});const s=t,g=[{label:"Galleri",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"Tabell",icon:"material-symbols:table-outline",value:"table"}],d=at(),l=o,b=Be("(max-width: 767px)"),P=x(()=>b.value||l.isNormalView),V=x({get:()=>P.value?"table":d.getActiveTab("FullscreenEdible"),set:_=>{P.value||d.setActiveTab("FullscreenEdible",_)}}),y=x(()=>V.value==="table");return(_,k)=>{const S=De,L=pe,m=Qe,B=tt,M=ct,X=Ue;return u(),T("div",null,[p(X,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:j(()=>[h("div",qo,[h("div",Wo,[h("div",null,[h("div",{onClick:k[0]||(k[0]=K=>_.$emit("enlarge")),class:"group cursor-pointer dark:text-neutral-300 text-warning-500 text-4xl md:text-3xl font-medium flex items-center"},[p(S,{name:"icon-park-solid:knife-fork",class:"mr-2"}),k[4]||(k[4]=h("h1",null," Matsvampar ",-1)),p(S,{name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})]),h("h2",Ho,Z(n.value)+" arter",1)]),p(L,{color:"neutral",variant:"soft",size:"xl",onClick:k[1]||(k[1]=K=>_.$emit("enlarge")),class:re([o.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:o.isNormalView?"":"i-heroicons-x-mark-solid"},null,8,["class","icon"])]),h("div",Xo,[P.value?U("",!0):(u(),q(m,{key:0,class:"flex mt-2",modelValue:V.value,"onUpdate:modelValue":k[2]||(k[2]=K=>V.value=K),items:g,variant:"pill",color:"neutral",size:"md",ui:{list:"bg-transparent",indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),p(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:j(()=>[y.value?(u(),T("div",Yo,[p(B,{onEnlarge:k[3]||(k[3]=K=>s("enlarge")),"is-normal-view":o.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank matsvamp",obsLabel:"Sannolikhet",filterEdible:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(u(),T("div",Zo,[p(M,{"is-normal-view":o.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterEdible:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})])}}},xt=_e(Jo,[["__scopeId","data-v-372515fe"]]),Qo={class:"md:flex justify-between items-start"},er={class:"md:flex gap-4"},tr={class:"w-full flex justify-between items-start"},ar={class:"text-md text-neutral-500 md:mb-2"},sr={class:"md:flex gap-4 items-center hidden"},or={key:0},rr={key:1},lr={__name:"FullScreenPoison",props:{isNormalView:Boolean},emits:["enlarge"],setup(o,{emit:t}){const e=Ne(),n=G(0);async function i(k,S,L,m=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(X=>!X)){L.value=0;return}const M=`${S}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const X=await fetch(`/${k}/${M}`);if(!X.ok)throw new Error("Network response was not ok");const K=await X.json();L.value=m?K.filter(J=>J[m]==="x").length:K.length}catch{L.value=0}}ae(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>i("edible","edibledata",n,"Giftsvamp"),{immediate:!0});const s=t,g=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],d=at(),l=o,b=Be("(max-width: 767px)"),P=x(()=>b.value||l.isNormalView),V=()=>{l.isNormalView&&s("enlarge")},y=x({get:()=>P.value?"table":d.getActiveTab("FullscreenEdible"),set:k=>{P.value||d.setActiveTab("FullscreenEdible",k)}}),_=x(()=>y.value==="table");return(k,S)=>{const L=De,m=pe,B=Qe,M=tt,X=ct,K=Ue;return u(),q(K,{variant:"ghost",class:"rounded-none sm:rounded-none border-muted/50"},{default:j(()=>[h("div",Qo,[h("div",er,[h("div",tr,[h("div",null,[h("div",{onClick:V,class:re(["flex items-center text-poison-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",o.isNormalView?"group cursor-pointer":"cursor-default"])},[p(L,{name:"i-hugeicons-danger",class:"mr-2"}),S[3]||(S[3]=h("h1",null," Giftsvampar ",-1)),o.isNormalView?(u(),q(L,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):U("",!0)],2),h("h2",ar,Z(n.value)+" arter",1)]),p(m,{color:"neutral",variant:"soft",size:"xl",onClick:S[0]||(S[0]=J=>k.$emit("enlarge")),class:re([o.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:o.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),h("div",sr,[P.value?U("",!0):(u(),q(B,{key:0,class:"flex mt-2",modelValue:y.value,"onUpdate:modelValue":S[1]||(S[1]=J=>y.value=J),items:g,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),p(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:j(()=>[_.value?(u(),T("div",or,[p(M,{onEnlarge:S[2]||(S[2]=J=>s("enlarge")),"is-normal-view":o.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"Rank giftsvamp",obsLabel:"Sannolikhet",filterPoison:!0,"column-visibility-overrides":{mark:!1,"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(u(),T("div",rr,[p(X,{"is-normal-view":o.isNormalView,dataType:"edibledata",dataTypeFolder:"edible",filterPoison:!0},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},St=_e(lr,[["__scopeId","data-v-e06edb37"]]),nr={class:"md:flex justify-between items-start"},ir={class:"md:flex gap-4"},ur={class:"w-full flex justify-between items-start"},cr={class:"text-md text-neutral-500 md:mb-2"},dr={class:"md:flex gap-4 items-center hidden"},gr={key:0},vr={key:1},pr={__name:"RedlistedComponent",props:{isNormalView:Boolean},emits:["enlarge"],setup(o,{emit:t}){const e=Ne(),n=G(0);async function i(k,S,L,m=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(X=>!X)){L.value=0;return}const M=`${S}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const X=await fetch(`/${k}/${M}`);if(!X.ok)throw new Error("Network response was not ok");const K=await X.json();L.value=m?K.filter(J=>J[m]==="x").length:K.length}catch(X){console.error("Failed to fetch count for",S,X),L.value=0}}ae(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>i("redlisted","redlisted",n),{immediate:!0});const s=t,g=[{label:"",icon:"i-heroicons-squares-2x2",value:"grid"},{label:"",icon:"material-symbols:table-outline",value:"table"}],d=o,l=Be("(max-width: 767px)"),b=x(()=>l.value||d.isNormalView),P=at(),V=x({get:()=>b.value?"table":P.getActiveTab("FullscreenEdible"),set:k=>{b.value||P.setActiveTab("FullscreenEdible",k)}}),y=()=>{d.isNormalView&&s("enlarge")},_=x(()=>V.value==="table");return(k,S)=>{const L=De,m=pe,B=Qe,M=tt,X=ct,K=Ue;return u(),q(K,{variant:"ghost",class:"rounded-none sm:rounded-lg"},{default:j(()=>[h("div",nr,[h("div",ir,[h("div",ur,[h("div",null,[h("div",{onClick:y,class:re(["flex items-center text-signal-500 dark:text-neutral-300 text-4xl font-medium md:text-3xl",o.isNormalView?"group cursor-pointer":"cursor-default"])},[p(L,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),S[3]||(S[3]=h("h1",{class:"truncate"}," Naturvårdsarter ",-1)),o.isNormalView?(u(),q(L,{key:0,name:"i-lucide-arrow-right",class:"size-6 font-medium text-neutral transition-all opacity-0 group-hover:translate-x-1 group-hover:opacity-100"})):U("",!0)],2),h("h2",cr,Z(n.value)+" arter",1)]),p(m,{color:"neutral",variant:"soft",size:"xl",onClick:S[0]||(S[0]=J=>k.$emit("enlarge")),class:re([o.isNormalView?"hidden":"md:hidden","rounded-full"]),icon:o.isNormalView?"":"i-heroicons-x-mark-solid",trailing:""},null,8,["class","icon"])])]),h("div",dr,[b.value?U("",!0):(u(),q(B,{key:0,class:"flex mt-2",modelValue:V.value,"onUpdate:modelValue":S[1]||(S[1]=J=>V.value=J),items:g,variant:"pill",color:"neutral",size:"md",ui:{indicator:"bg-white dark:bg-black border border-neutral-300/80 dark:border-neutral-300/30",trigger:"data-[state=active]:text-neutral-700 dark:data-[state=active]:text-neutral-100/90 focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-neutral"}},null,8,["modelValue"]))])]),p(Fe,{name:"fade",mode:"out-in",class:"md:min-h-[260px]"},{default:j(()=>[_.value?(u(),T("div",gr,[p(M,{onEnlarge:S[2]||(S[2]=J=>s("enlarge")),"is-normal-view":o.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted",grupp:"Svamp-grupp",mat:"Nyasvamp-boken",obs:"RankRed",obsLabel:"Sannolikhet","column-visibility-overrides":{"Nyasvamp-boken":!1}},null,8,["is-normal-view"])])):(u(),T("div",vr,[p(X,{"is-normal-view":o.isNormalView,dataType:"redlisted",dataTypeFolder:"redlisted"},null,8,["is-normal-view"])]))]),_:1})]),_:1})}}},wt=_e(pr,[["__scopeId","data-v-0d234cbe"]]),mr={class:"grid grid-cols-12"},fr={class:"col-span-12"},hr={key:0,class:"flex p-3 border-b border-muted/50 gap-3"},br={key:1,class:"col-span-12 sm:pt-2"},kr={key:0,class:"col-span-12 sm:pt-2"},yr={key:0,class:"space-y-4"},_r={class:"col-span-12 grid-cols-12 rounded-2xl gap-y-3 hidden md:grid gap-4"},xr={class:"col-span-4 flex flex-col h-full"},Sr={class:"col-span-4 flex flex-col"},wr={class:"col-span-4 flex flex-col"},Cr={class:"flex justify-between items-center text-warning-500"},Nr={class:"text-2xl font-semibold flex items-center"},$r={key:1,class:"text-neutral-500"},Lr={class:"flex justify-between items-center text-poison-500"},Tr={class:"text-2xl font-semibold flex items-center"},Ar={key:1,class:"text-neutral-500"},Vr={class:"flex justify-between items-center text-signal-500"},Er={class:"text-2xl font-semibold flex items-center"},Fr={key:1,class:"text-neutral-500"},Br={class:"flex justify-between items-center text-secondary-500"},Pr={class:"truncate"},Rr={class:"text-2xl font-semibold flex items-center"},Mr={key:1,class:"text-neutral-500"},jr={__name:"NormalView",props:{activeView:{type:String,default:null}},emits:["enlarge","closeView"],setup(o,{emit:t}){const e=Ne(),n=At(),i=G(null),s=G(null),g=G(null),d=G(null),l=o,b=t,P={FullScreenEdible:"knowledge",FullScreenPoison:"knowledge",RedlistedComponent:"knowledge",FullScreenEdna:"dna"},V={FullScreenEdible:xt,FullScreenPoison:St,RedlistedComponent:wt,FullScreenEdna:_t},y=R=>{P[R]&&(_.value=P[R]),b("enlarge",R)},_=G("knowledge"),k=G(0),S=()=>{k.value=window.innerWidth};Ke(()=>{S(),window.addEventListener("resize",S)}),nt(()=>{window.removeEventListener("resize",S)}),x(()=>(k.value>=768,"md"));const L=x(()=>k.value<768),m=x(()=>e.geography),B=x(()=>e.forestType),M=x(()=>e.standAge),X=x(()=>e.vegetationType),K=x(()=>V[l.activeView??""]??null),J=x(()=>l.activeView?l.activeView==="FullScreenEdible"||l.activeView==="FullScreenPoison"?{isNormalView:!1,geography:m.value,forestType:B.value,standAge:M.value,vegetationType:X.value}:{isNormalView:!1}:{isNormalView:!1}),le=x(()=>l.activeView?`${l.activeView}-${n.fullPath}`:void 0),ce={FullScreenEdible:"Matsvampar",FullScreenPoison:"Giftsvampar",RedlistedComponent:"Naturvårdsarter",FullScreenEdna:"Alla mykorrhizasvampar"},ne=x(()=>l.activeView==="FullScreenEdna"),w=x(()=>ce[l.activeView??""]??"");function v(){_.value="knowledge",b("closeView")}x(()=>K.value?[{label:"Enligt samlad kunskap",onClick:v,class:"cursor-pointer p-1 px-2 rounded hover:bg-muted"},{label:w.value,class:"cursor-default text-neutral"}]:[]);const r=()=>{ne.value?(_.value="knowledge",b("closeView")):y("FullScreenEdna")};ae(()=>l.activeView,R=>{R&&P[R]&&(_.value=P[R])}),ae(_,R=>{l.activeView&&P[l.activeView]!==R&&b("closeView")});async function f(R,A,E,O=null){if([e.geography,e.forestType,e.standAge,e.vegetationType].some(z=>!z)){E.value=0;return}const Y=`${A}-${e.geography}-${e.forestType}-${e.standAge}-${e.vegetationType}.json`;try{const z=await fetch(`/${R}/${Y}`);if(!z.ok)throw new Error("Network response was not ok");const ve=await z.json();O?E.value=ve.filter(se=>se[O]==="x").length:E.value=ve.length}catch(z){console.error("Failed to fetch count for",A,z),E.value=0}}async function I(){const R=e.geography,A=e.forestType,E=e.standAge,O=e.vegetationType;if(!R||!A||!E||!O){d.value=0;return}if(!et(R,A,E,O)){d.value=0;return}d.value=null;const Q=`edna-${R}-${A}-${E}-${O}.json`;try{const Y=await fetch(`/edna/${Q}`);if(!Y.ok){d.value=0;return}const z=await Y.json();d.value=Array.isArray(z)?z.length:0}catch(Y){console.error("Failed to fetch DNA count",Y),d.value=0}}return ae(()=>[e.geography,e.forestType,e.standAge,e.vegetationType],()=>{f("redlisted","redlisted",i),f("edible","edibledata",s,"Nyasvamp-boken"),f("edible","edibledata",g,"Giftsvamp"),I()},{immediate:!0}),(R,A)=>{const E=ya,O=pe,Q=De,Y=Et,z=Ue,ve=Tt,se=Vt;return u(),T("div",mr,[h("div",fr,[L.value?U("",!0):(u(),T("div",hr,[p(O,{onClick:A[0]||(A[0]=oe=>_.value="knowledge"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:_.value==="knowledge"?"soft":"outline",color:"neutral"},{default:j(()=>[p(E,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"})]),_:1},8,["variant"]),p(O,{onClick:A[1]||(A[1]=oe=>_.value="dna"),class:"hover:bg-neutral-100 text-start ring-muted/50 cursor-pointer p-3 px-4 rounded-xl",variant:_.value==="dna"?"soft":"outline",color:"neutral"},{default:j(()=>[p(E,{title:"Enligt DNA",description:"Från markinventeringens jordprover"})]),_:1},8,["variant"])])),_.value==="dna"?(u(),T("div",br,[h("div",null,[p(_t,{isNormalView:!ne.value,onEnlarge:r},null,8,["isNormalView"])])])):U("",!0)]),_.value==="knowledge"?(u(),T("div",kr,[K.value?(u(),T("div",yr,[(u(),q(ba(K.value),Ce(J.value,{key:le.value,onEnlarge:v,class:"w-full"}),null,16))])):(u(),T(fe,{key:1},[h("div",_r,[h("div",xr,[(u(),q(xt,{geography:m.value,forestType:B.value,standAge:M.value,vegetationType:X.value,isNormalView:!0,onEnlarge:A[2]||(A[2]=oe=>y("FullScreenEdible")),key:C(n).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),h("div",Sr,[(u(),q(St,{geography:m.value,forestType:B.value,standAge:M.value,vegetationType:X.value,isNormalView:!0,onEnlarge:A[3]||(A[3]=oe=>y("FullScreenPoison")),key:C(n).fullPath},null,8,["geography","forestType","standAge","vegetationType"]))]),h("div",wr,[p(wt,{isNormalView:!0,onEnlarge:A[4]||(A[4]=oe=>y("RedlistedComponent"))})])]),p(se,{class:"md:hidden space-y-3 pt-3 bg-muted/50"},{default:j(()=>[p(E,{title:"Enligt samlad kunskap",description:"Framförallt vart fruktkroppar förekommer"}),p(z,{onClick:A[5]||(A[5]=oe=>y("FullScreenEdible")),class:"ring-muted/50"},{default:j(()=>[h("div",Cr,[h("div",null,[h("h1",Nr,[p(Q,{name:"icon-park-solid:knife-fork",class:"mr-2"}),A[9]||(A[9]=ee("Matsvampar ",-1))]),s.value===null?(u(),q(Y,{key:0,class:"h-4 w-12 mt-2"})):(u(),T("h1",$r,Z(s.value)+" arter",1))]),p(O,{icon:"i-heroicons-chevron-right",class:"rounded-full ring-muted/50",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(z,{onClick:A[6]||(A[6]=oe=>y("FullScreenPoison")),class:"ring-muted/50"},{default:j(()=>[h("div",Lr,[h("div",null,[h("h1",Tr,[p(Q,{name:"i-hugeicons-danger",class:"mr-2"}),A[10]||(A[10]=ee("Giftsvampar ",-1))]),s.value===null?(u(),q(Y,{key:0,class:"h-4 w-12 mt-2"})):(u(),T("h1",Ar,Z(g.value)+" arter",1))]),p(O,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(z,{onClick:A[7]||(A[7]=oe=>y("RedlistedComponent")),class:"ring-muted/50"},{default:j(()=>[h("div",Vr,[h("div",null,[h("h1",Er,[p(Q,{name:"i-material-symbols-award-star-outline",class:"mr-2"}),A[11]||(A[11]=ee(" Naturvårdsarter ",-1))]),i.value===null?(u(),q(Y,{key:0,class:"h-4 w-12 mt-2"})):(u(),T("h1",Fr,Z(i.value)+" arter",1))]),p(O,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1}),p(ve),p(E,{title:"Enligt DNA",description:"Från markinventeringens jordprover"}),p(z,{onClick:A[8]||(A[8]=oe=>y("FullScreenEdna")),class:"ring-muted/50"},{default:j(()=>[h("div",Br,[h("div",Pr,[h("div",Rr,[p(Q,{name:"solar:dna-linear",class:"mr-2"}),A[12]||(A[12]=h("h1",{class:"truncate"},"Alla mykorrhizasvampar",-1))]),d.value===null?(u(),q(Y,{key:0,class:"h-4 w-12 mt-2"})):(u(),T("h1",Mr,Z(d.value)+" arter",1))]),p(O,{icon:"i-heroicons-chevron-right",class:"rounded-full",variant:"ghost",color:"neutral",size:"xl"})])]),_:1})]),_:1})],64))])):U("",!0)])}}},zr=_e(jr,[["__scopeId","data-v-ef13c22a"]]),Ur={class:"bg-muted"},Dr={class:"flex flex-col min-h-screen"},Ir={__name:"DashboardC",setup(o){Be("(max-width: 767px)");const t=At(),e=G(!1),n=G(!0),i=Je(),s=Ne();ae(()=>i.selectedSpecies,_=>{_&&(e.value=!0)}),ae(e,_=>{_||i.clearSelection()});const g=G(null),d=x(()=>s.geography&&s.forestType&&s.standAge&&s.vegetationType),l=_=>{g.value=_},b=()=>{g.value=null},P=_=>{_.key==="Escape"&&i.selectedSpecies&&i.clearSelection()};function V(_){return Array.isArray(_)?_[0]??null:typeof _=="string"&&_.length>0?_:null}function y(_){const k={geography:V(_.geography),forestType:V(_.forestType),standAge:V(_.standAge),vegetationType:V(_.vegetationType)};k.geography&&k.forestType&&k.standAge&&k.vegetationType&&s.setParams(k)}return Ke(()=>{window.addEventListener("keydown",P),y(t.params)}),Lt(()=>{window.removeEventListener("keydown",P)}),ae(()=>t.params,_=>{y(_)},{immediate:!0}),ae(()=>[s.geography,s.forestType,s.standAge,s.vegetationType],()=>{s.geography&&s.forestType&&s.standAge&&s.vegetationType&&`${encodeURIComponent(s.geography)}${encodeURIComponent(s.forestType)}${encodeURIComponent(s.standAge)}${encodeURIComponent(s.vegetationType)}`},{deep:!0}),ae(g,()=>{window.scrollTo({top:0,behavior:"smooth"})}),(_,k)=>{const S=Hs,L=Qs,m=wa,B=Vt;return u(),T("div",Ur,[p(L,{modelValue:e.value,"onUpdate:modelValue":k[0]||(k[0]=M=>e.value=M),pinned:n.value,"onUpdate:pinned":k[1]||(k[1]=M=>n.value=M)},{default:j(()=>[p(S,{species:C(i).selectedSpecies,source:C(i).sourceComponent},null,8,["species","source"])]),_:1},8,["modelValue","pinned"]),p(B,null,{default:j(()=>[p(Fe,{name:"fade"},{default:j(()=>[d.value?(u(),q(m,{key:0})):U("",!0)]),_:1})]),_:1}),h("div",Dr,[p(B,{class:"w-full px-0"},{default:j(()=>[p(Fe,{name:"fade",mode:"out-in"},{default:j(()=>[p(zr,{class:"block sm:border border-muted/50 bg-white sm:rounded sm:shadow","active-view":g.value,onEnlarge:l,onCloseView:b},null,8,["active-view"])]),_:1})]),_:1})])])}}},Gr=_e(Ir,[["__scopeId","data-v-a485cf62"]]),Kr={};function Or(o,t){const e=Gr;return u(),q(e)}const ll=_e(Kr,[["render",Or]]);export{ll as default};
